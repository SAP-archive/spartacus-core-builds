import { __decorate } from "tslib";
import { Injectable } from '@angular/core';
import { HttpClient, HttpParams } from '@angular/common/http';
import { OccEndpointsService } from '../../services/occ-endpoints.service';
import { ConverterService } from '../../../util/converter.service';
import { COST_CENTER_NORMALIZER, COST_CENTERS_NORMALIZER, } from '../../../organization/connectors/cost-center/converters';
import { BUDGETS_NORMALIZER } from '../../../organization/connectors/budget/converters';
var OccCostCenterAdapter = /** @class */ (function () {
    function OccCostCenterAdapter(http, occEndpoints, converter) {
        this.http = http;
        this.occEndpoints = occEndpoints;
        this.converter = converter;
    }
    OccCostCenterAdapter.prototype.load = function (userId, costCenterCode) {
        return this.http
            .get(this.getCostCenterEndpoint(userId, costCenterCode))
            .pipe(this.converter.pipeable(COST_CENTER_NORMALIZER));
    };
    OccCostCenterAdapter.prototype.loadList = function (userId, params) {
        return this.http
            .get(this.getAllCostCentersEndpoint(userId, params))
            .pipe(this.converter.pipeable(COST_CENTERS_NORMALIZER));
    };
    OccCostCenterAdapter.prototype.loadActiveList = function (userId) {
        var params = new HttpParams().set('fields', 'DEFAULT,unit(BASIC,addresses(DEFAULT))');
        return this.http
            .get(this.getCostCentersEndpoint(userId), { params: params })
            .pipe(this.converter.pipeable(COST_CENTERS_NORMALIZER));
    };
    OccCostCenterAdapter.prototype.create = function (userId, costCenter) {
        return this.http
            .post(this.getCostCentersEndpoint(userId), costCenter)
            .pipe(this.converter.pipeable(COST_CENTER_NORMALIZER));
    };
    OccCostCenterAdapter.prototype.update = function (userId, costCenterCode, costCenter) {
        return this.http
            .patch(this.getCostCenterEndpoint(userId, costCenterCode), costCenter)
            .pipe(this.converter.pipeable(COST_CENTER_NORMALIZER));
    };
    OccCostCenterAdapter.prototype.loadBudgets = function (userId, costCenterCode, params) {
        return this.http
            .get(this.getBudgetsEndpoint(userId, costCenterCode, params))
            .pipe(this.converter.pipeable(BUDGETS_NORMALIZER));
    };
    OccCostCenterAdapter.prototype.assignBudget = function (userId, costCenterCode, budgetCode) {
        return this.http.post(this.getBudgetsEndpoint(userId, costCenterCode, { budgetCode: budgetCode }), null);
    };
    OccCostCenterAdapter.prototype.unassignBudget = function (userId, costCenterCode, budgetCode) {
        return this.http.delete(this.getBudgetEndpoint(userId, costCenterCode, budgetCode));
    };
    OccCostCenterAdapter.prototype.getCostCenterEndpoint = function (userId, costCenterCode) {
        return this.occEndpoints.getUrl('costCenter', { userId: userId, costCenterCode: costCenterCode });
    };
    OccCostCenterAdapter.prototype.getCostCentersEndpoint = function (userId, params) {
        return this.occEndpoints.getUrl('costCenters', { userId: userId }, params);
    };
    OccCostCenterAdapter.prototype.getAllCostCentersEndpoint = function (userId, params) {
        return this.occEndpoints.getUrl('costCentersAll', { userId: userId }, params);
    };
    OccCostCenterAdapter.prototype.getBudgetsEndpoint = function (userId, costCenterCode, params) {
        return this.occEndpoints.getUrl('costCenterBudgets', { userId: userId, costCenterCode: costCenterCode }, params);
    };
    OccCostCenterAdapter.prototype.getBudgetEndpoint = function (userId, costCenterCode, budgetCode) {
        return this.occEndpoints.getUrl('costCenterBudget', {
            userId: userId,
            costCenterCode: costCenterCode,
            budgetCode: budgetCode,
        });
    };
    OccCostCenterAdapter.ctorParameters = function () { return [
        { type: HttpClient },
        { type: OccEndpointsService },
        { type: ConverterService }
    ]; };
    OccCostCenterAdapter = __decorate([
        Injectable()
    ], OccCostCenterAdapter);
    return OccCostCenterAdapter;
}());
export { OccCostCenterAdapter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2NjLWNvc3QtY2VudGVyLmFkYXB0ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvb2NjL2FkYXB0ZXJzL29yZ2FuaXphdGlvbi9vY2MtY29zdC1jZW50ZXIuYWRhcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRzlELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ25FLE9BQU8sRUFDTCxzQkFBc0IsRUFDdEIsdUJBQXVCLEdBQ3hCLE1BQU0seURBQXlELENBQUM7QUFDakUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0RBQW9ELENBQUM7QUFReEY7SUFFRSw4QkFDWSxJQUFnQixFQUNoQixZQUFpQyxFQUNqQyxTQUEyQjtRQUYzQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQUNqQyxjQUFTLEdBQVQsU0FBUyxDQUFrQjtJQUNwQyxDQUFDO0lBRUosbUNBQUksR0FBSixVQUFLLE1BQWMsRUFBRSxjQUFzQjtRQUN6QyxPQUFPLElBQUksQ0FBQyxJQUFJO2FBQ2IsR0FBRyxDQUFpQixJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDO2FBQ3ZFLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUVELHVDQUFRLEdBQVIsVUFDRSxNQUFjLEVBQ2QsTUFBd0I7UUFFeEIsT0FBTyxJQUFJLENBQUMsSUFBSTthQUNiLEdBQUcsQ0FBc0IsSUFBSSxDQUFD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TUFBTSxRQUFBLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRVMsaURBQWtCLEdBQTVCLFVBQ0UsTUFBYyxFQUNkLGNBQXNCLEVBQ3RCLE1BQWlEO1FBRWpELE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQzdCLG1CQUFtQixFQUNuQixFQUFFLE1BQU0sUUFBQSxFQUFFLGNBQWMsZ0JBQUEsRUFBRSxFQUMxQixNQUFNLENBQ1AsQ0FBQztJQUNKLENBQUM7SUFFUyxnREFBaUIsR0FBM0IsVUFDRSxNQUFjLEVBQ2QsY0FBc0IsRUFDdEIsVUFBa0I7UUFFbEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRTtZQUNsRCxNQUFNLFFBQUE7WUFDTixjQUFjLGdCQUFBO1lBQ2QsVUFBVSxZQUFBO1NBQ1gsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7Z0JBN0hpQixVQUFVO2dCQUNGLG1CQUFtQjtnQkFDdEIsZ0JBQWdCOztJQUw1QixvQkFBb0I7UUFEaEMsVUFBVSxFQUFFO09BQ0Esb0JBQW9CLENBaUloQztJQUFELDJCQUFDO0NBQUEsQUFqSUQsSUFpSUM7U0FqSVksb0JBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IENvc3RDZW50ZXJBZGFwdGVyIH0gZnJvbSAnLi4vLi4vLi4vb3JnYW5pemF0aW9uL2Nvbm5lY3RvcnMvY29zdC1jZW50ZXIvY29zdC1jZW50ZXIuYWRhcHRlcic7XG5pbXBvcnQgeyBVc2VyQ29zdENlbnRlckFkYXB0ZXIgfSBmcm9tICcuLi8uLi8uLi91c2VyL2Nvbm5lY3RvcnMvY29zdC1jZW50ZXIvdXNlci1jb3N0LWNlbnRlci5hZGFwdGVyJztcbmltcG9ydCB7IE9jY0VuZHBvaW50c1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9vY2MtZW5kcG9pbnRzLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29udmVydGVyU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3V0aWwvY29udmVydGVyLnNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgQ09TVF9DRU5URVJfTk9STUFMSVpFUixcbiAgQ09TVF9DRU5URVJTX05PUk1BTElaRVIsXG59IGZyb20gJy4uLy4uLy4uL29yZ2FuaXphdGlvbi9jb25uZWN0b3JzL2Nvc3QtY2VudGVyL2NvbnZlcnRlcnMnO1xuaW1wb3J0IHsgQlVER0VUU19OT1JNQUxJWkVSIH0gZnJvbSAnLi4vLi4vLi4vb3JnYW5pemF0aW9uL2Nvbm5lY3RvcnMvYnVkZ2V0L2NvbnZlcnRlcnMnO1xuaW1wb3J0IHsgQjJCU2VhcmNoQ29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vb3JnYW5pemF0aW9uL21vZGVsL3NlYXJjaC1jb25maWcnO1xuaW1wb3J0IHsgT2NjIH0gZnJvbSAnLi4vLi4vb2NjLW1vZGVscy9vY2MubW9kZWxzJztcbmltcG9ydCB7IENvc3RDZW50ZXIgfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9vcmctdW5pdC5tb2RlbCc7XG5pbXBvcnQgeyBFbnRpdGllc01vZGVsIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWwvbWlzYy5tb2RlbCc7XG5pbXBvcnQgeyBCdWRnZXQgfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9idWRnZXQubW9kZWwnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgT2NjQ29zdENlbnRlckFkYXB0ZXJcbiAgaW1wbGVtZW50cyBDb3N0Q2VudGVyQWRhcHRlciwgVXNlckNvc3RDZW50ZXJBZGFwdGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGh0dHA6IEh0dHBDbGllbnQsXG4gICAgcHJvdGVjdGVkIG9jY0VuZHBvaW50czogT2NjRW5kcG9pbnRzU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY29udmVydGVyOiBDb252ZXJ0ZXJTZXJ2aWNlXG4gICkge31cblxuICBsb2FkKHVzZXJJZDogc3RyaW5nLCBjb3N0Q2VudGVyQ29kZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxDb3N0Q2VudGVyPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxPY2MuQ29zdENlbnRlcj4odGhpcy5nZXRDb3N0Q2VudGVyRW5kcG9pbnQodXNlcklkLCBjb3N0Q2VudGVyQ29kZSkpXG4gICAgICAucGlwZSh0aGlzLmNvbnZlcnRlci5waXBlYWJsZShDT1NUX0NFTlRFUl9OT1JNQUxJWkVSKSk7XG4gIH1cblxuICBsb2FkTGlzdChcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCMkJTZWFyY2hDb25maWdcbiAgKTogT2JzZXJ2YWJsZTxFbnRpdGllc01vZGVsPENvc3RDZW50ZXI+PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxPY2MuQ29zdENlbnRlcnNMaXN0Pih0aGlzLmdldEFsbENvc3RDZW50ZXJzRW5kcG9pbnQodXNlcklkLCBwYXJhbXMpKVxuICAgICAgLnBpcGUodGhpcy5jb252ZXJ0ZXIucGlwZWFibGUoQ09TVF9DRU5URVJTX05PUk1BTElaRVIpKTtcbiAgfVxuXG4gIGxvYWRBY3RpdmVMaXN0KHVzZXJJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxFbnRpdGllc01vZGVsPENvc3RDZW50ZXI+PiB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IEh0dHBQYXJhbXMoKS5zZXQoXG4gICAgICAnZmllbGRzJyxcbiAgICAgICdERUZBVUxULHVuaXQoQkFTSUMsYWRkcmVzc2VzKERFRkFVTFQpKSdcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5nZXQ8T2NjLkNvc3RDZW50ZXJzTGlzdD4odGhpcy5nZXRDb3N0Q2VudGVyc0VuZHBvaW50KHVzZXJJZCksIHsgcGFyYW1zIH0pXG4gICAgICAucGlwZSh0aGlzLmNvbnZlcnRlci5waXBlYWJsZShDT1NUX0NFTlRFUlNfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgY3JlYXRlKHVzZXJJZDogc3RyaW5nLCBjb3N0Q2VudGVyOiBDb3N0Q2VudGVyKTogT2JzZXJ2YWJsZTxDb3N0Q2VudGVyPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLnBvc3Q8T2NjLkNvc3RDZW50ZXI+KHRoaXMuZ2V0Q29zdENlbnRlcnNFbmRwb2ludCh1c2VySWQpLCBjb3N0Q2VudGVyKVxuICAgICAgLnBpcGUodGhpcy5jb252ZXJ0ZXIucGlwZWFibGUoQ09TVF9DRU5URVJfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgdXBkYXRlKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGNvc3RDZW50ZXJDb2RlOiBzdHJpbmcsXG4gICAgY29zdENlbnRlcjogQ29zdENlbnRlclxuICApOiBPYnNlcnZhYmxlPENvc3RDZW50ZXI+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAucGF0Y2g8T2NjLkNvc3RDZW50ZXI+KFxuICAgICAgICB0aGlzLmdldENvc3RDZW50ZXJFbmRwb2ludCh1c2VySWQsIGNvc3RDZW50ZXJDb2RlKSxcbiAgICAgICAgY29zdENlbnRlclxuICAgICAgKVxuICAgICAgLnBpcGUodGhpcy5jb252ZXJ0ZXIucGlwZWFibGUoQ09TVF9DRU5URVJfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgbG9hZEJ1ZGdldHMoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgY29zdENlbnRlckNvZGU6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCMkJTZWFyY2hDb25maWdcbiAgKTogT2JzZXJ2YWJsZTxFbnRpdGllc01vZGVsPEJ1ZGdldD4+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAuZ2V0PE9jYy5CdWRnZXRzTGlzdD4oXG4gICAgICAgIHRoaXMuZ2V0QnVkZ2V0c0VuZHBvaW50KHVzZXJJZCwgY29zdENlbnRlckNvZGUsIHBhcmFtcylcbiAgICAgIClcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEJVREdFVFNfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgYXNzaWduQnVkZ2V0KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGNvc3RDZW50ZXJDb2RlOiBzdHJpbmcsXG4gICAgYnVkZ2V0Q29kZTogc3RyaW5nXG4gICk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0PGFueT4oXG4gICAgICB0aGlzLmdldEJ1ZGdldHNFbmRwb2ludCh1c2VySWQsIGNvc3RDZW50ZXJDb2RlLCB7IGJ1ZGdldENvZGUgfSksXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuXG4gIHVuYXNzaWduQnVkZ2V0KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGNvc3RDZW50ZXJDb2RlOiBzdHJpbmcsXG4gICAgYnVkZ2V0Q29kZTogc3RyaW5nXG4gICk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGU8YW55PihcbiAgICAgIHRoaXMuZ2V0QnVkZ2V0RW5kcG9pbnQodXNlcklkLCBjb3N0Q2VudGVyQ29kZSwgYnVkZ2V0Q29kZSlcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldENvc3RDZW50ZXJFbmRwb2ludChcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBjb3N0Q2VudGVyQ29kZTogc3RyaW5nXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMub2NjRW5kcG9pbnRzLmdldFVybCgnY29zdENlbnRlcicsIHsgdXNlcklkLCBjb3N0Q2VudGVyQ29kZSB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRDb3N0Q2VudGVyc0VuZHBvaW50KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEIyQlNlYXJjaENvbmZpZ1xuICApOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5nZXRVcmwoJ2Nvc3RDZW50ZXJzJywgeyB1c2VySWQgfSwgcGFyYW1zKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRBbGxDb3N0Q2VudGVyc0VuZHBvaW50KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEIyQlNlYXJjaENvbmZpZ1xuICApOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5nZXRVcmwoJ2Nvc3RDZW50ZXJzQWxsJywgeyB1c2VySWQgfSwgcGFyYW1zKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRCdWRnZXRzRW5kcG9pbnQoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgY29zdENlbnRlckNvZGU6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCMkJTZWFyY2hDb25maWcgfCB7IGJ1ZGdldENvZGU6IHN0cmluZyB9XG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMub2NjRW5kcG9pbnRzLmdldFVybChcbiAgICAgICdjb3N0Q2VudGVyQnVkZ2V0cycsXG4gICAgICB7IHVzZXJJZCwgY29zdENlbnRlckNvZGUgfSxcbiAgICAgIHBhcmFtc1xuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0QnVkZ2V0RW5kcG9pbnQoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgY29zdENlbnRlckNvZGU6IHN0cmluZyxcbiAgICBidWRnZXRDb2RlOiBzdHJpbmdcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vY2NFbmRwb2ludHMuZ2V0VXJsKCdjb3N0Q2VudGVyQnVkZ2V0Jywge1xuICAgICAgdXNlcklkLFxuICAgICAgY29zdENlbnRlckNvZGUsXG4gICAgICBidWRnZXRDb2RlLFxuICAgIH0pO1xuICB9XG59XG4iXX0=