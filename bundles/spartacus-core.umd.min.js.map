{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@spartacus/core/src/config/server-config/server-config.ts","ng://@spartacus/core/src/config/utils/deep-merge.ts","ng://@spartacus/core/src/config/utils/config-validator.ts","ng://@spartacus/core/src/config/config.module.ts","ng://@spartacus/core/src/routing/store/actions/router.action.ts","ng://@spartacus/core/src/routing/state.ts","ng://@spartacus/core/src/occ/occ-models/occ.models.ts","ng://@spartacus/core/src/routing/store/reducers/router.reducer.ts","ng://@spartacus/core/src/auth/store/actions/login-logout.action.ts","ng://@spartacus/core/src/site-context/store/actions/languages.action.ts","ng://@spartacus/core/src/routing/store/effects/router.effect.ts","ng://@spartacus/core/src/routing/store/effects/index.ts","ng://@spartacus/core/src/window/window-ref.ts","ng://@spartacus/core/src/routing/configurable-routes/config/configurable-routes-config.ts","ng://@spartacus/core/src/occ/config/occ-config.ts","ng://@spartacus/core/src/routing/configurable-routes/routes-config-loader.ts","ng://@spartacus/core/src/routing/configurable-routes/url-matcher-factory.service.ts","ng://@spartacus/core/src/routing/configurable-routes/configurable-routes.service.ts","ng://@spartacus/core/src/routing/configurable-routes/url-translation/url-parsing.service.ts","ng://@spartacus/core/src/routing/configurable-routes/url-translation/path-utils.ts","ng://@spartacus/core/src/routing/configurable-routes/url-translation/url-translation.service.ts","ng://@spartacus/core/src/routing/facade/routing.service.ts","ng://@spartacus/core/src/routing/configurable-routes/config/default-storefront-routes-translations.ts","ng://@spartacus/core/src/routing/configurable-routes/config/default-configurable-routes-config.ts","ng://@spartacus/core/src/routing/configurable-routes/configurable-routes.module.ts","ng://@spartacus/core/src/routing/routing.module.ts","ng://@spartacus/core/src/auth/config/auth-config.ts","ng://@spartacus/core/src/auth/config/default-auth-config.ts","ng://@spartacus/core/src/auth/store/auth-state.ts","ng://@spartacus/core/src/state/utils/loader/loader.action.ts","ng://@spartacus/core/src/auth/store/actions/client-token.action.ts","ng://@spartacus/core/src/auth/store/actions/user-token.action.ts","ng://@spartacus/core/src/auth/store/selectors/feature.selector.ts","ng://@spartacus/core/src/auth/store/selectors/client-token.selectors.ts","ng://@spartacus/core/src/auth/store/selectors/user-token.selectors.ts","ng://@spartacus/core/src/auth/facade/auth.service.ts","ng://@spartacus/core/src/auth/services/client-error/client-error-handling.service.ts","ng://@spartacus/core/src/auth/services/user-error/user-error-handling.service.ts","ng://@spartacus/core/src/occ/utils/interceptor-util.ts","ng://@spartacus/core/src/auth/http-interceptors/auth-error.interceptor.ts","ng://@spartacus/core/src/site-context/store/state.ts","ng://@spartacus/core/src/site-context/store/selectors/site-context.selector.ts","ng://@spartacus/core/src/site-context/store/selectors/base-site.selectors.ts","ng://@spartacus/core/src/site-context/store/actions/base-site.action.ts","ng://@spartacus/core/src/site-context/facade/base-site.service.ts","ng://@spartacus/core/src/config/utils/dynamic-template.ts","ng://@spartacus/core/src/occ/services/occ-endpoints.service.ts","ng://@spartacus/core/src/auth/http-interceptors/client-token.interceptor.ts","ng://@spartacus/core/src/auth/http-interceptors/user-token.interceptor.ts","ng://@spartacus/core/src/auth/http-interceptors/index.ts","ng://@spartacus/core/src/auth/services/client-authentication/client-authentication-token.service.ts","ng://@spartacus/core/src/auth/services/user-authentication/user-authentication-token.service.ts","ng://@spartacus/core/src/auth/services/index.ts","ng://@spartacus/core/src/state/config/state-config.ts","ng://@spartacus/core/src/state/meta-reducer.ts","ng://@spartacus/core/src/state/utils/get-state-slice.ts","ng://@spartacus/core/src/state/reducers/storage-sync.reducer.ts","ng://@spartacus/core/src/state/reducers/transfer-state.reducer.ts","ng://@spartacus/core/src/state/reducers/index.ts","ng://@spartacus/core/src/state/config/default-state-config.ts","ng://@spartacus/core/src/state/state.module.ts","ng://@spartacus/core/src/auth/store/effects/user-token.effect.ts","ng://@spartacus/core/src/auth/store/effects/client-token.effect.ts","ng://@spartacus/core/src/auth/store/effects/index.ts","ng://@spartacus/core/src/state/utils/loader/loader.reducer.ts","ng://@spartacus/core/src/auth/store/reducers/user-token.reducer.ts","ng://@spartacus/core/src/auth/store/reducers/index.ts","ng://@spartacus/core/src/auth/store/auth-store.module.ts","ng://@spartacus/core/src/auth/auth.module.ts","ng://@spartacus/core/src/auth/guards/auth.guard.ts","ng://@spartacus/core/src/auth/guards/not-auth.guard.ts","ng://@spartacus/core/src/cart/store/cart-state.ts","ng://@spartacus/core/src/cart/store/actions/cart.action.ts","ng://@spartacus/core/src/cart/store/actions/cart-entry.action.ts","ng://@spartacus/core/src/state/utils/loader/loader.selectors.ts","ng://@spartacus/core/src/cart/store/selectors/cart.selector.ts","ng://@spartacus/core/src/cart/facade/cart-data.service.ts","ng://@spartacus/core/src/cart/facade/cart.service.ts","ng://@spartacus/core/src/cart/facade/index.ts","ng://@spartacus/core/src/cart/connectors/cart/cart.adapter.ts","ng://@spartacus/core/src/cart/connectors/cart/cart.connector.ts","ng://@spartacus/core/src/cart/connectors/cart/converters.ts","ng://@spartacus/core/src/cart/connectors/delivery/cart-delivery.adapter.ts","ng://@spartacus/core/src/cart/connectors/delivery/cart-delivery.connector.ts","ng://@spartacus/core/src/cart/connectors/delivery/converters.ts","ng://@spartacus/core/src/cart/connectors/entry/cart-entry.adapter.ts","ng://@spartacus/core/src/cart/connectors/entry/cart-entry.connector.ts","ng://@spartacus/core/src/cart/connectors/entry/converters.ts","ng://@spartacus/core/src/cart/connectors/payment/cart-payment.adapter.ts","ng://@spartacus/core/src/cart/connectors/payment/cart-payment.connector.ts","ng://@spartacus/core/src/cart/connectors/payment/converters.ts","ng://@spartacus/core/src/util/converter.service.ts","ng://@spartacus/core/src/cart/occ/occ-cart.adapter.ts","ng://@spartacus/core/src/cart/occ/occ-cart-delivery.adapter.ts","ng://@spartacus/core/src/cart/occ/occ-cart-entry.adapter.ts","ng://@spartacus/core/src/cart/occ/custom.encoder.ts","ng://@spartacus/core/src/cart/occ/occ-cart-payment.adapter.ts","ng://@spartacus/core/src/occ/config/default-occ-config.ts","ng://@spartacus/core/src/occ/config/occ-config-validator.ts","ng://@spartacus/core/src/occ/occ.module.ts","ng://@spartacus/core/src/product/connectors/product/converters.ts","ng://@spartacus/core/src/cart/occ/converters/occ-cart-normalizer.ts","ng://@spartacus/core/src/cart/occ/cart-occ.module.ts","ng://@spartacus/core/src/checkout/store/actions/checkout.action.ts","ng://@spartacus/core/src/cart/store/reducers/cart.reducer.ts","ng://@spartacus/core/src/cart/store/reducers/index.ts","ng://@spartacus/core/src/site-context/store/reducers/languages.reducer.ts","ng://@spartacus/core/src/site-context/store/actions/currencies.action.ts","ng://@spartacus/core/src/site-context/store/reducers/currencies.reducer.ts","ng://@spartacus/core/src/site-context/store/reducers/base-site.reducer.ts","ng://@spartacus/core/src/site-context/store/reducers/index.ts","ng://@spartacus/core/src/site-context/occ/occ-site.service.ts","ng://@spartacus/core/src/site-context/store/effects/languages.effect.ts","ng://@spartacus/core/src/site-context/store/effects/currencies.effect.ts","ng://@spartacus/core/src/site-context/store/effects/index.ts","ng://@spartacus/core/src/site-context/store/selectors/languages.selectors.ts","ng://@spartacus/core/src/site-context/store/selectors/currencies.selectors.ts","ng://@spartacus/core/src/site-context/facade/language.service.ts","ng://@spartacus/core/src/site-context/facade/currency.service.ts","ng://@spartacus/core/src/site-context/occ/site-context-occ.module.ts","ng://@spartacus/core/src/site-context/store/site-context-store.module.ts","ng://@spartacus/core/src/state/utils/entity/entity.action.ts","ng://@spartacus/core/src/state/utils/entity-loader/entity-loader.action.ts","ng://@spartacus/core/src/state/utils/entity/entity.reducer.ts","ng://@spartacus/core/src/state/utils/entity-loader/entity-loader.reducer.ts","ng://@spartacus/core/src/state/utils/entity-loader/entity-loader.selectors.ts","ng://@spartacus/core/src/site-context/providers/context-service-map.ts","ng://@spartacus/core/src/site-context/config/default-site-context-config.ts","ng://@spartacus/core/src/site-context/config/site-context-config.ts","ng://@spartacus/core/src/site-context/providers/context-service-providers.ts","ng://@spartacus/core/src/site-context/facade/site-context-params.service.ts","ng://@spartacus/core/src/site-context/services/site-context-url-serializer.ts","ng://@spartacus/core/src/site-context/services/site-context-routes-handler.ts","ng://@spartacus/core/src/site-context/providers/site-context-params-providers.ts","ng://@spartacus/core/src/site-context/occ/site-context.interceptor.ts","ng://@spartacus/core/src/site-context/occ/index.ts","ng://@spartacus/core/src/site-context/site-context.module.ts","ng://@spartacus/core/src/cart/store/effects/cart.effect.ts","ng://@spartacus/core/src/cart/store/effects/cart-entry.effect.ts","ng://@spartacus/core/src/cart/store/effects/index.ts","ng://@spartacus/core/src/cart/store/cart-store.module.ts","ng://@spartacus/core/src/cart/cart.module.ts","ng://@spartacus/core/src/checkout/store/checkout-state.ts","ng://@spartacus/core/src/checkout/store/actions/card-types.action.ts","ng://@spartacus/core/src/checkout/store/actions/address-verification.action.ts","ng://@spartacus/core/src/checkout/store/actions/index.ts","ng://@spartacus/core/src/checkout/store/reducers/checkout.reducer.ts","ng://@spartacus/core/src/checkout/store/reducers/address-verification.reducer.ts","ng://@spartacus/core/src/checkout/store/reducers/card-types.reducer.ts","ng://@spartacus/core/src/checkout/store/reducers/index.ts","ng://@spartacus/core/src/checkout/store/selectors/checkout.selectors.ts","ng://@spartacus/core/src/checkout/store/selectors/card-types.selectors.ts","ng://@spartacus/core/src/checkout/store/selectors/address-verification.selectors.ts","ng://@spartacus/core/src/global-message/store/global-message-state.ts","ng://@spartacus/core/src/global-message/store/actions/global-message.actions.ts","ng://@spartacus/core/src/global-message/store/selectors/feature.selector.ts","ng://@spartacus/core/src/global-message/store/selectors/global-message.selectors.ts","ng://@spartacus/core/src/global-message/store/reducers/global-message.reducer.ts","ng://@spartacus/core/src/global-message/store/reducers/index.ts","ng://@spartacus/core/src/global-message/store/global-message-store.module.ts","ng://@spartacus/core/src/global-message/facade/global-message.service.ts","ng://@spartacus/core/src/global-message/models/global-message.model.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/http-error.handler.ts","ng://@spartacus/core/src/global-message/models/response-status.model.ts","ng://@spartacus/core/src/global-message/http-interceptors/http-error.interceptor.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/unknown-error.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/bad-gateway.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/bad-request.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/conflict.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/forbidden.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/gateway-timeout.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/handlers/not-found.handler.ts","ng://@spartacus/core/src/global-message/http-interceptors/index.ts","ng://@spartacus/core/src/global-message/global-message.module.ts","ng://@spartacus/core/src/user/occ/user.service.ts","ng://@spartacus/core/src/user/occ/order.service.ts","ng://@spartacus/core/src/user/occ/user-occ.module.ts","ng://@spartacus/core/src/user/store/actions/billing-countries.action.ts","ng://@spartacus/core/src/user/store/actions/delivery-countries.action.ts","ng://@spartacus/core/src/user/store/actions/forgot-password.action.ts","ng://@spartacus/core/src/user/store/actions/order-details.action.ts","ng://@spartacus/core/src/user/store/user-state.ts","ng://@spartacus/core/src/user/store/actions/payment-methods.action.ts","ng://@spartacus/core/src/user/store/actions/regions.action.ts","ng://@spartacus/core/src/user/store/actions/reset-password.action.ts","ng://@spartacus/core/src/user/store/actions/titles.action.ts","ng://@spartacus/core/src/process/store/process-state.ts","ng://@spartacus/core/src/user/store/actions/update-email.action.ts","ng://@spartacus/core/src/user/store/actions/update-password.action.ts","ng://@spartacus/core/src/user/store/actions/user-addresses.action.ts","ng://@spartacus/core/src/user/store/actions/user-details.action.ts","ng://@spartacus/core/src/user/store/actions/user-orders.action.ts","ng://@spartacus/core/src/user/store/actions/user-register.action.ts","ng://@spartacus/core/src/user/store/actions/index.ts","ng://@spartacus/core/src/user/store/reducers/billing-countries.reducer.ts","ng://@spartacus/core/src/user/store/reducers/delivery-countries.reducer.ts","ng://@spartacus/core/src/user/store/reducers/order-details.reducer.ts","ng://@spartacus/core/src/user/store/reducers/payment-methods.reducer.ts","ng://@spartacus/core/src/user/store/reducers/regions.reducer.ts","ng://@spartacus/core/src/user/store/reducers/reset-password.reducer.ts","ng://@spartacus/core/src/user/store/reducers/titles.reducer.ts","ng://@spartacus/core/src/user/store/reducers/user-addresses.reducer.ts","ng://@spartacus/core/src/user/store/reducers/user-details.reducer.ts","ng://@spartacus/core/src/user/store/reducers/user-orders.reducer.ts","ng://@spartacus/core/src/user/store/reducers/index.ts","ng://@spartacus/core/src/user/store/selectors/feature.selector.ts","ng://@spartacus/core/src/user/store/selectors/user-details.selectors.ts","ng://@spartacus/core/src/user/store/selectors/user-addresses.selectors.ts","ng://@spartacus/core/src/user/store/selectors/payment-methods.selectors.ts","ng://@spartacus/core/src/user/store/selectors/user-orders.selectors.ts","ng://@spartacus/core/src/user/store/selectors/titles.selectors.ts","ng://@spartacus/core/src/user/store/selectors/delivery-countries.selectors.ts","ng://@spartacus/core/src/user/store/selectors/regions.selectors.ts","ng://@spartacus/core/src/user/store/selectors/order-details.selectors.ts","ng://@spartacus/core/src/user/store/selectors/billing-countries.selectors.ts","ng://@spartacus/core/src/user/store/selectors/reset-password.selectors.ts","ng://@spartacus/core/src/process/store/selectors/process.selectors.ts","ng://@spartacus/core/src/process/store/selectors/feature.selector.ts","ng://@spartacus/core/src/user/facade/user.service.ts","ng://@spartacus/core/src/process/store/reducers/index.ts","ng://@spartacus/core/src/process/store/process-store.module.ts","ng://@spartacus/core/src/process/process.module.ts","ng://@spartacus/core/src/occ/miscs/miscs.service.ts","ng://@spartacus/core/src/user/store/effects/billing-countries.effect.ts","ng://@spartacus/core/src/user/store/effects/delivery-countries.effect.ts","ng://@spartacus/core/src/user/store/effects/forgot-password.effect.ts","ng://@spartacus/core/src/user/store/effects/order-details.effect.ts","ng://@spartacus/core/src/user/store/effects/payment-methods.effect.ts","ng://@spartacus/core/src/user/store/effects/regions.effect.ts","ng://@spartacus/core/src/user/store/effects/reset-password.effect.ts","ng://@spartacus/core/src/user/store/effects/titles.effect.ts","ng://@spartacus/core/src/user/store/effects/update-email.effect.ts","ng://@spartacus/core/src/user/store/effects/update-password.effect.ts","ng://@spartacus/core/src/user/store/effects/user-addresses.effect.ts","ng://@spartacus/core/src/user/store/effects/user-details.effect.ts","ng://@spartacus/core/src/user/store/effects/user-orders.effect.ts","ng://@spartacus/core/src/user/store/effects/user-register.effect.ts","ng://@spartacus/core/src/user/store/effects/index.ts","ng://@spartacus/core/src/user/store/user-store.module.ts","ng://@spartacus/core/src/user/user.module.ts","ng://@spartacus/core/src/checkout/store/effects/checkout.effect.ts","ng://@spartacus/core/src/checkout/store/effects/card-types.effect.ts","ng://@spartacus/core/src/checkout/store/effects/address-verification.effect.ts","ng://@spartacus/core/src/checkout/store/effects/index.ts","ng://@spartacus/core/src/checkout/facade/checkout.service.ts","ng://@spartacus/core/src/checkout/store/checkout-store.module.ts","ng://@spartacus/core/src/cms/config/cms-config.ts","ng://@spartacus/core/src/cms/config/cms-structure.config.ts","ng://@spartacus/core/src/cms/model/page.model.ts","ng://@spartacus/core/src/cms/connectors/page/converters.ts","ng://@spartacus/core/src/cms/occ/occ-cms-page.adapter.ts","ng://@spartacus/core/src/cms/occ/converters/occ-cms-page-normalizer.ts","ng://@spartacus/core/src/cms/connectors/component/converters.ts","ng://@spartacus/core/src/cms/occ/occ-cms-component.adapter.ts","ng://@spartacus/core/src/cms/connectors/page/cms-page.adapter.ts","ng://@spartacus/core/src/cms/services/component-mapper.service.ts","ng://@spartacus/core/src/cms/connectors/component/cms-component.adapter.ts","ng://@spartacus/core/src/cms/occ/cms-occ.module.ts","ng://@spartacus/core/src/cms/services/cms-structure-config.service.ts","ng://@spartacus/core/src/cms/connectors/page/cms-page.connector.ts","ng://@spartacus/core/src/cms/connectors/component/cms-component.connector.ts","ng://@spartacus/core/src/cms/store/cms-state.ts","ng://@spartacus/core/src/cms/store/actions/page.action.ts","ng://@spartacus/core/src/cms/store/actions/component.action.ts","ng://@spartacus/core/src/cms/store/actions/navigation-entry-item.action.ts","ng://@spartacus/core/src/cms/store/selectors/feature.selectors.ts","ng://@spartacus/core/src/cms/store/selectors/page.selectors.ts","ng://@spartacus/core/src/cms/store/selectors/component.selectors.ts","ng://@spartacus/core/src/cms/store/selectors/navigation-entry-item.selectors.ts","ng://@spartacus/core/src/occ/config/occ-config-from-meta-tag-factory.ts","ng://@spartacus/core/src/cms/store/reducers/navigation-entry-item.reducer.ts","ng://@spartacus/core/src/cms/store/reducers/page-data.reducer.ts","ng://@spartacus/core/src/cms/store/reducers/page-index.reducer.ts","ng://@spartacus/core/src/cms/store/reducers/index.ts","ng://@spartacus/core/src/routing/models/page-context.model.ts","ng://@spartacus/core/src/routing/configurable-routes/url-translation/translate-url.pipe.ts","ng://@spartacus/core/src/routing/configurable-routes/url-translation/url-translation.module.ts","ng://@spartacus/core/src/cms/store/effects/page.effect.ts","ng://@spartacus/core/src/cms/store/effects/component.effect.ts","ng://@spartacus/core/src/cms/store/effects/navigation-entry-item.effect.ts","ng://@spartacus/core/src/cms/store/effects/index.ts","ng://@spartacus/core/src/cms/facade/cms.service.ts","ng://@spartacus/core/src/cms/page/page-meta.resolver.ts","ng://@spartacus/core/src/cms/facade/page-meta.service.ts","ng://@spartacus/core/src/cms/store/cms-store.module.ts","ng://@spartacus/core/src/cms/page/content-page-meta.resolver.ts","ng://@spartacus/core/src/cms/page/page.module.ts","ng://@spartacus/core/src/cms/cms.module.ts","ng://@spartacus/core/src/cms/services/dynamic-attribute.service.ts","ng://@spartacus/core/src/checkout/services/checkout-page-meta.resolver.ts","ng://@spartacus/core/src/checkout/checkout.module.ts","ng://@spartacus/core/src/cx-api/cx-api.module.ts","ng://@spartacus/core/src/product/config/product-config.ts","ng://@spartacus/core/src/product/connectors/reviews/product-reviews.adapter.ts","ng://@spartacus/core/src/product/connectors/reviews/converters.ts","ng://@spartacus/core/src/product/occ/occ-product-reviews.adapter.ts","ng://@spartacus/core/src/product/occ/occ-product.adapter.ts","ng://@spartacus/core/src/product/connectors/product/product.adapter.ts","ng://@spartacus/core/src/product/occ/converters/product-image-normalizer.ts","ng://@spartacus/core/src/product/occ/converters/product-reference-normalizer.ts","ng://@spartacus/core/src/product/connectors/search/product-search.adapter.ts","ng://@spartacus/core/src/product/connectors/search/converters.ts","ng://@spartacus/core/src/product/occ/occ-product-search.adapter.ts","ng://@spartacus/core/src/product/occ/converters/occ-product-search-page-normalizer.service.ts","ng://@spartacus/core/src/product/occ/product-occ.module.ts","ng://@spartacus/core/src/product/store/product-state.ts","ng://@spartacus/core/src/product/store/actions/product-search.action.ts","ng://@spartacus/core/src/product/store/actions/product.action.ts","ng://@spartacus/core/src/product/store/actions/product-reviews.action.ts","ng://@spartacus/core/src/product/store/selectors/feature.selector.ts","ng://@spartacus/core/src/product/store/selectors/product.selectors.ts","ng://@spartacus/core/src/product/store/reducers/product-search.reducer.ts","ng://@spartacus/core/src/product/store/selectors/product-search.selectors.ts","ng://@spartacus/core/src/product/store/selectors/product-reviews.selectors.ts","ng://@spartacus/core/src/product/store/reducers/product-reviews.reducer.ts","ng://@spartacus/core/src/product/store/reducers/index.ts","ng://@spartacus/core/src/product/connectors/search/product-search.connector.ts","ng://@spartacus/core/src/product/store/effects/product-search.effect.ts","ng://@spartacus/core/src/product/connectors/product/product.connector.ts","ng://@spartacus/core/src/product/store/effects/product.effect.ts","ng://@spartacus/core/src/product/connectors/reviews/product-reviews.connector.ts","ng://@spartacus/core/src/product/store/effects/product-reviews.effect.ts","ng://@spartacus/core/src/product/store/effects/index.ts","ng://@spartacus/core/src/product/facade/product.service.ts","ng://@spartacus/core/src/product/facade/product-search.service.ts","ng://@spartacus/core/src/product/facade/product-review.service.ts","ng://@spartacus/core/src/product/store/product-store.module.ts","ng://@spartacus/core/src/product/services/product-page-meta.resolver.ts","ng://@spartacus/core/src/product/services/search-page-meta.resolver.ts","ng://@spartacus/core/src/product/services/category-page-meta.resolver.ts","ng://@spartacus/core/src/product/product.module.ts","ng://@spartacus/core/src/i18n/config/i18n-config.ts","ng://@spartacus/core/src/i18n/date.pipe.ts","ng://@spartacus/core/src/i18n/translation.service.ts","ng://@spartacus/core/src/i18n/translate.pipe.ts","ng://@spartacus/core/src/i18n/utils/shallow-equal-objects.ts","ng://@spartacus/core/src/i18n/translation-chunk.service.ts","ng://@spartacus/core/src/i18n/i18next/i18next-init.ts","ng://@spartacus/core/src/i18n/i18next/i18next-providers.ts","ng://@spartacus/core/src/i18n/config/default-i18n-config.ts","ng://@spartacus/core/src/i18n/i18next/i18next-translation.service.ts","ng://@spartacus/core/src/i18n/i18n.module.ts","ng://@spartacus/core/src/i18n/testing/mock-translate.ts","ng://@spartacus/core/src/i18n/testing/mock-translate.pipe.ts","ng://@spartacus/core/src/i18n/testing/mock-translation.service.ts","ng://@spartacus/core/src/i18n/testing/mock-date.pipe.ts","ng://@spartacus/core/src/i18n/testing/i18n-testing.module.ts","ng://@spartacus/core/src/cx-api/cx-api.service.ts","ng://@spartacus/core/src/smart-edit/services/smart-edit.service.ts","ng://@spartacus/core/src/smart-edit/http-interceptors/cms-ticket.interceptor.ts","ng://@spartacus/core/src/smart-edit/http-interceptors/index.ts","ng://@spartacus/core/src/smart-edit/smart-edit.module.ts","ng://@spartacus/core/src/store-finder/occ/store-finder.service.ts","ng://@spartacus/core/src/store-finder/occ/store-finder-occ.module.ts","ng://@spartacus/core/src/store-finder/config/store-finder-config.ts","ng://@spartacus/core/src/store-finder/store/store-finder-state.ts","ng://@spartacus/core/src/store-finder/store/actions/find-stores.action.ts","ng://@spartacus/core/src/store-finder/store/actions/view-all-stores.action.ts","ng://@spartacus/core/src/store-finder/store/selectors/feature.selector.ts","ng://@spartacus/core/src/store-finder/store/selectors/find-stores.selectors.ts","ng://@spartacus/core/src/store-finder/store/selectors/view-all-stores.selectors.ts","ng://@spartacus/core/src/store-finder/service/external-js-file-loader.service.ts","ng://@spartacus/core/src/store-finder/facade/store-data.service.ts","ng://@spartacus/core/src/store-finder/service/google-map-renderer.service.ts","ng://@spartacus/core/src/store-finder/store/effects/find-stores.effect.ts","ng://@spartacus/core/src/store-finder/store/effects/view-all-stores.effect.ts","ng://@spartacus/core/src/store-finder/store/effects/index.ts","ng://@spartacus/core/src/store-finder/store/reducers/index.ts","ng://@spartacus/core/src/store-finder/facade/store-finder.service.ts","ng://@spartacus/core/src/store-finder/store/store-finder-store.module.ts","ng://@spartacus/core/src/store-finder/config/default-store-finder-config.ts","ng://@spartacus/core/src/store-finder/store-finder.module.ts","ng://@spartacus/core/src/util/pipe/strip-html/strip-html.pipe.ts","ng://@spartacus/core/src/util/pipe/strip-html/strip-html.module.ts","ng://@spartacus/core/src/util/pipe/pipe.module.ts","ng://@spartacus/core/src/util/util.module.ts","ng://@spartacus/core/src/cms/config/default-cms-config.ts","ng://@spartacus/core/src/state/utils/entity/entity.selectors.ts","ng://@spartacus/core/src/state/utils/loader/loader.helpers.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__read","ar","error","__spread","concat","ServerConfig","defaultServerConfig","isObject","item","isArray","deepMerge","sources","_i","source","shift","_a","_b","ConfigValidatorToken","InjectionToken","provideConfigValidator","configValidator","provide","useValue","multi","validateConfig","config","configValidators","configValidators_1","tslib_1.__values","configValidators_1_1","warning","validate","console","warn","Config","ConfigChunk","provideConfig","provideConfigFactory","configFactory","deps","useFactory","configurationFactory","configChunks","production","ConfigModule","withConfig","ngModule","providers","withConfigFactory","forRoot","useExisting","Optional","NgModule","args","imports","CommonModule","declarations","GO","GO_BY_URL","BACK","FORWARD","SAVE_REDIRECT_URL","CLEAR_REDIRECT_URL","Go","payload","type","GoByUrl","Back","Forward","SaveRedirectUrl","ClearRedirectUrl","ROUTING_FEATURE","CONTENT_PAGE","PRODUCT_PAGE","CATEGORY_PAGE","CATALOG_PAGE","initialState","redirectUrl","navigationId","state","url","queryParams","params","context","id","cmsRequired","getReducers","router","reducer","action","fromActions.SAVE_REDIRECT_URL","fromActions.CLEAR_REDIRECT_URL","fromNgrxRouter.ROUTER_NAVIGATION","fromNgrxRouter.ROUTER_ERROR","fromNgrxRouter.ROUTER_CANCEL","currentUrl","routerState","contextId","event","reducerToken","reducerProvider","getRouterFeatureState","createFeatureSelector","getRouterState","createSelector","getPageContext","routingState","getRedirectUrl","CustomSerializer","serialize","root","firstChild","data","cxCmsRouteContext","routeConfig","canActivate","find","x","guardName","path","PageType","pageLabel","undefined","map","urlSegment","join","LOGIN","LOGOUT","Login","Logout","LOAD_LANGUAGES","LOAD_LANGUAGES_FAIL","LOAD_LANGUAGES_SUCCESS","SET_ACTIVE_LANGUAGE","LANGUAGE_CHANGE","LoadLanguages","LoadLanguagesFail","LoadLanguagesSuccess","SetActiveLanguage","LanguageChange","RouterEffects","actions$","location","_this","navigate$","pipe","ofType","RouterActions.GO","tap","query","extras","navigate","navigateBuUrl$","RouterActions.GO_BY_URL","navigateByUrl","clearCmsRoutes$","filteredConfig","filter","route","resetConfig","navigateBack$","RouterActions.BACK","back","navigateForward$","RouterActions.FORWARD","forward","Injectable","Actions","Router","Location","tslib_1.__decorate","Effect","dispatch","Observable","effects","WindowRef","document","window","nativeWindow","sessionStorage","localStorage","providedIn","Inject","DOCUMENT","ConfigurableRoutesConfig","OccConfig","tslib_1.__extends","RoutesConfigLoader","http","serverConfig","configurableRoutesConfig","_routesConfig","backend","occ","baseUrl","load","routesConfig","fetch","endpoint","fetchedRoutesConfig","extendStaticWith","get","retry","toPromise","catch","Error","mergedRoutesConfig","extendLanguagesTranslationsWithDefault","defaultTranslations","translations","default","keys","forEach","languageCode","languageTranslations","HttpClient","UrlMatcherFactoryService","getFalsyUrlMatcher","getMultiplePathsUrlMatcher","paths","self","matcher","segments","segmentGroup","getPathUrlMatcher","parts","split","pathMatch","hasChildren","posParams","index","part","segment","startsWith","substring","consumed","slice","ConfigurableRoutesService","injector","routesConfigLoader","urlMatcherFactory","currentLanguageCode","initCalled","allRoutesTranslations","init","translateRouterConfig","translatedRoutes","translateRoutes","currentRoutesTranslations","getRouteTranslation","routeName","routesTranslations","routes","translatedRoute","translateRoute","children","translatedChildrenRoutes","isConfigurable","translateRoutePath","translateRouteRedirectTo","getConfigurable","getTranslatedPaths","translatedPaths","redirectTo","translation","Injector","UrlParsingService","getPrimarySegments","urlTree","parseUrl","_getPrimarySegmentsFromUrlTree","tree","childrenSegments","PRIMARY_OUTLET","isParam","getParamName","UrlTranslationService","configurableRoutesService","urlParser","ROOT_URL","translate","commands","options","commands_1","commands_1_1","command","partialResult","generateUrl","relative","unshift","standarizeRouteCommand","routeTranslation","findPathWithFillableParams","provideParamsValues","paramsMapping","paramName","mappedParamName","getMappedParamName","foundPath","getParams","every","RoutingService","store","winRef","urlTranslator","select","fromStore.getRouterState","fromStore.getPageContext","go","goByUrl","fromStore.GoByUrl","referrer","indexOf","origin","fromStore.Back","fromStore.Forward","fromStore.getRedirectUrl","clearRedirectUrl","fromStore.ClearRedirectUrl","saveRedirectUrl","fromStore.SaveRedirectUrl","fromStore.Go","Store","defaultStorefrontRoutesTranslations","home","cart","search","login","register","resetPassword","forgotPassword","checkout","orderConfirmation","product","productCode","category","categoryCode","brand","termsAndConditions","orders","orderDetails","orderCode","addressBook","updatePassword","paymentManagement","updateEmail","updateProfile","closeAccount","en","defaultConfigurableRoutesConfig","initConfigurableRoutes","service","ConfigurableRoutesModule","exports","APP_INITIALIZER","RoutingModule","RouterModule","scrollPositionRestoration","anchorScrolling","StoreModule","forFeature","EffectsModule","StoreRouterConnectingModule","stateKey","RouterStateSerializer","useClass","AuthConfig","defaultAuthConfig","authentication","client_id","client_secret","AUTH_FEATURE","CLIENT_TOKEN_DATA","LOADER_LOAD_ACTION","LOADER_FAIL_ACTION","LOADER_SUCCESS_ACTION","LOADER_RESET_ACTION","loadMeta","entityType","loader","failMeta","successMeta","success","resetMeta","LoaderLoadAction","meta","LoaderFailAction","LoaderSuccessAction","LoaderResetAction","LOAD_CLIENT_TOKEN","LOAD_CLIENT_TOKEN_FAIL","LOAD_CLIENT_TOKEN_SUCCESS","LoadClientToken","_super","LoadClientTokenFail","LoadClientTokenSuccess","LOAD_USER_TOKEN","LOAD_USER_TOKEN_FAIL","LOAD_USER_TOKEN_SUCCESS","REFRESH_USER_TOKEN","REFRESH_USER_TOKEN_FAIL","REFRESH_USER_TOKEN_SUCCESS","LoadUserToken","LoadUserTokenFail","LoadUserTokenSuccess","RefreshUserToken","RefreshUserTokenSuccess","RefreshUserTokenFail","getAuthState","getClientTokenState","clientToken","getUserTokenSelector","token","getUserTokenState","userToken","getUserToken","AuthService","authorize","userId","password","refreshUserToken","refreshToken","refresh_token","authorizeWithToken","logout","getClientToken","isClientTokenLoaded","loading","refreshClientToken","ClientErrorHandlingService","authService","handleExpiredClientToken","request","take","switchMap","handle","createNewRequestWithNewToken","clone","setHeaders","Authorization","token_type","access_token","UserErrorHandlingService","routingService","handleExpiredUserToken","handleExpiredToken","handleExpiredRefreshToken","oldToken","USE_CLIENT_TOKEN","InterceptorUtil","createHeader","headerName","interceptorParam","headers","append","JSON","stringify","HttpHeaders","set","removeHeader","updatedHeaders","delete","getInterceptorParam","rawValue","parse","OAUTH_ENDPOINT","AuthErrorInterceptor","userErrorHandlingService","clientErrorHandlingService","intercept","isClientTokenRequest","catchError","errResponse","HttpErrorResponse","status","isExpiredToken","of","throwError","isRequestMapping","Boolean","resp","errors","SITE_CONTEXT_FEATURE","getSiteContextState","getActiveBaseSite","baseSite","SET_ACTIVE_BASE_SITE","BASE_SITE_CHANGE","SetActiveBaseSite","BaseSiteChange","BaseSiteService","getActive","getAll","setActive","subscribe","activeBaseSite","initialize","defaultBaseSite","DynamicTemplate","templateString","templateVariables","values","Function","bind","OccEndpointsService","baseSiteService","site","getBaseEndpoint","prefix","getEndpoint","getUrl","urlParams","endpoints","httpParamsOptions","fromString","httpParams_1","HttpParams","toString","ClientTokenInterceptor","occEndpoints","UserTokenInterceptor","isOccUrl","interceptors","HTTP_INTERCEPTORS","ClientAuthenticationTokenService","loadClientAuthenticationToken","getOAuthEndpoint","encodeURIComponent","Content-Type","post","json","UserAuthenticationTokenService","loadToken","encodeURI","services","NO_STORAGE","LOCAL_STORAGE","SESSION_STORAGE","TRANSFER_STATE","StateConfig","META_REDUCER","metaReducersFactory","metaReducers","createShellObject","keySplit","newObject","tempNewObject","currentKey","getStateSlice","stateSlices","keys_1","keys_1_1","reduce","previous","current","getStorageSyncReducer","storageSync","storageSyncConfig","newState","INIT","exists","UPDATE","rehydrate","localStorageValue","readFromStorage","localStorageKeyName","sessionStorageValue","sessionStorageKeyName","localStorageStateSlices","getKeysForStorage","StorageSyncType","persistToStorage","sessionStorageStateSlices","storageType","configKey","storage","isSsr","setItem","storageValue","getItem","CX_KEY","makeStateKey","getTransferStateReducer","platformId","transferState","ssrTransfer","isPlatformBrowser","getBrowserTransferStateReducer","hasKey","cxKey","transferredStateSlice","isPlatformServer","getServerTransferStateReducer","stateSlice","stateMetaReducers","PLATFORM_ID","TransferState","DEFAULT_LOCAL_STORAGE_KEY","DEFAULT_SESSION_STORAGE_KEY","defaultStateConfig","StateModule","META_REDUCERS","ɵ0","UserTokenEffects","userTokenService","loadUserToken$","fromActions.LOAD_USER_TOKEN","mergeMap","date","Date","setSeconds","getSeconds","expires_in","expiration_time","fromActions.LoadUserTokenSuccess","fromActions.LoadUserTokenFail","refreshUserToken$","fromActions.REFRESH_USER_TOKEN","fromActions.RefreshUserTokenSuccess","fromActions.RefreshUserTokenFail","ClientTokenEffect","clientAuthenticationTokenService","loadClientToken$","fromActions.LOAD_CLIENT_TOKEN","exhaustMap","fromActions.LoadClientTokenSuccess","fromActions.LoadClientTokenFail","initialLoaderState","loaderReducer","loadActionType","entity","newValue","initialState$1","fromAction.LOAD_USER_TOKEN","fromAction.REFRESH_USER_TOKEN","fromAction.LOAD_USER_TOKEN_SUCCESS","fromAction.REFRESH_USER_TOKEN_SUCCESS","fromAction.LOAD_USER_TOKEN_FAIL","fromAction.REFRESH_USER_TOKEN_FAIL","combineReducers","fromUserTokenReducer.reducer","clearAuthState","authStoreConfigFactory","auth.userToken.token","AuthStoreModule","HttpClientModule","AuthModule","AuthGuard","_route","GUARD_NAME","NotAuthGuard","CART_FEATURE","CART_DATA","CREATE_CART","CREATE_CART_FAIL","CREATE_CART_SUCCESS","LOAD_CART","LOAD_CART_FAIL","LOAD_CART_SUCCESS","MERGE_CART","MERGE_CART_SUCCESS","CreateCart","CreateCartFail","CreateCartSuccess","LoadCart","LoadCartFail","LoadCartSuccess","MergeCart","MergeCartSuccess","ADD_ENTRY","ADD_ENTRY_SUCCESS","ADD_ENTRY_FAIL","REMOVE_ENTRY","REMOVE_ENTRY_SUCCESS","REMOVE_ENTRY_FAIL","UPDATE_ENTRY","UPDATE_ENTRY_SUCCESS","UPDATE_ENTRY_FAIL","AddEntry","AddEntrySuccess","AddEntryFail","RemoveEntry","RemoveEntrySuccess","RemoveEntryFail","UpdateEntry","UpdateEntrySuccess","UpdateEntryFail","loaderValueSelector","loaderLoadingSelector","loaderErrorSelector","loaderSuccessSelector","getCartContentSelector","content","getRefreshSelector","refresh","getEntriesSelector","entries","getCartMergeCompleteSelector","cartMergeComplete","getCartsState","getActiveCartState","cartsState","active","getCartState","getCartContent","getRefresh","getLoaded","getCartMergeComplete","getEntriesMap","getEntrySelectorFactory","getEntries","entities","code","ANONYMOUS_USERID","CartDataService","_userId","_getDetails","_cart","val","hasCart","guid","CartService","cartData","fromSelector.getCartContent","fromSelector.getEntries","fromSelector.getCartMergeComplete","fromSelector.getLoaded","callback","setUserId","loadOrMerge","getDetails","isCreated","fromAction.MergeCart","cartId","fromAction.LoadCart","fromSelector.getRefresh","details","loadDetails","addEntry","quantity","fromAction.AddEntry","fromAction.CreateCart","removeEntry","entry","fromAction.RemoveEntry","entryNumber","updateEntry","fromAction.UpdateEntry","qty","getEntry","fromSelector.getEntrySelectorFactory","isEmpty","totalItems","CartAdapter","CartConnector","adapter","loadAll","oldCartId","toMergeCartGuid","CART_NORMALIZER","CartDeliveryAdapter","CartDeliveryConnector","createAddress","address","setAddress","addressId","setMode","deliveryModeId","getMode","getSupportedModes","DELIVERY_ADDRESS_NORMALIZER","DELIVERY_ADDRESS_SERIALIZER","DELIVERY_MODE_NORMALIZER","CartEntryAdapter","CartEntryConnector","add","update","pickupStore","remove","CART_MODIFICATION_NORMALIZER","CartPaymentAdapter","CartPaymentConnector","paymentDetails","paymentDetailsId","CART_PAYMENT_DETAILS_NORMALIZER","CART_PAYMENT_DETAILS_SERIALIZER","ConverterService","converters","Map","getConverters","injectionToken","has","hasConverters","pipeable","model","convertSource","observable","pipeableMany","convertMany","convert","converter","BASIC_PARAMS","DETAILS_PARAMS","OccCartAdapter","getCartEndpoint","cartEndpoint","pluck","carts","toAdd","queryString","OccCartDeliveryAdapter","put","OccCartEntryAdapter","patch","CustomEncoder","encodeKey","encodeValue","decodeKey","decodeURIComponent","decodeValue","OccCartPaymentAdapter","DOMParser","domparser","getProviderSubInfo","labelsMap","convertToMap","mappingLabels","postUrl","parameters","getParamsForPaymentProvider","sub","createSubWithProvider","response","extractPaymentDetailsFromHtml","fromPaymentProvider","createDetailsWithParameters","getPaymentSopResponseParams","Accept","httpParams","encoder","responseType","sopResponseParams","cardType","expiryMonth","expiryYear","accountHolderName","defaultPayment","cardNumber","cvn","billingAddress","country","isocode","firstName","lastName","line1","line2","town","postalCode","html","inputs","parseFromString","getElementsByTagName","input","getAttribute","reason_1","hasError","name","paramList","defaultOccConfig","language","currency","occConfigValidator","OccModule","PRODUCT_NORMALIZER","OccCartNormalizer","CartOccModule","ADD_DELIVERY_ADDRESS","ADD_DELIVERY_ADDRESS_FAIL","ADD_DELIVERY_ADDRESS_SUCCESS","SET_DELIVERY_ADDRESS","SET_DELIVERY_ADDRESS_FAIL","SET_DELIVERY_ADDRESS_SUCCESS","LOAD_SUPPORTED_DELIVERY_MODES","LOAD_SUPPORTED_DELIVERY_MODES_FAIL","LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS","CLEAR_SUPPORTED_DELIVERY_MODES","SET_DELIVERY_MODE","SET_DELIVERY_MODE_FAIL","SET_DELIVERY_MODE_SUCCESS","CREATE_PAYMENT_DETAILS","CREATE_PAYMENT_DETAILS_FAIL","CREATE_PAYMENT_DETAILS_SUCCESS","SET_PAYMENT_DETAILS","SET_PAYMENT_DETAILS_FAIL","SET_PAYMENT_DETAILS_SUCCESS","PLACE_ORDER","PLACE_ORDER_FAIL","PLACE_ORDER_SUCCESS","CLEAR_CHECKOUT_STEP","CLEAR_CHECKOUT_DATA","AddDeliveryAddress","AddDeliveryAddressFail","AddDeliveryAddressSuccess","SetDeliveryAddress","SetDeliveryAddressFail","SetDeliveryAddressSuccess","LoadSupportedDeliveryModes","LoadSupportedDeliveryModesFail","LoadSupportedDeliveryModesSuccess","SetDeliveryMode","SetDeliveryModeFail","SetDeliveryModeSuccess","CreatePaymentDetails","CreatePaymentDetailsFail","CreatePaymentDetailsSuccess","SetPaymentDetails","SetPaymentDetailsFail","SetPaymentDetailsSuccess","PlaceOrder","PlaceOrderFail","PlaceOrderSuccess","ClearSupportedDeliveryModes","ClearCheckoutStep","ClearCheckoutData","initialState$2","fromAction.MERGE_CART","fromAction.MERGE_CART_SUCCESS","fromAction.LOAD_CART_SUCCESS","fromAction.CREATE_CART_SUCCESS","entryMap","fromAction.REMOVE_ENTRY_SUCCESS","fromAction.UPDATE_ENTRY_SUCCESS","fromAction.ADD_ENTRY_SUCCESS","cartReducer","clearCartState","activeLanguage","initialState$3","fromLanguages.LOAD_LANGUAGES_SUCCESS","langEntities","fromLanguages.SET_ACTIVE_LANGUAGE","LOAD_CURRENCIES","LOAD_CURRENCIES_FAIL","LOAD_CURRENCIES_SUCCESS","SET_ACTIVE_CURRENCY","CURRENCY_CHANGE","LoadCurrencies","LoadCurrenciesFail","LoadCurrenciesSuccess","SetActiveCurrency","CurrencyChange","activeCurrency","initialState$4","fromCurrencies.LOAD_CURRENCIES_SUCCESS","currEntities","fromCurrencies.SET_ACTIVE_CURRENCY","initialState$5","fromBaseSite.SET_ACTIVE_BASE_SITE","languages","fromLanguages.reducer","currencies","fromCurrencies.reducer","fromBaseSite.reducer","OccSiteService","loadLanguages","loadCurrencies","LanguagesEffects","occSiteService","loadLanguages$","actions.LOAD_LANGUAGES","actions.LoadLanguagesSuccess","actions.LoadLanguagesFail","activateLanguage$","actions.SET_ACTIVE_LANGUAGE","actions.LanguageChange","CurrenciesEffects","loadCurrencies$","actions.LOAD_CURRENCIES","actions.LoadCurrenciesSuccess","actions.LoadCurrenciesFail","activateCurrency$","actions.SET_ACTIVE_CURRENCY","actions.CurrencyChange","getLanguagesState","getLanguagesEntities","getActiveLanguage","getAllLanguages","getCurrenciesState","getCurrenciesEntities","getActiveCurrency","getAllCurrencies","LanguageService","fromStore.getAllLanguages","fromStore.LoadLanguages","fromStore.getActiveLanguage","fromStore.SetActiveLanguage","defaultLanguage","CurrencyService","fromStore.getAllCurrencies","fromStore.LoadCurrencies","fromStore.getActiveCurrency","fromStore.SetActiveCurrency","defaultCurrency","SiteContextOccModule","siteContextStoreConfigFactory","StateTransferType","SiteContextStoreModule","ENTITY_REMOVE_ACTION","ENTITY_REMOVE_ALL_ACTION","entityMeta","entityId","entityRemoveMeta","entityRemove","entityRemoveAllMeta","EntityRemoveAction","EntityRemoveAllAction","ENTITY_LOAD_ACTION","ENTITY_FAIL_ACTION","ENTITY_SUCCESS_ACTION","ENTITY_RESET_ACTION","entityLoadMeta","entityFailMeta","entitySuccessMeta","entityResetMeta","EntityLoadAction","EntityFailAction","EntitySuccessAction","EntityResetAction","initialEntityState","entityReducer","ids","partitionPayload","removed_1","newEntities","acc","cur","entityUpdates","subAction","entityLoaderReducer","entityStateSelector","ContextServiceMap","LANGUAGE_CONTEXT_ID","CURRENCY_CONTEXT_ID","BASE_SITE_CONTEXT_ID","serviceMapFactory","contextServiceMapProvider","defaultSiteContextConfigFactory","siteContext","persistence","defaultValue","SiteContextConfig","inititializeContext","langService","currService","contextServiceProviders","SiteContextParamsService","serviceMap","getContextParameters","contextConfig","getParamValues","param","getParamDefaultValue","getSiteContextService","getValue","unsubscribe","setValue","SiteContextUrlSerializer","siteContextParams","urlEncodingParameters","hasContextInRoutes","urlWithParams","urlExtractContextParameters","parsed","urlTreeIncludeContextParameters","paramId","segmentId","urlTreeExtractContextParameters","urlIncludeContextParameters","DefaultUrlSerializer","SiteContextRoutesHandler","serializer","subscription","Subscription","contextValues","isNavigating","routingParams","setContextParamsFromRoute","subscribeChanges","subscribeRouting","serialized","serializeUrl","replaceState","events","NavigationStart","NavigationEnd","NavigationError","NavigationCancel","ngOnDestroy","initSiteContextRoutesHandler","siteContextRoutesHandler","siteContextParamsProviders","UrlSerializer","SiteContextInterceptor","languageService","currencyService","activeLang","activeCurr","setParams","lang","curr","SiteContextModule","CartEffects","cartConnector","loadCart$","fromActions.LOAD_CART","loadCartParams","isMissingData","fromActions.LoadCartFail","fromActions.LoadCartSuccess","createCart$","fromActions.CREATE_CART","fromActions.CreateCartSuccess","fromActions.MergeCartSuccess","fromActions.CreateCartFail","mergeCart$","fromActions.MERGE_CART","currentCart","fromActions.CreateCart","CartEntryEffects","cartEntryConnector","addEntry$","fromActions.ADD_ENTRY","fromActions.AddEntrySuccess","fromActions.AddEntryFail","removeEntry$","fromActions.REMOVE_ENTRY","fromActions.RemoveEntrySuccess","fromActions.RemoveEntryFail","updateEntry$","fromActions.UPDATE_ENTRY","fromActions.UpdateEntrySuccess","fromActions.UpdateEntryFail","CartStoreModule","metaReducers$1","CartModule","CHECKOUT_FEATURE","LOAD_CARD_TYPES","LOAD_CARD_TYPES_FAIL","LOAD_CARD_TYPES_SUCCESS","LoadCardTypes","LoadCardTypesFail","LoadCardTypesSuccess","VERIFY_ADDRESS","VERIFY_ADDRESS_FAIL","VERIFY_ADDRESS_SUCCESS","CLEAR_ADDRESS_VERIFICATION_RESULTS","VerifyAddress","VerifyAddressFail","VerifyAddressSuccess","ClearAddressVerificationResults","CHECKOUT_CLEAR_MISCS_DATA","CheckoutClearMiscsData","deliveryMode","supported","selected","initialState$6","fromAction.ADD_DELIVERY_ADDRESS_SUCCESS","fromAction.SET_DELIVERY_ADDRESS_SUCCESS","fromAction.LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS","supportedModes","modes","mode","fromAction.SET_DELIVERY_MODE_SUCCESS","fromAction.CREATE_PAYMENT_DETAILS_SUCCESS","fromAction.SET_PAYMENT_DETAILS_SUCCESS","fromAction.CREATE_PAYMENT_DETAILS_FAIL","fromAction.PLACE_ORDER_SUCCESS","fromAction.CLEAR_CHECKOUT_DATA","fromAction.CLEAR_CHECKOUT_STEP","fromAction.CLEAR_SUPPORTED_DELIVERY_MODES","fromAction.CHECKOUT_CLEAR_MISCS_DATA","getDeliveryAddress","getDeliveryMode","getPaymentDetails","getOrderDetails","results","initialState$7","fromAction.VERIFY_ADDRESS_SUCCESS","fromAction.VERIFY_ADDRESS_FAIL","fromAction.CLEAR_ADDRESS_VERIFICATION_RESULTS","getAddressVerificationResults","initialState$8","fromAction.LOAD_CARD_TYPES_SUCCESS","cardTypesEntities","getCardTypesEntites","steps","fromCheckout.reducer","cardTypes","fromCardTypes.reducer","addressVerification","fromAddressVerification.reducer","getCheckoutState","clearCheckoutState","fromAction.CheckoutClearMiscsData","fromAction.ClearSupportedDeliveryModes","fromAction.ClearCheckoutData","getCheckoutStepsState","fromFeature.getCheckoutState","fromReducer.getDeliveryAddress","fromReducer.getDeliveryMode","getSupportedDeliveryModes","getSelectedCode","getSelectedDeliveryMode","fromReducer.getPaymentDetails","getCheckoutOrderDetails","fromReducer.getOrderDetails","getCardTypesState","fromReducer.getCardTypesEntites","getAllCardTypes","entites","getAddressVerificationResultsState","fromReducer.getAddressVerificationResults","GLOBAL_MESSAGE_FEATURE","ADD_MESSAGE","REMOVE_MESSAGE","REMOVE_MESSAGES_BY_TYPE","AddMessage","RemoveMessage","RemoveMessagesByType","getGlobalMessageState","getGlobalMessageEntities","initialState$9","fromAction.ADD_MESSAGE","message","text","msgs","fromAction.REMOVE_MESSAGE","msgType","msgIndex","messages","splice","_c","fromAction.REMOVE_MESSAGES_BY_TYPE","_d","fromGlobalMessage.reducer","GlobalMessageStoreModule","GlobalMessageService","MSG_TYPE_CONFIRMATION","MSG_TYPE_ERROR","MSG_TYPE_INFO","HttpErrorHandler","globalMessageService","UNKNOWN","BAD_REQUEST","FORBIDDEN","NOT_FOUND","CONFLICT","BAD_GATEWAY","GATEWAY_TIMEOUT","HttpErrorInterceptor","handlers","reverse","handleErrorResponse","handler","getResponseHandler","handleError","h","responseStatus","HttpResponseStatus","UnknownErrorHandler","GlobalMessageType","BadGatewayHandler","BadRequestHandler","getErrorMessage","errMsg","error_description","ConflictHandler","ForbiddenHandler","GatewayTimeoutHandler","NotFoundHandler","errorHandlers","httpErrorInterceptors","GlobalMessageModule","ADDRESSES_ENDPOINT","PAYMENT_DETAILS_ENDPOINT","OccUserService","loadUser","getUserEndpoint","updateUserDetails","username","user","verifyAddress","loadUserAddresses","addUserAddress","updateUserAddress","deleteUserAddress","loadUserPaymentMethods","deleteUserPaymentMethod","paymentMethodID","setDefaultUserPaymentMethod","titleCode","registerUser","requestForgotPasswordEmail","userEmailAddress","newPassword","removeUser","currentPassword","newUserId","oldPassword","FULL_PARAMS","OccOrderService","getOrderEndpoint","orderEndpoint","placeOrder","getOrders","pageSize","currentPage","sort","getOrder","orderUrl","UserOccModule","LOAD_BILLING_COUNTRIES","LOAD_BILLING_COUNTRIES_FAIL","LOAD_BILLING_COUNTRIES_SUCCESS","LoadBillingCountries","LoadBillingCountriesFail","LoadBillingCountriesSuccess","LOAD_DELIVERY_COUNTRIES","LOAD_DELIVERY_COUNTRIES_FAIL","LOAD_DELIVERY_COUNTRIES_SUCCESS","LoadDeliveryCountries","LoadDeliveryCountriesFail","LoadDeliveryCountriesSuccess","FORGOT_PASSWORD_EMAIL_REQUEST","FORGOT_PASSWORD_EMAIL_REQUEST_SUCCESS","FORGOT_PASSWORD_EMAIL_REQUEST_FAIL","ForgotPasswordEmailRequest","ForgotPasswordEmailRequestFail","ForgotPasswordEmailRequestSuccess","LOAD_ORDER_DETAILS","LOAD_ORDER_DETAILS_FAIL","LOAD_ORDER_DETAILS_SUCCESS","CLEAR_ORDER_DETAILS","LoadOrderDetails","LoadOrderDetailsFail","LoadOrderDetailsSuccess","ClearOrderDetails","USER_FEATURE","UPDATE_EMAIL_PROCESS_ID","UPDATE_PASSWORD_PROCESS_ID","UPDATE_USER_DETAILS_PROCESS_ID","REMOVE_USER_PROCESS_ID","USER_PAYMENT_METHODS","USER_ORDERS","USER_ADDRESSES","LOAD_USER_PAYMENT_METHODS","LOAD_USER_PAYMENT_METHODS_FAIL","LOAD_USER_PAYMENT_METHODS_SUCCESS","SET_DEFAULT_USER_PAYMENT_METHOD","SET_DEFAULT_USER_PAYMENT_METHOD_FAIL","SET_DEFAULT_USER_PAYMENT_METHOD_SUCCESS","DELETE_USER_PAYMENT_METHOD","DELETE_USER_PAYMENT_METHOD_FAIL","DELETE_USER_PAYMENT_METHOD_SUCCESS","LoadUserPaymentMethods","LoadUserPaymentMethodsFail","LoadUserPaymentMethodsSuccess","SetDefaultUserPaymentMethod","SetDefaultUserPaymentMethodFail","SetDefaultUserPaymentMethodSuccess","DeleteUserPaymentMethod","DeleteUserPaymentMethodFail","DeleteUserPaymentMethodSuccess","LOAD_REGIONS","LOAD_REGIONS_SUCCESS","LOAD_REGIONS_FAIL","LoadRegions","LoadRegionsFail","LoadRegionsSuccess","RESET_PASSWORD","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAIL","ResetPassword","ResetPasswordFail","ResetPasswordSuccess","LOAD_TITLES","LOAD_TITLES_FAIL","LOAD_TITLES_SUCCESS","LoadTitles","LoadTitlesFail","LoadTitlesSuccess","PROCESS_FEATURE","UPDATE_EMAIL","UPDATE_EMAIL_ERROR","UPDATE_EMAIL_SUCCESS","RESET_EMAIL","UpdateEmailAction","UpdateEmailSuccessAction","newUid","UpdateEmailErrorAction","ResetUpdateEmailAction","UPDATE_PASSWORD","UPDATE_PASSWORD_FAIL","UPDATE_PASSWORD_SUCCESS","UPDATE_PASSWORD_RESET","UpdatePassword","UpdatePasswordFail","UpdatePasswordSuccess","UpdatePasswordReset","LOAD_USER_ADDRESSES","LOAD_USER_ADDRESSES_FAIL","LOAD_USER_ADDRESSES_SUCCESS","ADD_USER_ADDRESS","ADD_USER_ADDRESS_FAIL","ADD_USER_ADDRESS_SUCCESS","UPDATE_USER_ADDRESS","UPDATE_USER_ADDRESS_FAIL","UPDATE_USER_ADDRESS_SUCCESS","DELETE_USER_ADDRESS","DELETE_USER_ADDRESS_FAIL","DELETE_USER_ADDRESS_SUCCESS","LoadUserAddresses","LoadUserAddressesFail","LoadUserAddressesSuccess","AddUserAddress","AddUserAddressFail","AddUserAddressSuccess","UpdateUserAddress","UpdateUserAddressFail","UpdateUserAddressSuccess","DeleteUserAddress","DeleteUserAddressFail","DeleteUserAddressSuccess","LOAD_USER_DETAILS","LOAD_USER_DETAILS_FAIL","LOAD_USER_DETAILS_SUCCESS","UPDATE_USER_DETAILS","UPDATE_USER_DETAILS_FAIL","UPDATE_USER_DETAILS_SUCCESS","RESET_USER_DETAILS","LoadUserDetails","LoadUserDetailsFail","LoadUserDetailsSuccess","UpdateUserDetails","UpdateUserDetailsFail","UpdateUserDetailsSuccess","userUpdates","ResetUpdateUserDetails","LOAD_USER_ORDERS","LOAD_USER_ORDERS_FAIL","LOAD_USER_ORDERS_SUCCESS","CLEAR_USER_ORDERS","LoadUserOrders","LoadUserOrdersFail","LoadUserOrdersSuccess","ClearUserOrders","REGISTER_USER","REGISTER_USER_FAIL","REGISTER_USER_SUCCESS","REMOVE_USER","REMOVE_USER_FAIL","REMOVE_USER_SUCCESS","REMOVE_USER_RESET","RegisterUser","RegisterUserFail","RegisterUserSuccess","RemoveUser","RemoveUserFail","RemoveUserSuccess","RemoveUserReset","CLEAR_MISCS_DATA","ClearMiscsData","initialState$a","fromAction.LOAD_BILLING_COUNTRIES_SUCCESS","countryEntities","initialState$b","fromAction.LOAD_DELIVERY_COUNTRIES_SUCCESS","fromAction.CLEAR_MISCS_DATA","order","initialState$c","fromOrderDetailsAction.LOAD_ORDER_DETAILS_SUCCESS","fromOrderDetailsAction.CLEAR_ORDER_DETAILS","initialState$d","fromPaymentMethodsAction.LOAD_USER_PAYMENT_METHODS_SUCCESS","fromPaymentMethodsAction.LOAD_USER_PAYMENT_METHODS_FAIL","initialState$e","fromAction.LOAD_REGIONS_SUCCESS","fromAction.LOAD_REGIONS","initialState$f","fromAction.RESET_PASSWORD_SUCCESS","initialState$g","fromAction.LOAD_TITLES_SUCCESS","titleEntities","initialState$h","fromActions.LOAD_USER_ADDRESSES_FAIL","fromActions.LOAD_USER_ADDRESSES_SUCCESS","initialState$i","fromUserDetailsAction.LOAD_USER_DETAILS_SUCCESS","fromUserDetailsAction.UPDATE_USER_DETAILS_SUCCESS","updatedDetails","pagination","sorts","initialState$j","fromUserOrdersAction.LOAD_USER_ORDERS_SUCCESS","fromUserOrdersAction.LOAD_USER_ORDERS_FAIL","account","fromUserDetailsReducer.reducer","addresses","fromAddressesReducer.reducer","billingCountries","fromBillingCountriesReducer.reducer","payments","fromPaymentReducer.reducer","fromUserOrdersReducer.reducer","fromOrderDetailsReducer.reducer","countries","fromDeliveryCountries.reducer","titles","fromTitlesReducer.reducer","regions","fromRegionsReducer.reducer","fromResetPasswordReducer.reducer","clearUserState","getUserState","getDetailsState","getAddressesLoaderState","getAddresses","getAddressesLoading","getPaymentMethodsState","getPaymentMethods","getPaymentMethodsLoading","getOrdersState","getOrdersLoaded","getTitlesState","getTitlesEntites","getAllTitles","getDeliveryCountriesState","getDeliveryCountriesEntites","getAllDeliveryCountries","countrySelectorFactory","getRegionsState","getAllRegions","getOrderState","getBillingCountriesState","getBillingCountriesEntites","getAllBillingCountries","getResetPassword","getProcessStateFactory","processId","getProcessState","entityState","getProcessLoadingFactory","loaderState","getProcessSuccessFactory","getProcessErrorFactory","UserService","fromStore.getDetails","fromStore.LoadUserDetails","userRegisterFormData","fromStore.RegisterUser","fromStore.RemoveUser","getRemoveUserResultLoading","fromStore.REMOVE_USER_PROCESS_ID","getRemoveUserResultError","getRemoveUserResultSuccess","resetRemoveUserProcessState","fromStore.RemoveUserReset","fromStore.getOrderDetails","loadOrderDetails","fromStore.LoadOrderDetails","clearOrderDetails","fromStore.ClearOrderDetails","getOrderHistoryList","fromStore.getOrdersState","orderListState","loadOrderList","getOrderHistoryListLoaded","fromStore.getOrdersLoaded","loadPaymentMethods","fromStore.LoadUserPaymentMethods","fromStore.getPaymentMethods","fromStore.getPaymentMethodsLoading","setPaymentMethodAsDefault","paymentMethodId","fromStore.SetDefaultUserPaymentMethod","deletePaymentMethod","fromStore.DeleteUserPaymentMethod","fromStore.LoadUserOrders","loadAddresses","fromStore.LoadUserAddresses","fromStore.AddUserAddress","setAddressAsDefault","fromStore.UpdateUserAddress","defaultAddress","fromStore.DeleteUserAddress","fromStore.getAddresses","fromStore.getAddressesLoading","getTitles","fromStore.getAllTitles","loadTitles","fromStore.LoadTitles","loadDeliveryCountries","fromStore.LoadDeliveryCountries","getDeliveryCountries","fromStore.getAllDeliveryCountries","getCountry","fromStore.countrySelectorFactory","loadRegions","countryIsoCode","fromStore.LoadRegions","getRegions","fromStore.getAllRegions","fromStore.getAllBillingCountries","loadBillingCountries","fromStore.LoadBillingCountries","clearOrderList","fromStore.ClearUserOrders","isPasswordReset","fromStore.getResetPassword","updatePersonalDetails","userDetails","fromStore.UpdateUserDetails","getUpdatePersonalDetailsResultLoading","getUpdatePersonalDetailsResultError","getUpdatePersonalDetailsResultSuccess","resetUpdatePersonalDetailsProcessingState","fromStore.ResetUpdateUserDetails","fromStore.ResetPassword","fromStore.ForgotPasswordEmailRequest","uid","fromStore.UpdateEmailAction","getUpdateEmailResultSuccess","getUpdateEmailResultError","getUpdateEmailResultLoading","resetUpdateEmailResultState","fromStore.ResetUpdateEmailAction","fromStore.UpdatePassword","getUpdatePasswordResultLoading","fromStore.UPDATE_PASSWORD_PROCESS_ID","getUpdatePasswordResultError","getUpdatePasswordResultSuccess","resetUpdatePasswordProcessState","fromStore.UpdatePasswordReset","ProcessStoreModule","ProcessModule","ENDPOINT_COUNTRIES","OccMiscsService","loadCardTypes","buildRegionsUrl","BillingCountriesEffect","occMiscsService","loadBillingCountries$","fromAction.LOAD_BILLING_COUNTRIES","fromAction.LoadBillingCountriesSuccess","fromAction.LoadBillingCountriesFail","DeliveryCountriesEffects","loadDeliveryCountries$","fromAction.LOAD_DELIVERY_COUNTRIES","fromAction.LoadDeliveryCountriesSuccess","fromAction.LoadDeliveryCountriesFail","ForgotPasswordEffects","occUserService","requestForgotPasswordEmail$","fromActions.FORGOT_PASSWORD_EMAIL_REQUEST","concatMap","fromActions.ForgotPasswordEmailRequestSuccess","fromActions.ForgotPasswordEmailRequestFail","OrderDetailsEffect","occOrderService","loadOrderDetails$","fromOrderDetailsAction.LOAD_ORDER_DETAILS","consignments","element","orderEntry","unconsignedEntries","fromOrderDetailsAction.LoadOrderDetailsSuccess","fromOrderDetailsAction.LoadOrderDetailsFail","UserPaymentMethodsEffects","loadUserPaymentMethods$","fromUserPaymentMethodsAction.LOAD_USER_PAYMENT_METHODS","paymentsList","fromUserPaymentMethodsAction.LoadUserPaymentMethodsSuccess","fromUserPaymentMethodsAction.LoadUserPaymentMethodsFail","setDefaultUserPaymentMethod$","fromUserPaymentMethodsAction.SET_DEFAULT_USER_PAYMENT_METHOD","fromUserPaymentMethodsAction.SetDefaultUserPaymentMethodSuccess","fromUserPaymentMethodsAction.LoadUserPaymentMethods","fromUserPaymentMethodsAction.SetDefaultUserPaymentMethodFail","deleteUserPaymentMethod$","fromUserPaymentMethodsAction.DELETE_USER_PAYMENT_METHOD","fromUserPaymentMethodsAction.DeleteUserPaymentMethodSuccess","fromUserPaymentMethodsAction.DeleteUserPaymentMethodFail","RegionsEffects","loadRegions$","fromActions.LOAD_REGIONS","countryCode","fromActions.LoadRegionsSuccess","fromActions.LoadRegionsFail","ResetPasswordEffects","resetPassword$","fromActions.RESET_PASSWORD","fromActions.ResetPasswordSuccess","fromActions.ResetPasswordFail","TitlesEffects","loadTitles$","fromAction.LOAD_TITLES","sortedTitles","sortTitles","fromAction.LoadTitlesSuccess","fromAction.LoadTitlesFail","UpdateEmailEffects","updateEmail$","fromUpdateEmailAction.UPDATE_EMAIL","fromUpdateEmailAction.UpdateEmailSuccessAction","fromUpdateEmailAction.UpdateEmailErrorAction","UpdatePasswordEffects","updatePassword$","fromActions.UPDATE_PASSWORD","fromActions.UpdatePasswordSuccess","fromActions.UpdatePasswordFail","UserAddressesEffects","userService","messageService","loadUserAddresses$","fromUserAddressesAction.LOAD_USER_ADDRESSES","addressesList","fromUserAddressesAction.LoadUserAddressesSuccess","fromUserAddressesAction.LoadUserAddressesFail","addUserAddress$","fromUserAddressesAction.ADD_USER_ADDRESS","fromUserAddressesAction.AddUserAddressSuccess","fromUserAddressesAction.AddUserAddressFail","updateUserAddress$","fromUserAddressesAction.UPDATE_USER_ADDRESS","fromUserAddressesAction.UpdateUserAddressSuccess","fromUserAddressesAction.UpdateUserAddressFail","deleteUserAddress$","fromUserAddressesAction.DELETE_USER_ADDRESS","fromUserAddressesAction.DeleteUserAddressSuccess","fromUserAddressesAction.DeleteUserAddressFail","showGlobalMessageOnAddSuccess$","fromUserAddressesAction.ADD_USER_ADDRESS_SUCCESS","showGlobalMessage","showGlobalMessageOnUpdateSuccess$","fromUserAddressesAction.UPDATE_USER_ADDRESS_SUCCESS","showGlobalMessageOnDeleteSuccess$","fromUserAddressesAction.DELETE_USER_ADDRESS_SUCCESS","UserDetailsEffects","loadUserDetails$","fromUserDetailsAction.LOAD_USER_DETAILS","fromUserDetailsAction.LoadUserDetailsSuccess","fromUserDetailsAction.LoadUserDetailsFail","updateUserDetails$","fromUserDetailsAction.UPDATE_USER_DETAILS","fromUserDetailsAction.UpdateUserDetailsSuccess","fromUserDetailsAction.UpdateUserDetailsFail","UserOrdersEffect","loadUserOrders$","fromUserOrdersAction.LOAD_USER_ORDERS","fromUserOrdersAction.LoadUserOrdersSuccess","fromUserOrdersAction.LoadUserOrdersFail","resetUserOrders$","fromUserOrdersAction.CLEAR_USER_ORDERS","UserRegisterEffects","registerUser$","fromActions.REGISTER_USER","_result","fromActions.RegisterUserSuccess","fromActions.RegisterUserFail","removeUser$","fromActions.REMOVE_USER","fromActions.RemoveUserSuccess","fromActions.RemoveUserFail","UserStoreModule","ReactiveFormsModule","metaReducers$3","UserModule","CheckoutEffects","cartDeliveryConnector","cartPaymentConnector","addDeliveryAddress$","fromActions.ADD_DELIVERY_ADDRESS","fromUserActions.LoadUserAddresses","fromActions.SetDeliveryAddress","fromActions.AddDeliveryAddressFail","setDeliveryAddress$","fromActions.SET_DELIVERY_ADDRESS","fromActions.SetDeliveryAddressSuccess","fromActions.SetDeliveryAddressFail","loadSupportedDeliveryModes$","fromActions.LOAD_SUPPORTED_DELIVERY_MODES","fromActions.LoadSupportedDeliveryModesSuccess","fromActions.LoadSupportedDeliveryModesFail","setDeliveryMode$","fromActions.SET_DELIVERY_MODE","selectedModeId","fromActions.SetDeliveryModeSuccess","fromActions.SetDeliveryModeFail","createPaymentDetails$","fromActions.CREATE_PAYMENT_DETAILS","fromUserActions.LoadUserPaymentMethods","fromActions.CreatePaymentDetailsSuccess","fromActions.CreatePaymentDetailsFail","setPaymentDetails$","fromActions.SET_PAYMENT_DETAILS","fromActions.SetPaymentDetailsSuccess","fromActions.SetPaymentDetailsFail","placeOrder$","fromActions.PLACE_ORDER","fromActions.PlaceOrderSuccess","fromActions.PlaceOrderFail","CardTypesEffects","loadCardTypes$","fromAction.LOAD_CARD_TYPES","fromAction.LoadCardTypesSuccess","fromAction.LoadCardTypesFail","AddressVerificationEffect","verifyAddress$","fromAction.VERIFY_ADDRESS","fromAction.VerifyAddressSuccess","fromAction.VerifyAddressFail","CheckoutService","checkoutStore","fromCheckoutStore.getSupportedDeliveryModes","fromCheckoutStore.getSelectedDeliveryMode","getSelectedDeliveryModeCode","fromCheckoutStore.getSelectedCode","getCardTypes","fromCheckoutStore.getAllCardTypes","fromCheckoutStore.getDeliveryAddress","fromCheckoutStore.getAddressVerificationResults","fromCheckoutStore.getPaymentDetails","fromCheckoutStore.getCheckoutOrderDetails","createAndSetAddress","actionAllowed","fromCheckoutStore.AddDeliveryAddress","loadSupportedDeliveryModes","fromCheckoutStore.LoadSupportedDeliveryModes","setDeliveryMode","fromCheckoutStore.SetDeliveryMode","loadSupportedCardTypes","fromCheckoutStore.LoadCardTypes","createPaymentDetails","fromCheckoutStore.CreatePaymentDetails","fromCheckoutStore.PlaceOrder","fromCheckoutStore.VerifyAddress","setDeliveryAddress","fromCheckoutStore.SetDeliveryAddress","setPaymentDetails","fromCheckoutStore.SetPaymentDetails","clearAddressVerificationResults","fromCheckoutStore.ClearAddressVerificationResults","clearCheckoutData","fromCheckoutStore.ClearCheckoutData","clearCheckoutStep","stepNumber","fromCheckoutStore.ClearCheckoutStep","CheckoutStoreModule","metaReducers$2","JSP_INCLUDE_CMS_COMPONENT_TYPE","CMS_FLEX_COMPONENT_TYPE","CmsConfig","CmsStructureConfig","INDEX","NOINDEX","FOLLOW","NOFOLLOW","CMS_PAGE_NORMALIZE","OccCmsPageAdapter","pageContext","fields","getPagesRequestParams","getPagesEndpoint","pageType","OccCmsPageNormalizer","normalizePageData","normalizePageSlotData","normalizePageComponentData","normalizeComponentData","page","loadTime","now","typeCode","title","pageId","template","slots","properties","contentSlots","contentSlot","slot","position","components","component","_e","_f","comp","flexType","CMS_COMPONENT_NORMALIZER","OccCmsComponentAdapter","getComponentEndPoint","loadList","requestParams","getComponentsRequestParams","idList","getComponentsEndpoint","getComponentRequestParams","catalogCode","CmsPageAdapter","ComponentMapperService","componentFactoryResolver","platform","missingComponents","loadedWebComponents","getType","componentConfig","cmsComponents","selector","getFactoryEntryByCode","alias","factory","from","getComponentTypeByCode","factoryEntry","getComponentFactoryByCode","isWebComponent","includes","initWebComponent","componentType","renderer","script","createElement","setAttribute","appendChild","onload","chainedOnload_1","ComponentFactoryResolver","CmsComponentAdapter","CmsOccModule","CmsStructureConfigService","cmsDataConfig","mergePageStructure","pageStructure","mergePage","mergeSlots","shouldIgnoreBackend","getPageFromConfig","ignoreBackend","getComponentFromConfig","componentId","getComponentById","getComponentsFromConfig","cmsStructure","pages","getComponentsByPosition","componentIds","CmsPageConnector","cmsPageAdapter","cmsStructureConfigService","loadFromConfig","mergeDefaultPageStructure","CmsComponentConnector","configuredComponent","getList","configuredComponents","missingIds","loadedComponents","CMS_FEATURE","NAVIGATION_DETAIL_ENTITY","COMPONENT_ENTITY","LOAD_PAGE_DATA","LOAD_PAGE_DATA_FAIL","LOAD_PAGE_DATA_SUCCESS","LoadPageData","LoadPageDataFail","LoadPageDataSuccess","LOAD_COMPONENT","LOAD_COMPONENT_FAIL","LOAD_COMPONENT_SUCCESS","GET_COMPONENET_FROM_PAGE","LoadComponent","LoadComponentFail","LoadComponentSuccess","GetComponentFromPage","cmp","LOAD_NAVIGATION_ITEMS","LOAD_NAVIGATION_ITEMS_FAIL","LOAD_NAVIGATION_ITEMS_SUCCESS","LoadNavigationItems","nodeId","LoadNavigationItemsFail","LoadNavigationItemsSuccess","getCmsState","getPageEntitiesSelector","pageData","getIndexByType","catalog","getPageComponentTypesSelector","componentTypes","Set","getPageState","getPageStateIndex","getIndex","getIndexEntity","getPageEntities","getPageData","getPageComponentTypes","currentSlotSelectorFactory","getComponentEntitiesSelector","getComponentState","getComponentEntities","componentStateSelectorFactory","getNavigationEntryItemState","navigation","getSelectedNavigationEntryItemState","nodes","itemsSelectorFactory","itemState","SERVER_BASE_URL_META_TAG_NAME","SERVER_BASE_URL_META_TAG_PLACEHOLDER","initialState$k","fromNavigationItem.LOAD_NAVIGATION_ITEMS_SUCCESS","newItem","compItems","initialState$l","fromAction.LOAD_PAGE_DATA_SUCCESS","initialState$m","fromAction.LOAD_PAGE_DATA_FAIL","fromPageReducer.reducer","fromPageIndexReducer.reducer","fromNavigation.reducer","clearCmsState","PageContext","TranslateUrlPipe","transform","Pipe","UrlTranslationModule","PageEffects","cmsPageConnector","refreshPage$","pageActions.LoadPageData","loadPageData$","pageActions.LOAD_PAGE_DATA","pageActions.LoadPageDataSuccess","componentActions.GetComponentFromPage","pageActions.LoadPageDataFail","ComponentEffects","cmsComponentLoader","loadComponent$","componentActions.LOAD_COMPONENT","groupBy","group","componentActions.LoadComponentSuccess","componentActions.LoadComponentFail","NavigationEntryItemEffects","cmsComponentConnector","loadNavigationItems$","navigationItemActions.LOAD_NAVIGATION_ITEMS","getIdListByItemType","items","navigationItemActions.LoadNavigationItemsSuccess","navigationItemActions.LoadNavigationItemsFail","pageIds","mediaIds","itemList","superType","CmsService","_launchInSmartEdit","isLaunchInSmartEdit","getCurrentPage","fromStore.getPageData","getComponentData","fromStore.componentStateSelectorFactory","withLatestFrom","componentState","fromStore.LoadComponent","multicast","ReplaySubject","refCount","getContentSlot","fromStore.currentSlotSelectorFactory","getNavigationEntryItems","navigationNodeUid","fromStore.itemsSelectorFactory","loadNavigationItems","rootUid","fromStore.LoadNavigationItems","refreshLatestPage","fromStore.LoadPageData","refreshComponent","fromStore.getPageComponentTypes","hasPage","fromStore.getIndexEntity","PageMetaResolver","getScore","score","pageTemplate","PageMetaService","resolvers","cms","getMeta","metaResolver","getMetaResolver","matchingResolvers","resolver","a","cmsStoreConfigFactory","CmsStoreModule","metaReducers$4","ContentPageMetaResolver","resolveTitle","CmsPageTitleModule","CmsModule","DynamicAttributeService","addDynamicAttributes","groupProps","propName","propValue","classItem","classList","toLowerCase","CheckoutPageMetaResolver","cartService","combineLatest","resolveRobots","robots","PageRobotsMeta","CheckoutModule","CxApiModule","defaultOccProductConfig","productReviews","productSearch","productSuggestions","ProductReviewsAdapter","PRODUCT_REVIEW_NORMALIZER","PRODUCT_REVIEW_SERIALIZER","OccProductReviewsAdapter","maxCount","review","URLSearchParams","headline","comment","rating","OccProductAdapter","ProductAdapter","ProductImageNormalizer","images","normalize","source_1","source_1_1","image","isList","imageType","imageContainer","galleryIndex","format","ProductReferenceNormalizer","productReferences","references","reference","referenceType","ProductSearchAdapter","PRODUCT_SEARCH_PAGE_NORMALIZER","PRODUCT_SUGGESTION_NORMALIZER","DEFAULT_SEARCH_CONFIG","OccProductSearchAdapter","searchConfig","getSearchEndpoint","loadSuggestions","term","getSuggestionEndpoint","sortCode","max","OccProductSearchPageNormalizer","converterService","products","ProductOccModule","PRODUCT_FEATURE","PRODUCT_DETAIL_ENTITY","SEARCH_PRODUCTS","SEARCH_PRODUCTS_FAIL","SEARCH_PRODUCTS_SUCCESS","GET_PRODUCT_SUGGESTIONS","GET_PRODUCT_SUGGESTIONS_SUCCESS","GET_PRODUCT_SUGGESTIONS_FAIL","CLEAN_PRODUCT_SEARCH","SearchProducts","auxiliary","SearchProductsFail","SearchProductsSuccess","GetProductSuggestions","GetProductSuggestionsSuccess","GetProductSuggestionsFail","CleanProductSearchState","LOAD_PRODUCT","LOAD_PRODUCT_FAIL","LOAD_PRODUCT_SUCCESS","LoadProduct","LoadProductFail","LoadProductSuccess","LOAD_PRODUCT_REVIEWS","LOAD_PRODUCT_REVIEWS_FAIL","LOAD_PRODUCT_REVIEWS_SUCCESS","POST_PRODUCT_REVIEW","POST_PRODUCT_REVIEW_FAIL","POST_PRODUCT_REVIEW_SUCCESS","LoadProductReviews","LoadProductReviewsFail","LoadProductReviewsSuccess","PostProductReview","PostProductReviewFail","PostProductReviewSuccess","getProductsState","getProductState","getSelectedProductStateFactory","getSelectedProductLoadingFactory","productState","getSelectedProductSuccessFactory","getSelectedProductErrorFactory","getAllProductCodes","suggestions","auxResults","initialState$n","fromProductsSearch.SEARCH_PRODUCTS_SUCCESS","res","fromProductsSearch.GET_PRODUCT_SUGGESTIONS_SUCCESS","fromProductsSearch.CLEAN_PRODUCT_SEARCH","getSearchResults","getAuxSearchResults","getProductSuggestions","getProductsSearchState","fromProductSearch.getSearchResults","fromProductSearch.getAuxSearchResults","fromProductSearch.getProductSuggestions","getProductReviewsState","reviews","getSelectedProductReviewsFactory","reviewData","list","initialState$o","fromProductReviews.LOAD_PRODUCT_REVIEWS_SUCCESS","fromProductsSearch.reducer","fromProductReviews.reducer","clearProductsState","ProductSearchConnector","getSuggestions","ProductsSearchEffects","productSearchConnector","searchProducts$","productsSearchActions.SEARCH_PRODUCTS","queryText","productsSearchActions.SearchProductsSuccess","productsSearchActions.SearchProductsFail","getProductSuggestions$","productsSearchActions.GET_PRODUCT_SUGGESTIONS","productsSearchActions.GetProductSuggestionsSuccess","productsSearchActions.GetProductSuggestionsFail","ProductConnector","ProductEffects","productConnector","loadProduct$","actions.LOAD_PRODUCT","actions.LoadProductSuccess","actions.LoadProductFail","ProductReviewsConnector","ProductReviewsEffects","productReviewsConnector","loadProductReviews$","productReviewsActions.LOAD_PRODUCT_REVIEWS","productReviewsActions.LoadProductReviewsSuccess","_error","productReviewsActions.LoadProductReviewsFail","postProductReview","productReviewsActions.POST_PRODUCT_REVIEW","reviewResponse","productReviewsActions.PostProductReviewSuccess","productReviewsActions.PostProductReviewFail","ProductService","fromStore.getSelectedProductStateFactory","fromStore.LoadProduct","isLoading","fromStore.getSelectedProductLoadingFactory","isSuccess","fromStore.getSelectedProductSuccessFactory","fromStore.getSelectedProductErrorFactory","reload","ProductSearchService","createUrlTree","preserveFragment","fromStore.SearchProducts","fromStore.getSearchResults","clearSearchResults","fromStore.CleanProductSearchState","fromStore.getAuxSearchResults","getSearchSuggestions","fromStore.getProductSuggestions","searchAuxiliary","fromStore.GetProductSuggestions","ProductReviewService","getByProductCode","fromStore.getSelectedProductReviewsFactory","fromStore.LoadProductReviews","fromStore.PostProductReview","productStoreConfigFactory","ProductStoreModule","metaReducers$5","ProductPageMetaResolver","productService","resolveHeading","resolveDescription","resolveImage","heading","description","resolveFirstCategory","resolveManufacturer","summary","PRIMARY","zoom","firstCategory","categories","manufacturer","SearchPageMetaResolver","productSearchService","total$","totalResults","query$","total","CategoryPageMetaResolver","hasProductListComponent","breadcrumbs","facetValueName","pageTitleResolvers","ProductModule","I18nConfig","DatePipe","timezone","getLang","getActiveLang","getLocaleId","reportMissingLocaleData","NativeDatePipe","TranslationService","TranslatePipe","cd","lastKey","shallowEqualObjects","objA","objB","aKeys","bKeys","aKeysLen","lastOptions","markForCheck","pure","ChangeDetectorRef","TranslationChunkService","KEY_SEPARATOR","getChunkNameForKey","mainKey","chunk","getChunkFromConfig","i18n","chunks","i18nextInit","i18nextConfig","ns","fallbackLng","fallbackLang","debug","i18next","use","i18nextXhrBackend","i18nextAddTranslations","resources","chunkName","addResourceBundle","syncI18nextWithSiteContext","changeLanguage","i18nextProviders","defaultI18nConfig","common","spinner","header","searchBox","cartDetails","cartItems","orderCost","addressForm","addressCard","paymentForm","paymentMethods","checkoutAddress","checkoutOrderConfirmation","checkoutReview","checkoutShipping","orderHistory","productDetails","productList","productFacetNavigation","productSummary","productReview","addToCart","forgottenPassword","loginForm","updateEmailForm","updatePasswordForm","updateProfileForm","storeFinder","pwa","I18nextTranslationService","translationChunk","NON_BREAKING_SPACE","String","fromCharCode","NAMESPACE_SEPARATOR","whitespaceUntilLoaded","namespacedKey","getNamespacedKey","subscriber","loadNamespaces","reportMissingKey","getFallbackValue","on","off","loadChunks","chunkNames","I18nModule","mockTranslate","optionsString","optionName","MockTranslatePipe","MockTranslationService","_whitespaceUntilLoaded","complete","_chunks","MockDatePipe","I18nTestingModule","CxApiService","auth","routing","SmartEditService","cmsService","getPreviewPage","getCmsTicket","addPageContract","window_1","smartedit","renderComponent","parentId","reprocessPage","_cmsTicketId","takeWhile","launchInSmartEdit","cmsPage","goToPreviewPage","previousContract_1","attr","classes","CmsTicketInterceptor","cmsTicketId","SmartEditModule","OccStoreFinderService","findStores","longitudeLatitude","callOccFindStores","storesCount","storeCountUrl","getStoresEndpoint","findStoreById","storeId","storeDetailsUrl","longitude","latitude","StoreFinderOccModule","StoreFinderConfig","STORE_FINDER_FEATURE","STORE_FINDER_DATA","ON_HOLD","FIND_STORES","FIND_STORES_FAIL","FIND_STORES_SUCCESS","FIND_STORE_BY_ID","FIND_STORE_BY_ID_FAIL","FIND_STORE_BY_ID_SUCCESS","OnHold","FindStores","FindStoresFail","FindStoresSuccess","FindStoreById","FindStoreByIdFail","FindStoreByIdSuccess","VIEW_ALL_STORES","VIEW_ALL_STORES_FAIL","VIEW_ALL_STORES_SUCCESS","ViewAllStores","ViewAllStoresFail","ViewAllStoresSuccess","getStoreFinderState","getFindStoresState","storesState","getFindStoresEntities","getStoresLoading","getViewAllStoresState","viewAllStores","getViewAllStoresEntities","getViewAllStoresLoading","ExternalJsFileLoader","src","parseParams","async","defer","addEventListener","head","keysArray","StoreDataService","weekDays","0","1","2","3","4","5","6","getStoreLatitude","geoPoint","getStoreLongitude","getStoreClosingTime","requestedDaySchedule","getSchedule","closed","closingHour","closingTime","formattedHour","closingMinute","minute","valueOf","setHours","setMinutes","getStoreOpeningTime","openingHour","openingTime","openingMinutes","isStoreOpen","openingDate","closingDate","weekday","getDay","openingHours","weekDayOpeningList","weekDayOpeningListItem","weekDay","GoogleMapRendererService","externalJsFileLoader","storeDataService","googleMap","renderMap","mapElement","locations","selectMarkerHandler","googleMaps","apiUrl","apiKey","drawMap","centerMap","latitute","panTo","lat","lng","setZoom","selectedMarkerScale","defineMapCenter","google","maps","LatLng","initMap","mapCenter","mapProp","center","scale","mapTypeId","MapTypeId","ROADMAP","createMarkers","markers","marker","Marker","setMap","addListener","setAnimation","Animation","BOUNCE","FindStoresEffect","occStoreFinderService","findStores$","fromAction.FIND_STORES","geolocation","stores","fromAction.FindStoresSuccess","fromAction.FindStoresFail","findStoreById$","fromAction.FIND_STORE_BY_ID","fromAction.FindStoreByIdSuccess","fromAction.FindStoreByIdFail","ViewAllStoresEffect","viewAllStores$","fromAction.VIEW_ALL_STORES","fromAction.ViewAllStoresSuccess","fromAction.ViewAllStoresFail","StoreFinderService","geolocationWatchId","fromStore.getStoresLoading","fromStore.getFindStoresEntities","fromStore.getViewAllStoresLoading","fromStore.getViewAllStoresEntities","findStoresAction","fromStore.FindStores","clearWatchGeolocation","fromStore.ViewAllStores","viewStoreById","fromStore.FindStoreById","useMyLocation","fromStore.OnHold","navigator","watchPosition","pos","coords","callbackAction","clearWatch","StoreFinderStoreModule","defaultStoreFinderConfig","ɵ0$3","StoreFinderCoreModule","StripHtmlPipe","productClone","replace","StripHtmlModule","PipeModule","UtilModule","CMSTabParagraphComponent","serverConfigFromMetaTagFactory","getMetaTagContent","metaTag","getTag","BUY","FROM","GALLERY","BASIC","DEFAULT","FULL","All","Product","Order","codes","entityValueSelector","entityLoadingSelector","entityErrorSelector","entitySuccessSelector","entitySelector","ofLoaderLoad","ofLoaderFail","ofLoaderSuccess"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export abstract class ServerConfig {\n  production?: boolean;\n}\n\nexport const defaultServerConfig: ServerConfig = {};\n","function isObject(item) {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\nexport function deepMerge(target = {}, ...sources) {\n  if (!sources.length) {\n    return target;\n  }\n  const source = sources.shift() || {};\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) {\n          Object.assign(target, { [key]: {} });\n        }\n        deepMerge(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return deepMerge(target, ...sources);\n}\n","import { InjectionToken, Provider } from '@angular/core';\n\nexport const ConfigValidatorToken = new InjectionToken(\n  'ConfigurationValidator'\n);\n\n/**\n * ConfigValidator is used to validate config and display warning messages in development mode.\n *\n * In case of failed validation, should return a string with error message.\n */\nexport type ConfigValidator = (config: any) => string | void;\n\n/**\n * Use to probide config validation at app bootstrap (when all config chunks are merged)\n *\n * @param configValidator\n */\nexport function provideConfigValidator(\n  configValidator: ConfigValidator\n): Provider {\n  return {\n    provide: ConfigValidatorToken,\n    useValue: configValidator,\n    multi: true,\n  };\n}\n\nexport function validateConfig(\n  config: any,\n  configValidators: ConfigValidator[]\n) {\n  for (const validate of configValidators) {\n    const warning = validate(config);\n    if (warning) {\n      console.warn(warning);\n    }\n  }\n}\n","import {\n  InjectionToken,\n  ModuleWithProviders,\n  NgModule,\n  Provider,\n  Optional,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  defaultServerConfig,\n  ServerConfig,\n} from './server-config/server-config';\nimport { deepMerge } from './utils/deep-merge';\nimport {\n  ConfigValidator,\n  ConfigValidatorToken,\n  validateConfig,\n} from './utils/config-validator';\n\n/**\n * Global Configuration injection token, can be used to inject configuration to any part of the app\n */\nexport const Config = new InjectionToken('Configuration');\n\n/**\n * Config chunk token, can be used to provide configuration chunk and contribute to the global configuration object.\n * Should not be used directly, use `provideConfig` or import `ConfigModule.withConfig` instead.\n */\nexport const ConfigChunk = new InjectionToken('ConfigurationChunk');\n\n/**\n * Helper function to provide configuration chunk using ConfigChunk token\n *\n * @param config Config object to merge with the global configuration\n */\nexport function provideConfig(config: any = {}): Provider {\n  return { provide: ConfigChunk, useValue: config, multi: true };\n}\n\n/**\n * Helper function to provide configuration with factory function, using ConfigChunk token\n *\n * @param configFactory Factory Function that will generate config object\n * @param deps Optional dependencies to a factory function\n */\nexport function provideConfigFactory(\n  configFactory: Function,\n  deps?: any[]\n): Provider {\n  return {\n    provide: ConfigChunk,\n    useFactory: configFactory,\n    multi: true,\n    deps: deps,\n  };\n}\n\n/**\n * Factory function that merges all configurations chunks. Should not be used directly without explicit reason.\n *\n */\nexport function configurationFactory(\n  configChunks: any[],\n  configValidators: ConfigValidator[]\n) {\n  const config = deepMerge({}, ...configChunks);\n  if (!config.production) {\n    validateConfig(config, configValidators || []);\n  }\n  return config;\n}\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [],\n})\nexport class ConfigModule {\n  /**\n   * Import ConfigModule and contribute config to the global configuration\n   *\n   * @param config Config object to merge with the global configuration\n   */\n  static withConfig(config: object): ModuleWithProviders {\n    return {\n      ngModule: ConfigModule,\n      providers: [provideConfig(config)],\n    };\n  }\n\n  /**\n   * Import ConfigModule and contribute config to the global configuration using factory function\n   *\n   * @param configFactory Factory function that will generate configuration\n   * @param deps Optional dependencies to factory function\n   */\n  static withConfigFactory(\n    configFactory: Function,\n    deps?: any[]\n  ): ModuleWithProviders {\n    return {\n      ngModule: ConfigModule,\n      providers: [provideConfigFactory(configFactory, deps)],\n    };\n  }\n\n  /**\n   * Module with providers, should be imported only once, if possible, at the root of the app.\n   *\n   * @param config\n   */\n  static forRoot(config: any = {}): ModuleWithProviders {\n    return {\n      ngModule: ConfigModule,\n      providers: [\n        { provide: ServerConfig, useExisting: Config },\n        provideConfig(defaultServerConfig),\n        provideConfig(config),\n        {\n          provide: Config,\n          useFactory: configurationFactory,\n          deps: [ConfigChunk, [new Optional(), ConfigValidatorToken]],\n        },\n      ],\n    };\n  }\n}\n","import { Action } from '@ngrx/store';\nimport { NavigationExtras } from '@angular/router';\n\nexport const GO = '[Router] Go';\nexport const GO_BY_URL = '[Router] Go By Url';\nexport const BACK = '[Router] Back';\nexport const FORWARD = '[Router] Forward';\nexport const SAVE_REDIRECT_URL = '[Router] Save Redirect Url';\nexport const CLEAR_REDIRECT_URL = '[Router] Clear Redirect Url';\n\nexport class Go implements Action {\n  readonly type = GO;\n  constructor(\n    public payload: {\n      path: string[];\n      query?: object;\n      extras?: NavigationExtras;\n    }\n  ) {}\n}\n\nexport class GoByUrl implements Action {\n  readonly type = GO_BY_URL;\n  constructor(public payload: string) {}\n}\n\nexport class Back implements Action {\n  readonly type = BACK;\n}\n\nexport class Forward implements Action {\n  readonly type = FORWARD;\n}\n\nexport class SaveRedirectUrl implements Action {\n  readonly type = SAVE_REDIRECT_URL;\n  constructor(public payload: string) {}\n}\n\nexport class ClearRedirectUrl implements Action {\n  readonly type = CLEAR_REDIRECT_URL;\n}\n\nexport type Actions =\n  | Go\n  | GoByUrl\n  | Back\n  | Forward\n  | SaveRedirectUrl\n  | ClearRedirectUrl;\n","export const ROUTING_FEATURE = 'router';\n","/*\n * Code generated by Microsoft (R) AutoRest Code Generator.\n * Changes may cause incorrect behavior and will be lost if the code is\n * regenerated.\n */\n\n/**\n *\n * An interface representing Country.\n */\nexport interface Country {\n  /**\n   * @member {string} [isocode]\n   */\n  isocode?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n}\n\n/**\n *\n * An interface representing Region.\n */\nexport interface Region {\n  /**\n   * @member {string} [countryIso]\n   */\n  countryIso?: string;\n  /**\n   * @member {string} [isocode]\n   */\n  isocode?: string;\n  /**\n   * @member {string} [isocodeShort]\n   */\n  isocodeShort?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n}\n\n/**\n *\n * An interface representing RegionList.\n */\nexport interface RegionList {\n  /**\n   * @member {Region[]} [regions]\n   */\n  regions?: Region[];\n}\n\n/**\n *\n * An interface representing Address.\n */\nexport interface Address {\n  /**\n   * @member {string} [companyName]\n   */\n  companyName?: string;\n  /**\n   * @member {Country} [country]\n   */\n  country?: Country;\n  /**\n   * @member {boolean} [defaultAddress]\n   */\n  defaultAddress?: boolean;\n  /**\n   * @member {string} [email]\n   */\n  email?: string;\n  /**\n   * @member {string} [firstName]\n   */\n  firstName?: string;\n  /**\n   * @member {string} [formattedAddress]\n   */\n  formattedAddress?: string;\n  /**\n   * @member {string} [id]\n   */\n  id?: string;\n  /**\n   * @member {string} [lastName]\n   */\n  lastName?: string;\n  /**\n   * @member {string} [line1]\n   */\n  line1?: string;\n  /**\n   * @member {string} [line2]\n   */\n  line2?: string;\n  /**\n   * @member {string} [phone]\n   */\n  phone?: string;\n  /**\n   * @member {string} [postalCode]\n   */\n  postalCode?: string;\n  /**\n   * @member {Region} [region]\n   */\n  region?: Region;\n  /**\n   * @member {boolean} [shippingAddress]\n   */\n  shippingAddress?: boolean;\n  /**\n   * @member {string} [title]\n   */\n  title?: string;\n  /**\n   * @member {string} [titleCode]\n   */\n  titleCode?: string;\n  /**\n   * @member {string} [town]\n   */\n  town?: string;\n  /**\n   * @member {boolean} [visibleInAddressBook]\n   */\n  visibleInAddressBook?: boolean;\n}\n\n/**\n *\n * An interface representing AddressList.\n */\nexport interface AddressList {\n  /**\n   * @member {Address[]} [addresses]\n   */\n  addresses?: Address[];\n}\n\n/**\n *\n * An interface representing ErrorModel.\n * Error message\n *\n */\nexport interface ErrorModel {\n  /**\n   * @member {string} [message] Descriptive, human readable error message.\n   */\n  message?: string;\n  /**\n   * @member {string} [reason] Additional classification specific for each\n   * error type e.g. 'noStock'.\n   */\n  reason?: string;\n  /**\n   * @member {string} [subject] Identifier of the related object e.g. '1'.\n   */\n  subject?: string;\n  /**\n   * @member {string} [subjectType] Type of the object related to the error\n   * e.g. 'entry'.\n   */\n  subjectType?: string;\n  /**\n   * @member {string} [type] Type of the error e.g. 'LowStockError'.\n   */\n  type?: string;\n}\n\n/**\n *\n * An interface representing ErrorList.\n * List of errors\n *\n */\nexport interface ErrorList {\n  /**\n   * @member {ErrorModel[]} [errors]\n   */\n  errors?: ErrorModel[];\n}\n\n/**\n *\n * An interface representing AddressValidation.\n */\nexport interface AddressValidation {\n  /**\n   * @member {string} [decision]\n   */\n  decision?: string;\n  /**\n   * @member {ErrorList} [errors]\n   */\n  errors?: ErrorList;\n  /**\n   * @member {Address[]} [suggestedAddresses]\n   */\n  suggestedAddresses?: Address[];\n}\n\n/**\n *\n * An interface representing Price.\n */\nexport interface Price {\n  /**\n   * @member {string} [currencyIso]\n   */\n  currencyIso?: string;\n  /**\n   * @member {string} [formattedValue]\n   */\n  formattedValue?: string;\n  /**\n   * @member {number} [maxQuantity]\n   */\n  maxQuantity?: number;\n  /**\n   * @member {number} [minQuantity]\n   */\n  minQuantity?: number;\n  /**\n   * @member {PriceType} [priceType] Possible values include: 'BUY', 'FROM'\n   */\n  priceType?: PriceType;\n  /**\n   * @member {number} [value]\n   */\n  value?: number;\n}\n\n/**\n *\n * An interface representing Stock.\n */\nexport interface Stock {\n  /**\n   * @member {number} [stockLevel]\n   */\n  stockLevel?: number;\n  /**\n   * @member {string} [stockLevelStatus]\n   */\n  stockLevelStatus?: string;\n}\n\n/**\n *\n * An interface representing Image.\n */\nexport interface Image {\n  /**\n   * @member {string} [altText]\n   */\n  altText?: string;\n  /**\n   * @member {string} [format]\n   */\n  format?: string;\n  /**\n   * @member {number} [galleryIndex]\n   */\n  galleryIndex?: number;\n  /**\n   * @member {ImageType} [imageType] Possible values include: 'PRIMARY',\n   * 'GALLERY'\n   */\n  imageType?: ImageType;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing VariantOptionQualifier.\n */\nexport interface VariantOptionQualifier {\n  /**\n   * @member {Image} [image]\n   */\n  image?: Image;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [qualifier]\n   */\n  qualifier?: string;\n  /**\n   * @member {string} [value]\n   */\n  value?: string;\n}\n\n/**\n *\n * An interface representing VariantOption.\n */\nexport interface VariantOption {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Price} [priceData]\n   */\n  priceData?: Price;\n  /**\n   * @member {Stock} [stock]\n   */\n  stock?: Stock;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n  /**\n   * @member {VariantOptionQualifier[]} [variantOptionQualifiers]\n   */\n  variantOptionQualifiers?: VariantOptionQualifier[];\n}\n\n/**\n *\n * An interface representing BaseOption.\n */\nexport interface BaseOption {\n  /**\n   * @member {VariantOption[]} [options]\n   */\n  options?: VariantOption[];\n  /**\n   * @member {VariantOption} [selected]\n   */\n  selected?: VariantOption;\n  /**\n   * @member {string} [variantType]\n   */\n  variantType?: string;\n}\n\n/**\n *\n * An interface representing SearchQuery.\n */\nexport interface SearchQuery {\n  /**\n   * @member {string} [value]\n   */\n  value?: string;\n}\n\n/**\n *\n * An interface representing SearchState.\n */\nexport interface SearchState {\n  /**\n   * @member {SearchQuery} [query]\n   */\n  query?: SearchQuery;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing Breadcrumb.\n */\nexport interface Breadcrumb {\n  /**\n   * @member {string} [facetCode]\n   */\n  facetCode?: string;\n  /**\n   * @member {string} [facetName]\n   */\n  facetName?: string;\n  /**\n   * @member {string} [facetValueCode]\n   */\n  facetValueCode?: string;\n  /**\n   * @member {string} [facetValueName]\n   */\n  facetValueName?: string;\n  /**\n   * @member {SearchState} [removeQuery]\n   */\n  removeQuery?: SearchState;\n  /**\n   * @member {SearchState} [truncateQuery]\n   */\n  truncateQuery?: SearchState;\n}\n\n/**\n *\n * An interface representing Component.\n */\nexport interface Component {\n  /**\n   * @member {Date} [modifiedtime]\n   */\n  modifiedtime?: Date;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {any} [otherProperties]\n   */\n  otherProperties?: any;\n  /**\n   * @member {string} [typeCode]\n   */\n  typeCode?: string;\n  /**\n   * @member {string} [uid]\n   */\n  uid?: string;\n}\n\n/**\n *\n * An interface representing ComponentList.\n */\nexport interface ComponentList {\n  /**\n   * @member {Component[]} [component]\n   */\n  component?: Component[] | any[];\n}\n\n/**\n *\n * An interface representing ContentSlot.\n */\nexport interface ContentSlot {\n  /**\n   * @member {ComponentList} [components]\n   */\n  components?: ComponentList;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [position]\n   */\n  position?: string;\n  /**\n   * @member {string} [slotId]\n   */\n  slotId?: string;\n  /**\n   * @member {boolean} [slotShared]\n   */\n  slotShared?: boolean;\n  /**\n   * @member {string} [slotStatus]\n   */\n  slotStatus?: string;\n}\n\n/**\n *\n * An interface representing ContentSlotList.\n */\nexport interface ContentSlotList {\n  /**\n   * @member {ContentSlot[]} [contentSlot]\n   */\n  contentSlot?: ContentSlot[];\n}\n\n/**\n *\n * An interface representing CMSPage.\n */\nexport interface CMSPage {\n  /**\n   * @member {ContentSlotList} [contentSlots]\n   */\n  contentSlots?: ContentSlotList;\n  /**\n   * @member {boolean} [defaultPage]\n   */\n  defaultPage?: boolean;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [template]\n   */\n  template?: string;\n  /**\n   * @member {string} [title]\n   */\n  title?: string;\n  /**\n   * @member {string} [typeCode]\n   */\n  typeCode?: string;\n  /**\n   * @member {string} [uid]\n   */\n  uid?: string;\n}\n\n/**\n *\n * An interface representing CardType.\n */\nexport interface CardType {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n}\n\n/**\n *\n * An interface representing CardTypeList.\n */\nexport interface CardTypeList {\n  /**\n   * @member {CardType[]} [cardTypes]\n   */\n  cardTypes?: CardType[];\n}\n\n/**\n *\n * An interface representing PromotionOrderEntryConsumed.\n */\nexport interface PromotionOrderEntryConsumed {\n  /**\n   * @member {number} [adjustedUnitPrice]\n   */\n  adjustedUnitPrice?: number;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {number} [orderEntryNumber]\n   */\n  orderEntryNumber?: number;\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n}\n\n/**\n *\n * An interface representing PromotionRestriction.\n */\nexport interface PromotionRestriction {\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {string} [restrictionType]\n   */\n  restrictionType?: string;\n}\n\n/**\n *\n * An interface representing Promotion.\n */\nexport interface Promotion {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string[]} [couldFireMessages]\n   */\n  couldFireMessages?: string[];\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {boolean} [enabled]\n   */\n  enabled?: boolean;\n  /**\n   * @member {Date} [endDate]\n   */\n  endDate?: Date;\n  /**\n   * @member {string[]} [firedMessages]\n   */\n  firedMessages?: string[];\n  /**\n   * @member {number} [priority]\n   */\n  priority?: number;\n  /**\n   * @member {Image} [productBanner]\n   */\n  productBanner?: Image;\n  /**\n   * @member {string} [promotionGroup]\n   */\n  promotionGroup?: string;\n  /**\n   * @member {string} [promotionType]\n   */\n  promotionType?: string;\n  /**\n   * @member {PromotionRestriction[]} [restrictions]\n   */\n  restrictions?: PromotionRestriction[];\n  /**\n   * @member {Date} [startDate]\n   */\n  startDate?: Date;\n  /**\n   * @member {string} [title]\n   */\n  title?: string;\n}\n\n/**\n *\n * An interface representing PromotionResult.\n */\nexport interface PromotionResult {\n  /**\n   * @member {PromotionOrderEntryConsumed[]} [consumedEntries]\n   */\n  consumedEntries?: PromotionOrderEntryConsumed[];\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {Promotion} [promotion]\n   */\n  promotion?: Promotion;\n}\n\n/**\n *\n * An interface representing Currency.\n */\nexport interface Currency {\n  /**\n   * @member {boolean} [active]\n   */\n  active?: boolean;\n  /**\n   * @member {string} [isocode]\n   */\n  isocode?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [symbol]\n   */\n  symbol?: string;\n}\n\n/**\n *\n * An interface representing Voucher.\n */\nexport interface Voucher {\n  /**\n   * @member {Price} [appliedValue]\n   */\n  appliedValue?: Price;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Currency} [currency]\n   */\n  currency?: Currency;\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {boolean} [freeShipping]\n   */\n  freeShipping?: boolean;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {number} [value]\n   */\n  value?: number;\n  /**\n   * @member {string} [valueFormatted]\n   */\n  valueFormatted?: string;\n  /**\n   * @member {string} [valueString]\n   */\n  valueString?: string;\n  /**\n   * @member {string} [voucherCode]\n   */\n  voucherCode?: string;\n}\n\n/**\n *\n * An interface representing DeliveryMode.\n */\nexport interface DeliveryMode {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Price} [deliveryCost]\n   */\n  deliveryCost?: Price;\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n}\n\n/**\n *\n * An interface representing GeoPoint.\n */\nexport interface GeoPoint {\n  /**\n   * @member {number} [latitude]\n   */\n  latitude?: number;\n  /**\n   * @member {number} [longitude]\n   */\n  longitude?: number;\n}\n\n/**\n *\n * An interface representing Time.\n */\nexport interface Time {\n  /**\n   * @member {string} [formattedHour]\n   */\n  formattedHour?: string;\n  /**\n   * @member {Uint8Array} [hour]\n   */\n  hour?: Uint8Array;\n  /**\n   * @member {Uint8Array} [minute]\n   */\n  minute?: Uint8Array;\n}\n\n/**\n *\n * An interface representing SpecialOpeningDay.\n */\nexport interface SpecialOpeningDay {\n  /**\n   * @member {boolean} [closed]\n   */\n  closed?: boolean;\n  /**\n   * @member {Time} [closingTime]\n   */\n  closingTime?: Time;\n  /**\n   * @member {string} [comment]\n   */\n  comment?: string;\n  /**\n   * @member {Date} [date]\n   */\n  date?: Date;\n  /**\n   * @member {string} [formattedDate]\n   */\n  formattedDate?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {Time} [openingTime]\n   */\n  openingTime?: Time;\n}\n\n/**\n *\n * An interface representing WeekdayOpeningDay.\n */\nexport interface WeekdayOpeningDay {\n  /**\n   * @member {boolean} [closed]\n   */\n  closed?: boolean;\n  /**\n   * @member {Time} [closingTime]\n   */\n  closingTime?: Time;\n  /**\n   * @member {Time} [openingTime]\n   */\n  openingTime?: Time;\n  /**\n   * @member {string} [weekDay]\n   */\n  weekDay?: string;\n}\n\n/**\n *\n * An interface representing OpeningSchedule.\n */\nexport interface OpeningSchedule {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {SpecialOpeningDay[]} [specialDayOpeningList]\n   */\n  specialDayOpeningList?: SpecialOpeningDay[];\n  /**\n   * @member {WeekdayOpeningDay[]} [weekDayOpeningList]\n   */\n  weekDayOpeningList?: WeekdayOpeningDay[];\n}\n\n/**\n *\n * An interface representing PointOfService.\n */\nexport interface PointOfService {\n  /**\n   * @member {Address} [address]\n   */\n  address?: Address;\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {string} [displayName]\n   */\n  displayName?: string;\n  /**\n   * @member {number} [distanceKm]\n   */\n  distanceKm?: number;\n  /**\n   * @member {{ [propertyName: string]: string }} [features]\n   */\n  features?: { [propertyName: string]: string };\n  /**\n   * @member {string} [formattedDistance]\n   */\n  formattedDistance?: string;\n  /**\n   * @member {GeoPoint} [geoPoint]\n   */\n  geoPoint?: GeoPoint;\n  /**\n   * @member {Image} [mapIcon]\n   */\n  mapIcon?: Image;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {OpeningSchedule} [openingHours]\n   */\n  openingHours?: OpeningSchedule;\n  /**\n   * @member {string} [storeContent]\n   */\n  storeContent?: string;\n  /**\n   * @member {Image[]} [storeImages]\n   */\n  storeImages?: Image[];\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing Category.\n */\nexport interface Category {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Image} [image]\n   */\n  image?: Image;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing FeatureUnit.\n */\nexport interface FeatureUnit {\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [symbol]\n   */\n  symbol?: string;\n  /**\n   * @member {string} [unitType]\n   */\n  unitType?: string;\n}\n\n/**\n *\n * An interface representing FeatureValue.\n */\nexport interface FeatureValue {\n  /**\n   * @member {string} [value]\n   */\n  value?: string;\n}\n\n/**\n *\n * An interface representing Feature.\n */\nexport interface Feature {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {boolean} [comparable]\n   */\n  comparable?: boolean;\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {FeatureUnit} [featureUnit]\n   */\n  featureUnit?: FeatureUnit;\n  /**\n   * @member {FeatureValue[]} [featureValues]\n   */\n  featureValues?: FeatureValue[];\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {boolean} [range]\n   */\n  range?: boolean;\n  /**\n   * @member {string} [type]\n   */\n  type?: string;\n}\n\n/**\n *\n * An interface representing Classification.\n */\nexport interface Classification {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Feature[]} [features]\n   */\n  features?: Feature[];\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n}\n\n/**\n *\n * An interface representing FutureStock.\n */\nexport interface FutureStock {\n  /**\n   * @member {Date} [date]\n   */\n  date?: Date;\n  /**\n   * @member {string} [formattedDate]\n   */\n  formattedDate?: string;\n  /**\n   * @member {Stock} [stock]\n   */\n  stock?: Stock;\n}\n\n/**\n *\n * An interface representing PriceRange.\n */\nexport interface PriceRange {\n  /**\n   * @member {Price} [maxPrice]\n   */\n  maxPrice?: Price;\n  /**\n   * @member {Price} [minPrice]\n   */\n  minPrice?: Price;\n}\n\n/**\n *\n * An interface representing ProductReference.\n */\nexport interface ProductReference {\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {boolean} [preselected]\n   */\n  preselected?: boolean;\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n  /**\n   * @member {string} [referenceType]\n   */\n  referenceType?: string;\n  /**\n   * @member {Product} [target]\n   */\n  target?: Product;\n}\n\n/**\n *\n * An interface representing Language.\n */\nexport interface Language {\n  /**\n   * @member {boolean} [active]\n   */\n  active?: boolean;\n  /**\n   * @member {string} [isocode]\n   */\n  isocode?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [nativeName]\n   */\n  nativeName?: string;\n}\n\n/**\n *\n * An interface representing User.\n */\nexport interface User {\n  /**\n   * @member {Currency} [currency]\n   */\n  currency?: Currency;\n  /**\n   * @member {string} [customerId]\n   */\n  customerId?: string;\n  /**\n   * @member {Date} [deactivationDate]\n   */\n  deactivationDate?: Date;\n  /**\n   * @member {Address} [defaultAddress]\n   */\n  defaultAddress?: Address;\n  /**\n   * @member {string} [displayUid]\n   */\n  displayUid?: string;\n  /**\n   * @member {string} [firstName]\n   */\n  firstName?: string;\n  /**\n   * @member {Language} [language]\n   */\n  language?: Language;\n  /**\n   * @member {string} [lastName]\n   */\n  lastName?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [title]\n   */\n  title?: string;\n  /**\n   * @member {string} [titleCode]\n   */\n  titleCode?: string;\n  /**\n   * @member {string} [uid]\n   */\n  uid?: string;\n}\n\n/**\n *\n * An interface representing Review.\n */\nexport interface Review {\n  /**\n   * @member {string} [alias]\n   */\n  alias?: string;\n  /**\n   * @member {string} [comment]\n   */\n  comment?: string;\n  /**\n   * @member {Date} [date]\n   */\n  date?: Date;\n  /**\n   * @member {string} [headline]\n   */\n  headline?: string;\n  /**\n   * @member {string} [id]\n   */\n  id?: string;\n  /**\n   * @member {User} [principal]\n   */\n  principal?: User;\n  /**\n   * @member {number} [rating]\n   */\n  rating?: number;\n}\n\n/**\n *\n * An interface representing VariantCategory.\n */\nexport interface VariantCategory {\n  /**\n   * @member {boolean} [hasImage]\n   */\n  hasImage?: boolean;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {number} [priority]\n   */\n  priority?: number;\n}\n\n/**\n *\n * An interface representing VariantValueCategory.\n */\nexport interface VariantValueCategory {\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {number} [sequence]\n   */\n  sequence?: number;\n  /**\n   * @member {VariantCategory[]} [superCategories]\n   */\n  superCategories?: VariantCategory[];\n}\n\n/**\n *\n * An interface representing VariantMatrixElement.\n */\nexport interface VariantMatrixElement {\n  /**\n   * @member {VariantMatrixElement[]} [elements]\n   */\n  elements?: VariantMatrixElement[];\n  /**\n   * @member {boolean} [isLeaf]\n   */\n  isLeaf?: boolean;\n  /**\n   * @member {VariantCategory} [parentVariantCategory]\n   */\n  parentVariantCategory?: VariantCategory;\n  /**\n   * @member {VariantOption} [variantOption]\n   */\n  variantOption?: VariantOption;\n  /**\n   * @member {VariantValueCategory} [variantValueCategory]\n   */\n  variantValueCategory?: VariantValueCategory;\n}\n\n/**\n *\n * An interface representing Product.\n */\nexport interface Product {\n  /**\n   * @member {boolean} [availableForPickup]\n   */\n  availableForPickup?: boolean;\n  /**\n   * @member {number} [averageRating]\n   */\n  averageRating?: number;\n  /**\n   * @member {BaseOption[]} [baseOptions]\n   */\n  baseOptions?: BaseOption[];\n  /**\n   * @member {string} [baseProduct]\n   */\n  baseProduct?: string;\n  /**\n   * @member {Category[]} [categories]\n   */\n  categories?: Category[];\n  /**\n   * @member {Classification[]} [classifications]\n   */\n  classifications?: Classification[];\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {FutureStock[]} [futureStocks]\n   */\n  futureStocks?: FutureStock[];\n  /**\n   * @member {Image[]} [images]\n   */\n  images?: Image[];\n  /**\n   * @member {string} [manufacturer]\n   */\n  manufacturer?: string;\n  /**\n   * @member {boolean} [multidimensional]\n   */\n  multidimensional?: boolean;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {number} [numberOfReviews]\n   */\n  numberOfReviews?: number;\n  /**\n   * @member {Promotion[]} [potentialPromotions]\n   */\n  potentialPromotions?: Promotion[];\n  /**\n   * @member {Price} [price]\n   */\n  price?: Price;\n  /**\n   * @member {PriceRange} [priceRange]\n   */\n  priceRange?: PriceRange;\n  /**\n   * @member {ProductReference[]} [productReferences]\n   */\n  productReferences?: ProductReference[];\n  /**\n   * @member {boolean} [purchasable]\n   */\n  purchasable?: boolean;\n  /**\n   * @member {Review[]} [reviews]\n   */\n  reviews?: Review[];\n  /**\n   * @member {Stock} [stock]\n   */\n  stock?: Stock;\n  /**\n   * @member {string} [summary]\n   */\n  summary?: string;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n  /**\n   * @member {VariantMatrixElement[]} [variantMatrix]\n   */\n  variantMatrix?: VariantMatrixElement[];\n  /**\n   * @member {VariantOption[]} [variantOptions]\n   */\n  variantOptions?: VariantOption[];\n  /**\n   * @member {string} [variantType]\n   */\n  variantType?: string;\n  /**\n   * @member {Price[]} [volumePrices]\n   */\n  volumePrices?: Price[];\n  /**\n   * @member {boolean} [volumePricesFlag]\n   */\n  volumePricesFlag?: boolean;\n}\n\n/**\n *\n * An interface representing OrderEntry.\n */\nexport interface OrderEntry {\n  /**\n   * @member {Price} [basePrice]\n   */\n  basePrice?: Price;\n  /**\n   * @member {DeliveryMode} [deliveryMode]\n   */\n  deliveryMode?: DeliveryMode;\n  /**\n   * @member {PointOfService} [deliveryPointOfService]\n   */\n  deliveryPointOfService?: PointOfService;\n  /**\n   * @member {number} [entryNumber]\n   */\n  entryNumber?: number;\n  /**\n   * @member {Product} [product]\n   */\n  product?: Product;\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n  /**\n   * @member {Price} [totalPrice]\n   */\n  totalPrice?: Price;\n  /**\n   * @member {boolean} [updateable]\n   */\n  updateable?: boolean;\n}\n\n/**\n *\n * An interface representing DeliveryOrderEntryGroup.\n */\nexport interface DeliveryOrderEntryGroup {\n  /**\n   * @member {Address} [deliveryAddress]\n   */\n  deliveryAddress?: Address;\n  /**\n   * @member {OrderEntry[]} [entries]\n   */\n  entries?: OrderEntry[];\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n  /**\n   * @member {Price} [totalPriceWithTax]\n   */\n  totalPriceWithTax?: Price;\n}\n\n/**\n *\n * An interface representing PaymentDetails.\n */\nexport interface PaymentDetails {\n  /**\n   * @member {string} [accountHolderName]\n   */\n  accountHolderName?: string;\n  /**\n   * @member {Address} [billingAddress]\n   */\n  billingAddress?: Address;\n  /**\n   * @member {string} [cardNumber]\n   */\n  cardNumber?: string;\n  /**\n   * @member {CardType} [cardType]\n   */\n  cardType?: CardType;\n  /**\n   * @member {string} [cvn]\n   */\n  cvn?: string;\n  /**\n   * @member {boolean} [defaultPayment]\n   */\n  defaultPayment?: boolean;\n  /**\n   * @member {string} [expiryMonth]\n   */\n  expiryMonth?: string;\n  /**\n   * @member {string} [expiryYear]\n   */\n  expiryYear?: string;\n  /**\n   * @member {string} [id]\n   */\n  id?: string;\n  /**\n   * @member {string} [issueNumber]\n   */\n  issueNumber?: string;\n  /**\n   * @member {boolean} [saved]\n   */\n  saved?: boolean;\n  /**\n   * @member {string} [startMonth]\n   */\n  startMonth?: string;\n  /**\n   * @member {string} [startYear]\n   */\n  startYear?: string;\n  /**\n   * @member {string} [subscriptionId]\n   */\n  subscriptionId?: string;\n}\n\n/**\n *\n * An interface representing PickupOrderEntryGroup.\n */\nexport interface PickupOrderEntryGroup {\n  /**\n   * @member {PointOfService} [deliveryPointOfService]\n   */\n  deliveryPointOfService?: PointOfService;\n  /**\n   * @member {number} [distance]\n   */\n  distance?: number;\n  /**\n   * @member {OrderEntry[]} [entries]\n   */\n  entries?: OrderEntry[];\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n  /**\n   * @member {Price} [totalPriceWithTax]\n   */\n  totalPriceWithTax?: Price;\n}\n\n/**\n *\n * An interface representing Principal.\n */\nexport interface Principal {\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [uid]\n   */\n  uid?: string;\n}\n\n/**\n *\n * An interface representing Cart.\n */\nexport interface Cart {\n  /**\n   * @member {PromotionResult[]} [appliedOrderPromotions]\n   */\n  appliedOrderPromotions?: PromotionResult[];\n  /**\n   * @member {PromotionResult[]} [appliedProductPromotions]\n   */\n  appliedProductPromotions?: PromotionResult[];\n  /**\n   * @member {Voucher[]} [appliedVouchers]\n   */\n  appliedVouchers?: Voucher[];\n  /**\n   * @member {boolean} [calculated]\n   */\n  calculated?: boolean;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Address} [deliveryAddress]\n   */\n  deliveryAddress?: Address;\n  /**\n   * @member {Price} [deliveryCost]\n   */\n  deliveryCost?: Price;\n  /**\n   * @member {number} [deliveryItemsQuantity]\n   */\n  deliveryItemsQuantity?: number;\n  /**\n   * @member {DeliveryMode} [deliveryMode]\n   */\n  deliveryMode?: DeliveryMode;\n  /**\n   * @member {DeliveryOrderEntryGroup[]} [deliveryOrderGroups]\n   */\n  deliveryOrderGroups?: DeliveryOrderEntryGroup[];\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {OrderEntry[]} [entries]\n   */\n  entries?: OrderEntry[];\n  /**\n   * @member {Date} [expirationTime]\n   */\n  expirationTime?: Date;\n  /**\n   * @member {string} [guid]\n   */\n  guid?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {boolean} [net]\n   */\n  net?: boolean;\n  /**\n   * @member {Price} [orderDiscounts]\n   */\n  orderDiscounts?: Price;\n  /**\n   * @member {PaymentDetails} [paymentInfo]\n   */\n  paymentInfo?: PaymentDetails;\n  /**\n   * @member {number} [pickupItemsQuantity]\n   */\n  pickupItemsQuantity?: number;\n  /**\n   * @member {PickupOrderEntryGroup[]} [pickupOrderGroups]\n   */\n  pickupOrderGroups?: PickupOrderEntryGroup[];\n  /**\n   * @member {PromotionResult[]} [potentialOrderPromotions]\n   */\n  potentialOrderPromotions?: PromotionResult[];\n  /**\n   * @member {PromotionResult[]} [potentialProductPromotions]\n   */\n  potentialProductPromotions?: PromotionResult[];\n  /**\n   * @member {Price} [productDiscounts]\n   */\n  productDiscounts?: Price;\n  /**\n   * @member {Date} [saveTime]\n   */\n  saveTime?: Date;\n  /**\n   * @member {Principal} [savedBy]\n   */\n  savedBy?: Principal;\n  /**\n   * @member {string} [site]\n   */\n  site?: string;\n  /**\n   * @member {string} [store]\n   */\n  store?: string;\n  /**\n   * @member {Price} [subTotal]\n   */\n  subTotal?: Price;\n  /**\n   * @member {Price} [totalDiscounts]\n   */\n  totalDiscounts?: Price;\n  /**\n   * @member {number} [totalItems]\n   */\n  totalItems?: number;\n  /**\n   * @member {Price} [totalPrice]\n   */\n  totalPrice?: Price;\n  /**\n   * @member {Price} [totalPriceWithTax]\n   */\n  totalPriceWithTax?: Price;\n  /**\n   * @member {Price} [totalTax]\n   */\n  totalTax?: Price;\n  /**\n   * @member {number} [totalUnitCount]\n   */\n  totalUnitCount?: number;\n  /**\n   * @member {Principal} [user]\n   */\n  user?: Principal;\n}\n\n/**\n *\n * An interface representing CartList.\n */\nexport interface CartList {\n  /**\n   * @member {Cart[]} [carts]\n   */\n  carts?: Cart[];\n}\n\n/**\n *\n * An interface representing CartModification.\n */\nexport interface CartModification {\n  /**\n   * @member {boolean} [deliveryModeChanged]\n   */\n  deliveryModeChanged?: boolean;\n  /**\n   * @member {OrderEntry} [entry]\n   */\n  entry?: OrderEntry;\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n  /**\n   * @member {number} [quantityAdded]\n   */\n  quantityAdded?: number;\n  /**\n   * @member {string} [statusCode]\n   */\n  statusCode?: string;\n  /**\n   * @member {string} [statusMessage]\n   */\n  statusMessage?: string;\n}\n\n/**\n *\n * An interface representing CategoryHierarchy.\n */\nexport interface CategoryHierarchy {\n  /**\n   * @member {string} [id]\n   */\n  id?: string;\n  /**\n   * @member {Date} [lastModified]\n   */\n  lastModified?: Date;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {CategoryHierarchy[]} [subcategories]\n   */\n  subcategories?: CategoryHierarchy[];\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing CatalogVersion.\n */\nexport interface CatalogVersion {\n  /**\n   * @member {CategoryHierarchy[]} [categories]\n   */\n  categories?: CategoryHierarchy[];\n  /**\n   * @member {string} [id]\n   */\n  id?: string;\n  /**\n   * @member {Date} [lastModified]\n   */\n  lastModified?: Date;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing Catalog.\n */\nexport interface Catalog {\n  /**\n   * @member {CatalogVersion[]} [catalogVersions]\n   */\n  catalogVersions?: CatalogVersion[];\n  /**\n   * @member {string} [id]\n   */\n  id?: string;\n  /**\n   * @member {Date} [lastModified]\n   */\n  lastModified?: Date;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing CatalogList.\n */\nexport interface CatalogList {\n  /**\n   * @member {Catalog[]} [catalogs]\n   */\n  catalogs?: Catalog[];\n}\n\n/**\n *\n * An interface representing ComponentIDList.\n */\nexport interface ComponentIDList {\n  /**\n   * @member {string[]} [idList]\n   */\n  idList?: string[];\n}\n\n/**\n *\n * An interface representing ConsignmentEntry.\n */\nexport interface ConsignmentEntry {\n  /**\n   * @member {OrderEntry} [orderEntry]\n   */\n  orderEntry?: OrderEntry;\n  /**\n   * @member {number} [quantity]\n   */\n  quantity?: number;\n  /**\n   * @member {number} [shippedQuantity]\n   */\n  shippedQuantity?: number;\n}\n\n/**\n *\n * An interface representing Consignment.\n */\nexport interface Consignment {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {PointOfService} [deliveryPointOfService]\n   */\n  deliveryPointOfService?: PointOfService;\n  /**\n   * @member {ConsignmentEntry[]} [entries]\n   */\n  entries?: ConsignmentEntry[];\n  /**\n   * @member {Address} [shippingAddress]\n   */\n  shippingAddress?: Address;\n  /**\n   * @member {string} [status]\n   */\n  status?: string;\n  /**\n   * @member {Date} [statusDate]\n   */\n  statusDate?: Date;\n  /**\n   * @member {string} [trackingID]\n   */\n  trackingID?: string;\n}\n\n/**\n *\n * An interface representing CountryList.\n */\nexport interface CountryList {\n  /**\n   * @member {Country[]} [countries]\n   */\n  countries?: Country[];\n}\n\n/**\n *\n * An interface representing CurrencyList.\n */\nexport interface CurrencyList {\n  /**\n   * @member {Currency[]} [currencies]\n   */\n  currencies?: Currency[];\n}\n\n/**\n *\n * An interface representing DeliveryModeList.\n */\nexport interface DeliveryModeList {\n  /**\n   * @member {DeliveryMode[]} [deliveryModes]\n   */\n  deliveryModes?: DeliveryMode[];\n}\n\n/**\n *\n * An interface representing FacetValue.\n */\nexport interface FacetValue {\n  /**\n   * @member {number} [count]\n   */\n  count?: number;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {SearchState} [query]\n   */\n  query?: SearchState;\n  /**\n   * @member {boolean} [selected]\n   */\n  selected?: boolean;\n}\n\n/**\n *\n * An interface representing Facet.\n */\nexport interface Facet {\n  /**\n   * @member {boolean} [category]\n   */\n  category?: boolean;\n  /**\n   * @member {boolean} [multiSelect]\n   */\n  multiSelect?: boolean;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {number} [priority]\n   */\n  priority?: number;\n  /**\n   * @member {FacetValue[]} [topValues]\n   */\n  topValues?: FacetValue[];\n  /**\n   * @member {FacetValue[]} [values]\n   */\n  values?: FacetValue[];\n  /**\n   * @member {boolean} [visible]\n   */\n  visible?: boolean;\n}\n\n/**\n *\n * An interface representing LanguageList.\n */\nexport interface LanguageList {\n  /**\n   * @member {Language[]} [languages]\n   */\n  languages?: Language[];\n}\n\n/**\n *\n * An interface representing Pagination.\n * Pagination info\n *\n */\nexport interface Pagination {\n  /**\n   * @member {number} [count] Number of elements on this page\n   */\n  count?: number;\n  /**\n   * @member {number} [page] Current page number\n   */\n  page?: number;\n  /**\n   * @member {number} [totalCount] Total number of elements\n   */\n  totalCount?: number;\n  /**\n   * @member {number} [totalPages] Total number of pages\n   */\n  totalPages?: number;\n}\n\n/**\n *\n * An interface representing Sort.\n * Sort option\n *\n */\nexport interface Sort {\n  /**\n   * @member {boolean} [asc]\n   */\n  asc?: boolean;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n}\n\n/**\n *\n * An interface representing ListAdaptedComponents.\n */\nexport interface ListAdaptedComponents {\n  /**\n   * @member {any[]} [components]\n   */\n  components?: any[];\n  /**\n   * @member {Pagination} [pagination]\n   */\n  pagination?: Pagination;\n  /**\n   * @member {Sort[]} [sorts]\n   */\n  sorts?: Sort[];\n}\n\n/**\n *\n * An interface representing MemberList.\n */\nexport interface MemberList {\n  /**\n   * @member {Principal[]} [members]\n   */\n  members?: Principal[];\n}\n\n/**\n *\n * An interface representing OrderEntryList.\n */\nexport interface OrderEntryList {\n  /**\n   * @member {OrderEntry[]} [orderEntries]\n   */\n  orderEntries?: OrderEntry[];\n}\n\n/**\n *\n * An interface representing OrderHistory.\n */\nexport interface OrderHistory {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [guid]\n   */\n  guid?: string;\n  /**\n   * @member {Date} [placed]\n   */\n  placed?: Date;\n  /**\n   * @member {string} [status]\n   */\n  status?: string;\n  /**\n   * @member {string} [statusDisplay]\n   */\n  statusDisplay?: string;\n  /**\n   * @member {Price} [total]\n   */\n  total?: Price;\n}\n\n/**\n *\n * An interface representing PaginationModel.\n */\nexport interface PaginationModel {\n  /**\n   * @member {number} [currentPage]\n   */\n  currentPage?: number;\n  /**\n   * @member {number} [pageSize]\n   */\n  pageSize?: number;\n  /**\n   * @member {string} [sort]\n   */\n  sort?: string;\n  /**\n   * @member {number} [totalPages]\n   */\n  totalPages?: number;\n  /**\n   * @member {number} [totalResults]\n   */\n  totalResults?: number;\n}\n\n/**\n *\n * An interface representing SortModel.\n */\nexport interface SortModel {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {boolean} [selected]\n   */\n  selected?: boolean;\n}\n\n/**\n *\n * An interface representing OrderHistoryList.\n */\nexport interface OrderHistoryList {\n  /**\n   * @member {OrderHistory[]} [orders]\n   */\n  orders?: OrderHistory[];\n  /**\n   * @member {PaginationModel} [pagination]\n   */\n  pagination?: PaginationModel;\n  /**\n   * @member {SortModel[]} [sorts]\n   */\n  sorts?: SortModel[];\n}\n\n/**\n *\n * An interface representing OrderStatusUpdateElement.\n */\nexport interface OrderStatusUpdateElement {\n  /**\n   * @member {string} [baseSiteId]\n   */\n  baseSiteId?: string;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [status]\n   */\n  status?: string;\n}\n\n/**\n *\n * An interface representing OrderStatusUpdateElementList.\n */\nexport interface OrderStatusUpdateElementList {\n  /**\n   * @member {OrderStatusUpdateElement[]} [orderStatusUpdateElements]\n   */\n  orderStatusUpdateElements?: OrderStatusUpdateElement[];\n}\n\n/**\n *\n * An interface representing Order.\n */\nexport interface Order {\n  /**\n   * @member {PromotionResult[]} [appliedOrderPromotions]\n   */\n  appliedOrderPromotions?: PromotionResult[];\n  /**\n   * @member {PromotionResult[]} [appliedProductPromotions]\n   */\n  appliedProductPromotions?: PromotionResult[];\n  /**\n   * @member {Voucher[]} [appliedVouchers]\n   */\n  appliedVouchers?: Voucher[];\n  /**\n   * @member {boolean} [calculated]\n   */\n  calculated?: boolean;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {Consignment[]} [consignments]\n   */\n  consignments?: Consignment[];\n  /**\n   * @member {Date} [created]\n   */\n  created?: Date;\n  /**\n   * @member {Address} [deliveryAddress]\n   */\n  deliveryAddress?: Address;\n  /**\n   * @member {Price} [deliveryCost]\n   */\n  deliveryCost?: Price;\n  /**\n   * @member {number} [deliveryItemsQuantity]\n   */\n  deliveryItemsQuantity?: number;\n  /**\n   * @member {DeliveryMode} [deliveryMode]\n   */\n  deliveryMode?: DeliveryMode;\n  /**\n   * @member {DeliveryOrderEntryGroup[]} [deliveryOrderGroups]\n   */\n  deliveryOrderGroups?: DeliveryOrderEntryGroup[];\n  /**\n   * @member {string} [deliveryStatus]\n   */\n  deliveryStatus?: string;\n  /**\n   * @member {string} [deliveryStatusDisplay]\n   */\n  deliveryStatusDisplay?: string;\n  /**\n   * @member {OrderEntry[]} [entries]\n   */\n  entries?: OrderEntry[];\n  /**\n   * @member {boolean} [guestCustomer]\n   */\n  guestCustomer?: boolean;\n  /**\n   * @member {string} [guid]\n   */\n  guid?: string;\n  /**\n   * @member {boolean} [net]\n   */\n  net?: boolean;\n  /**\n   * @member {Price} [orderDiscounts]\n   */\n  orderDiscounts?: Price;\n  /**\n   * @member {PaymentDetails} [paymentInfo]\n   */\n  paymentInfo?: PaymentDetails;\n  /**\n   * @member {number} [pickupItemsQuantity]\n   */\n  pickupItemsQuantity?: number;\n  /**\n   * @member {PickupOrderEntryGroup[]} [pickupOrderGroups]\n   */\n  pickupOrderGroups?: PickupOrderEntryGroup[];\n  /**\n   * @member {Price} [productDiscounts]\n   */\n  productDiscounts?: Price;\n  /**\n   * @member {string} [site]\n   */\n  site?: string;\n  /**\n   * @member {string} [status]\n   */\n  status?: string;\n  /**\n   * @member {string} [statusDisplay]\n   */\n  statusDisplay?: string;\n  /**\n   * @member {string} [store]\n   */\n  store?: string;\n  /**\n   * @member {Price} [subTotal]\n   */\n  subTotal?: Price;\n  /**\n   * @member {Price} [totalDiscounts]\n   */\n  totalDiscounts?: Price;\n  /**\n   * @member {number} [totalItems]\n   */\n  totalItems?: number;\n  /**\n   * @member {Price} [totalPrice]\n   */\n  totalPrice?: Price;\n  /**\n   * @member {Price} [totalPriceWithTax]\n   */\n  totalPriceWithTax?: Price;\n  /**\n   * @member {Price} [totalTax]\n   */\n  totalTax?: Price;\n  /**\n   * @member {OrderEntry[]} [unconsignedEntries]\n   */\n  unconsignedEntries?: OrderEntry[];\n  /**\n   * @member {Principal} [user]\n   */\n  user?: Principal;\n}\n\n/**\n *\n * An interface representing PaymentDetailsList.\n */\nexport interface PaymentDetailsList {\n  /**\n   * @member {PaymentDetails[]} [payments]\n   */\n  payments?: PaymentDetails[];\n}\n\n/**\n *\n * An interface representing PointOfServiceStock.\n */\nexport interface PointOfServiceStock {\n  /**\n   * @member {Address} [address]\n   */\n  address?: Address;\n  /**\n   * @member {string} [description]\n   */\n  description?: string;\n  /**\n   * @member {string} [displayName]\n   */\n  displayName?: string;\n  /**\n   * @member {number} [distanceKm]\n   */\n  distanceKm?: number;\n  /**\n   * @member {{ [propertyName: string]: string }} [features]\n   */\n  features?: { [propertyName: string]: string };\n  /**\n   * @member {string} [formattedDistance]\n   */\n  formattedDistance?: string;\n  /**\n   * @member {GeoPoint} [geoPoint]\n   */\n  geoPoint?: GeoPoint;\n  /**\n   * @member {Image} [mapIcon]\n   */\n  mapIcon?: Image;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {OpeningSchedule} [openingHours]\n   */\n  openingHours?: OpeningSchedule;\n  /**\n   * @member {Stock} [stockInfo]\n   */\n  stockInfo?: Stock;\n  /**\n   * @member {string} [storeContent]\n   */\n  storeContent?: string;\n  /**\n   * @member {Image[]} [storeImages]\n   */\n  storeImages?: Image[];\n  /**\n   * @member {string} [url]\n   */\n  url?: string;\n}\n\n/**\n *\n * An interface representing ProductExpressUpdateElement.\n */\nexport interface ProductExpressUpdateElement {\n  /**\n   * @member {string} [catalogId]\n   */\n  catalogId?: string;\n  /**\n   * @member {string} [catalogVersion]\n   */\n  catalogVersion?: string;\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n}\n\n/**\n *\n * An interface representing ProductExpressUpdateElementList.\n */\nexport interface ProductExpressUpdateElementList {\n  /**\n   * @member {ProductExpressUpdateElement[]} [productExpressUpdateElements]\n   */\n  productExpressUpdateElements?: ProductExpressUpdateElement[];\n}\n\n/**\n *\n * An interface representing ProductList.\n */\nexport interface ProductList {\n  /**\n   * @member {string} [catalog]\n   */\n  catalog?: string;\n  /**\n   * @member {number} [currentPage]\n   */\n  currentPage?: number;\n  /**\n   * @member {Product[]} [products]\n   */\n  products?: Product[];\n  /**\n   * @member {number} [totalPageCount]\n   */\n  totalPageCount?: number;\n  /**\n   * @member {number} [totalProductCount]\n   */\n  totalProductCount?: number;\n  /**\n   * @member {string} [version]\n   */\n  version?: string;\n}\n\n/**\n *\n * An interface representing ProductReferenceList.\n */\nexport interface ProductReferenceList {\n  /**\n   * @member {ProductReference[]} [references]\n   */\n  references?: ProductReference[];\n}\n\n/**\n *\n * An interface representing SpellingSuggestion.\n */\nexport interface SpellingSuggestion {\n  /**\n   * @member {string} [query]\n   */\n  query?: string;\n  /**\n   * @member {string} [suggestion]\n   */\n  suggestion?: string;\n}\n\n/**\n *\n * An interface representing ProductSearchPage.\n */\nexport interface ProductSearchPage {\n  /**\n   * @member {Breadcrumb[]} [breadcrumbs]\n   */\n  breadcrumbs?: Breadcrumb[];\n  /**\n   * @member {string} [categoryCode]\n   */\n  categoryCode?: string;\n  /**\n   * @member {SearchState} [currentQuery]\n   */\n  currentQuery?: SearchState;\n  /**\n   * @member {Facet[]} [facets]\n   */\n  facets?: Facet[];\n  /**\n   * @member {string} [freeTextSearch]\n   */\n  freeTextSearch?: string;\n  /**\n   * @member {string} [keywordRedirectUrl]\n   */\n  keywordRedirectUrl?: string;\n  /**\n   * @member {PaginationModel} [pagination]\n   */\n  pagination?: PaginationModel;\n  /**\n   * @member {Product[]} [products]\n   */\n  products?: Product[];\n  /**\n   * @member {SortModel[]} [sorts]\n   */\n  sorts?: SortModel[];\n  /**\n   * @member {SpellingSuggestion} [spellingSuggestion]\n   */\n  spellingSuggestion?: SpellingSuggestion;\n}\n\n/**\n *\n * An interface representing PromotionList.\n */\nexport interface PromotionList {\n  /**\n   * @member {Promotion[]} [promotions]\n   */\n  promotions?: Promotion[];\n}\n\n/**\n *\n * An interface representing PromotionResultList.\n */\nexport interface PromotionResultList {\n  /**\n   * @member {PromotionResult[]} [promotions]\n   */\n  promotions?: PromotionResult[];\n}\n\n/**\n *\n * An interface representing ReviewList.\n */\nexport interface ReviewList {\n  /**\n   * @member {Review[]} [reviews]\n   */\n  reviews?: Review[];\n}\n\n/**\n *\n * An interface representing SaveCartResult.\n */\nexport interface SaveCartResult {\n  /**\n   * @member {Cart} [savedCartData]\n   */\n  savedCartData?: Cart;\n}\n\n/**\n *\n * An interface representing StoreFinderSearchPage.\n */\nexport interface StoreFinderSearchPage {\n  /**\n   * @member {number} [boundEastLongitude]\n   */\n  boundEastLongitude?: number;\n  /**\n   * @member {number} [boundNorthLatitude]\n   */\n  boundNorthLatitude?: number;\n  /**\n   * @member {number} [boundSouthLatitude]\n   */\n  boundSouthLatitude?: number;\n  /**\n   * @member {number} [boundWestLongitude]\n   */\n  boundWestLongitude?: number;\n  /**\n   * @member {string} [locationText]\n   */\n  locationText?: string;\n  /**\n   * @member {PaginationModel} [pagination]\n   */\n  pagination?: PaginationModel;\n  /**\n   * @member {SortModel[]} [sorts]\n   */\n  sorts?: SortModel[];\n  /**\n   * @member {number} [sourceLatitude]\n   */\n  sourceLatitude?: number;\n  /**\n   * @member {number} [sourceLongitude]\n   */\n  sourceLongitude?: number;\n  /**\n   * @member {PointOfService[]} [stores]\n   */\n  stores?: PointOfService[];\n}\n\n/**\n *\n * An interface representing StoreFinderStockSearchPage.\n */\nexport interface StoreFinderStockSearchPage {\n  /**\n   * @member {number} [boundEastLongitude]\n   */\n  boundEastLongitude?: number;\n  /**\n   * @member {number} [boundNorthLatitude]\n   */\n  boundNorthLatitude?: number;\n  /**\n   * @member {number} [boundSouthLatitude]\n   */\n  boundSouthLatitude?: number;\n  /**\n   * @member {number} [boundWestLongitude]\n   */\n  boundWestLongitude?: number;\n  /**\n   * @member {string} [locationText]\n   */\n  locationText?: string;\n  /**\n   * @member {PaginationModel} [pagination]\n   */\n  pagination?: PaginationModel;\n  /**\n   * @member {Product} [product]\n   */\n  product?: Product;\n  /**\n   * @member {SortModel[]} [sorts]\n   */\n  sorts?: SortModel[];\n  /**\n   * @member {number} [sourceLatitude]\n   */\n  sourceLatitude?: number;\n  /**\n   * @member {number} [sourceLongitude]\n   */\n  sourceLongitude?: number;\n  /**\n   * @member {PointOfServiceStock[]} [stores]\n   */\n  stores?: PointOfServiceStock[];\n}\n\n/**\n *\n * An interface representing Suggestion.\n */\nexport interface Suggestion {\n  /**\n   * @member {string} [value]\n   */\n  value?: string;\n}\n\n/**\n *\n * An interface representing SuggestionList.\n */\nexport interface SuggestionList {\n  /**\n   * @member {Suggestion[]} [suggestions]\n   */\n  suggestions?: Suggestion[];\n}\n\n/**\n *\n * An interface representing Title.\n */\nexport interface Title {\n  /**\n   * @member {string} [code]\n   */\n  code?: string;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n}\n\n/**\n *\n * An interface representing TitleList.\n */\nexport interface TitleList {\n  /**\n   * @member {Title[]} [titles]\n   */\n  titles?: Title[];\n}\n\n/**\n *\n * An interface representing UserGroup.\n */\nexport interface UserGroup {\n  /**\n   * @member {Principal[]} [members]\n   */\n  members?: Principal[];\n  /**\n   * @member {number} [membersCount]\n   */\n  membersCount?: number;\n  /**\n   * @member {string} [name]\n   */\n  name?: string;\n  /**\n   * @member {UserGroup[]} [subGroups]\n   */\n  subGroups?: UserGroup[];\n  /**\n   * @member {string} [uid]\n   */\n  uid?: string;\n}\n\n/**\n *\n * An interface representing UserGroupList.\n */\nexport interface UserGroupList {\n  /**\n   * @member {number} [currentPage]\n   */\n  currentPage?: number;\n  /**\n   * @member {number} [numberOfPages]\n   */\n  numberOfPages?: number;\n  /**\n   * @member {number} [pageSize]\n   */\n  pageSize?: number;\n  /**\n   * @member {number} [totalNumber]\n   */\n  totalNumber?: number;\n  /**\n   * @member {UserGroup[]} [userGroups]\n   */\n  userGroups?: UserGroup[];\n}\n\n/**\n *\n * An interface representing UserSignUp.\n */\nexport interface UserSignUp {\n  /**\n   * @member {string} [firstName]\n   */\n  firstName?: string;\n  /**\n   * @member {string} [lastName]\n   */\n  lastName?: string;\n  /**\n   * @member {string} [password]\n   */\n  password?: string;\n  /**\n   * @member {string} [titleCode]\n   */\n  titleCode?: string;\n  /**\n   * @member {string} [uid]\n   */\n  uid?: string;\n}\n\n/**\n *\n * An interface representing VoucherList.\n */\nexport interface VoucherList {\n  /**\n   * @member {Voucher[]} [vouchers]\n   */\n  vouchers?: Voucher[];\n}\n\n/**\n * Defines values for PriceType.\n * Possible values include: 'BUY', 'FROM'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: PriceType = <PriceType>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum PriceType {\n  BUY = 'BUY',\n  FROM = 'FROM',\n}\n\n/**\n * Defines values for ImageType.\n * Possible values include: 'PRIMARY', 'GALLERY'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: ImageType = <ImageType>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum ImageType {\n  PRIMARY = 'PRIMARY',\n  GALLERY = 'GALLERY',\n}\n\n/**\n * Defines values for Fields.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields = <Fields>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields1.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields1 = <Fields1>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields1 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields2.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields2 = <Fields2>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields2 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields3.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields3 = <Fields3>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields3 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields4.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields4 = <Fields4>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields4 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields5.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields5 = <Fields5>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields5 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields6.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields6 = <Fields6>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields6 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for PageType.\n * Possible values include: 'ContentPage', 'ProductPage', 'CategoryPage',\n * 'CatalogPage'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: PageType = <PageType>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum PageType {\n  CONTENT_PAGE = 'ContentPage',\n  PRODUCT_PAGE = 'ProductPage',\n  CATEGORY_PAGE = 'CategoryPage',\n  CATALOG_PAGE = 'CatalogPage',\n}\n\n/**\n * Defines values for Fields7.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields7 = <Fields7>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields7 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields8.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields8 = <Fields8>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields8 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields9.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields9 = <Fields9>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields9 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields10.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields10 = <Fields10>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields10 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields11.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields11 = <Fields11>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields11 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields12.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields12 = <Fields12>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields12 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields13.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields13 = <Fields13>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields13 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields14.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields14 = <Fields14>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields14 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields15.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields15 = <Fields15>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields15 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields16.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields16 = <Fields16>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields16 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for SortEnum.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: SortEnum = <SortEnum>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum SortEnum {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields17.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields17 = <Fields17>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields17 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields18.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields18 = <Fields18>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields18 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields19.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields19 = <Fields19>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields19 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields20.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields20 = <Fields20>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields20 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields21.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields21 = <Fields21>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields21 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields22.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields22 = <Fields22>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields22 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields23.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields23 = <Fields23>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields23 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields24.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields24 = <Fields24>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields24 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields25.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields25 = <Fields25>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields25 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields26.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields26 = <Fields26>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields26 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields27.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields27 = <Fields27>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields27 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields28.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields28 = <Fields28>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields28 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields29.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields29 = <Fields29>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields29 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields30.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields30 = <Fields30>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields30 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields31.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields31 = <Fields31>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields31 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields32.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields32 = <Fields32>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields32 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields33.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields33 = <Fields33>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields33 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields34.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields34 = <Fields34>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields34 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields35.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields35 = <Fields35>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields35 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields36.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields36 = <Fields36>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields36 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields37.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields37 = <Fields37>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields37 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields38.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields38 = <Fields38>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields38 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields39.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields39 = <Fields39>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields39 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields40.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields40 = <Fields40>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields40 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields41.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields41 = <Fields41>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields41 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields42.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields42 = <Fields42>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields42 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields43.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields43 = <Fields43>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields43 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields44.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields44 = <Fields44>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields44 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields45.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields45 = <Fields45>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields45 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields46.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields46 = <Fields46>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields46 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields47.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields47 = <Fields47>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields47 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields48.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields48 = <Fields48>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields48 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields49.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields49 = <Fields49>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields49 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields50.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields50 = <Fields50>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields50 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields51.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields51 = <Fields51>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields51 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields52.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields52 = <Fields52>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields52 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields53.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields53 = <Fields53>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields53 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields54.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields54 = <Fields54>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields54 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields55.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields55 = <Fields55>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields55 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields56.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields56 = <Fields56>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields56 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields57.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields57 = <Fields57>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields57 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields58.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields58 = <Fields58>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields58 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields59.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields59 = <Fields59>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields59 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields60.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields60 = <Fields60>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields60 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Fields61.\n * Possible values include: 'BASIC', 'DEFAULT', 'FULL'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Fields61 = <Fields61>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Fields61 {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\n/**\n * Defines values for Type.\n * Possible values include: 'all', 'product', 'order'\n * There could be more values for this enum apart from the ones defined here.If\n * you want to set a value that is not from the known values then you can do\n * the following:\n * let param: Type = <Type>\"someUnknownValueThatWillStillBeValid\";\n * @readonly\n * @enum {string}\n */\nexport enum Type {\n  All = 'all',\n  Product = 'product',\n  Order = 'order',\n}\n","import { InjectionToken, Provider } from '@angular/core';\nimport { RouterStateSnapshot, Params } from '@angular/router';\n\nimport {\n  createSelector,\n  createFeatureSelector,\n  ActionReducerMap,\n  MemoizedSelector,\n} from '@ngrx/store';\nimport * as fromNgrxRouter from '@ngrx/router-store';\n\nimport * as fromActions from '../actions';\nimport { ROUTING_FEATURE } from '../../state';\nimport { PageContext } from '../../models/page-context.model';\nimport { PageType } from '../../../occ/occ-models/index';\nimport { CmsActivatedRouteSnapshot } from '../../models/cms-route';\n\nexport interface RouterState\n  extends fromNgrxRouter.RouterReducerState<ActivatedRouterStateSnapshot> {\n  redirectUrl: string;\n}\n\nexport const initialState: RouterState = {\n  redirectUrl: '',\n  navigationId: 0,\n  state: {\n    url: '',\n    queryParams: {},\n    params: {},\n    context: {\n      id: '',\n    },\n    cmsRequired: false,\n  },\n};\n\nexport interface ActivatedRouterStateSnapshot {\n  url: string;\n  queryParams: Params;\n  params: Params;\n  context: PageContext;\n  cmsRequired: boolean;\n}\n\nexport interface State {\n  router: RouterState;\n}\n\nexport function getReducers(): ActionReducerMap<State> {\n  return {\n    router: reducer,\n  };\n}\n\nexport function reducer(\n  state: RouterState = initialState,\n  action: any\n): RouterState {\n  switch (action.type) {\n    case fromActions.SAVE_REDIRECT_URL: {\n      return {\n        ...state,\n        redirectUrl: action.payload,\n      };\n    }\n    case fromActions.CLEAR_REDIRECT_URL: {\n      return {\n        ...state,\n        redirectUrl: '',\n      };\n    }\n    case fromNgrxRouter.ROUTER_NAVIGATION:\n    case fromNgrxRouter.ROUTER_ERROR:\n    case fromNgrxRouter.ROUTER_CANCEL: {\n      const currentUrl = action.payload.routerState\n        ? action.payload.routerState.url\n        : '';\n      const contextId = action.payload.routerState\n        ? action.payload.routerState.context.id\n        : '';\n      let redirectUrl;\n      if (\n        contextId === 'login' ||\n        contextId === 'register' ||\n        currentUrl === state.redirectUrl\n      ) {\n        redirectUrl = state.redirectUrl;\n      } else {\n        redirectUrl = '';\n      }\n\n      return {\n        redirectUrl: redirectUrl,\n        state: action.payload.routerState,\n        navigationId: action.payload.event.id,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<State>\n> = new InjectionToken<ActionReducerMap<State>>('RouterReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport const getRouterFeatureState: MemoizedSelector<\n  any,\n  any\n> = createFeatureSelector<\n  fromNgrxRouter.RouterReducerState<ActivatedRouterStateSnapshot>\n>(ROUTING_FEATURE);\n\nexport const getRouterState: MemoizedSelector<any, any> = createSelector(\n  getRouterFeatureState,\n  (state: any) => state[ROUTING_FEATURE]\n);\n\nexport const getPageContext: MemoizedSelector<\n  any,\n  PageContext\n> = createSelector(\n  getRouterState,\n  (routingState: any) => routingState.state.context\n);\n\nexport const getRedirectUrl: MemoizedSelector<any, any> = createSelector(\n  getRouterState,\n  state => state.redirectUrl\n);\n\n/* The serializer is there to parse the RouterStateSnapshot,\nand to reduce the amount of properties to be passed to the reducer.\n */\nexport class CustomSerializer\n  implements\n    fromNgrxRouter.RouterStateSerializer<ActivatedRouterStateSnapshot> {\n  serialize(routerState: RouterStateSnapshot): ActivatedRouterStateSnapshot {\n    const { url } = routerState;\n    const { queryParams } = routerState.root;\n\n    let state: CmsActivatedRouteSnapshot = routerState.root as CmsActivatedRouteSnapshot;\n    let cmsRequired = false;\n    let context: PageContext;\n\n    while (state.firstChild) {\n      state = state.firstChild as CmsActivatedRouteSnapshot;\n\n      // we use context information embedded in Cms driven routes from any parent route\n      if (state.data && state.data.cxCmsRouteContext) {\n        context = state.data.cxCmsRouteContext;\n      }\n\n      // we assume, that any route that has CmsPageGuard or it's child\n      // is cmsRequired\n      if (\n        !cmsRequired &&\n        (context ||\n          (state.routeConfig &&\n            state.routeConfig.canActivate &&\n            state.routeConfig.canActivate.find(\n              x => x && x.guardName === 'CmsPageGuard'\n            )))\n      ) {\n        cmsRequired = true;\n      }\n    }\n    const { params } = state;\n\n    // we give smartedit preview page a PageContext\n    if (state.url.length > 0 && state.url[0].path === 'cx-preview') {\n      context = {\n        id: 'smartedit-preview',\n        type: PageType.CONTENT_PAGE,\n      };\n    } else {\n      if (params['productCode']) {\n        context = { id: params['productCode'], type: PageType.PRODUCT_PAGE };\n      } else if (params['categoryCode']) {\n        context = { id: params['categoryCode'], type: PageType.CATEGORY_PAGE };\n      } else if (params['brandCode']) {\n        context = { id: params['brandCode'], type: PageType.CATEGORY_PAGE };\n      } else if (params['query']) {\n        context = { id: 'search', type: PageType.CONTENT_PAGE };\n      } else if (state.data.pageLabel !== undefined) {\n        context = { id: state.data.pageLabel, type: PageType.CONTENT_PAGE };\n      } else if (!context) {\n        if (state.url.length > 0) {\n          const pageLabel =\n            '/' + state.url.map(urlSegment => urlSegment.path).join('/');\n          context = {\n            id: pageLabel,\n            type: PageType.CONTENT_PAGE,\n          };\n        } else {\n          context = {\n            id: 'homepage',\n            type: PageType.CONTENT_PAGE,\n          };\n        }\n      }\n    }\n\n    return { url, queryParams, params, context, cmsRequired };\n  }\n}\n","import { Action } from '@ngrx/store';\n\nexport const LOGIN = '[Auth] Login';\nexport const LOGOUT = '[Auth] Logout';\n\nexport class Login implements Action {\n  readonly type = LOGIN;\n}\n\nexport class Logout implements Action {\n  readonly type = LOGOUT;\n}\n\n// action types\nexport type LoginLogoutAction = Login | Logout;\n","import { Action } from '@ngrx/store';\nimport { Language } from '../../../occ/occ-models/occ.models';\n\nexport const LOAD_LANGUAGES = '[Site-context] Load Languages';\nexport const LOAD_LANGUAGES_FAIL = '[Site-context] Load Languages Fail';\nexport const LOAD_LANGUAGES_SUCCESS = '[Site-context] Load Languages Success';\nexport const SET_ACTIVE_LANGUAGE = '[Site-context] Set Active Language';\nexport const LANGUAGE_CHANGE = '[Site-context] Language Change';\n\nexport class LoadLanguages implements Action {\n  readonly type = LOAD_LANGUAGES;\n}\n\nexport class LoadLanguagesFail implements Action {\n  readonly type = LOAD_LANGUAGES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadLanguagesSuccess implements Action {\n  readonly type = LOAD_LANGUAGES_SUCCESS;\n  constructor(public payload: Language[]) {}\n}\n\nexport class SetActiveLanguage implements Action {\n  readonly type = SET_ACTIVE_LANGUAGE;\n  constructor(public payload: string) {}\n}\n\nexport class LanguageChange implements Action {\n  readonly type = LANGUAGE_CHANGE;\n}\n\n// action types\nexport type LanguagesAction =\n  | LoadLanguages\n  | LoadLanguagesFail\n  | LoadLanguagesSuccess\n  | SetActiveLanguage\n  | LanguageChange;\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Location } from '@angular/common';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport { Action } from '@ngrx/store';\nimport * as RouterActions from '../actions/router.action';\nimport { Observable } from 'rxjs';\nimport { tap, map } from 'rxjs/operators';\nimport { LOGIN, LOGOUT } from '../../../auth/store/actions/login-logout.action';\nimport { LANGUAGE_CHANGE } from '../../../site-context/store/actions/languages.action';\nimport { CmsRoute } from '../../models/cms-route';\n\n@Injectable()\nexport class RouterEffects {\n  @Effect({ dispatch: false })\n  navigate$: Observable<any> = this.actions$.pipe(\n    ofType(RouterActions.GO),\n    map((action: RouterActions.Go) => action.payload),\n    tap(({ path, query: queryParams, extras }) => {\n      this.router.navigate(path, { queryParams, ...extras });\n    })\n  );\n\n  @Effect({ dispatch: false })\n  navigateBuUrl$: Observable<any> = this.actions$.pipe(\n    ofType(RouterActions.GO_BY_URL),\n    map((action: RouterActions.Go) => action.payload),\n    tap(url => {\n      this.router.navigateByUrl(url);\n    })\n  );\n\n  @Effect({ dispatch: false })\n  clearCmsRoutes$: Observable<Action> = this.actions$.pipe(\n    ofType(LANGUAGE_CHANGE, LOGOUT, LOGIN),\n    tap(_ => {\n      const filteredConfig = this.router.config.filter(\n        (route: CmsRoute) => !(route.data && route.data.cxCmsRouteContext)\n      );\n      if (filteredConfig.length !== this.router.config.length) {\n        this.router.resetConfig(filteredConfig);\n      }\n    })\n  );\n\n  @Effect({ dispatch: false })\n  navigateBack$: Observable<Action> = this.actions$.pipe(\n    ofType(RouterActions.BACK),\n    tap(() => this.location.back())\n  );\n\n  @Effect({ dispatch: false })\n  navigateForward$: Observable<Action> = this.actions$.pipe(\n    ofType(RouterActions.FORWARD),\n    tap(() => this.location.forward())\n  );\n\n  constructor(\n    private actions$: Actions,\n    private router: Router,\n    private location: Location\n  ) {}\n}\n","import { RouterEffects } from './router.effect';\n\nexport const effects: any[] = [RouterEffects];\n\nexport * from './router.effect';\n","import { Inject, Injectable } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WindowRef {\n  readonly document: Document;\n\n  constructor(@Inject(DOCUMENT) document) {\n    // it's a workaround to have document property properly typed\n    // see: https://github.com/angular/angular/issues/15640\n    this.document = document;\n  }\n\n  get nativeWindow(): Window {\n    return typeof window !== 'undefined' ? window : undefined;\n  }\n\n  get sessionStorage(): Storage {\n    return this.nativeWindow ? this.nativeWindow.sessionStorage : undefined;\n  }\n\n  get localStorage(): Storage {\n    return this.nativeWindow ? this.nativeWindow.localStorage : undefined;\n  }\n}\n","import { RoutesConfig } from '../routes-config';\n\nexport abstract class ConfigurableRoutesConfig {\n  routesConfig?: RoutesConfig;\n}\n","import { ServerConfig } from '../../config/server-config/server-config';\n\nexport abstract class OccConfig extends ServerConfig {\n  site?: {\n    baseSite?: string;\n    language?: string;\n    currency?: string;\n  };\n  backend?: {\n    occ?: {\n      baseUrl?: string;\n      prefix?: string;\n      endpoints?: {\n        [endpoint: string]: string;\n      };\n    };\n  };\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { RoutesConfig } from './routes-config';\nimport { deepMerge } from '../../config/utils/deep-merge';\nimport { ConfigurableRoutesConfig } from './config/configurable-routes-config';\nimport { retry } from 'rxjs/operators';\nimport { OccConfig } from '../../occ/config/occ-config';\n\nconst ENDPOINT_ROUTES_CONFIG = 'routes-config';\n\n@Injectable()\nexport class RoutesConfigLoader {\n  private _routesConfig: RoutesConfig;\n\n  get routesConfig(): RoutesConfig {\n    return this._routesConfig;\n  }\n\n  get endpoint(): string {\n    return (\n      (this.serverConfig.backend.occ.baseUrl || '') +\n      '/' +\n      ENDPOINT_ROUTES_CONFIG\n    );\n  }\n\n  constructor(\n    private readonly http: HttpClient,\n    private readonly serverConfig: OccConfig,\n    private readonly configurableRoutesConfig: ConfigurableRoutesConfig\n  ) {}\n\n  async load(): Promise<void> {\n    const shouldFetch = this.configurableRoutesConfig.routesConfig.fetch;\n    const fetchedRoutesConfig = shouldFetch\n      ? await this.fetch(this.endpoint)\n      : null;\n    this._routesConfig = this.extendStaticWith(fetchedRoutesConfig);\n  }\n\n  private fetch(url: string): Promise<any> {\n    return this.http\n      .get(url)\n      .pipe(retry(2))\n      .toPromise()\n      .catch(() => {\n        throw new Error(`Could not get routes configuration from url ${url}!`);\n      });\n  }\n\n  private extendStaticWith(routesConfig: RoutesConfig): RoutesConfig {\n    const mergedRoutesConfig = deepMerge(\n      {},\n      this.configurableRoutesConfig.routesConfig,\n      routesConfig\n    );\n    return this.extendLanguagesTranslationsWithDefault(mergedRoutesConfig);\n  }\n\n  private extendLanguagesTranslationsWithDefault(\n    routesConfig: RoutesConfig\n  ): RoutesConfig {\n    const defaultTranslations = routesConfig.translations.default;\n\n    Object.keys(routesConfig.translations).forEach(languageCode => {\n      const languageTranslations = routesConfig.translations[languageCode];\n      routesConfig.translations[languageCode] = deepMerge(\n        {},\n        defaultTranslations,\n        languageTranslations\n      );\n    });\n\n    return routesConfig;\n  }\n}\n","import {\n  UrlMatcher,\n  UrlMatchResult,\n  UrlSegment,\n  UrlSegmentGroup,\n  Route,\n} from '@angular/router';\nimport { Injectable } from '@angular/core';\n\n@Injectable({ providedIn: 'root' })\nexport class UrlMatcherFactoryService {\n  getFalsyUrlMatcher(): UrlMatcher {\n    return function falsyUrlMatcher(): null {\n      return null;\n    };\n  }\n\n  getMultiplePathsUrlMatcher(paths: string[]): UrlMatcher {\n    const self = this;\n\n    const matcher = function multiplePathsUrlMatcher(\n      segments: UrlSegment[],\n      segmentGroup: UrlSegmentGroup,\n      route: Route\n    ): UrlMatchResult | null {\n      for (let i = 0; i < paths.length; i++) {\n        const result = self.getPathUrlMatcher(paths[i])(\n          segments,\n          segmentGroup,\n          route\n        );\n        if (result) {\n          return result;\n        }\n      }\n      return null;\n    };\n    matcher.paths = paths; // property added for easier debugging of routes\n    return matcher;\n  }\n\n  // Similar to Angular's defaultUrlMatcher. The difference is that `path` comes from function's argument, not from `route.path`\n  private getPathUrlMatcher(path: string = ''): UrlMatcher {\n    return (\n      segments: UrlSegment[],\n      segmentGroup: UrlSegmentGroup,\n      route: Route\n    ): UrlMatchResult | null => {\n      const parts = path.split('/');\n\n      if (parts.length > segments.length) {\n        // The actual URL is shorter than the config, no match\n        return null;\n      }\n\n      if (\n        route.pathMatch === 'full' &&\n        (segmentGroup.hasChildren() || parts.length < segments.length)\n      ) {\n        // The config is longer than the actual URL but we are looking for a full match, return null\n        return null;\n      }\n\n      const posParams: { [key: string]: UrlSegment } = {};\n\n      // Check each config part against the actual URL\n      for (let index = 0; index < parts.length; index++) {\n        const part = parts[index];\n        const segment = segments[index];\n        const isParameter = part.startsWith(':');\n        if (isParameter) {\n          posParams[part.substring(1)] = segment;\n        } else if (part !== segment.path) {\n          // The actual URL part does not match the config, no match\n          return null;\n        }\n      }\n\n      return { consumed: segments.slice(0, parts.length), posParams };\n    };\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Routes, Router, Route } from '@angular/router';\nimport { ServerConfig } from '../../config/server-config/server-config';\nimport {\n  RoutesTranslations,\n  RouteTranslation,\n  RoutesConfig,\n} from './routes-config';\nimport { RoutesConfigLoader } from './routes-config-loader';\nimport { UrlMatcherFactoryService } from './url-matcher-factory.service';\n\ntype ConfigurableRouteKey = 'cxPath' | 'cxRedirectTo';\n\n@Injectable()\nexport class ConfigurableRoutesService {\n  constructor(\n    private config: ServerConfig,\n    private injector: Injector,\n    private routesConfigLoader: RoutesConfigLoader,\n    private urlMatcherFactory: UrlMatcherFactoryService\n  ) {}\n\n  private readonly currentLanguageCode = 'en'; // TODO: hardcoded! should be removed when more languages are supported by localized routes\n\n  private allRoutesTranslations: RoutesConfig['translations'];\n\n  private get currentRoutesTranslations(): RoutesTranslations {\n    return this.allRoutesTranslations[\n      this.currentLanguageCode\n    ] as RoutesTranslations;\n  }\n\n  private initCalled = false; // guard not to call init() more than once\n\n  /**\n   * Initializes service with given translations and translates all existing Routes in the Router.\n   */\n  async init(): Promise<void> {\n    if (!this.initCalled) {\n      this.initCalled = true;\n      await this.routesConfigLoader.load();\n      this.allRoutesTranslations = this.routesConfigLoader.routesConfig.translations;\n      this.translateRouterConfig();\n    }\n  }\n\n  private translateRouterConfig() {\n    // Router could not be injected in constructor due to cyclic dependency with APP_INITIALIZER:\n    const router = this.injector.get(Router);\n\n    const translatedRoutes = this.translateRoutes(\n      router.config,\n      this.currentRoutesTranslations\n    );\n\n    router.resetConfig(translatedRoutes);\n  }\n\n  getRouteTranslation(routeName: string): RouteTranslation {\n    const routesTranslations = this.currentRoutesTranslations;\n\n    const result = routesTranslations && routesTranslations[routeName];\n    if (!routesTranslations || result === undefined) {\n      this.warn(\n        `No route translation was configured for page '${routeName}' in language '${\n          this.currentLanguageCode\n        }'!`\n      );\n    }\n    return result;\n  }\n\n  private translateRoutes(\n    routes: Routes,\n    routesTranslations: RoutesTranslations\n  ): Routes {\n    const result = [];\n    routes.forEach(route => {\n      const translatedRoute = this.translateRoute(route, routesTranslations);\n\n      if (route.children && route.children.length) {\n        const translatedChildrenRoutes = this.translateRoutes(\n          route.children,\n          routesTranslations\n        );\n\n        translatedRoute.children = translatedChildrenRoutes;\n      }\n      result.push(translatedRoute);\n    });\n    return result;\n  }\n\n  private translateRoute(\n    route: Route,\n    routesTranslations: RoutesTranslations\n  ): Route {\n    if (this.isConfigurable(route, 'cxPath')) {\n      // we assume that 'path' and 'redirectTo' cannot be both configured for one route\n      if (this.isConfigurable(route, 'cxRedirectTo')) {\n        this.warn(\n          `A path should not have set both \"cxPath\" and \"cxRedirectTo\" properties! Route: '${route}`\n        );\n      }\n      return this.translateRoutePath(route, routesTranslations);\n    }\n\n    if (this.isConfigurable(route, 'cxRedirectTo')) {\n      return this.translateRouteRedirectTo(route, routesTranslations);\n    }\n\n    return route; // if nothing is configurable, just pass the original route\n  }\n\n  private isConfigurable(route: Route, key: ConfigurableRouteKey): boolean {\n    return !!this.getConfigurable(route, key);\n  }\n\n  private getConfigurable(route: Route, key: ConfigurableRouteKey): string {\n    return route.data && route.data[key];\n  }\n\n  private translateRoutePath(\n    route: Route,\n    routesTranslations: RoutesTranslations\n  ): Route {\n    const paths = this.getTranslatedPaths(route, 'cxPath', routesTranslations);\n    switch (paths.length) {\n      case 0:\n        delete route.path;\n        return {\n          ...route,\n          matcher: this.urlMatcherFactory.getFalsyUrlMatcher(),\n        };\n\n      case 1:\n        delete route.matcher;\n        return { ...route, path: paths[0] };\n\n      default:\n        delete route.path;\n        return {\n          ...route,\n          matcher: this.urlMatcherFactory.getMultiplePathsUrlMatcher(paths),\n        };\n    }\n  }\n\n  private translateRouteRedirectTo(\n    route: Route,\n    translations: RoutesTranslations\n  ): Route {\n    const translatedPaths = this.getTranslatedPaths(\n      route,\n      'cxRedirectTo',\n      translations\n    );\n    return translatedPaths.length\n      ? { ...route, redirectTo: translatedPaths[0] } // take the first path from list by convention\n      : route;\n  }\n\n  private getTranslatedPaths(\n    route: Route,\n    key: ConfigurableRouteKey,\n    routesTranslations: RoutesTranslations\n  ): string[] {\n    const routeName = this.getConfigurable(route, key);\n    const translation = this.getRouteTranslation(routeName);\n    if (translation === undefined) {\n      this.warn(\n        `Could not translate key '${key}' of route '${routeName}'`,\n        route,\n        `due to undefined key '${routeName}' in routes translations`,\n        routesTranslations\n      );\n      return [];\n    }\n    if (translation && translation.paths === undefined) {\n      this.warn(\n        `Could not translate key '${key}' of route '${routeName}'`,\n        route,\n        `due to undefined 'paths' key for '${routeName}' route in routes translations`,\n        routesTranslations\n      );\n      return [];\n    }\n\n    // translation or translation.paths can be null - which means switching off the route\n    return (translation && translation.paths) || [];\n  }\n\n  private warn(...args) {\n    if (!this.config.production) {\n      console.warn(...args);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UrlSegmentGroup, PRIMARY_OUTLET } from '@angular/router';\n\n@Injectable()\nexport class UrlParsingService {\n  constructor(private router: Router) {}\n\n  getPrimarySegments(url: string): string[] {\n    const urlTree = this.router.parseUrl(url);\n    return this._getPrimarySegmentsFromUrlTree(urlTree.root);\n  }\n\n  private _getPrimarySegmentsFromUrlTree(tree: UrlSegmentGroup): string[] {\n    const segments = tree.segments.map(s => s.path);\n    const childrenSegments = tree.children[PRIMARY_OUTLET]\n      ? this._getPrimarySegmentsFromUrlTree(tree.children[PRIMARY_OUTLET])\n      : [];\n    return segments.concat(childrenSegments);\n  }\n}\n","export const isParam = (segment: string): boolean => segment.startsWith(':');\n\nexport const getParamName = (segment: string): string => segment.slice(1); // it just removes leading ':'\n\nexport const ensureLeadingSlash = (path: string): string =>\n  path.startsWith('/') ? path : '/' + path;\n\nexport const removeLeadingSlash = (path: string): string =>\n  path.startsWith('/') ? path.slice(1) : path;\n","import { Injectable } from '@angular/core';\nimport { ConfigurableRoutesService } from '../configurable-routes.service';\nimport { UrlParsingService } from './url-parsing.service';\nimport { ServerConfig } from '../../../config/server-config/server-config';\nimport { RouteTranslation, ParamsMapping } from '../routes-config';\nimport { getParamName, isParam } from './path-utils';\nimport {\n  TranslateUrlCommandRoute,\n  TranslateUrlCommands,\n  TranslateUrlOptions,\n} from './translate-url-commands';\n\n@Injectable()\nexport class UrlTranslationService {\n  readonly ROOT_URL = ['/'];\n\n  constructor(\n    private configurableRoutesService: ConfigurableRoutesService,\n    private urlParser: UrlParsingService,\n    private config: ServerConfig\n  ) {}\n\n  translate(\n    commands: TranslateUrlCommands,\n    options: TranslateUrlOptions = {}\n  ): any[] {\n    if (!Array.isArray(commands)) {\n      commands = [commands];\n    }\n\n    const result: string[] = [];\n    for (const command of commands) {\n      if (!command || !command.route) {\n        // don't modify segment that is not route command:\n        result.push(command);\n      } else {\n        // generate array with url segments for given options object:\n        const partialResult = this.generateUrl(command);\n\n        if (partialResult === null) {\n          return this.ROOT_URL;\n        }\n\n        result.push(...partialResult);\n      }\n    }\n\n    if (!options.relative) {\n      result.unshift(''); // ensure absolute path ( leading '' in path array is equivalent to leading '/' in string)\n    }\n\n    return result;\n  }\n\n  private generateUrl(command: TranslateUrlCommandRoute): string[] | null {\n    this.standarizeRouteCommand(command);\n\n    if (!command.route) {\n      return null;\n    }\n\n    const routeTranslation = this.configurableRoutesService.getRouteTranslation(\n      command.route\n    );\n\n    // if no route translation was configured, return null:\n    if (!routeTranslation || !routeTranslation.paths) {\n      return null;\n    }\n\n    // find first path that can satisfy it's parameters with given parameters\n    const path = this.findPathWithFillableParams(\n      routeTranslation,\n      command.params\n    );\n\n    // if there is no configured path that can be satisfied with given params, return null\n    if (!path) {\n      return null;\n    }\n\n    const result = this.provideParamsValues(\n      path,\n      command.params,\n      routeTranslation.paramsMapping\n    );\n\n    return result;\n  }\n\n  private standarizeRouteCommand(command: TranslateUrlCommandRoute): void {\n    command.params = command.params || {};\n  }\n\n  private provideParamsValues(\n    path: string,\n    params: object,\n    paramsMapping: ParamsMapping\n  ): string[] {\n    return this.urlParser.getPrimarySegments(path).map(segment => {\n      if (isParam(segment)) {\n        const paramName = getParamName(segment);\n        const mappedParamName = this.getMappedParamName(\n          paramName,\n          paramsMapping\n        );\n        return params[mappedParamName];\n      }\n      return segment;\n    });\n  }\n\n  private findPathWithFillableParams(\n    routeTranslation: RouteTranslation,\n    params: object\n  ): string {\n    const foundPath = routeTranslation.paths.find(path =>\n      this.getParams(path).every(paramName => {\n        const mappedParamName = this.getMappedParamName(\n          paramName,\n          routeTranslation.paramsMapping\n        );\n\n        return params[mappedParamName] !== undefined;\n      })\n    );\n\n    if (foundPath === undefined || foundPath === null) {\n      this.warn(\n        `No configured path matches all its params to given object. `,\n        `Route translation: `,\n        routeTranslation,\n        `Params object: `,\n        params\n      );\n      return null;\n    }\n    return foundPath;\n  }\n\n  private getParams(path: string) {\n    return this.urlParser\n      .getPrimarySegments(path)\n      .filter(isParam)\n      .map(getParamName);\n  }\n\n  private getMappedParamName(paramName: string, paramsMapping: object): string {\n    if (paramsMapping) {\n      return paramsMapping[paramName] || paramName;\n    }\n    return paramName;\n  }\n\n  private warn(...args) {\n    if (!this.config.production) {\n      console.warn(...args);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NavigationExtras } from '@angular/router';\n\nimport { select, Store } from '@ngrx/store';\n\nimport { Observable } from 'rxjs';\n\nimport * as fromStore from '../store';\nimport { PageContext } from '../models/page-context.model';\nimport { WindowRef } from '../../window/window-ref';\nimport { TranslateUrlCommands } from '../configurable-routes/url-translation/translate-url-commands';\nimport { UrlTranslationService } from '../configurable-routes/url-translation/url-translation.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RoutingService {\n  constructor(\n    private store: Store<fromStore.RouterState>,\n    private winRef: WindowRef,\n    private urlTranslator: UrlTranslationService\n  ) {}\n\n  /**\n   * Get the current router state\n   */\n  getRouterState(): Observable<any> {\n    return this.store.pipe(select(fromStore.getRouterState));\n  }\n\n  /**\n   * Get the `PageContext` from the state\n   */\n  getPageContext(): Observable<PageContext> {\n    return this.store.pipe(select(fromStore.getPageContext));\n  }\n\n  /**\n   * Navigation with a new state into history\n   * @param commands: url commands\n   * @param query\n   * @param extras: Represents the extra options used during navigation.\n   */\n  go(\n    commands: TranslateUrlCommands,\n    query?: object,\n    extras?: NavigationExtras\n  ): void {\n    const path = this.urlTranslator.translate(commands, { relative: true });\n\n    return this.navigate(path, query, extras);\n  }\n\n  /**\n   * Navigation using URL\n   * @param url\n   */\n  goByUrl(url: string) {\n    this.store.dispatch(new fromStore.GoByUrl(url));\n  }\n\n  /**\n   * Navigating back\n   */\n  back(): void {\n    const isLastPageInApp =\n      this.winRef.document.referrer.indexOf(\n        this.winRef.nativeWindow.location.origin\n      ) > -1;\n    if (isLastPageInApp) {\n      this.store.dispatch(new fromStore.Back());\n      return;\n    }\n    this.go(['/']);\n    return;\n  }\n\n  /**\n   * Navigating forward\n   */\n  forward(): void {\n    this.store.dispatch(new fromStore.Forward());\n  }\n\n  /**\n   * Get the redirect url from store\n   */\n  getRedirectUrl(): Observable<string> {\n    return this.store.pipe(select(fromStore.getRedirectUrl));\n  }\n\n  /**\n   * Remove the redirect url from store\n   */\n  clearRedirectUrl(): void {\n    this.store.dispatch(new fromStore.ClearRedirectUrl());\n  }\n\n  /**\n   * Put redirct url into store\n   * @param url: redirect url\n   */\n  saveRedirectUrl(url: string): void {\n    this.store.dispatch(new fromStore.SaveRedirectUrl(url));\n  }\n\n  /**\n   * Navigation with a new state into history\n   * @param path\n   * @param query\n   * @param extras: Represents the extra options used during navigation.\n   */\n  private navigate(\n    path: any[],\n    query?: object,\n    extras?: NavigationExtras\n  ): void {\n    this.store.dispatch(\n      new fromStore.Go({\n        path,\n        query,\n        extras,\n      })\n    );\n  }\n}\n","import { StorefrontRoutesTranslations } from './storefront-routes-translations';\n\nexport const defaultStorefrontRoutesTranslations: {\n  default?: StorefrontRoutesTranslations;\n  [languageCode: string]: StorefrontRoutesTranslations;\n} = {\n  default: {\n    home: { paths: [''] },\n    cart: { paths: ['cart'] },\n    search: { paths: ['search/:query'] },\n    login: { paths: ['login'] },\n    register: { paths: ['register'] },\n    resetPassword: { paths: ['login/pw/change'] },\n    forgotPassword: { paths: ['forgot-password'] },\n    checkout: { paths: ['checkout'] },\n    orderConfirmation: { paths: ['order-confirmation'] },\n    product: {\n      paths: ['product/:productCode'],\n      paramsMapping: { productCode: 'code' },\n    },\n    category: {\n      paths: ['category/:categoryCode'],\n      paramsMapping: { categoryCode: 'code' },\n    },\n    brand: { paths: ['Brands/:brandName/c/:brandCode'] },\n    termsAndConditions: { paths: ['termsAndConditions'] },\n    orders: { paths: ['my-account/orders'] },\n    orderDetails: {\n      paths: ['my-account/orders/:orderCode'],\n      paramsMapping: { orderCode: 'code' },\n    },\n    addressBook: { paths: ['my-account/address-book'] },\n    updatePassword: { paths: ['my-account/update-password'] },\n    paymentManagement: { paths: ['my-account/payment-details'] },\n    updateEmail: { paths: ['my-account/update-email'] },\n    updateProfile: { paths: ['my-account/update-profile'] },\n    closeAccount: { paths: ['my-account/close-account'] },\n  },\n\n  en: {} as any,\n};\n","import { ConfigurableRoutesConfig } from './configurable-routes-config';\nimport { defaultStorefrontRoutesTranslations } from './default-storefront-routes-translations';\n\nexport const defaultConfigurableRoutesConfig: ConfigurableRoutesConfig = {\n  routesConfig: {\n    translations: defaultStorefrontRoutesTranslations,\n    fetch: false,\n  },\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule, APP_INITIALIZER } from '@angular/core';\nimport { ConfigurableRoutesService } from './configurable-routes.service';\nimport { RoutesConfigLoader } from './routes-config-loader';\nimport { ConfigModule, Config } from '../../config/config.module';\nimport { ConfigurableRoutesConfig } from './config/configurable-routes-config';\nimport { defaultConfigurableRoutesConfig } from './config/default-configurable-routes-config';\nimport { UrlParsingService } from './url-translation/url-parsing.service';\nimport { UrlTranslationService } from './url-translation/url-translation.service';\n\nexport function initConfigurableRoutes(\n  service: ConfigurableRoutesService\n): () => Promise<void> {\n  const result = () => service.init(); // workaround for AOT compilation (see https://stackoverflow.com/a/51977115)\n  return result;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ConfigModule.withConfig(defaultConfigurableRoutesConfig),\n  ],\n  declarations: [],\n  exports: [],\n  providers: [\n    ConfigurableRoutesService,\n    RoutesConfigLoader,\n    UrlTranslationService,\n    UrlParsingService,\n    {\n      provide: APP_INITIALIZER,\n      useFactory: initConfigurableRoutes,\n      deps: [ConfigurableRoutesService],\n      multi: true,\n    },\n    { provide: ConfigurableRoutesConfig, useExisting: Config },\n  ],\n})\nexport class ConfigurableRoutesModule {}\n","import { NgModule } from '@angular/core';\n\nimport {\n  StoreRouterConnectingModule,\n  RouterStateSerializer,\n} from '@ngrx/router-store';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport {\n  reducerToken,\n  CustomSerializer,\n  reducerProvider,\n} from './store/reducers/router.reducer';\nimport { effects } from './store/effects/index';\n\nimport { RouterModule } from '@angular/router';\nimport { RoutingService } from './facade/routing.service';\n\nimport { ROUTING_FEATURE } from './state';\nimport { ConfigurableRoutesModule } from './configurable-routes/configurable-routes.module';\n\n@NgModule({\n  imports: [\n    ConfigurableRoutesModule,\n    RouterModule.forRoot([], {\n      scrollPositionRestoration: 'enabled',\n      anchorScrolling: 'enabled',\n    }),\n    StoreModule.forFeature(ROUTING_FEATURE, reducerToken),\n    EffectsModule.forFeature(effects),\n    StoreRouterConnectingModule.forRoot({\n      stateKey: ROUTING_FEATURE, // name of reducer key\n    }),\n  ],\n  providers: [\n    RoutingService,\n    reducerProvider,\n    {\n      provide: RouterStateSerializer,\n      useClass: CustomSerializer,\n    },\n  ],\n})\nexport class RoutingModule {}\n","import { OccConfig } from '../../occ/config/occ-config';\n\nexport abstract class AuthConfig extends OccConfig {\n  authentication?: {\n    client_id?: string;\n    client_secret?: string;\n  };\n}\n","import { AuthConfig } from './auth-config';\n\nexport const defaultAuthConfig: AuthConfig = {\n  authentication: {\n    client_id: 'mobile_android',\n    client_secret: 'secret',\n  },\n};\n","import { LoaderState } from '../../state/utils/loader/loader-state';\nimport { ClientToken, UserToken } from '../models/token-types.model';\n\nexport const AUTH_FEATURE = 'auth';\nexport const CLIENT_TOKEN_DATA = '[Auth] Client Token Data';\nexport interface StateWithAuth {\n  [AUTH_FEATURE]: AuthState;\n}\n\nexport interface AuthState {\n  userToken: UserTokenState;\n  clientToken: LoaderState<ClientToken>;\n}\n\nexport interface UserTokenState {\n  token: UserToken;\n}\n","import { Action } from '@ngrx/store';\n\nexport const LOADER_LOAD_ACTION = '[LOADER] LOAD';\nexport const LOADER_FAIL_ACTION = '[LOADER] FAIL';\nexport const LOADER_SUCCESS_ACTION = '[LOADER] SUCCESS';\nexport const LOADER_RESET_ACTION = '[LOADER] RESET';\n\nexport interface LoaderMeta {\n  entityType: string;\n  loader: {\n    load?: boolean;\n    error?: any;\n    success?: boolean;\n  };\n}\n\nexport interface LoaderAction extends Action {\n  readonly payload?: any;\n  readonly meta?: LoaderMeta;\n}\n\nexport function loadMeta(entityType: string): LoaderMeta {\n  return {\n    entityType: entityType,\n    loader: {\n      load: true,\n    },\n  };\n}\n\nexport function failMeta(entityType: string, error?: any): LoaderMeta {\n  return {\n    entityType: entityType,\n    loader: {\n      error: error ? error : true,\n    },\n  };\n}\n\nexport function successMeta(entityType: string): LoaderMeta {\n  return {\n    entityType: entityType,\n    loader: {\n      success: true,\n    },\n  };\n}\n\nexport function resetMeta(entityType: string): LoaderMeta {\n  return {\n    entityType: entityType,\n    loader: {},\n  };\n}\n\nexport class LoaderLoadAction implements LoaderAction {\n  type = LOADER_LOAD_ACTION;\n  readonly meta: LoaderMeta;\n  constructor(entityType: string) {\n    this.meta = loadMeta(entityType);\n  }\n}\n\nexport class LoaderFailAction implements LoaderAction {\n  type = LOADER_FAIL_ACTION;\n  readonly meta: LoaderMeta;\n  constructor(entityType: string, error?: any) {\n    this.meta = failMeta(entityType, error);\n  }\n}\n\nexport class LoaderSuccessAction implements LoaderAction {\n  type = LOADER_SUCCESS_ACTION;\n  readonly meta: LoaderMeta;\n  constructor(entityType: string) {\n    this.meta = successMeta(entityType);\n  }\n}\n\nexport class LoaderResetAction implements LoaderAction {\n  type = LOADER_RESET_ACTION;\n  readonly meta: LoaderMeta;\n  constructor(entityType: string) {\n    this.meta = resetMeta(entityType);\n  }\n}\n","import { CLIENT_TOKEN_DATA } from '../auth-state';\nimport { ClientToken } from '../../models/token-types.model';\nimport {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\n\nexport const LOAD_CLIENT_TOKEN = '[Token] Create Client Token';\nexport const LOAD_CLIENT_TOKEN_FAIL = '[Token] Create Client Token Fail';\nexport const LOAD_CLIENT_TOKEN_SUCCESS = '[Token] Create Client Token Success';\n\nexport class LoadClientToken extends LoaderLoadAction {\n  readonly type = LOAD_CLIENT_TOKEN;\n  constructor() {\n    super(CLIENT_TOKEN_DATA);\n  }\n}\n\nexport class LoadClientTokenFail extends LoaderFailAction {\n  readonly type = LOAD_CLIENT_TOKEN_FAIL;\n  constructor(public payload: any) {\n    super(CLIENT_TOKEN_DATA, payload);\n  }\n}\n\nexport class LoadClientTokenSuccess extends LoaderSuccessAction {\n  readonly type = LOAD_CLIENT_TOKEN_SUCCESS;\n  constructor(public payload: ClientToken) {\n    super(CLIENT_TOKEN_DATA);\n  }\n}\n\nexport type ClientTokenAction =\n  | LoadClientToken\n  | LoadClientTokenFail\n  | LoadClientTokenSuccess;\n","import { Action } from '@ngrx/store';\nimport { UserToken } from '../../models/token-types.model';\n\nexport const LOAD_USER_TOKEN = '[Auth] Load User Token';\nexport const LOAD_USER_TOKEN_FAIL = '[Auth] Load User Token Fail';\nexport const LOAD_USER_TOKEN_SUCCESS = '[Auth] Load User Token Success';\nexport const REFRESH_USER_TOKEN = '[Auth] Refresh User Token';\nexport const REFRESH_USER_TOKEN_FAIL = '[Auth] Refresh User Token Fail';\nexport const REFRESH_USER_TOKEN_SUCCESS = '[Auth] Refresh User Token Success';\n\nexport class LoadUserToken implements Action {\n  readonly type = LOAD_USER_TOKEN;\n  constructor(public payload: { userId: string; password: string }) {}\n}\n\nexport class LoadUserTokenFail implements Action {\n  readonly type = LOAD_USER_TOKEN_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadUserTokenSuccess implements Action {\n  readonly type = LOAD_USER_TOKEN_SUCCESS;\n  constructor(public payload: UserToken) {}\n}\n\nexport class RefreshUserToken implements Action {\n  readonly type = REFRESH_USER_TOKEN;\n  constructor(public payload: { userId: string; refreshToken: string }) {}\n}\n\nexport class RefreshUserTokenSuccess implements Action {\n  readonly type = REFRESH_USER_TOKEN_SUCCESS;\n  constructor(public payload: UserToken) {}\n}\n\nexport class RefreshUserTokenFail implements Action {\n  readonly type = REFRESH_USER_TOKEN_FAIL;\n  constructor(public payload: any) {}\n}\n\n// action types\nexport type UserTokenAction =\n  | LoadUserToken\n  | LoadUserTokenFail\n  | LoadUserTokenSuccess\n  | RefreshUserToken\n  | RefreshUserTokenFail\n  | RefreshUserTokenSuccess;\n","import { createFeatureSelector, MemoizedSelector } from '@ngrx/store';\nimport { AUTH_FEATURE, AuthState } from '../auth-state';\n\nexport const getAuthState: MemoizedSelector<\n  any,\n  AuthState\n> = createFeatureSelector<AuthState>(AUTH_FEATURE);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\n\nimport { AuthState, StateWithAuth } from '../auth-state';\nimport { ClientToken } from '../../models/token-types.model';\n\nimport { getAuthState } from './feature.selector';\n\nexport const getClientTokenState: MemoizedSelector<\n  StateWithAuth,\n  LoaderState<ClientToken>\n> = createSelector(\n  getAuthState,\n  (state: AuthState) => state.clientToken\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { UserToken } from '../../models/token-types.model';\nimport { AuthState, StateWithAuth, UserTokenState } from '../auth-state';\nimport { getAuthState } from './feature.selector';\n\nexport const getUserTokenSelector = (state: UserTokenState) => state.token;\n\nexport const getUserTokenState: MemoizedSelector<\n  StateWithAuth,\n  UserTokenState\n> = createSelector(\n  getAuthState,\n  (state: AuthState) => state.userToken\n);\n\nexport const getUserToken: MemoizedSelector<any, UserToken> = createSelector(\n  getUserTokenState,\n  getUserTokenSelector\n);\n","import { Injectable } from '@angular/core';\n\nimport { select, Store } from '@ngrx/store';\n\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { LoaderState } from '../../state/utils/loader/loader-state';\n\nimport { ClientToken, UserToken } from '../models/token-types.model';\nimport { StateWithAuth } from '../store/auth-state';\nimport { LoadClientToken } from '../store/actions/client-token.action';\nimport { Login, Logout } from '../store/actions/login-logout.action';\nimport {\n  LoadUserToken,\n  RefreshUserToken,\n  LoadUserTokenSuccess,\n} from '../store/actions/user-token.action';\nimport { getClientTokenState } from '../store/selectors/client-token.selectors';\nimport { getUserToken } from '../store/selectors/user-token.selectors';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthService {\n  constructor(private store: Store<StateWithAuth>) {}\n\n  /**\n   * Loads a new user token\n   * @param userId\n   * @param password\n   */\n  authorize(userId: string, password: string): void {\n    this.store.dispatch(\n      new LoadUserToken({\n        userId: userId,\n        password: password,\n      })\n    );\n  }\n\n  /**\n   * Returns the user's token\n   */\n  getUserToken(): Observable<UserToken> {\n    return this.store.pipe(select(getUserToken));\n  }\n\n  /**\n   * Refreshes the user token\n   * @param token a user token to refresh\n   */\n  refreshUserToken(token: UserToken): void {\n    this.store.dispatch(\n      new RefreshUserToken({\n        userId: token.userId,\n        refreshToken: token.refresh_token,\n      })\n    );\n  }\n\n  /**\n   * Store the provided token\n   */\n  authorizeWithToken(token: UserToken): void {\n    this.store.dispatch(new LoadUserTokenSuccess(token));\n  }\n\n  /**\n   * Login\n   */\n  login(): void {\n    this.store.dispatch(new Login());\n  }\n\n  /**\n   * Logout\n   */\n  logout(): void {\n    this.store.dispatch(new Logout());\n  }\n\n  /**\n   * Returns a client token.  The client token from the store is returned if there is one.\n   * Otherwise, an new token is fetched from the backend and saved in the store.\n   */\n  getClientToken(): Observable<ClientToken> {\n    return this.store.pipe(\n      select(getClientTokenState),\n      filter((state: LoaderState<ClientToken>) => {\n        if (this.isClientTokenLoaded(state)) {\n          return true;\n        } else {\n          if (!state.loading) {\n            this.store.dispatch(new LoadClientToken());\n          }\n          return false;\n        }\n      }),\n      map((state: LoaderState<ClientToken>) => state.value)\n    );\n  }\n\n  /**\n   * Fetches a clientToken from the backend ans saves it in the store where getClientToken can use it.\n   * The new clientToken is returned.\n   */\n  refreshClientToken(): Observable<ClientToken> {\n    this.store.dispatch(new LoadClientToken());\n\n    return this.store.pipe(\n      select(getClientTokenState),\n      filter((state: LoaderState<ClientToken>) =>\n        this.isClientTokenLoaded(state)\n      ),\n      map((state: LoaderState<ClientToken>) => state.value)\n    );\n  }\n\n  protected isClientTokenLoaded(state: LoaderState<ClientToken>): boolean {\n    return (state.success || state.error) && !state.loading;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler } from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\n\nimport { AuthService } from '../../facade/auth.service';\nimport { ClientToken } from '../../models/token-types.model';\n\n@Injectable()\nexport class ClientErrorHandlingService {\n  constructor(private authService: AuthService) {}\n\n  public handleExpiredClientToken(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<any> {\n    return this.authService.refreshClientToken().pipe(\n      take(1),\n      switchMap((token: ClientToken) => {\n        return next.handle(this.createNewRequestWithNewToken(request, token));\n      })\n    );\n  }\n\n  private createNewRequestWithNewToken(\n    request: HttpRequest<any>,\n    token: ClientToken\n  ): HttpRequest<any> {\n    request = request.clone({\n      setHeaders: {\n        Authorization: `${token.token_type} ${token.access_token}`,\n      },\n    });\n    return request;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { tap, filter, take, switchMap } from 'rxjs/operators';\n\nimport { AuthService } from '../../facade/auth.service';\nimport { UserToken } from '../../models/token-types.model';\nimport { RoutingService } from '../../../routing/facade/routing.service';\n\n@Injectable()\nexport class UserErrorHandlingService {\n  constructor(\n    private authService: AuthService,\n    private routingService: RoutingService\n  ) {}\n\n  public handleExpiredUserToken(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<UserToken>> {\n    return this.handleExpiredToken().pipe(\n      switchMap((token: UserToken) => {\n        return next.handle(this.createNewRequestWithNewToken(request, token));\n      })\n    );\n  }\n\n  public handleExpiredRefreshToken(): void {\n    // Logout user\n    this.authService.logout();\n  }\n\n  private handleExpiredToken(): Observable<UserToken> {\n    let oldToken: UserToken;\n    return this.authService.getUserToken().pipe(\n      tap((token: UserToken) => {\n        if (token.access_token && token.refresh_token && !oldToken) {\n          this.authService.refreshUserToken(token);\n        } else if (!token.access_token && !token.refresh_token) {\n          this.routingService.go({ route: 'login' });\n        }\n        oldToken = oldToken || token;\n      }),\n      filter(\n        (token: UserToken) => oldToken.access_token !== token.access_token\n      ),\n      take(1)\n    );\n  }\n\n  private createNewRequestWithNewToken(\n    request: HttpRequest<any>,\n    token: UserToken\n  ): HttpRequest<any> {\n    request = request.clone({\n      setHeaders: {\n        Authorization: `${token.token_type} ${token.access_token}`,\n      },\n    });\n    return request;\n  }\n}\n","import { HttpHeaders, HttpRequest } from '@angular/common/http';\n\nexport const USE_CLIENT_TOKEN = 'cx-use-client-token';\n\nexport class InterceptorUtil {\n  static createHeader<T>(\n    headerName: string,\n    interceptorParam: T,\n    headers?: HttpHeaders\n  ): HttpHeaders {\n    if (headers) {\n      return headers.append(headerName, JSON.stringify(interceptorParam));\n    }\n    headers = new HttpHeaders().set(\n      headerName,\n      JSON.stringify(interceptorParam)\n    );\n    return headers;\n  }\n\n  static removeHeader(\n    headerName: string,\n    request: HttpRequest<any>\n  ): HttpRequest<any> {\n    const updatedHeaders = request.headers.delete(headerName);\n    return request.clone({ headers: updatedHeaders });\n  }\n\n  static getInterceptorParam<T>(headerName: string, headers: HttpHeaders): T {\n    const rawValue = headers.get(headerName);\n    if (rawValue) {\n      return JSON.parse(rawValue);\n    }\n    return undefined;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpInterceptor,\n  HttpHandler,\n  HttpEvent,\n  HttpErrorResponse,\n} from '@angular/common/http';\nimport { HttpRequest } from '@angular/common/http';\n\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport { AuthService } from '../facade/auth.service';\nimport { ClientErrorHandlingService } from '../services/client-error/client-error-handling.service';\nimport { UserErrorHandlingService } from '../services/user-error/user-error-handling.service';\nimport {\n  InterceptorUtil,\n  USE_CLIENT_TOKEN,\n} from '../../occ/utils/interceptor-util';\n\nconst OAUTH_ENDPOINT = '/authorizationserver/oauth/token';\n\n@Injectable()\nexport class AuthErrorInterceptor implements HttpInterceptor {\n  constructor(\n    private userErrorHandlingService: UserErrorHandlingService,\n    private clientErrorHandlingService: ClientErrorHandlingService,\n    private authService: AuthService\n  ) {}\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    const isClientTokenRequest = this.isClientTokenRequest(request);\n    if (isClientTokenRequest) {\n      request = InterceptorUtil.removeHeader(USE_CLIENT_TOKEN, request);\n    }\n\n    return next.handle(request).pipe(\n      catchError((errResponse: any) => {\n        if (errResponse instanceof HttpErrorResponse) {\n          switch (errResponse.status) {\n            case 401: // Unauthorized\n              if (isClientTokenRequest) {\n                if (this.isExpiredToken(errResponse)) {\n                  return this.clientErrorHandlingService.handleExpiredClientToken(\n                    request,\n                    next\n                  );\n                }\n                // user token request\n              } else {\n                if (this.isExpiredToken(errResponse)) {\n                  return this.userErrorHandlingService.handleExpiredUserToken(\n                    request,\n                    next\n                  );\n                } else if (\n                  // Refresh expired token\n                  // Check that the OAUTH endpoint was called and the error is for refresh token is expired\n                  errResponse.url.indexOf(OAUTH_ENDPOINT) !== -1 &&\n                  errResponse.error.error === 'invalid_token'\n                ) {\n                  this.userErrorHandlingService.handleExpiredRefreshToken();\n                  return of();\n                }\n              }\n              break;\n            case 400: // Bad Request\n              if (\n                errResponse.url.indexOf(OAUTH_ENDPOINT) !== -1 &&\n                errResponse.error.error === 'invalid_grant'\n              ) {\n                if (request.body.get('grant_type') === 'refresh_token') {\n                  // refresh token fail, force user logout\n                  this.authService.logout();\n                }\n              }\n              break;\n          }\n        }\n        return throwError(errResponse);\n      })\n    );\n  }\n\n  private isClientTokenRequest(request: HttpRequest<any>): boolean {\n    const isRequestMapping = InterceptorUtil.getInterceptorParam(\n      USE_CLIENT_TOKEN,\n      request.headers\n    );\n    return Boolean(isRequestMapping);\n  }\n\n  private isExpiredToken(resp: HttpErrorResponse): boolean {\n    if (\n      resp.error &&\n      resp.error.errors &&\n      resp.error.errors instanceof Array &&\n      resp.error.errors[0]\n    ) {\n      return resp.error.errors[0].type === 'InvalidTokenError';\n    }\n    return false;\n  }\n}\n","import { Currency, Language } from '../../occ/occ-models/occ.models';\nexport const SITE_CONTEXT_FEATURE = 'siteContext';\n\nexport interface StateWithSiteContext {\n  [SITE_CONTEXT_FEATURE]: SiteContextState;\n}\n\nexport interface SiteContextState {\n  languages: LanguagesState;\n  currencies: CurrenciesState;\n  baseSite: string;\n}\n\nexport interface CurrencyEntities {\n  [isocode: string]: Currency;\n}\n\nexport interface CurrenciesState {\n  entities: CurrencyEntities;\n  activeCurrency: string;\n}\nexport interface LanguagesEntities {\n  [isocode: string]: Language;\n}\n\nexport interface LanguagesState {\n  entities: LanguagesEntities;\n  activeLanguage: string;\n}\n","import { MemoizedSelector, createFeatureSelector } from '@ngrx/store';\nimport {\n  SiteContextState,\n  SITE_CONTEXT_FEATURE,\n  StateWithSiteContext,\n} from '../state';\n\nexport const getSiteContextState: MemoizedSelector<\n  StateWithSiteContext,\n  SiteContextState\n> = createFeatureSelector<SiteContextState>(SITE_CONTEXT_FEATURE);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { StateWithSiteContext, SiteContextState } from '../state';\nimport { getSiteContextState } from './site-context.selector';\n\nexport const getActiveBaseSite: MemoizedSelector<\n  StateWithSiteContext,\n  string\n> = createSelector(\n  getSiteContextState,\n  (state: SiteContextState) => state.baseSite\n);\n","import { Action } from '@ngrx/store';\n\nexport const SET_ACTIVE_BASE_SITE = '[Site-context] Set Active BaseSite';\nexport const BASE_SITE_CHANGE = '[Site-context] BaseSite Change';\n\nexport class SetActiveBaseSite implements Action {\n  readonly type = SET_ACTIVE_BASE_SITE;\n  constructor(public payload: string) {}\n}\n\nexport class BaseSiteChange implements Action {\n  readonly type = BASE_SITE_CHANGE;\n}\n\n// action types\nexport type BaseSiteAction = SetActiveBaseSite | BaseSiteChange;\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SiteContext } from './site-context.interface';\nimport { select, Store } from '@ngrx/store';\nimport { filter, map, take } from 'rxjs/operators';\nimport { getActiveBaseSite } from '../store/selectors/base-site.selectors';\nimport { StateWithSiteContext } from '../store/state';\nimport { SetActiveBaseSite } from '../store/actions/base-site.action';\n\n@Injectable()\nexport class BaseSiteService implements SiteContext<string> {\n  constructor(private store: Store<StateWithSiteContext>) {}\n\n  /**\n   * Represents the current baseSite.\n   */\n  getActive(): Observable<string> {\n    return this.store.pipe(\n      select(getActiveBaseSite),\n      filter(Boolean)\n    );\n  }\n\n  /**\n   * We currently don't support switching baseSite at run time\n   */\n  getAll(): Observable<string[]> {\n    return this.getActive().pipe(map(baseSite => [baseSite]));\n  }\n\n  setActive(baseSite: string) {\n    return this.store\n      .pipe(\n        select(getActiveBaseSite),\n        take(1)\n      )\n      .subscribe(activeBaseSite => {\n        if (activeBaseSite !== baseSite) {\n          this.store.dispatch(new SetActiveBaseSite(baseSite));\n        }\n      });\n  }\n\n  /**\n   * Initializes the active baseSite.\n   */\n  initialize(defaultBaseSite: string) {\n    this.setActive(defaultBaseSite);\n  }\n}\n","export class DynamicTemplate {\n  static resolve(templateString: string, templateVariables: Object) {\n    const keys = Object.keys(templateVariables);\n    // Can't use Object.values as the compilation settings are to es2015 not es2017\n    const values = keys.map(key => templateVariables[key]);\n\n    const templateFunction = new Function(\n      ...keys,\n      `return \\`${templateString}\\`;`\n    );\n    return templateFunction(...values);\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { BaseSiteService } from '../../site-context/facade/base-site.service';\nimport { OccConfig } from '../config/occ-config';\nimport { DynamicTemplate } from '../../config/utils/dynamic-template';\nimport { HttpParams } from '@angular/common/http';\nimport { HttpParamsOptions } from '@angular/common/http/src/params';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OccEndpointsService {\n  private activeBaseSite: string;\n\n  constructor(\n    private config: OccConfig,\n    @Optional() private baseSiteService: BaseSiteService\n  ) {\n    this.activeBaseSite = (this.config.site && this.config.site.baseSite) || '';\n\n    if (this.baseSiteService) {\n      this.baseSiteService\n        .getActive()\n        .subscribe(value => (this.activeBaseSite = value));\n    }\n  }\n\n  getBaseEndpoint(): string {\n    if (!this.config || !this.config.backend || !this.config.backend.occ) {\n      return '';\n    }\n\n    return (\n      (this.config.backend.occ.baseUrl || '') +\n      this.config.backend.occ.prefix +\n      this.activeBaseSite\n    );\n  }\n\n  getEndpoint(endpoint: string): string {\n    if (!endpoint.startsWith('/')) {\n      endpoint = '/' + endpoint;\n    }\n    return this.getBaseEndpoint() + endpoint;\n  }\n\n  getUrl(endpoint: string, urlParams?: object, queryParams?: object): string {\n    if (\n      this.config.backend &&\n      this.config.backend.occ &&\n      this.config.backend.occ.endpoints[endpoint]\n    ) {\n      endpoint = this.config.backend.occ.endpoints[endpoint];\n    }\n\n    if (urlParams) {\n      endpoint = DynamicTemplate.resolve(endpoint, urlParams);\n    }\n\n    if (queryParams) {\n      let httpParamsOptions: HttpParamsOptions;\n\n      if (endpoint.indexOf('?') !== -1) {\n        let queryParamsFromEndpoint;\n        [endpoint, queryParamsFromEndpoint] = endpoint.split('?');\n\n        httpParamsOptions = { fromString: queryParamsFromEndpoint };\n      }\n\n      let httpParams = new HttpParams(httpParamsOptions);\n      Object.keys(queryParams).forEach(key => {\n        const value = queryParams[key];\n        if (value !== undefined) {\n          if (value === null) {\n            httpParams = httpParams.delete(key);\n          } else {\n            httpParams = httpParams.set(key, value);\n          }\n        }\n      });\n\n      const params = httpParams.toString();\n      if (params.length) {\n        endpoint += '?' + params;\n      }\n    }\n\n    return this.getEndpoint(endpoint);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpInterceptor,\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n} from '@angular/common/http';\n\nimport { Observable, of } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\n\nimport { AuthService } from '../facade/auth.service';\nimport {\n  USE_CLIENT_TOKEN,\n  InterceptorUtil,\n} from '../../occ/utils/interceptor-util';\nimport { ClientToken } from '../models/token-types.model';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\n\n@Injectable()\nexport class ClientTokenInterceptor implements HttpInterceptor {\n  constructor(\n    private authService: AuthService,\n    private occEndpoints: OccEndpointsService\n  ) {}\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    return this.getClientToken(request).pipe(\n      take(1),\n      switchMap((token: ClientToken) => {\n        if (\n          token &&\n          request.url.indexOf(this.occEndpoints.getBaseEndpoint()) > -1\n        ) {\n          request = request.clone({\n            setHeaders: {\n              Authorization: `${token.token_type} ${token.access_token}`,\n            },\n          });\n        }\n        return next.handle(request);\n      })\n    );\n  }\n\n  private getClientToken(request: HttpRequest<any>): Observable<ClientToken> {\n    if (\n      InterceptorUtil.getInterceptorParam(USE_CLIENT_TOKEN, request.headers)\n    ) {\n      return this.authService.getClientToken();\n    }\n    return of(null);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpInterceptor,\n  HttpHandler,\n  HttpEvent,\n  HttpRequest,\n} from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\n\nimport { AuthService } from '../facade/auth.service';\nimport { UserToken } from '../../auth/models/token-types.model';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\n\n@Injectable()\nexport class UserTokenInterceptor implements HttpInterceptor {\n  userToken: UserToken;\n\n  constructor(\n    private authService: AuthService,\n    private occEndpoints: OccEndpointsService\n  ) {\n    this.authService.getUserToken().subscribe((token: UserToken) => {\n      this.userToken = token;\n    });\n  }\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (\n      this.userToken &&\n      this.isOccUrl(request.url) &&\n      !request.headers.get('Authorization')\n    ) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `${this.userToken.token_type} ${\n            this.userToken.access_token\n          }`,\n        },\n      });\n    }\n\n    return next.handle(request);\n  }\n\n  private isOccUrl(url: string): boolean {\n    return url.indexOf(this.occEndpoints.getBaseEndpoint()) > -1;\n  }\n}\n","import { Provider } from '@angular/core';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { AuthErrorInterceptor } from './auth-error.interceptor';\nimport { ClientTokenInterceptor } from './client-token.interceptor';\nimport { UserTokenInterceptor } from './user-token.interceptor';\n\nexport const interceptors: Provider[] = [\n  {\n    provide: HTTP_INTERCEPTORS,\n    useClass: ClientTokenInterceptor,\n    multi: true,\n  },\n  {\n    provide: HTTP_INTERCEPTORS,\n    useClass: UserTokenInterceptor,\n    multi: true,\n  },\n  {\n    provide: HTTP_INTERCEPTORS,\n    useClass: AuthErrorInterceptor,\n    multi: true,\n  },\n];\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\n\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { AuthConfig } from '../../config/auth-config';\n\nimport { ClientToken } from '../../models/token-types.model';\n\nconst OAUTH_ENDPOINT = '/authorizationserver/oauth/token';\n\n@Injectable()\nexport class ClientAuthenticationTokenService {\n  constructor(private config: AuthConfig, private http: HttpClient) {}\n\n  loadClientAuthenticationToken(): Observable<ClientToken> {\n    const url: string = this.getOAuthEndpoint();\n    const params = new HttpParams()\n      .set(\n        'client_id',\n        encodeURIComponent(this.config.authentication.client_id)\n      )\n      .set(\n        'client_secret',\n        encodeURIComponent(this.config.authentication.client_secret)\n      )\n      .set('grant_type', 'client_credentials');\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n    return this.http\n      .post<ClientToken>(url, params, { headers })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  private getOAuthEndpoint(): string {\n    return (this.config.backend.occ.baseUrl || '') + OAUTH_ENDPOINT;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { throwError, Observable } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { AuthConfig } from '../../config/auth-config';\n\nimport { UserToken } from '../../models/token-types.model';\n\nconst OAUTH_ENDPOINT = '/authorizationserver/oauth/token';\n\n@Injectable()\nexport class UserAuthenticationTokenService {\n  constructor(private http: HttpClient, private config: AuthConfig) {}\n\n  loadToken(userId: string, password: string): Observable<UserToken> {\n    const url = this.getOAuthEndpoint();\n    const params = new HttpParams()\n      .set('client_id', this.config.authentication.client_id)\n      .set('client_secret', this.config.authentication.client_secret)\n      .set('grant_type', 'password') // authorization_code, client_credentials, password\n      .set('username', userId)\n      .set('password', password);\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http\n      .post<UserToken>(url, params, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  refreshToken(refreshToken: string): Observable<UserToken> {\n    const url = this.getOAuthEndpoint();\n    const params = new HttpParams()\n      .set(\n        'client_id',\n        encodeURIComponent(this.config.authentication.client_id)\n      )\n      .set(\n        'client_secret',\n        encodeURIComponent(this.config.authentication.client_secret)\n      )\n      .set('refresh_token', encodeURI(refreshToken))\n      .set('grant_type', 'refresh_token');\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http\n      .post<UserToken>(url, params, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  protected getOAuthEndpoint() {\n    return (this.config.backend.occ.baseUrl || '') + OAUTH_ENDPOINT;\n  }\n}\n","import { ClientAuthenticationTokenService } from './client-authentication/client-authentication-token.service';\nimport { ClientErrorHandlingService } from './client-error/client-error-handling.service';\nimport { UserAuthenticationTokenService } from './user-authentication/user-authentication-token.service';\nimport { UserErrorHandlingService } from './user-error/user-error-handling.service';\n\nexport const services: any[] = [\n  ClientAuthenticationTokenService,\n  ClientErrorHandlingService,\n  UserAuthenticationTokenService,\n  UserErrorHandlingService,\n];\n","export enum StorageSyncType {\n  NO_STORAGE = 'NO_STORAGE',\n  LOCAL_STORAGE = 'LOCAL_STORAGE',\n  SESSION_STORAGE = 'SESSION_STORAGE',\n}\n\nexport enum StateTransferType {\n  TRANSFER_STATE = 'SSR',\n}\n\nexport abstract class StateConfig {\n  state?: {\n    storageSync?: {\n      /**\n       * A key name for the data stored in `localStorage`.\n       * Default is `DEFAULT_LOCAL_STORAGE_KEY`.\n       */\n      localStorageKeyName?: string;\n      /**\n       * A key name for the data stored in `sessionStorage`.\n       * Default is `DEFAULT_SESSION_STORAGE_KEY`.\n       */\n      sessionStorageKeyName?: string;\n      /**\n       * A set of state keys that should be synced with the specified browser's storage.\n       */\n      keys?: {\n        [key: string]: StorageSyncType;\n      };\n    };\n    ssrTransfer?: {\n      keys?: {\n        // TODO:#sync-poc - maybe merge with `storageSync` keys\n        /**\n         * A set of state keys that should be transferred from server.\n         */\n        [key: string]: StateTransferType;\n      };\n    };\n  };\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const META_REDUCER = new InjectionToken('metaReducer');\n\nexport function metaReducersFactory(metaReducers: any[]) {\n  return (metaReducers || []).filter(Boolean);\n}\n","import { deepMerge } from '../../config/utils/deep-merge';\n\nexport function getStateSliceValue<T, E>(keys: string, state: T): E {\n  return keys\n    .split('.')\n    .reduce(\n      (previous, current) => (previous ? previous[current] : undefined),\n      state\n    );\n}\n\nexport function createShellObject<T, E>(key: string, value: T): E {\n  if (!key || !value || Object.keys(value).length === 0) {\n    return {} as E;\n  }\n\n  const keySplit = key.split('.');\n  const newObject = {};\n  let tempNewObject = newObject;\n\n  for (let i = 0; i < keySplit.length; i++) {\n    const currentKey = keySplit[i];\n    // last iteration\n    if (i === keySplit.length - 1) {\n      tempNewObject = tempNewObject[currentKey] = value;\n    } else {\n      tempNewObject = tempNewObject[currentKey] = {};\n    }\n  }\n\n  return newObject as E;\n}\n\nexport function getStateSlice<T, E>(keys: string[], state: T): E {\n  if (keys && keys.length === 0) {\n    return {} as E;\n  }\n\n  let stateSlices = {};\n  for (const currentKey of keys) {\n    const stateValue = getStateSliceValue(currentKey, state);\n    const shell = createShellObject(currentKey, stateValue);\n    stateSlices = deepMerge(stateSlices, shell);\n  }\n\n  return stateSlices as E;\n}\n","import { Action, ActionReducer, INIT, MetaReducer, UPDATE } from '@ngrx/store';\nimport { deepMerge } from '../../config/utils/deep-merge';\nimport { WindowRef } from '../../window/window-ref';\nimport { StateConfig, StorageSyncType } from '../config/state-config';\nimport { getStateSlice } from '../utils/get-state-slice';\n\nexport function getStorageSyncReducer<T>(\n  winRef: WindowRef,\n  config?: StateConfig\n): MetaReducer<T, Action> {\n  if (\n    !winRef.nativeWindow ||\n    !config ||\n    !config.state ||\n    !config.state.storageSync ||\n    !config.state.storageSync.keys\n  ) {\n    return undefined;\n  }\n\n  const storageSyncConfig = config.state.storageSync;\n\n  return (reducer: ActionReducer<T, Action>): ActionReducer<T, Action> => {\n    return (state, action): T => {\n      let newState = { ...state };\n\n      if (action.type === INIT && !exists(newState)) {\n        newState = reducer(state, action);\n      }\n\n      if (action.type === INIT || action.type === UPDATE) {\n        const rehydratedState = rehydrate(config, winRef);\n        return deepMerge(newState, rehydratedState);\n      }\n\n      newState = reducer(newState, action);\n\n      if (action.type !== INIT) {\n        // handle local storage\n        const localStorageKeys = getKeysForStorage(\n          storageSyncConfig.keys,\n          StorageSyncType.LOCAL_STORAGE\n        );\n        const localStorageStateSlices = getStateSlice(localStorageKeys, state);\n        persistToStorage(\n          config.state.storageSync.localStorageKeyName,\n          localStorageStateSlices,\n          winRef.localStorage\n        );\n\n        // handle session storage\n        const sessionStorageKeys = getKeysForStorage(\n          storageSyncConfig.keys,\n          StorageSyncType.SESSION_STORAGE\n        );\n        const sessionStorageStateSlices = getStateSlice(\n          sessionStorageKeys,\n          state\n        );\n        persistToStorage(\n          config.state.storageSync.sessionStorageKeyName,\n          sessionStorageStateSlices,\n          winRef.sessionStorage\n        );\n      }\n\n      return newState;\n    };\n  };\n}\n\nexport function getKeysForStorage(\n  keys: { [key: string]: StorageSyncType },\n  storageType: StorageSyncType\n): string[] {\n  return Object.keys(keys).filter(key => keys[key] === storageType);\n}\n\nexport function rehydrate<T>(config: StateConfig, winRef: WindowRef): T {\n  const localStorageValue = readFromStorage(\n    winRef.localStorage,\n    config.state.storageSync.localStorageKeyName\n  );\n  const sessionStorageValue = readFromStorage(\n    winRef.sessionStorage,\n    config.state.storageSync.sessionStorageKeyName\n  );\n\n  return deepMerge(localStorageValue, sessionStorageValue);\n}\n\nexport function exists(value: Object): boolean {\n  if (value != null) {\n    if (typeof value === 'object') {\n      return Object.keys(value).length !== 0;\n    } else if (value === '') {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function getStorage(\n  storageType: StorageSyncType,\n  winRef: WindowRef\n): Storage {\n  let storage: Storage;\n\n  switch (storageType) {\n    case StorageSyncType.LOCAL_STORAGE: {\n      storage = winRef.localStorage;\n      break;\n    }\n    case StorageSyncType.SESSION_STORAGE: {\n      storage = winRef.sessionStorage;\n      break;\n    }\n    case StorageSyncType.NO_STORAGE: {\n      storage = undefined;\n      break;\n    }\n\n    default: {\n      storage = winRef.sessionStorage;\n    }\n  }\n\n  return storage;\n}\n\nexport function persistToStorage(\n  configKey: string,\n  value: Object,\n  storage: Storage\n): void {\n  if (!isSsr(storage) && value) {\n    storage.setItem(configKey, JSON.stringify(value));\n  }\n}\n\nexport function readFromStorage(storage: Storage, key: string): Object {\n  if (isSsr(storage)) {\n    return;\n  }\n\n  const storageValue = storage.getItem(key);\n  if (!storageValue) {\n    return;\n  }\n\n  return JSON.parse(storageValue);\n}\n\nexport function isSsr(storage: Storage): boolean {\n  return !Boolean(storage);\n}\n","import { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport {\n  makeStateKey,\n  StateKey,\n  TransferState,\n} from '@angular/platform-browser';\nimport { INIT } from '@ngrx/store';\nimport { deepMerge } from '../../config/utils/deep-merge';\nimport { StateConfig, StateTransferType } from '../config/state-config';\nimport { getStateSlice } from '../utils/get-state-slice';\n\nexport const CX_KEY: StateKey<string> = makeStateKey<string>('cx-state');\n\nexport function getTransferStateReducer(\n  platformId,\n  transferState?: TransferState,\n  config?: StateConfig\n) {\n  if (\n    transferState &&\n    config &&\n    config.state &&\n    config.state.ssrTransfer &&\n    config.state.ssrTransfer.keys\n  ) {\n    if (isPlatformBrowser(platformId)) {\n      return getBrowserTransferStateReducer(\n        transferState,\n        config.state.ssrTransfer.keys\n      );\n    } else if (isPlatformServer(platformId)) {\n      return getServerTransferStateReducer(\n        transferState,\n        config.state.ssrTransfer.keys\n      );\n    }\n  }\n\n  return undefined;\n}\n\nexport function getServerTransferStateReducer(\n  transferState: TransferState,\n  keys: { [key: string]: StateTransferType }\n) {\n  return function(reducer) {\n    return function(state, action: any) {\n      const newState = reducer(state, action);\n\n      if (newState) {\n        const stateSlice = getStateSlice(Object.keys(keys), newState);\n        transferState.set(CX_KEY, stateSlice);\n      }\n\n      return newState;\n    };\n  };\n}\n\nexport function getBrowserTransferStateReducer(\n  transferState: TransferState,\n  keys: { [key: string]: StateTransferType }\n) {\n  return function(reducer) {\n    return function(state, action: any) {\n      if (action.type === INIT && transferState.hasKey(CX_KEY)) {\n        const cxKey = transferState.get(CX_KEY, {});\n        const transferredStateSlice = getStateSlice(Object.keys(keys), cxKey);\n\n        state = deepMerge({}, state, transferredStateSlice);\n      }\n      return reducer(state, action);\n    };\n  };\n}\n","import { Optional, PLATFORM_ID, Provider } from '@angular/core';\nimport { TransferState } from '@angular/platform-browser';\nimport { Config } from '../../config/config.module';\nimport { WindowRef } from '../../window/window-ref';\nimport { META_REDUCER } from '../meta-reducer';\nimport { getStorageSyncReducer } from './storage-sync.reducer';\nimport { getTransferStateReducer } from './transfer-state.reducer';\n\nexport { getStateSlice } from '../utils/get-state-slice';\nexport { getStorageSyncReducer } from './storage-sync.reducer';\nexport * from './transfer-state.reducer';\n\nexport const stateMetaReducers: Provider[] = [\n  {\n    provide: META_REDUCER,\n    useFactory: getStorageSyncReducer,\n    deps: [WindowRef, [new Optional(), Config]],\n    multi: true,\n  },\n  {\n    provide: META_REDUCER,\n    useFactory: getTransferStateReducer,\n    deps: [\n      PLATFORM_ID,\n      [new Optional(), TransferState],\n      [new Optional(), Config],\n    ],\n    multi: true,\n  },\n];\n","import { StateConfig } from './state-config';\n\nexport const DEFAULT_LOCAL_STORAGE_KEY = 'spartacus-local-data';\nexport const DEFAULT_SESSION_STORAGE_KEY = 'spartacus-session-data';\n\nexport const defaultStateConfig: StateConfig = {\n  state: {\n    storageSync: {\n      localStorageKeyName: DEFAULT_LOCAL_STORAGE_KEY,\n      sessionStorageKeyName: DEFAULT_SESSION_STORAGE_KEY,\n      keys: {},\n    },\n  },\n};\n","import { NgModule, Optional } from '@angular/core';\nimport { META_REDUCERS, StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport { ConfigModule } from '../config/config.module';\nimport { stateMetaReducers } from './reducers/index';\nimport { defaultStateConfig } from './config/default-state-config';\nimport { META_REDUCER, metaReducersFactory } from './meta-reducer';\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot({}),\n    EffectsModule.forRoot([]),\n    ConfigModule.withConfig(defaultStateConfig),\n  ],\n  providers: [\n    ...stateMetaReducers,\n    {\n      provide: META_REDUCERS,\n      useFactory: metaReducersFactory,\n      deps: [[new Optional(), META_REDUCER]],\n    },\n  ],\n})\nexport class StateModule {}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport * as fromActions from './../actions/user-token.action';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, catchError, switchMap } from 'rxjs/operators';\n\nimport { UserToken } from '../../models/token-types.model';\nimport { UserAuthenticationTokenService } from './../../services/user-authentication/user-authentication-token.service';\n\nimport { UserTokenAction } from '../actions/user-token.action';\n@Injectable()\nexport class UserTokenEffects {\n  @Effect()\n  loadUserToken$: Observable<UserTokenAction> = this.actions$.pipe(\n    ofType(fromActions.LOAD_USER_TOKEN),\n    map((action: fromActions.LoadUserToken) => action.payload),\n    mergeMap(({ userId, password }) => {\n      return this.userTokenService.loadToken(userId, password).pipe(\n        map((token: UserToken) => {\n          const date = new Date();\n          date.setSeconds(date.getSeconds() + token.expires_in);\n          token.userId = userId;\n          token.expiration_time = date;\n          return new fromActions.LoadUserTokenSuccess(token);\n        }),\n        catchError(error => of(new fromActions.LoadUserTokenFail(error)))\n      );\n    })\n  );\n\n  @Effect()\n  refreshUserToken$: Observable<UserTokenAction> = this.actions$.pipe(\n    ofType(fromActions.REFRESH_USER_TOKEN),\n    map((action: fromActions.RefreshUserToken) => action.payload),\n    switchMap(({ userId, refreshToken }) => {\n      return this.userTokenService.refreshToken(refreshToken).pipe(\n        map((token: UserToken) => {\n          token.userId = userId;\n          const date = new Date();\n          date.setSeconds(date.getSeconds() + token.expires_in);\n          token.userId = userId;\n          token.expiration_time = date;\n          return new fromActions.RefreshUserTokenSuccess(token);\n        }, catchError(error => of(new fromActions.RefreshUserTokenFail(error))))\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private userTokenService: UserAuthenticationTokenService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { map, catchError, exhaustMap } from 'rxjs/operators';\n\nimport * as fromActions from './../actions';\nimport { ClientTokenAction } from '../actions/client-token.action';\nimport { ClientToken } from './../../models/token-types.model';\nimport { ClientAuthenticationTokenService } from './../../services/client-authentication/client-authentication-token.service';\n\n@Injectable()\nexport class ClientTokenEffect {\n  @Effect()\n  loadClientToken$: Observable<ClientTokenAction> = this.actions$.pipe(\n    ofType(fromActions.LOAD_CLIENT_TOKEN),\n    exhaustMap(() => {\n      return this.clientAuthenticationTokenService\n        .loadClientAuthenticationToken()\n        .pipe(\n          map((token: ClientToken) => {\n            return new fromActions.LoadClientTokenSuccess(token);\n          }),\n          catchError(error => of(new fromActions.LoadClientTokenFail(error)))\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private clientAuthenticationTokenService: ClientAuthenticationTokenService\n  ) {}\n}\n","import { UserTokenEffects } from './user-token.effect';\nimport { ClientTokenEffect } from './client-token.effect';\n\nexport const effects: any[] = [UserTokenEffects, ClientTokenEffect];\n\nexport * from './user-token.effect';\nexport * from './client-token.effect';\n","import { Action } from '@ngrx/store';\n\nimport { LoaderState } from './loader-state';\nimport { LoaderAction } from './loader.action';\n\nexport const initialLoaderState: LoaderState<any> = {\n  loading: false,\n  error: false,\n  success: false,\n  value: undefined,\n};\n\n/**\n * Higher order reducer that adds generic loading flag to chunk of the state\n *\n * Utilizes \"loader\" meta field of actions to set specific flags for specific\n * action (LOAD, SUCCESS, FAIL, RESET)\n */\nexport function loaderReducer<T>(\n  loadActionType: string,\n  reducer?: (state: T, action: Action) => T\n): (state: LoaderState<T>, action: LoaderAction) => LoaderState<T> {\n  return (\n    state: LoaderState<T> = initialLoaderState,\n    action: LoaderAction\n  ): LoaderState<T> => {\n    if (\n      action.meta &&\n      action.meta.loader &&\n      action.meta.entityType === loadActionType\n    ) {\n      const entity = action.meta.loader;\n\n      if (entity.load) {\n        return {\n          ...state,\n          loading: true,\n          value: reducer ? reducer(state.value, action) : state.value,\n        };\n      } else if (entity.error) {\n        return {\n          ...state,\n          loading: false,\n          error: true,\n          success: false,\n          value: reducer ? reducer(state.value, action) : undefined,\n        };\n      } else if (entity.success) {\n        return {\n          ...state,\n          value: reducer ? reducer(state.value, action) : action.payload,\n          loading: false,\n          error: false,\n          success: true,\n        };\n      } else {\n        // reset state action\n        return {\n          ...initialLoaderState,\n          value: reducer\n            ? reducer(initialLoaderState.value, action)\n            : initialLoaderState.value,\n        };\n      }\n    }\n\n    if (reducer) {\n      const newValue = reducer(state.value, action);\n      if (newValue !== state.value) {\n        return { ...state, value: newValue };\n      }\n    }\n    return state;\n  };\n}\n","import { UserToken } from '../../models/token-types.model';\nimport * as fromUpdateEmailAction from './../../../user/store/actions/update-email.action';\nimport * as fromAction from './../actions/user-token.action';\n\nexport const initialState: UserToken = <UserToken>{};\n\nexport function reducer(\n  state = initialState,\n  action:\n    | fromAction.UserTokenAction\n    | fromUpdateEmailAction.UpdateEmailSuccessAction\n): UserToken {\n  switch (action.type) {\n    case fromAction.LOAD_USER_TOKEN:\n    case fromAction.REFRESH_USER_TOKEN: {\n      return {\n        ...state,\n      };\n    }\n\n    case fromAction.LOAD_USER_TOKEN_SUCCESS:\n    case fromAction.REFRESH_USER_TOKEN_SUCCESS: {\n      return {\n        ...state,\n        ...action.payload,\n      };\n    }\n\n    case fromAction.LOAD_USER_TOKEN_FAIL:\n    case fromAction.REFRESH_USER_TOKEN_FAIL: {\n      return {\n        ...state,\n      };\n    }\n  }\n  return state;\n}\n","import { InjectionToken, Provider } from '@angular/core';\nimport {\n  Action,\n  ActionReducer,\n  ActionReducerMap,\n  combineReducers,\n  MetaReducer,\n} from '@ngrx/store';\nimport { loaderReducer } from '../../../state/utils/loader/loader.reducer';\nimport { ClientToken } from '../../models/token-types.model';\nimport { LOGOUT } from '../actions/login-logout.action';\nimport { AuthState, CLIENT_TOKEN_DATA } from '../auth-state';\nimport * as fromUserTokenReducer from './user-token.reducer';\n\nexport function getReducers(): ActionReducerMap<AuthState> {\n  return {\n    userToken: combineReducers({ token: fromUserTokenReducer.reducer }),\n    clientToken: loaderReducer<ClientToken>(CLIENT_TOKEN_DATA),\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<AuthState>\n> = new InjectionToken<ActionReducerMap<AuthState>>('AuthReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport function clearAuthState(\n  reducer: ActionReducer<AuthState, Action>\n): ActionReducer<AuthState, Action> {\n  return function(state, action) {\n    if (action.type === LOGOUT) {\n      state = {\n        ...state,\n        userToken: undefined,\n      };\n    }\n    return reducer(state, action);\n  };\n}\n\nexport const metaReducers: MetaReducer<any>[] = [clearAuthState];\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { ConfigModule } from '../../config/config.module';\nimport { StateConfig, StorageSyncType } from '../../state/config/state-config';\nimport { StateModule } from '../../state/state.module';\nimport { AUTH_FEATURE } from './auth-state';\nimport { effects } from './effects/index';\nimport { metaReducers, reducerProvider, reducerToken } from './reducers/index';\n\nexport function authStoreConfigFactory(): StateConfig {\n  // if we want to reuse AUTH_FEATURE const in config, we have to use factory instead of plain object\n  const config: StateConfig = {\n    state: {\n      storageSync: {\n        keys: {\n          'auth.userToken.token': StorageSyncType.LOCAL_STORAGE,\n        },\n      },\n    },\n  };\n  return config;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    StateModule,\n    StoreModule.forFeature(AUTH_FEATURE, reducerToken, { metaReducers }),\n    EffectsModule.forFeature(effects),\n    ConfigModule.withConfigFactory(authStoreConfigFactory),\n  ],\n  providers: [reducerProvider],\n})\nexport class AuthStoreModule {}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { Config, ConfigModule } from '../config/config.module';\nimport { RoutingModule } from '../routing/routing.module';\n\nimport { AuthConfig } from './config/auth-config';\nimport { defaultAuthConfig } from './config/default-auth-config';\nimport { interceptors } from './http-interceptors/index';\nimport { services } from './services/index';\nimport { AuthStoreModule } from './store/auth-store.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    RoutingModule,\n    AuthStoreModule,\n    ConfigModule.withConfig(defaultAuthConfig),\n  ],\n  providers: [...services, { provide: AuthConfig, useExisting: Config }],\n})\nexport class AuthModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: AuthModule,\n      providers: [...interceptors],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { AuthService } from '../facade/auth.service';\nimport { UserToken } from '../models/token-types.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n  static GUARD_NAME = 'AuthGuard';\n\n  constructor(\n    private routingService: RoutingService,\n    private authService: AuthService\n  ) {}\n\n  canActivate(\n    _route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean> {\n    return this.authService.getUserToken().pipe(\n      map((token: UserToken) => {\n        if (!token.access_token) {\n          this.routingService.go({ route: 'login' });\n          this.routingService.saveRedirectUrl(state.url);\n        }\n        return !!token.access_token;\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { AuthService } from '../facade/auth.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotAuthGuard implements CanActivate {\n  static GUARD_NAME = 'NotAuthGuard';\n\n  constructor(\n    private routingService: RoutingService,\n    private authService: AuthService\n  ) {}\n\n  canActivate(): Observable<boolean> {\n    return this.authService.getUserToken().pipe(\n      map(token => {\n        if (token.access_token) {\n          this.routingService.go({ route: 'home' });\n        }\n        return !token.access_token;\n      })\n    );\n  }\n}\n","import { LoaderState } from '../../state/utils/loader/loader-state';\nimport { UIOrderEntry } from '../model';\n\nexport const CART_FEATURE = 'cart';\nexport const CART_DATA = '[Cart] Cart Data';\n\nexport interface StateWithCart {\n  [CART_FEATURE]: CartsState;\n}\n\nexport interface CartsState {\n  active: LoaderState<CartState>;\n}\n\nexport interface CartState {\n  content: any;\n  entries: { [code: string]: UIOrderEntry };\n  refresh: boolean;\n  cartMergeComplete: boolean;\n}\n","import { Action } from '@ngrx/store';\nimport {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\nimport { CART_DATA } from '../cart-state';\n\nexport const CREATE_CART = '[Cart] Create Cart';\nexport const CREATE_CART_FAIL = '[Cart] Create Cart Fail';\nexport const CREATE_CART_SUCCESS = '[Cart] Create Cart Success';\n\nexport const LOAD_CART = '[Cart] Load Cart';\nexport const LOAD_CART_FAIL = '[Cart] Load Cart Fail';\nexport const LOAD_CART_SUCCESS = '[Cart] Load Cart Success';\n\nexport const MERGE_CART = '[Cart] Merge Cart';\nexport const MERGE_CART_SUCCESS = '[Cart] Merge Cart Success';\n\nexport class CreateCart extends LoaderLoadAction {\n  readonly type = CREATE_CART;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class CreateCartFail extends LoaderFailAction {\n  readonly type = CREATE_CART_FAIL;\n  constructor(public payload: any) {\n    super(CART_DATA, payload);\n  }\n}\n\nexport class CreateCartSuccess extends LoaderSuccessAction {\n  readonly type = CREATE_CART_SUCCESS;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class LoadCart extends LoaderLoadAction {\n  readonly type = LOAD_CART;\n  constructor(\n    public payload: { userId: string; cartId: string; details?: boolean }\n  ) {\n    super(CART_DATA);\n  }\n}\n\nexport class LoadCartFail extends LoaderFailAction {\n  readonly type = LOAD_CART_FAIL;\n  constructor(public payload: any) {\n    super(CART_DATA, payload);\n  }\n}\n\nexport class LoadCartSuccess extends LoaderSuccessAction {\n  readonly type = LOAD_CART_SUCCESS;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class MergeCart implements Action {\n  readonly type = MERGE_CART;\n  constructor(public payload: any) {}\n}\n\nexport class MergeCartSuccess implements Action {\n  readonly type = MERGE_CART_SUCCESS;\n  constructor() {}\n}\n\nexport type CartAction =\n  | CreateCart\n  | CreateCartFail\n  | CreateCartSuccess\n  | LoadCart\n  | LoadCartFail\n  | LoadCartSuccess\n  | MergeCart\n  | MergeCartSuccess;\n","import {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\nimport { CART_DATA } from '../cart-state';\n\nexport const ADD_ENTRY = '[Cart-entry] Add Entry';\nexport const ADD_ENTRY_SUCCESS = '[Cart-entry] Add Entry Success';\nexport const ADD_ENTRY_FAIL = '[Cart-entry] Add Entry Fail';\n\nexport const REMOVE_ENTRY = '[Cart-entry] Remove Entry';\nexport const REMOVE_ENTRY_SUCCESS = '[Cart-entry] Remove Entry Success';\nexport const REMOVE_ENTRY_FAIL = '[Cart-entry] Remove Entry Fail';\n\nexport const UPDATE_ENTRY = '[Cart-entry] Update Entry';\nexport const UPDATE_ENTRY_SUCCESS = '[Cart-entry] Update Entry Success';\nexport const UPDATE_ENTRY_FAIL = '[Cart-entry] Update Entry Fail';\n\nexport class AddEntry extends LoaderLoadAction {\n  readonly type = ADD_ENTRY;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class AddEntrySuccess extends LoaderSuccessAction {\n  readonly type = ADD_ENTRY_SUCCESS;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class AddEntryFail extends LoaderFailAction {\n  readonly type = ADD_ENTRY_FAIL;\n  constructor(public payload: any) {\n    super(CART_DATA, payload);\n  }\n}\n\nexport class RemoveEntry extends LoaderLoadAction {\n  readonly type = REMOVE_ENTRY;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class RemoveEntrySuccess extends LoaderSuccessAction {\n  readonly type = REMOVE_ENTRY_SUCCESS;\n  constructor() {\n    super(CART_DATA);\n  }\n}\n\nexport class RemoveEntryFail extends LoaderFailAction {\n  readonly type = REMOVE_ENTRY_FAIL;\n  constructor(public payload: any) {\n    super(CART_DATA, payload);\n  }\n}\n\nexport class UpdateEntry extends LoaderLoadAction {\n  readonly type = UPDATE_ENTRY;\n  constructor(public payload: any) {\n    super(CART_DATA);\n  }\n}\n\nexport class UpdateEntrySuccess extends LoaderSuccessAction {\n  readonly type = UPDATE_ENTRY_SUCCESS;\n  constructor() {\n    super(CART_DATA);\n  }\n}\n\nexport class UpdateEntryFail extends LoaderFailAction {\n  readonly type = UPDATE_ENTRY_FAIL;\n  constructor(public payload: any) {\n    super(CART_DATA, payload);\n  }\n}\n\nexport type CartEntryAction =\n  | AddEntry\n  | AddEntrySuccess\n  | AddEntryFail\n  | RemoveEntry\n  | RemoveEntrySuccess\n  | RemoveEntryFail\n  | UpdateEntry\n  | UpdateEntrySuccess\n  | UpdateEntryFail;\n","import { LoaderState } from './loader-state';\n\nexport function loaderValueSelector<T>(state: LoaderState<T>): T {\n  return state.value;\n}\n\nexport function loaderLoadingSelector<T>(state: LoaderState<T>): boolean {\n  return state.loading;\n}\n\nexport function loaderErrorSelector<T>(state: LoaderState<T>): boolean {\n  return state.error;\n}\n\nexport function loaderSuccessSelector<T>(state: LoaderState<T>): boolean {\n  return state.success;\n}\n","import {\n  createFeatureSelector,\n  createSelector,\n  MemoizedSelector,\n} from '@ngrx/store';\nimport {\n  CART_FEATURE,\n  CartsState,\n  CartState,\n  StateWithCart,\n} from '../cart-state';\nimport {\n  loaderLoadingSelector,\n  loaderSuccessSelector,\n  loaderValueSelector,\n} from '../../../state/utils/loader/loader.selectors';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport { UICart, UIOrderEntry } from '../../model';\n\nexport const getCartContentSelector = (state: CartState) => state.content;\nexport const getRefreshSelector = (state: CartState) => state.refresh;\nexport const getEntriesSelector = (state: CartState) => state.entries;\nexport const getCartMergeCompleteSelector = (state: CartState) =>\n  state.cartMergeComplete;\n\nexport const getCartsState: MemoizedSelector<\n  StateWithCart,\n  CartsState\n> = createFeatureSelector<CartsState>(CART_FEATURE);\n\nexport const getActiveCartState: MemoizedSelector<\n  StateWithCart,\n  LoaderState<CartState>\n> = createSelector(\n  getCartsState,\n  (cartsState: CartsState) => cartsState.active\n);\n\nexport const getCartState: MemoizedSelector<\n  StateWithCart,\n  CartState\n> = createSelector(\n  getActiveCartState,\n  state => loaderValueSelector(state)\n);\n\nexport const getCartContent: MemoizedSelector<\n  StateWithCart,\n  UICart\n> = createSelector(\n  getCartState,\n  getCartContentSelector\n);\n\nexport const getRefresh: MemoizedSelector<\n  StateWithCart,\n  boolean\n> = createSelector(\n  getCartState,\n  getRefreshSelector\n);\n\nexport const getLoaded: MemoizedSelector<any, boolean> = createSelector(\n  getActiveCartState,\n  state =>\n    loaderSuccessSelector(state) &&\n    !loaderLoadingSelector(state) &&\n    !loaderValueSelector(state).refresh\n);\n\nexport const getCartMergeComplete: MemoizedSelector<\n  StateWithCart,\n  boolean\n> = createSelector(\n  getCartState,\n  getCartMergeCompleteSelector\n);\n\nexport const getEntriesMap: MemoizedSelector<\n  any,\n  { [code: string]: UIOrderEntry }\n> = createSelector(\n  getCartState,\n  getEntriesSelector\n);\n\nexport const getEntrySelectorFactory = (\n  productCode\n): MemoizedSelector<any, UIOrderEntry> => {\n  return createSelector(\n    getEntriesMap,\n    entries => {\n      if (entries) {\n        return entries[productCode];\n      }\n    }\n  );\n};\n\nexport const getEntries: MemoizedSelector<any, UIOrderEntry[]> = createSelector(\n  getEntriesMap,\n  entities => {\n    return Object.keys(entities).map(code => entities[code]);\n  }\n);\n","import { Injectable } from '@angular/core';\nimport { UICart } from '../model';\n\nexport const ANONYMOUS_USERID = 'anonymous';\n\n@Injectable()\nexport class CartDataService {\n  private _userId = ANONYMOUS_USERID;\n  private _cart: UICart;\n  private _getDetails = false;\n\n  constructor() {}\n\n  get hasCart(): boolean {\n    return !!this._cart;\n  }\n\n  set userId(val) {\n    this._userId = val;\n  }\n\n  set cart(val) {\n    this._cart = val;\n  }\n\n  set getDetails(val) {\n    this._getDetails = val;\n  }\n\n  get userId(): string {\n    return this._userId;\n  }\n\n  get cart(): UICart {\n    return this._cart;\n  }\n\n  get getDetails() {\n    return this._getDetails;\n  }\n\n  get cartId(): string {\n    if (this.hasCart) {\n      return this.userId === ANONYMOUS_USERID ? this.cart.guid : this.cart.code;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { AuthService, UserToken } from '../../auth/index';\n\nimport * as fromAction from '../store/actions';\nimport * as fromSelector from '../store/selectors';\nimport { ANONYMOUS_USERID, CartDataService } from './cart-data.service';\nimport { StateWithCart } from '../store/cart-state';\nimport { UICart, UIOrderEntry } from '../model/cart';\n\n@Injectable()\nexport class CartService {\n  private callback: Function;\n\n  constructor(\n    private store: Store<StateWithCart>,\n    private cartData: CartDataService,\n    private authService: AuthService\n  ) {\n    this.init();\n  }\n\n  getActive(): Observable<UICart> {\n    return this.store.pipe(select(fromSelector.getCartContent));\n  }\n\n  getEntries(): Observable<UIOrderEntry[]> {\n    return this.store.pipe(select(fromSelector.getEntries));\n  }\n\n  getCartMergeComplete(): Observable<boolean> {\n    return this.store.pipe(select(fromSelector.getCartMergeComplete));\n  }\n\n  getLoaded(): Observable<boolean> {\n    return this.store.pipe(select(fromSelector.getLoaded));\n  }\n\n  protected init(): void {\n    this.store.pipe(select(fromSelector.getCartContent)).subscribe(cart => {\n      this.cartData.cart = cart;\n      if (this.callback) {\n        this.callback();\n        this.callback = null;\n      }\n    });\n\n    this.authService\n      .getUserToken()\n      .pipe(filter(userToken => this.cartData.userId !== userToken.userId))\n      .subscribe(userToken => {\n        this.setUserId(userToken);\n        this.loadOrMerge();\n      });\n\n    this.refresh();\n  }\n\n  protected setUserId(userToken: UserToken): void {\n    if (Object.keys(userToken).length !== 0) {\n      this.cartData.userId = userToken.userId;\n    } else {\n      this.cartData.userId = ANONYMOUS_USERID;\n    }\n  }\n\n  protected loadOrMerge(): void {\n    this.cartData.getDetails = true;\n    // for login user, whenever there's an existing cart, we will load the user\n    // current cart and merge it into the existing cart\n    if (this.cartData.userId !== ANONYMOUS_USERID) {\n      if (!this.isCreated(this.cartData.cart)) {\n        this.store.dispatch(\n          new fromAction.LoadCart({\n            userId: this.cartData.userId,\n            cartId: 'current',\n          })\n        );\n      } else {\n        this.store.dispatch(\n          new fromAction.MergeCart({\n            userId: this.cartData.userId,\n            cartId: this.cartData.cart.guid,\n          })\n        );\n      }\n    }\n  }\n\n  protected refresh(): void {\n    this.store.pipe(select(fromSelector.getRefresh)).subscribe(refresh => {\n      if (refresh) {\n        this.store.dispatch(\n          new fromAction.LoadCart({\n            userId: this.cartData.userId,\n            cartId: this.cartData.cartId,\n            details: true,\n          })\n        );\n      }\n    });\n  }\n\n  loadDetails(): void {\n    this.cartData.getDetails = true;\n\n    if (this.cartData.userId !== ANONYMOUS_USERID) {\n      this.store.dispatch(\n        new fromAction.LoadCart({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId ? this.cartData.cartId : 'current',\n          details: true,\n        })\n      );\n    } else if (this.cartData.cartId) {\n      this.store.dispatch(\n        new fromAction.LoadCart({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          details: true,\n        })\n      );\n    }\n  }\n\n  addEntry(productCode: string, quantity: number): void {\n    if (!this.isCreated(this.cartData.cart)) {\n      this.store.dispatch(\n        new fromAction.CreateCart({ userId: this.cartData.userId })\n      );\n      this.callback = function() {\n        this.store.dispatch(\n          new fromAction.AddEntry({\n            userId: this.cartData.userId,\n            cartId: this.cartData.cartId,\n            productCode: productCode,\n            quantity: quantity,\n          })\n        );\n      };\n    } else {\n      this.store.dispatch(\n        new fromAction.AddEntry({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          productCode: productCode,\n          quantity: quantity,\n        })\n      );\n    }\n  }\n\n  removeEntry(entry: UIOrderEntry): void {\n    this.store.dispatch(\n      new fromAction.RemoveEntry({\n        userId: this.cartData.userId,\n        cartId: this.cartData.cartId,\n        entry: entry.entryNumber,\n      })\n    );\n  }\n\n  updateEntry(entryNumber: string, quantity: number): void {\n    if (+quantity > 0) {\n      this.store.dispatch(\n        new fromAction.UpdateEntry({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          entry: entryNumber,\n          qty: quantity,\n        })\n      );\n    } else {\n      this.store.dispatch(\n        new fromAction.RemoveEntry({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          entry: entryNumber,\n        })\n      );\n    }\n  }\n\n  getEntry(productCode: string): Observable<UIOrderEntry> {\n    return this.store.pipe(\n      select(fromSelector.getEntrySelectorFactory(productCode))\n    );\n  }\n\n  isCreated(cart: UICart): boolean {\n    return cart && !!Object.keys(cart).length;\n  }\n\n  isEmpty(cart: UICart): boolean {\n    return cart && !cart.totalItems;\n  }\n}\n","import { CartService } from './cart.service';\nimport { CartDataService } from './cart-data.service';\n\nexport const services: any[] = [CartService, CartDataService];\n\nexport * from './cart.service';\nexport * from './cart-data.service';\n","import { Observable } from 'rxjs';\nimport { UICart } from '../../model/cart';\n\nexport abstract class CartAdapter {\n  /**\n   * Abstract method used to load all carts\n   *\n   * @param userId\n   * @param details Boolean flag indicating if we want to load details\n   */\n  abstract loadAll(userId: string, details?: boolean): Observable<UICart[]>;\n\n  /**\n   * Abstract method used to load cart\n   *\n   * @param userId\n   * @param cartId\n   * @param details Boolean flag indicating if we want to load details\n   */\n  abstract load(\n    userId: string,\n    cartId: string,\n    details?: boolean\n  ): Observable<UICart>;\n\n  /**\n   * Abstract method used to create cart. If toMergeCartGuid is specified, cart will be merged with existing one\n   *\n   * @param userId\n   * @param oldCartId\n   * @param toMergeCartGuid\n   */\n  abstract create(\n    userId: string,\n    oldCartId?: string,\n    toMergeCartGuid?: string\n  ): Observable<UICart>;\n}\n","import { Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { CartAdapter } from './cart.adapter';\nimport { UICart } from '../../model/cart';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartConnector {\n  constructor(private adapter: CartAdapter) {}\n\n  public loadAll(userId: string, details?: boolean): Observable<UICart[]> {\n    return this.adapter.loadAll(userId, details);\n  }\n\n  public load(\n    userId: string,\n    cartId: string,\n    details?: boolean\n  ): Observable<UICart> {\n    return this.adapter.load(userId, cartId, details);\n  }\n\n  public create(\n    userId: string,\n    oldCartId?: string,\n    toMergeCartGuid?: string\n  ): Observable<UICart> {\n    return this.adapter.create(userId, oldCartId, toMergeCartGuid);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { Converter } from '../../../util/converter.service';\nimport { UICart } from '../../model/cart';\n\nexport const CART_NORMALIZER = new InjectionToken<Converter<any, UICart>>(\n  'CartNormalizer'\n);\n","import { Observable } from 'rxjs';\nimport { Address, DeliveryMode } from '../../../occ/occ-models/occ.models';\n\nexport abstract class CartDeliveryAdapter {\n  /**\n   * Abstract method used to create address in cart\n   *\n   * @param userId\n   * @param cartId\n   * @param address\n   */\n  abstract createAddress(\n    userId: string,\n    cartId: string,\n    address: Address\n  ): Observable<Address>;\n\n  /**\n   * Abstract method used to set adress for delivery\n   *\n   * @param userId\n   * @param cartId\n   * @param addressId\n   */\n  abstract setAddress(\n    userId: string,\n    cartId: string,\n    addressId: string\n  ): Observable<any>;\n\n  /**\n   * Abstract method used to set delivery mode on cart\n   *\n   * @param userId\n   * @param cartId\n   * @param deliveryModeId\n   */\n  abstract setMode(\n    userId: string,\n    cartId: string,\n    deliveryModeId: string\n  ): Observable<any>;\n\n  /**\n   * Abstract method used to get current delivery mode from cart\n   *\n   * @param userId\n   * @param cartId\n   */\n  abstract getMode(userId: string, cartId: string): Observable<DeliveryMode>;\n\n  /**\n   * Abstract method used to get supported delivery modes for cart\n   *\n   * @param userId\n   * @param cartId\n   */\n  abstract getSupportedModes(\n    userId: string,\n    cartId: string\n  ): Observable<DeliveryMode[]>;\n}\n","import { Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { Address, DeliveryMode } from '../../../occ/occ-models/occ.models';\nimport { CartDeliveryAdapter } from './cart-delivery.adapter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartDeliveryConnector {\n  constructor(private adapter: CartDeliveryAdapter) {}\n\n  public createAddress(\n    userId: string,\n    cartId: string,\n    address: Address\n  ): Observable<Address> {\n    return this.adapter.createAddress(userId, cartId, address);\n  }\n\n  public setAddress(\n    userId: string,\n    cartId: string,\n    addressId: string\n  ): Observable<any> {\n    return this.adapter.setAddress(userId, cartId, addressId);\n  }\n\n  public setMode(\n    userId: string,\n    cartId: string,\n    deliveryModeId: string\n  ): Observable<any> {\n    return this.adapter.setMode(userId, cartId, deliveryModeId);\n  }\n\n  public getMode(userId: string, cartId: string): Observable<DeliveryMode> {\n    return this.adapter.getMode(userId, cartId);\n  }\n\n  public getSupportedModes(\n    userId: string,\n    cartId: string\n  ): Observable<DeliveryMode[]> {\n    return this.adapter.getSupportedModes(userId, cartId);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { Converter } from '../../../util/converter.service';\nimport { Address, DeliveryMode } from '../../../occ/occ-models/occ.models';\n\nexport const DELIVERY_ADDRESS_NORMALIZER = new InjectionToken<\n  Converter<any, Address>\n>('DeliveryAddressNormalizer');\n\nexport const DELIVERY_ADDRESS_SERIALIZER = new InjectionToken<\n  Converter<Address, any>\n>('DeliveryAddressSerializer');\n\nexport const DELIVERY_MODE_NORMALIZER = new InjectionToken<\n  Converter<any, DeliveryMode>\n>('DeliveryModeNormalizer');\n","import { Observable } from 'rxjs';\nimport { CartModification } from '../../../occ/occ-models/occ.models';\n\nexport abstract class CartEntryAdapter {\n  /**\n   * Abstract method used to add entry to cart\n   *\n   * @param userId\n   * @param cartId\n   * @param productCode\n   * @param quantity\n   */\n  abstract add(\n    userId: string,\n    cartId: string,\n    productCode: string,\n    quantity?: number\n  ): Observable<CartModification>;\n\n  /**\n   * Abstract method used to update entry in cart\n   * @param userId\n   * @param cartId\n   * @param entryNumber\n   * @param qty\n   * @param pickupStore\n   */\n  abstract update(\n    userId: string,\n    cartId: string,\n    entryNumber: string,\n    qty: number,\n    pickupStore?: string\n  ): Observable<CartModification>;\n\n  /**\n   * Abstract method used to remove entry from cart\n   *\n   * @param userId\n   * @param cartId\n   * @param entryNumber\n   */\n  abstract remove(\n    userId: string,\n    cartId: string,\n    entryNumber: string\n  ): Observable<any>;\n}\n","import { Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { CartModification } from '../../../occ/occ-models/occ.models';\nimport { CartEntryAdapter } from './cart-entry.adapter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartEntryConnector {\n  constructor(private adapter: CartEntryAdapter) {}\n\n  public add(\n    userId: string,\n    cartId: string,\n    productCode: string,\n    quantity?: number\n  ): Observable<CartModification> {\n    return this.adapter.add(userId, cartId, productCode, quantity);\n  }\n\n  public update(\n    userId: string,\n    cartId: string,\n    entryNumber: string,\n    qty: number,\n    pickupStore?: string\n  ): Observable<CartModification> {\n    return this.adapter.update(userId, cartId, entryNumber, qty, pickupStore);\n  }\n\n  public remove(\n    userId: string,\n    cartId: string,\n    entryNumber: string\n  ): Observable<any> {\n    return this.adapter.remove(userId, cartId, entryNumber);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { Converter } from '../../../util/converter.service';\nimport { CartModification } from '../../../occ/occ-models/occ.models';\n\nexport const CART_MODIFICATION_NORMALIZER = new InjectionToken<\n  Converter<any, CartModification>\n>('CartModificationNormalizer');\n","import { Observable } from 'rxjs';\nimport { PaymentDetails } from '../../../occ/occ-models/occ.models';\n\nexport abstract class CartPaymentAdapter {\n  /**\n   * Abstract method used to create payment details on cart\n   *\n   * @param userId\n   * @param cartId\n   * @param paymentDetails\n   */\n  abstract create(\n    userId: string,\n    cartId: string,\n    paymentDetails: PaymentDetails\n  ): Observable<PaymentDetails>;\n\n  /**\n   * Abstract method used to set payment details on cart\n   *\n   * @param userId\n   * @param cartId\n   * @param paymentDetailsId\n   */\n  abstract set(\n    userId: string,\n    cartId: string,\n    paymentDetailsId: string\n  ): Observable<any>;\n}\n","import { Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { PaymentDetails } from '../../../occ/occ-models/occ.models';\nimport { CartPaymentAdapter } from './cart-payment.adapter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartPaymentConnector {\n  constructor(private adapter: CartPaymentAdapter) {}\n\n  public create(\n    userId: string,\n    cartId: string,\n    paymentDetails: PaymentDetails\n  ): Observable<PaymentDetails> {\n    return this.adapter.create(userId, cartId, paymentDetails);\n  }\n\n  public set(\n    userId: string,\n    cartId: string,\n    paymentDetailsId: string\n  ): Observable<any> {\n    return this.adapter.set(userId, cartId, paymentDetailsId);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { Converter } from '../../../util/converter.service';\nimport { PaymentDetails } from '../../../occ/occ-models/occ.models';\n\nexport const CART_PAYMENT_DETAILS_NORMALIZER = new InjectionToken<\n  Converter<any, PaymentDetails>\n>('PaymentDetailsNormalizer');\n\nexport const CART_PAYMENT_DETAILS_SERIALIZER = new InjectionToken<\n  Converter<PaymentDetails, any>\n>('PaymentDetailsSerializer');\n","import { Injectable, InjectionToken, Injector } from '@angular/core';\nimport { Observable, OperatorFunction } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n/**\n * Converter is used to convert source data model to target data model.\n * By convention, we distinguish two flows:\n *   - *Normalize* is the conversion from backend models to UI models\n *   - *Serialize* is the conversion of UI models to backend models (in case of submitting data to the backend).\n *\n * Converters can be stacked together to to apply decoupled customizations\n */\nexport interface Converter<S, T> {\n  /**\n   * Convert converts source model to target model. Can use optional target parameter,\n   * used in case of stacking multiple converters (for example, to implement populator pattern).\n   *\n   * @param source Source data model\n   * @param target Optional, partially converted target model\n   */\n  convert(source: S, target?: T): T;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ConverterService {\n  constructor(private injector: Injector) {}\n\n  private converters: Map<\n    InjectionToken<Converter<any, any>>,\n    Converter<any, any>[]\n  > = new Map();\n\n  private getConverters<S, T>(\n    injectionToken: InjectionToken<Converter<S, T>>\n  ): Converter<S, T>[] {\n    if (!this.converters.has(injectionToken)) {\n      const converters = this.injector.get<Converter<S, T>[]>(\n        injectionToken,\n        []\n      );\n      if (!Array.isArray(converters)) {\n        console.warn(\n          'Converter must be multi-provided, please use \"multi: true\" for',\n          injectionToken.toString()\n        );\n      }\n      this.converters.set(injectionToken, converters);\n    }\n\n    return this.converters.get(injectionToken);\n  }\n\n  /**\n   * Will return true if converters for specified token were provided\n   */\n  hasConverters<S, T>(\n    injectionToken: InjectionToken<Converter<S, T>>\n  ): boolean {\n    const converters = this.getConverters(injectionToken);\n    return Array.isArray(converters) && converters.length > 0;\n  }\n\n  /**\n   * Pipeable operator to apply converter logic in a observable stream\n   */\n  pipeable<S, T>(\n    injectionToken: InjectionToken<Converter<S, T>>\n  ): OperatorFunction<S, T> {\n    if (this.hasConverters(injectionToken)) {\n      return map((model: S) => this.convertSource(model, injectionToken));\n    } else {\n      return (observable: Observable<any>) => observable as Observable<T>;\n    }\n  }\n\n  /**\n   * Pipeable operator to apply converter logic in a observable stream to collection of items\n   */\n  pipeableMany<S, T>(\n    injectionToken: InjectionToken<Converter<S, T>>\n  ): OperatorFunction<S[], T[]> {\n    if (this.hasConverters(injectionToken)) {\n      return map((model: S[]) => this.convertMany(model, injectionToken));\n    } else {\n      return (observable: Observable<any[]>) => observable as Observable<T[]>;\n    }\n  }\n\n  /**\n   * Apply converter logic specified by injection token to source data\n   */\n  convert<S, T>(source: S, injectionToken: InjectionToken<Converter<S, T>>): T {\n    if (this.hasConverters(injectionToken)) {\n      return this.convertSource(source, injectionToken);\n    } else {\n      return source as any;\n    }\n  }\n\n  /**\n   * Apply converter logic specified by injection token to a collection\n   */\n  convertMany<S, T>(\n    sources: S[],\n    injectionToken: InjectionToken<Converter<S, T>>\n  ): T[] {\n    if (this.hasConverters(injectionToken) && Array.isArray(sources)) {\n      return sources.map(source => this.convertSource(source, injectionToken));\n    } else {\n      return sources as any[];\n    }\n  }\n\n  private convertSource<S, T>(\n    source: S,\n    injectionToken: InjectionToken<Converter<S, T>>\n  ): T {\n    return this.getConverters(injectionToken).reduce(\n      (target, converter) => {\n        return converter.convert(source, target);\n      },\n      undefined as T\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CartAdapter } from '../connectors/cart/cart.adapter';\nimport { Observable, throwError } from 'rxjs';\nimport { Cart, CartList } from '../../occ/occ-models/occ.models';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { catchError, map, pluck } from 'rxjs/operators';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { ConverterService } from '../../util/converter.service';\nimport { CART_NORMALIZER } from '../connectors/cart/converters';\nimport { UICart } from '../model/cart';\n\n// for mini cart\nconst BASIC_PARAMS =\n  'DEFAULT,deliveryItemsQuantity,totalPrice(formattedValue),' +\n  'entries(totalPrice(formattedValue),product(images(FULL)))';\n\n// for cart details page\nconst DETAILS_PARAMS =\n  'DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,' +\n  'entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue)),' +\n  'totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(formattedValue),subTotal(formattedValue),' +\n  'deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue),pickupItemsQuantity,net,' +\n  'appliedVouchers,productDiscounts(formattedValue)';\n\n@Injectable()\nexport class OccCartAdapter implements CartAdapter {\n  constructor(\n    protected http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  protected getCartEndpoint(userId: string): string {\n    const cartEndpoint = 'users/' + userId + '/carts/';\n    return this.occEndpoints.getEndpoint(cartEndpoint);\n  }\n\n  public loadAll(userId: string, details?: boolean): Observable<UICart[]> {\n    const url = this.getCartEndpoint(userId);\n    const params = details\n      ? new HttpParams({\n          fromString: 'fields=carts(' + DETAILS_PARAMS + ',saveTime)',\n        })\n      : new HttpParams({\n          fromString: 'fields=carts(' + BASIC_PARAMS + ',saveTime)',\n        });\n    return this.http.get<CartList>(url, { params: params }).pipe(\n      catchError((error: any) => throwError(error)),\n      pluck('carts'),\n      this.converter.pipeableMany(CART_NORMALIZER)\n    );\n  }\n\n  public load(\n    userId: string,\n    cartId: string,\n    details?: boolean\n  ): Observable<UICart> {\n    const url = this.getCartEndpoint(userId) + cartId;\n    const params = details\n      ? new HttpParams({\n          fromString: 'fields=' + DETAILS_PARAMS,\n        })\n      : new HttpParams({\n          fromString: 'fields=' + BASIC_PARAMS,\n        });\n\n    if (cartId === 'current') {\n      return this.loadAll(userId, details).pipe(\n        map(carts => {\n          if (carts) {\n            const activeCart = carts.find(cart => {\n              return cart['saveTime'] === undefined;\n            });\n            return activeCart;\n          } else {\n            return null;\n          }\n        })\n      );\n    } else {\n      return this.http.get<Cart>(url, { params: params }).pipe(\n        catchError((error: any) => throwError(error)),\n        this.converter.pipeable(CART_NORMALIZER)\n      );\n    }\n  }\n\n  public create(\n    userId: string,\n    oldCartId?: string,\n    toMergeCartGuid?: string\n  ): Observable<UICart> {\n    const url = this.getCartEndpoint(userId);\n    const toAdd = JSON.stringify({});\n    let queryString = 'fields=' + BASIC_PARAMS;\n\n    if (oldCartId) {\n      queryString = queryString + '&oldCartId=' + oldCartId;\n    }\n    if (toMergeCartGuid) {\n      queryString = queryString + '&toMergeCartGuid=' + toMergeCartGuid;\n    }\n    const params = new HttpParams({\n      fromString: queryString,\n    });\n\n    return this.http.post<Cart>(url, toAdd, { params: params }).pipe(\n      this.converter.pipeable(CART_NORMALIZER),\n      catchError((error: any) => throwError(error.json()))\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport {\n  Address,\n  DeliveryMode,\n  DeliveryModeList,\n} from '../../occ/occ-models/occ.models';\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { catchError, pluck } from 'rxjs/operators';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { CartDeliveryAdapter } from '../connectors/delivery/cart-delivery.adapter';\nimport { ConverterService } from '../../util/converter.service';\nimport {\n  DELIVERY_ADDRESS_NORMALIZER,\n  DELIVERY_ADDRESS_SERIALIZER,\n  DELIVERY_MODE_NORMALIZER,\n} from '../connectors/delivery/converters';\n\n@Injectable()\nexport class OccCartDeliveryAdapter implements CartDeliveryAdapter {\n  constructor(\n    protected http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  protected getCartEndpoint(userId: string): string {\n    const cartEndpoint = 'users/' + userId + '/carts/';\n    return this.occEndpoints.getEndpoint(cartEndpoint);\n  }\n\n  public createAddress(\n    userId: string,\n    cartId: string,\n    address: Address\n  ): Observable<Address> {\n    address = this.converter.convert(address, DELIVERY_ADDRESS_SERIALIZER);\n\n    return this.http\n      .post<Address>(\n        this.getCartEndpoint(userId) + cartId + '/addresses/delivery',\n        address,\n        {\n          headers: new HttpHeaders().set('Content-Type', 'application/json'),\n        }\n      )\n      .pipe(\n        catchError((error: any) => throwError(error.json())),\n        this.converter.pipeable(DELIVERY_ADDRESS_NORMALIZER)\n      );\n  }\n\n  public setAddress(\n    userId: string,\n    cartId: string,\n    addressId: string\n  ): Observable<any> {\n    return this.http\n      .put(\n        this.getCartEndpoint(userId) + cartId + '/addresses/delivery',\n        {},\n        {\n          params: { addressId: addressId },\n        }\n      )\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  public setMode(\n    userId: string,\n    cartId: string,\n    deliveryModeId: string\n  ): Observable<any> {\n    return this.http\n      .put(\n        this.getCartEndpoint(userId) + cartId + '/deliverymode',\n        {},\n        {\n          params: { deliveryModeId: deliveryModeId },\n        }\n      )\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  public getMode(userId: string, cartId: string): Observable<any> {\n    return this.http\n      .get(this.getCartEndpoint(userId) + cartId + '/deliverymode')\n      .pipe(\n        catchError((error: any) => throwError(error.json())),\n        this.converter.pipeable(DELIVERY_MODE_NORMALIZER)\n      );\n  }\n\n  public getSupportedModes(\n    userId: string,\n    cartId: string\n  ): Observable<DeliveryMode[]> {\n    return this.http\n      .get<DeliveryModeList>(\n        this.getCartEndpoint(userId) + cartId + '/deliverymodes'\n      )\n      .pipe(\n        catchError((error: any) => throwError(error.json())),\n        pluck('deliveryModes'),\n        this.converter.pipeableMany(DELIVERY_MODE_NORMALIZER)\n      );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { CartModification } from '../../occ/occ-models/occ.models';\n\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { catchError } from 'rxjs/operators';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { CartEntryAdapter } from '../connectors/entry/cart-entry.adapter';\nimport { ConverterService } from '../../util/converter.service';\nimport { CART_MODIFICATION_NORMALIZER } from '../connectors/entry/converters';\n\n@Injectable()\nexport class OccCartEntryAdapter implements CartEntryAdapter {\n  constructor(\n    protected http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  protected getCartEndpoint(userId: string): string {\n    const cartEndpoint = 'users/' + userId + '/carts/';\n    return this.occEndpoints.getEndpoint(cartEndpoint);\n  }\n\n  public add(\n    userId: string,\n    cartId: string,\n    productCode: string,\n    quantity: number = 1\n  ): Observable<CartModification> {\n    const toAdd = JSON.stringify({});\n\n    const url = this.getCartEndpoint(userId) + cartId + '/entries';\n\n    const params = new HttpParams({\n      fromString: 'code=' + productCode + '&qty=' + quantity,\n    });\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http\n      .post<CartModification>(url, toAdd, { headers, params })\n      .pipe(\n        catchError((error: any) => throwError(error.json())),\n        this.converter.pipeable(CART_MODIFICATION_NORMALIZER)\n      );\n  }\n\n  public update(\n    userId: string,\n    cartId: string,\n    entryNumber: string,\n    qty: number,\n    pickupStore?: string\n  ): Observable<CartModification> {\n    const url =\n      this.getCartEndpoint(userId) + cartId + '/entries/' + entryNumber;\n\n    let queryString = 'qty=' + qty;\n    if (pickupStore) {\n      queryString = queryString + '&pickupStore=' + pickupStore;\n    }\n    const params = new HttpParams({\n      fromString: queryString,\n    });\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http.patch<CartModification>(url, {}, { headers, params }).pipe(\n      catchError((error: any) => throwError(error.json())),\n      this.converter.pipeable(CART_MODIFICATION_NORMALIZER)\n    );\n  }\n\n  public remove(\n    userId: string,\n    cartId: string,\n    entryNumber: string\n  ): Observable<any> {\n    const url =\n      this.getCartEndpoint(userId) + cartId + '/entries/' + entryNumber;\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http\n      .delete(url, { headers })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n}\n","/**\n * Angular uses the native encodeURIComponent function,\n * but then un-encoded some characters that are allowed\n * to be part of the query according to IETF RFC 3986.\n * So, to make these characters still encoded, this encoder only\n * uses the encodeURIComponent.\n */\nimport { HttpParameterCodec } from '@angular/common/http';\n\nexport class CustomEncoder implements HttpParameterCodec {\n  encodeKey(key: string): string {\n    return encodeURIComponent(key);\n  }\n\n  encodeValue(value: string): string {\n    return encodeURIComponent(value);\n  }\n\n  decodeKey(key: string): string {\n    return decodeURIComponent(key);\n  }\n\n  decodeValue(value: string): string {\n    return decodeURIComponent(value);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { PaymentDetails } from '../../occ/occ-models/occ.models';\nimport { CustomEncoder } from './custom.encoder';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { CartPaymentAdapter } from '../connectors/payment/cart-payment.adapter';\nimport { ConverterService } from '../../util/converter.service';\nimport {\n  CART_PAYMENT_DETAILS_NORMALIZER,\n  CART_PAYMENT_DETAILS_SERIALIZER,\n} from '../connectors/payment/converters';\n\n@Injectable()\nexport class OccCartPaymentAdapter implements CartPaymentAdapter {\n  constructor(\n    protected http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {\n    if (typeof DOMParser !== 'undefined') {\n      this.domparser = new DOMParser();\n    }\n  }\n\n  private domparser: DOMParser;\n\n  protected getCartEndpoint(userId: string): string {\n    const cartEndpoint = 'users/' + userId + '/carts/';\n    return this.occEndpoints.getEndpoint(cartEndpoint);\n  }\n\n  public create(\n    userId: string,\n    cartId: string,\n    paymentDetails: PaymentDetails\n  ): Observable<PaymentDetails> {\n    paymentDetails = this.converter.convert(\n      paymentDetails,\n      CART_PAYMENT_DETAILS_SERIALIZER\n    );\n    return this.getProviderSubInfo(userId, cartId).pipe(\n      map(data => {\n        const labelsMap = this.convertToMap(data.mappingLabels.entry);\n        return {\n          url: data.postUrl,\n          parameters: this.getParamsForPaymentProvider(\n            paymentDetails,\n            data.parameters.entry,\n            labelsMap\n          ),\n          mappingLabels: labelsMap,\n        };\n      }),\n      mergeMap(sub => {\n        // create a subscription directly with payment provider\n        return this.createSubWithProvider(sub.url, sub.parameters).pipe(\n          map(response => this.extractPaymentDetailsFromHtml(response)),\n          mergeMap(fromPaymentProvider => {\n            if (!fromPaymentProvider['hasError']) {\n              // consume response from payment provider and creates payment details\n\n              return this.createDetailsWithParameters(\n                userId,\n                cartId,\n                this.getPaymentSopResponseParams(\n                  paymentDetails,\n                  fromPaymentProvider,\n                  sub.mappingLabels\n                )\n              ).pipe(this.converter.pipeable(CART_PAYMENT_DETAILS_NORMALIZER));\n            } else {\n              return throwError(fromPaymentProvider);\n            }\n          })\n        );\n      })\n    );\n  }\n\n  public set(\n    userId: string,\n    cartId: string,\n    paymentDetailsId: string\n  ): Observable<any> {\n    return this.http\n      .put(\n        this.getCartEndpoint(userId) + cartId + '/paymentdetails',\n        {},\n        {\n          params: { paymentDetailsId: paymentDetailsId },\n        }\n      )\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  protected getProviderSubInfo(\n    userId: string,\n    cartId: string\n  ): Observable<any> {\n    return this.http\n      .get(\n        this.getCartEndpoint(userId) +\n          cartId +\n          '/payment/sop/request?responseUrl=sampleUrl'\n      )\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  private createSubWithProvider(\n    postUrl: string,\n    parameters: any\n  ): Observable<any> {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n      Accept: 'text/html',\n    });\n    let httpParams = new HttpParams({ encoder: new CustomEncoder() });\n    Object.keys(parameters).forEach(key => {\n      httpParams = httpParams.append(key, parameters[key]);\n    });\n\n    return this.http.post(postUrl, httpParams, {\n      headers,\n      responseType: 'text',\n    });\n  }\n\n  protected createDetailsWithParameters(\n    userId: string,\n    cartId: string,\n    parameters: any\n  ): Observable<PaymentDetails> {\n    let httpParams = new HttpParams({ encoder: new CustomEncoder() });\n    Object.keys(parameters).forEach(key => {\n      httpParams = httpParams.append(key, parameters[key]);\n    });\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http\n      .post<PaymentDetails>(\n        this.getCartEndpoint(userId) + cartId + '/payment/sop/response',\n        httpParams,\n        { headers }\n      )\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  private getPaymentSopResponseParams(\n    paymentDetails: any,\n    fromPaymentProvider: any,\n    mappingLabels: any\n  ) {\n    const sopResponseParams = {};\n\n    sopResponseParams['decision'] =\n      fromPaymentProvider[mappingLabels['hybris_sop_decision']];\n    sopResponseParams['amount'] =\n      fromPaymentProvider[mappingLabels['hybris_sop_amount']];\n    sopResponseParams['currency'] =\n      fromPaymentProvider[mappingLabels['hybris_sop_currency']];\n\n    sopResponseParams['billTo_country'] =\n      fromPaymentProvider[mappingLabels['hybris_billTo_country']];\n    sopResponseParams['billTo_firstName'] =\n      fromPaymentProvider[mappingLabels['hybris_billTo_firstname']];\n    sopResponseParams['billTo_lastName'] =\n      fromPaymentProvider[mappingLabels['hybris_billTo_lastname']];\n    sopResponseParams['billTo_street1'] =\n      fromPaymentProvider[mappingLabels['hybris_billTo_street1']];\n    sopResponseParams['billTo_city'] =\n      fromPaymentProvider[mappingLabels['hybris_billTo_city']];\n    sopResponseParams['billTo_postalCode'] =\n      fromPaymentProvider[mappingLabels['hybris_billTo_postalcode']];\n\n    sopResponseParams['card_cardType'] = paymentDetails.cardType.code;\n    sopResponseParams['card_accountNumber'] =\n      fromPaymentProvider[mappingLabels['hybris_sop_card_number']];\n    sopResponseParams['card_expirationMonth'] = paymentDetails.expiryMonth;\n    sopResponseParams['card_expirationYear'] = paymentDetails.expiryYear;\n    sopResponseParams['card_nameOnCard'] = paymentDetails.accountHolderName;\n    sopResponseParams['defaultPayment'] = paymentDetails.defaultPayment;\n    sopResponseParams['savePaymentInfo'] = true;\n\n    sopResponseParams['reasonCode'] =\n      fromPaymentProvider[mappingLabels['hybris_sop_reason_code']];\n    sopResponseParams['paySubscriptionCreateReply_subscriptionID'] =\n      fromPaymentProvider[mappingLabels['hybris_sop_subscriptionID']];\n\n    if (mappingLabels['hybris_sop_uses_public_signature'] === 'true') {\n      sopResponseParams[\n        'paySubscriptionCreateReply_subscriptionIDPublicSignature'\n      ] = fromPaymentProvider[mappingLabels['hybris_sop_public_signature']];\n    }\n\n    return sopResponseParams;\n  }\n\n  private getParamsForPaymentProvider(\n    paymentDetails: PaymentDetails,\n    parameters: { key; value }[],\n    mappingLabels: any\n  ) {\n    const params = this.convertToMap(parameters);\n    params[mappingLabels['hybris_account_holder_name']] =\n      paymentDetails.accountHolderName;\n    params[mappingLabels['hybris_card_type']] = paymentDetails.cardType.code;\n    params[mappingLabels['hybris_card_number']] = paymentDetails.cardNumber;\n    if (mappingLabels['hybris_combined_expiry_date'] === 'true') {\n      params[mappingLabels['hybris_card_expiry_date']] =\n        paymentDetails.expiryMonth +\n        mappingLabels['hybris_separator_expiry_date'] +\n        paymentDetails.expiryYear;\n    } else {\n      params[mappingLabels['hybris_card_expiration_month']] =\n        paymentDetails.expiryMonth;\n      params[mappingLabels['hybris_card_expiration_year']] =\n        paymentDetails.expiryYear;\n    }\n    params[mappingLabels['hybris_card_cvn']] = paymentDetails.cvn;\n\n    // billing address\n    params[mappingLabels['hybris_billTo_country']] =\n      paymentDetails.billingAddress.country.isocode;\n    params[mappingLabels['hybris_billTo_firstname']] =\n      paymentDetails.billingAddress.firstName;\n    params[mappingLabels['hybris_billTo_lastname']] =\n      paymentDetails.billingAddress.lastName;\n    params[mappingLabels['hybris_billTo_street1']] =\n      paymentDetails.billingAddress.line1 +\n      ' ' +\n      paymentDetails.billingAddress.line2;\n    params[mappingLabels['hybris_billTo_city']] =\n      paymentDetails.billingAddress.town;\n    params[mappingLabels['hybris_billTo_postalcode']] =\n      paymentDetails.billingAddress.postalCode;\n    return params;\n  }\n\n  private extractPaymentDetailsFromHtml(html: string): any {\n    const domdoc = this.domparser.parseFromString(html, 'text/xml');\n    const responseForm = domdoc.getElementsByTagName('form')[0];\n    const inputs = responseForm.getElementsByTagName('input');\n\n    const values = {};\n    for (let i = 0; inputs[i]; i++) {\n      const input = inputs[i];\n      if (\n        input.getAttribute('name') !== '{}' &&\n        input.getAttribute('value') !== ''\n      ) {\n        values[input.getAttribute('name')] = input.getAttribute('value');\n      }\n    }\n\n    // rejected for some reason\n    if (values['decision'] !== 'ACCEPT') {\n      const reason = { hasError: true };\n      Object.keys(values).forEach(name => {\n        if (name === 'reasonCode' || name.startsWith('InvalidField')) {\n          reason[name] = values[name];\n        }\n      });\n      return reason;\n    }\n\n    return values;\n  }\n\n  private convertToMap(paramList: { key; value }[]) {\n    return paramList.reduce(function(result, item) {\n      const key = item.key;\n      result[key] = item.value;\n      return result;\n    }, {});\n  }\n}\n","import { OccConfig } from './occ-config';\n\nexport const defaultOccConfig: OccConfig = {\n  site: {\n    language: 'en',\n    currency: 'USD',\n  },\n  backend: {\n    occ: {\n      prefix: '/rest/v2/',\n    },\n  },\n};\n","import { OccConfig } from '../../occ';\n\nexport function occConfigValidator(config: OccConfig) {\n  if (\n    config.backend === undefined ||\n    config.backend.occ === undefined ||\n    config.backend.occ.baseUrl === undefined\n  ) {\n    return 'Please configure backend.occ.baseUrl before using storefront library!';\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { OccConfig } from './config/occ-config';\nimport { Config, ConfigModule } from '../config/config.module';\nimport { defaultOccConfig } from './config/default-occ-config';\nimport { provideConfigValidator } from '../config';\nimport { occConfigValidator } from './config/occ-config-validator';\n\n@NgModule({\n  imports: [ConfigModule.withConfig(defaultOccConfig)],\n  providers: [\n    { provide: OccConfig, useExisting: Config },\n    provideConfigValidator(occConfigValidator),\n  ],\n})\nexport class OccModule {}\n","import { InjectionToken } from '@angular/core';\nimport { Converter } from '../../../util/converter.service';\nimport { UIProduct } from '../../model/product';\n\nexport const PRODUCT_NORMALIZER = new InjectionToken<Converter<any, UIProduct>>(\n  'ProductNormalizer'\n);\n","import { Injectable } from '@angular/core';\nimport { Cart } from '../../../occ/occ-models';\nimport { Converter, ConverterService } from '../../../util/converter.service';\nimport { UICart } from '../../model/cart';\nimport { PRODUCT_NORMALIZER } from '../../../product/connectors/product/converters';\n\n@Injectable()\nexport class OccCartNormalizer implements Converter<Cart, UICart> {\n  constructor(private converter: ConverterService) {}\n\n  convert(source: Cart, target?: UICart): UICart {\n    if (target === undefined) {\n      target = { ...(source as any) };\n    }\n\n    if (source && source.entries) {\n      target.entries = source.entries.map(entry => ({\n        ...entry,\n        product: this.converter.convert(entry.product, PRODUCT_NORMALIZER),\n      }));\n    }\n\n    return target;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { OccModule } from '../../occ/occ.module';\nimport { CartAdapter } from '../connectors/cart/cart.adapter';\nimport { OccCartAdapter } from './occ-cart.adapter';\nimport { CartDeliveryAdapter } from '../connectors/delivery/cart-delivery.adapter';\nimport { OccCartDeliveryAdapter } from './occ-cart-delivery.adapter';\nimport { CartEntryAdapter } from '../connectors/entry/cart-entry.adapter';\nimport { OccCartEntryAdapter } from './occ-cart-entry.adapter';\nimport { CartPaymentAdapter } from '../connectors/payment/cart-payment.adapter';\nimport { OccCartPaymentAdapter } from './occ-cart-payment.adapter';\nimport { CART_NORMALIZER } from '../connectors/cart/converters';\nimport { OccCartNormalizer } from './converters/occ-cart-normalizer';\n\n@NgModule({\n  imports: [CommonModule, HttpClientModule, OccModule],\n  providers: [\n    {\n      provide: CartAdapter,\n      useClass: OccCartAdapter,\n    },\n    {\n      provide: CART_NORMALIZER,\n      useClass: OccCartNormalizer,\n      multi: true,\n    },\n    {\n      provide: CartDeliveryAdapter,\n      useClass: OccCartDeliveryAdapter,\n    },\n    {\n      provide: CartEntryAdapter,\n      useClass: OccCartEntryAdapter,\n    },\n    {\n      provide: CartPaymentAdapter,\n      useClass: OccCartPaymentAdapter,\n    },\n  ],\n})\nexport class CartOccModule {}\n","import { Action } from '@ngrx/store';\nimport {\n  Address,\n  DeliveryMode,\n  Order,\n  PaymentDetails,\n} from '../../../occ/occ-models/index';\n\nexport const ADD_DELIVERY_ADDRESS = '[Checkout] Add Delivery Address';\nexport const ADD_DELIVERY_ADDRESS_FAIL = '[Checkout] Add Delivery Address Fail';\nexport const ADD_DELIVERY_ADDRESS_SUCCESS =\n  '[Checkout] Add Delivery Address Success';\n\nexport const SET_DELIVERY_ADDRESS = '[Checkout] Set Delivery Address';\nexport const SET_DELIVERY_ADDRESS_FAIL = '[Checkout] Set Delivery Address Fail';\nexport const SET_DELIVERY_ADDRESS_SUCCESS =\n  '[Checkout] Set Delivery Address Success';\n\nexport const LOAD_SUPPORTED_DELIVERY_MODES =\n  '[Checkout] Load Supported Delivery Modes';\nexport const LOAD_SUPPORTED_DELIVERY_MODES_FAIL =\n  '[Checkout] Load Supported Delivery Modes Fail';\nexport const LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS =\n  '[Checkout] Load Supported Delivery Modes Success';\nexport const CLEAR_SUPPORTED_DELIVERY_MODES =\n  '[Checkout] Clear Supported Delivery Modes';\n\nexport const SET_DELIVERY_MODE = '[Checkout] Set Delivery Mode';\nexport const SET_DELIVERY_MODE_FAIL = '[Checkout] Set Delivery Mode Fail';\nexport const SET_DELIVERY_MODE_SUCCESS = '[Checkout] Set Delivery Mode Success';\n\nexport const CREATE_PAYMENT_DETAILS = '[Checkout] Create Payment Details';\nexport const CREATE_PAYMENT_DETAILS_FAIL =\n  '[Checkout] Create Payment Details Fail';\nexport const CREATE_PAYMENT_DETAILS_SUCCESS =\n  '[Checkout] Create Payment Details Success';\n\nexport const SET_PAYMENT_DETAILS = '[Checkout] Set Payment Details';\nexport const SET_PAYMENT_DETAILS_FAIL = '[Checkout] Set Payment Details Fail';\nexport const SET_PAYMENT_DETAILS_SUCCESS =\n  '[Checkout] Set Payment Details Success';\n\nexport const PLACE_ORDER = '[Checkout] Place Order';\nexport const PLACE_ORDER_FAIL = '[Checkout] Place Order Fail';\nexport const PLACE_ORDER_SUCCESS = '[Checkout] Place Order Success';\n\nexport const CLEAR_CHECKOUT_STEP = '[Checkout] Clear One Checkout Step';\nexport const CLEAR_CHECKOUT_DATA = '[Checkout] Clear Checkout Data';\n\nexport class AddDeliveryAddress implements Action {\n  readonly type = ADD_DELIVERY_ADDRESS;\n  constructor(\n    public payload: { userId: string; cartId: string; address: Address }\n  ) {}\n}\n\nexport class AddDeliveryAddressFail implements Action {\n  readonly type = ADD_DELIVERY_ADDRESS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class AddDeliveryAddressSuccess implements Action {\n  readonly type = ADD_DELIVERY_ADDRESS_SUCCESS;\n  constructor(public payload: Address) {}\n}\n\nexport class SetDeliveryAddress implements Action {\n  readonly type = SET_DELIVERY_ADDRESS;\n  constructor(\n    public payload: { userId: string; cartId: string; address: Address }\n  ) {}\n}\n\nexport class SetDeliveryAddressFail implements Action {\n  readonly type = SET_DELIVERY_ADDRESS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class SetDeliveryAddressSuccess implements Action {\n  readonly type = SET_DELIVERY_ADDRESS_SUCCESS;\n  constructor(public payload: Address) {}\n}\n\nexport class LoadSupportedDeliveryModes implements Action {\n  readonly type = LOAD_SUPPORTED_DELIVERY_MODES;\n  constructor(public payload: { userId: string; cartId: string }) {}\n}\n\nexport class LoadSupportedDeliveryModesFail implements Action {\n  readonly type = LOAD_SUPPORTED_DELIVERY_MODES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadSupportedDeliveryModesSuccess implements Action {\n  readonly type = LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS;\n  constructor(public payload: DeliveryMode[]) {}\n}\n\nexport class SetDeliveryMode implements Action {\n  readonly type = SET_DELIVERY_MODE;\n  constructor(\n    public payload: { userId: string; cartId: string; selectedModeId: string }\n  ) {}\n}\n\nexport class SetDeliveryModeFail implements Action {\n  readonly type = SET_DELIVERY_MODE_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class SetDeliveryModeSuccess implements Action {\n  readonly type = SET_DELIVERY_MODE_SUCCESS;\n  constructor(public payload: string) {}\n}\n\nexport class CreatePaymentDetails implements Action {\n  readonly type = CREATE_PAYMENT_DETAILS;\n  constructor(\n    public payload: {\n      userId: string;\n      cartId: string;\n      paymentDetails: PaymentDetails;\n    }\n  ) {}\n}\n\nexport class CreatePaymentDetailsFail implements Action {\n  readonly type = CREATE_PAYMENT_DETAILS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class CreatePaymentDetailsSuccess implements Action {\n  readonly type = CREATE_PAYMENT_DETAILS_SUCCESS;\n  constructor(public payload: PaymentDetails) {}\n}\n\nexport class SetPaymentDetails implements Action {\n  readonly type = SET_PAYMENT_DETAILS;\n  constructor(\n    public payload: {\n      userId: string;\n      cartId: string;\n      paymentDetails: PaymentDetails;\n    }\n  ) {}\n}\n\nexport class SetPaymentDetailsFail implements Action {\n  readonly type = SET_PAYMENT_DETAILS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class SetPaymentDetailsSuccess implements Action {\n  readonly type = SET_PAYMENT_DETAILS_SUCCESS;\n  constructor(public payload: PaymentDetails) {}\n}\n\nexport class PlaceOrder implements Action {\n  readonly type = PLACE_ORDER;\n  constructor(public payload: { userId: string; cartId: string }) {}\n}\n\nexport class PlaceOrderFail implements Action {\n  readonly type = PLACE_ORDER_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class PlaceOrderSuccess implements Action {\n  readonly type = PLACE_ORDER_SUCCESS;\n  constructor(public payload: Order) {}\n}\n\nexport class ClearSupportedDeliveryModes implements Action {\n  readonly type = CLEAR_SUPPORTED_DELIVERY_MODES;\n}\n\nexport class ClearCheckoutStep implements Action {\n  readonly type = CLEAR_CHECKOUT_STEP;\n  constructor(public payload: number) {}\n}\n\nexport class ClearCheckoutData implements Action {\n  readonly type = CLEAR_CHECKOUT_DATA;\n}\n\nexport type CheckoutAction =\n  | AddDeliveryAddress\n  | AddDeliveryAddressFail\n  | AddDeliveryAddressSuccess\n  | SetDeliveryAddress\n  | SetDeliveryAddressFail\n  | SetDeliveryAddressSuccess\n  | LoadSupportedDeliveryModes\n  | LoadSupportedDeliveryModesFail\n  | LoadSupportedDeliveryModesSuccess\n  | SetDeliveryMode\n  | SetDeliveryModeFail\n  | SetDeliveryModeSuccess\n  | ClearSupportedDeliveryModes\n  | CreatePaymentDetails\n  | CreatePaymentDetailsFail\n  | CreatePaymentDetailsSuccess\n  | SetPaymentDetails\n  | SetPaymentDetailsFail\n  | SetPaymentDetailsSuccess\n  | PlaceOrder\n  | PlaceOrderFail\n  | PlaceOrderSuccess\n  | ClearCheckoutStep\n  | ClearCheckoutData;\n","import * as fromAction from './../actions';\nimport { OrderEntry } from '../../../occ/occ-models/index';\nimport { CartState } from '../cart-state';\n\nexport const initialState: CartState = {\n  content: {},\n  entries: {},\n  refresh: false,\n  cartMergeComplete: false,\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.CartAction | fromAction.CartEntryAction\n): CartState {\n  switch (action.type) {\n    case fromAction.MERGE_CART: {\n      return {\n        ...state,\n        cartMergeComplete: false,\n      };\n    }\n\n    case fromAction.MERGE_CART_SUCCESS: {\n      return {\n        ...state,\n        cartMergeComplete: true,\n        refresh: true,\n      };\n    }\n\n    case fromAction.LOAD_CART_SUCCESS:\n    case fromAction.CREATE_CART_SUCCESS: {\n      const content = { ...action.payload };\n      let entries = {};\n      if (content.entries) {\n        entries = content.entries.reduce(\n          (entryMap: { [code: string]: any }, entry: OrderEntry) => {\n            return {\n              ...entryMap,\n              /*\n              If we refresh the page from cart details page, 2 load cart\n              Actions gets dispatched. One is non-detail, and the second is detailed.\n              In the case where the detailed once get resolved first, we merge the existing\n              data with the new data from the response (to not delete existing detailed data).\n              */\n              [entry.product.code]: state.entries[entry.product.code]\n                ? {\n                    ...state.entries[entry.product.code],\n                    ...entry,\n                  }\n                : entry,\n            };\n          },\n          {\n            ...entries,\n          }\n        );\n        delete content['entries'];\n      }\n      return {\n        ...state,\n        content,\n        entries,\n        refresh: false,\n      };\n    }\n\n    case fromAction.REMOVE_ENTRY_SUCCESS:\n    case fromAction.UPDATE_ENTRY_SUCCESS:\n    case fromAction.ADD_ENTRY_SUCCESS: {\n      return {\n        ...state,\n        refresh: true,\n      };\n    }\n  }\n\n  return state;\n}\n","import { InjectionToken, Provider } from '@angular/core';\n\nimport { ActionReducerMap, MetaReducer, ActionReducer } from '@ngrx/store';\n\nimport { CartsState, CartState, CART_DATA } from './../cart-state';\nimport { LOGOUT } from '../../../auth/store/actions/login-logout.action';\nimport { PLACE_ORDER_SUCCESS } from '../../../checkout/store/actions/checkout.action';\nimport { loaderReducer } from '../../../state/utils/loader/loader.reducer';\n\nimport { reducer as cartReducer } from './cart.reducer';\n\nexport function getReducers(): ActionReducerMap<CartsState> {\n  return {\n    active: loaderReducer<CartState>(CART_DATA, cartReducer),\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<CartsState>\n> = new InjectionToken<ActionReducerMap<CartsState>>('CartReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport function clearCartState(\n  reducer: ActionReducer<any>\n): ActionReducer<any> {\n  return function(state, action) {\n    if (action.type === LOGOUT || action.type === PLACE_ORDER_SUCCESS) {\n      state = undefined;\n    }\n    return reducer(state, action);\n  };\n}\n\nexport const metaReducers: MetaReducer<any>[] = [clearCartState];\n","import * as fromLanguages from '../actions/languages.action';\nimport { LanguagesState } from '../state';\nimport { Language } from '../../../occ/occ-models/occ.models';\n\nexport const initialState: LanguagesState = {\n  entities: null,\n  activeLanguage: null,\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromLanguages.LanguagesAction\n): LanguagesState {\n  switch (action.type) {\n    case fromLanguages.LOAD_LANGUAGES_SUCCESS: {\n      const languages: Language[] = action.payload;\n      const entities = languages.reduce(\n        (langEntities: { [isocode: string]: Language }, language: Language) => {\n          return {\n            ...langEntities,\n            [language.isocode]: language,\n          };\n        },\n        {\n          ...state.entities,\n        }\n      );\n\n      return {\n        ...state,\n        entities,\n      };\n    }\n\n    case fromLanguages.SET_ACTIVE_LANGUAGE: {\n      const isocode = action.payload;\n\n      return {\n        ...state,\n        activeLanguage: isocode,\n      };\n    }\n  }\n  return state;\n}\n","import { Action } from '@ngrx/store';\nimport { Currency } from '../../../occ/occ-models/occ.models';\n\nexport const LOAD_CURRENCIES = '[Site-context] Load Currencies';\nexport const LOAD_CURRENCIES_FAIL = '[Site-context] Load Currencies Fail';\nexport const LOAD_CURRENCIES_SUCCESS = '[Site-context] Load Currencies Success';\nexport const SET_ACTIVE_CURRENCY = '[Site-context] Set Active Currency';\nexport const CURRENCY_CHANGE = '[Site-context] Currency Change';\n\nexport class LoadCurrencies implements Action {\n  readonly type = LOAD_CURRENCIES;\n}\n\nexport class LoadCurrenciesFail implements Action {\n  readonly type = LOAD_CURRENCIES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadCurrenciesSuccess implements Action {\n  readonly type = LOAD_CURRENCIES_SUCCESS;\n  constructor(public payload: Currency[]) {}\n}\n\nexport class SetActiveCurrency implements Action {\n  readonly type = SET_ACTIVE_CURRENCY;\n  constructor(public payload: string) {}\n}\n\nexport class CurrencyChange implements Action {\n  readonly type = CURRENCY_CHANGE;\n}\n\n// action types\nexport type CurrenciesAction =\n  | LoadCurrencies\n  | LoadCurrenciesFail\n  | LoadCurrenciesSuccess\n  | SetActiveCurrency\n  | CurrencyChange;\n","import * as fromCurrencies from '../actions/currencies.action';\nimport { CurrenciesState } from '../state';\nimport { Currency } from '../../../occ/occ-models/occ.models';\n\nexport const initialState: CurrenciesState = {\n  entities: null,\n  activeCurrency: null,\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromCurrencies.CurrenciesAction\n): CurrenciesState {\n  switch (action.type) {\n    case fromCurrencies.LOAD_CURRENCIES_SUCCESS: {\n      const currencies: Currency[] = action.payload;\n      const entities = currencies.reduce(\n        (currEntities: { [isocode: string]: Currency }, currency: Currency) => {\n          return {\n            ...currEntities,\n            [currency.isocode]: currency,\n          };\n        },\n        {\n          ...state.entities,\n        }\n      );\n\n      return {\n        ...state,\n        entities,\n      };\n    }\n\n    case fromCurrencies.SET_ACTIVE_CURRENCY: {\n      const isocode: string = action.payload;\n\n      return {\n        ...state,\n        activeCurrency: isocode,\n      };\n    }\n  }\n\n  return state;\n}\n","import * as fromBaseSite from '../actions/base-site.action';\n\nexport const initialState = '';\n\nexport function reducer(\n  state = initialState,\n  action: fromBaseSite.BaseSiteAction\n): string {\n  switch (action.type) {\n    case fromBaseSite.SET_ACTIVE_BASE_SITE: {\n      return action.payload;\n    }\n  }\n\n  return state;\n}\n","import { InjectionToken, Provider } from '@angular/core';\nimport { ActionReducerMap } from '@ngrx/store';\n\nimport * as fromLanguages from './languages.reducer';\nimport * as fromCurrencies from './currencies.reducer';\nimport * as fromBaseSite from './base-site.reducer';\nimport { SiteContextState } from '../state';\n\nexport function getReducers(): ActionReducerMap<SiteContextState> {\n  return {\n    languages: fromLanguages.reducer,\n    currencies: fromCurrencies.reducer,\n    baseSite: fromBaseSite.reducer,\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<SiteContextState>\n> = new InjectionToken<ActionReducerMap<SiteContextState>>(\n  'SiteContextReducers'\n);\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n","import { throwError, Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError } from 'rxjs/operators';\nimport { LanguageList, CurrencyList } from '../../occ/occ-models/occ.models';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OccSiteService {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService\n  ) {}\n\n  loadLanguages(): Observable<LanguageList> {\n    return this.http\n      .get(this.occEndpoints.getEndpoint('languages'))\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  loadCurrencies(): Observable<CurrencyList> {\n    return this.http\n      .get(this.occEndpoints.getEndpoint('currencies'))\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n}\n","import { Observable, of } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport { map, catchError, tap, exhaustMap } from 'rxjs/operators';\n\nimport { OccSiteService } from '../../occ/occ-site.service';\nimport * as actions from '../actions/languages.action';\nimport { WindowRef } from '../../../window/window-ref';\n\n@Injectable()\nexport class LanguagesEffects {\n  @Effect()\n  loadLanguages$: Observable<any> = this.actions$.pipe(\n    ofType(actions.LOAD_LANGUAGES),\n    exhaustMap(() => {\n      return this.occSiteService.loadLanguages().pipe(\n        map(data => new actions.LoadLanguagesSuccess(data.languages)),\n        catchError(error => of(new actions.LoadLanguagesFail(error)))\n      );\n    })\n  );\n\n  @Effect()\n  activateLanguage$: Observable<any> = this.actions$.pipe(\n    ofType(actions.SET_ACTIVE_LANGUAGE),\n    tap((action: actions.SetActiveLanguage) => {\n      if (this.winRef.sessionStorage) {\n        this.winRef.sessionStorage.setItem('language', action.payload);\n      }\n    }),\n    map(() => new actions.LanguageChange())\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occSiteService: OccSiteService,\n    private winRef: WindowRef\n  ) {}\n}\n","import { Observable, of } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport { map, catchError, exhaustMap, tap } from 'rxjs/operators';\n\nimport { OccSiteService } from '../../occ/occ-site.service';\nimport * as actions from '../actions/currencies.action';\nimport { WindowRef } from '../../../window/window-ref';\n\n@Injectable()\nexport class CurrenciesEffects {\n  @Effect()\n  loadCurrencies$: Observable<any> = this.actions$.pipe(\n    ofType(actions.LOAD_CURRENCIES),\n    exhaustMap(() => {\n      return this.occSiteService.loadCurrencies().pipe(\n        map(data => new actions.LoadCurrenciesSuccess(data.currencies)),\n        catchError(error => of(new actions.LoadCurrenciesFail(error)))\n      );\n    })\n  );\n\n  @Effect()\n  activateCurrency$: Observable<any> = this.actions$.pipe(\n    ofType(actions.SET_ACTIVE_CURRENCY),\n    tap((action: actions.SetActiveCurrency) => {\n      if (this.winRef.sessionStorage) {\n        this.winRef.sessionStorage.setItem('currency', action.payload);\n      }\n    }),\n    map(() => new actions.CurrencyChange())\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occSiteService: OccSiteService,\n    private winRef: WindowRef\n  ) {}\n}\n","import { LanguagesEffects } from './languages.effect';\nimport { CurrenciesEffects } from './currencies.effect';\n\nexport const effects: any[] = [LanguagesEffects, CurrenciesEffects];\n\nexport * from './languages.effect';\nexport * from './currencies.effect';\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { Language } from '../../../occ/occ-models/occ.models';\nimport {\n  StateWithSiteContext,\n  LanguagesState,\n  LanguagesEntities,\n  SiteContextState,\n} from '../state';\n\nimport { getSiteContextState } from './site-context.selector';\n\nconst activeLanguageSelector = (state: LanguagesState) => state.activeLanguage;\nconst languagesEntitiesSelector = (state: LanguagesState) => state.entities;\n\nexport const getLanguagesState: MemoizedSelector<\n  StateWithSiteContext,\n  LanguagesState\n> = createSelector(\n  getSiteContextState,\n  (state: SiteContextState) => state.languages\n);\n\nexport const getLanguagesEntities: MemoizedSelector<\n  StateWithSiteContext,\n  LanguagesEntities\n> = createSelector(\n  getLanguagesState,\n  languagesEntitiesSelector\n);\n\nexport const getActiveLanguage: MemoizedSelector<\n  StateWithSiteContext,\n  string\n> = createSelector(\n  getLanguagesState,\n  activeLanguageSelector\n);\n\nexport const getAllLanguages: MemoizedSelector<\n  StateWithSiteContext,\n  Language[]\n> = createSelector(\n  getLanguagesEntities,\n  entities => {\n    return entities\n      ? Object.keys(entities).map(isocode => entities[isocode])\n      : null;\n  }\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { Currency } from '../../../occ/occ-models/occ.models';\nimport {\n  StateWithSiteContext,\n  CurrenciesState,\n  CurrencyEntities,\n  SiteContextState,\n} from '../state';\nimport { getSiteContextState } from './site-context.selector';\n\nconst currenciesEntitiesSelector = (state: CurrenciesState) => state.entities;\nconst activeCurrencySelector = (state: CurrenciesState) => state.activeCurrency;\n\nexport const getCurrenciesState: MemoizedSelector<\n  StateWithSiteContext,\n  CurrenciesState\n> = createSelector(\n  getSiteContextState,\n  (state: SiteContextState) => state.currencies\n);\n\nexport const getCurrenciesEntities: MemoizedSelector<\n  StateWithSiteContext,\n  CurrencyEntities\n> = createSelector(\n  getCurrenciesState,\n  currenciesEntitiesSelector\n);\n\nexport const getActiveCurrency: MemoizedSelector<\n  StateWithSiteContext,\n  string\n> = createSelector(\n  getCurrenciesState,\n  activeCurrencySelector\n);\n\nexport const getAllCurrencies: MemoizedSelector<\n  StateWithSiteContext,\n  Currency[]\n> = createSelector(\n  getCurrenciesEntities,\n  entities => {\n    return entities\n      ? Object.keys(entities).map(isocode => entities[isocode])\n      : null;\n  }\n);\n","import { Injectable } from '@angular/core';\nimport { Store, select } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport * as fromStore from '../store/index';\nimport { filter, take, tap } from 'rxjs/operators';\nimport { Language } from '../../occ/occ-models';\nimport { WindowRef } from '../../window/window-ref';\nimport { SiteContext } from './site-context.interface';\n/**\n * Facade that provides easy access to language state, actions and selectors.\n */\n@Injectable()\nexport class LanguageService implements SiteContext<Language> {\n  private sessionStorage: Storage;\n\n  constructor(\n    private store: Store<fromStore.StateWithSiteContext>,\n    winRef: WindowRef\n  ) {\n    this.sessionStorage = winRef.sessionStorage;\n  }\n\n  /**\n   * Represents all the languages supported by the current store.\n   */\n  getAll(): Observable<Language[]> {\n    return this.store.pipe(\n      select(fromStore.getAllLanguages),\n      tap(languages => {\n        if (!languages) {\n          this.store.dispatch(new fromStore.LoadLanguages());\n        }\n      }),\n      filter(Boolean)\n    );\n  }\n\n  /**\n   * Represents the isocode of the active language.\n   */\n  getActive(): Observable<string> {\n    return this.store.pipe(\n      select(fromStore.getActiveLanguage),\n      filter(Boolean)\n    );\n  }\n\n  /**\n   * Sets the active language.\n   */\n  setActive(isocode: string) {\n    return this.store\n      .pipe(\n        select(fromStore.getActiveLanguage),\n        take(1)\n      )\n      .subscribe(activeLanguage => {\n        if (activeLanguage !== isocode) {\n          this.store.dispatch(new fromStore.SetActiveLanguage(isocode));\n        }\n      });\n  }\n\n  /**\n   * Initials the active language. The active language is either given\n   * by the last visit (stored in session storage) or by the\n   * default session language of the store.\n   */\n  initialize(defaultLanguage: string) {\n    if (this.sessionStorage && !!this.sessionStorage.getItem('language')) {\n      this.setActive(this.sessionStorage.getItem('language'));\n    } else {\n      this.setActive(defaultLanguage);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Store, select } from '@ngrx/store';\n\nimport { Observable } from 'rxjs';\n\nimport * as fromStore from '../store/index';\nimport { filter, take, tap } from 'rxjs/operators';\nimport { Currency } from '../../occ/occ-models';\nimport { WindowRef } from '../../window/window-ref';\nimport { SiteContext } from './site-context.interface';\n\n/**\n * Facade that provides easy access to curreny state, actions and selectors.\n */\n@Injectable()\nexport class CurrencyService implements SiteContext<Currency> {\n  private sessionStorage: Storage;\n\n  constructor(\n    private store: Store<fromStore.StateWithSiteContext>,\n    winRef: WindowRef\n  ) {\n    this.sessionStorage = winRef.sessionStorage;\n  }\n\n  /**\n   * Represents all the currencies supported by the current store.\n   */\n  getAll(): Observable<Currency[]> {\n    return this.store.pipe(\n      select(fromStore.getAllCurrencies),\n      tap(currencies => {\n        if (!currencies) {\n          this.store.dispatch(new fromStore.LoadCurrencies());\n        }\n      }),\n      filter(Boolean)\n    );\n  }\n\n  /**\n   * Represents the isocode of the active currency.\n   */\n  getActive(): Observable<string> {\n    return this.store.pipe(\n      select(fromStore.getActiveCurrency),\n      filter(Boolean)\n    );\n  }\n\n  /**\n   * Sets the active language.\n   */\n  setActive(isocode: string) {\n    return this.store\n      .pipe(\n        select(fromStore.getActiveCurrency),\n        take(1)\n      )\n      .subscribe(activeCurrency => {\n        if (activeCurrency !== isocode) {\n          this.store.dispatch(new fromStore.SetActiveCurrency(isocode));\n        }\n      });\n  }\n\n  /**\n   * Initials the active currency. The active currency is either given\n   * by the last visit (stored in session storage) or by the\n   * default session currency of the store.\n   */\n  initialize(defaultCurrency: string) {\n    if (this.sessionStorage && !!this.sessionStorage.getItem('currency')) {\n      this.setActive(this.sessionStorage.getItem('currency'));\n    } else {\n      this.setActive(defaultCurrency);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { OccModule } from '../../occ/occ.module';\n\nimport { OccSiteService } from './occ-site.service';\n@NgModule({\n  imports: [OccModule, CommonModule, HttpClientModule],\n  providers: [OccModule, OccSiteService],\n})\nexport class SiteContextOccModule {}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { ConfigModule } from '../../config/config.module';\nimport {\n  StateConfig,\n  StateTransferType,\n} from '../../state/config/state-config';\nimport { effects } from './effects/index';\nimport { reducerProvider, reducerToken } from './reducers/index';\nimport { SITE_CONTEXT_FEATURE } from './state';\n\nexport function siteContextStoreConfigFactory(): StateConfig {\n  // if we want to reuse SITE_CONTEXT_FEATURE const in config, we have to use factory instead of plain object\n  const config = {\n    state: {\n      ssrTransfer: {\n        keys: { [SITE_CONTEXT_FEATURE]: StateTransferType.TRANSFER_STATE },\n      },\n    },\n  };\n  return config;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    StoreModule.forFeature(SITE_CONTEXT_FEATURE, reducerToken),\n    EffectsModule.forFeature(effects),\n    ConfigModule.withConfigFactory(siteContextStoreConfigFactory),\n  ],\n  providers: [reducerProvider],\n})\nexport class SiteContextStoreModule {}\n","import { Action } from '@ngrx/store';\n\nexport const ENTITY_REMOVE_ACTION = '[ENTITY] REMOVE';\nexport const ENTITY_REMOVE_ALL_ACTION = '[ENTITY] REMOVE ALL';\n\nexport interface EntityMeta {\n  entityType: string;\n  entityId: string | string[];\n  entityRemove?: boolean;\n}\n\nexport function entityMeta(type: string, id: string | string[]): EntityMeta {\n  return {\n    entityType: type,\n    entityId: id,\n  };\n}\n\nexport function entityRemoveMeta(\n  type: string,\n  id: string | string[]\n): EntityMeta {\n  return {\n    entityId: id,\n    entityType: type,\n    entityRemove: true,\n  };\n}\n\nexport function entityRemoveAllMeta(type: string): EntityMeta {\n  return {\n    entityId: null,\n    entityType: type,\n    entityRemove: true,\n  };\n}\n\nexport interface EntityAction extends Action {\n  readonly payload?: any;\n  readonly meta?: EntityMeta;\n}\n\nexport class EntityRemoveAction implements EntityAction {\n  type = ENTITY_REMOVE_ACTION;\n  readonly meta: EntityMeta;\n  constructor(entityType: string, id: string | string[]) {\n    this.meta = entityRemoveMeta(entityType, id);\n  }\n}\n\nexport class EntityRemoveAllAction implements EntityAction {\n  type = ENTITY_REMOVE_ALL_ACTION;\n  readonly meta: EntityMeta;\n  constructor(entityType: string) {\n    this.meta = entityRemoveAllMeta(entityType);\n  }\n}\n","import { Action } from '@ngrx/store';\n\nimport { entityMeta, EntityMeta } from '../entity/entity.action';\nimport {\n  failMeta,\n  LoaderMeta,\n  loadMeta,\n  resetMeta,\n  successMeta,\n} from '../loader/loader.action';\n\nexport const ENTITY_LOAD_ACTION = '[ENTITY] LOAD';\nexport const ENTITY_FAIL_ACTION = '[ENTITY] LOAD FAIL';\nexport const ENTITY_SUCCESS_ACTION = '[ENTITY] LOAD SUCCESS';\nexport const ENTITY_RESET_ACTION = '[ENTITY] RESET';\n\nexport interface EntityLoaderMeta extends EntityMeta, LoaderMeta {}\n\nexport interface EntityLoaderAction extends Action {\n  readonly payload?: any;\n  readonly meta?: EntityLoaderMeta;\n}\n\nexport function entityLoadMeta(\n  entityType: string,\n  id: string | string[]\n): EntityLoaderMeta {\n  return {\n    ...loadMeta(entityType),\n    ...entityMeta(entityType, id),\n  };\n}\n\nexport function entityFailMeta(\n  entityType: string,\n  id: string | string[],\n  error?: any\n): EntityLoaderMeta {\n  return {\n    ...failMeta(entityType, error),\n    ...entityMeta(entityType, id),\n  };\n}\n\nexport function entitySuccessMeta(\n  entityType: string,\n  id: string | string[]\n): EntityLoaderMeta {\n  return {\n    ...successMeta(entityType),\n    ...entityMeta(entityType, id),\n  };\n}\n\nexport function entityResetMeta(\n  entityType: string,\n  id: string | string[]\n): EntityLoaderMeta {\n  return {\n    ...resetMeta(entityType),\n    ...entityMeta(entityType, id),\n  };\n}\n\nexport class EntityLoadAction implements EntityLoaderAction {\n  type = ENTITY_LOAD_ACTION;\n  readonly meta: EntityLoaderMeta;\n  constructor(entityType: string, id: string | string[]) {\n    this.meta = entityLoadMeta(entityType, id);\n  }\n}\n\nexport class EntityFailAction implements EntityLoaderAction {\n  type = ENTITY_FAIL_ACTION;\n  readonly meta: EntityLoaderMeta;\n  constructor(entityType: string, id: string | string[], error?: any) {\n    this.meta = entityFailMeta(entityType, id, error);\n  }\n}\n\nexport class EntitySuccessAction implements EntityLoaderAction {\n  type = ENTITY_SUCCESS_ACTION;\n  readonly meta: EntityLoaderMeta;\n  constructor(entityType: string, id: string | string[], public payload?: any) {\n    this.meta = entitySuccessMeta(entityType, id);\n  }\n}\n\nexport class EntityResetAction implements EntityLoaderAction {\n  type = ENTITY_RESET_ACTION;\n  readonly meta: EntityLoaderMeta;\n  constructor(entityType: string, id: string | string[]) {\n    this.meta = entityResetMeta(entityType, id);\n  }\n}\n","import { Action } from '@ngrx/store';\n\nimport { EntityState } from './entity-state';\nimport { EntityAction } from './entity.action';\n\nexport const initialEntityState: EntityState<any> = { entities: {} };\n\n/**\n * Higher order reducer for reusing reducer logic for multiple entities\n *\n * Utilizes entityId meta field to target entity by id in actions\n */\nexport function entityReducer<T>(\n  entityType: string,\n  reducer: (state: T, action: Action) => T\n) {\n  return (\n    state: EntityState<T> = initialEntityState,\n    action: EntityAction\n  ): EntityState<T> => {\n    let ids: string[];\n    let partitionPayload = false;\n    if (\n      action.meta &&\n      action.meta.entityType === entityType &&\n      action.meta.entityId !== undefined\n    ) {\n      ids = [].concat(action.meta.entityId);\n\n      // remove selected entities\n      if (action.meta.entityRemove) {\n        if (action.meta.entityId === null) {\n          return initialEntityState;\n        } else {\n          let removed = false;\n          const newEntities = Object.keys(state.entities).reduce((acc, cur) => {\n            if (ids.indexOf(cur) > -1) {\n              removed = true;\n            } else {\n              acc[cur] = state.entities[cur];\n            }\n            return acc;\n          }, {});\n\n          return removed ? { entities: newEntities } : state;\n        }\n      }\n\n      partitionPayload =\n        Array.isArray(action.meta.entityId) && Array.isArray(action.payload);\n    } else {\n      ids = Object.keys(state.entities);\n    }\n\n    const entityUpdates: { [id: string]: T } = {};\n\n    for (let i = 0; i < ids.length; i++) {\n      const id = ids[i];\n      const subAction = partitionPayload\n        ? { ...action, payload: action.payload[i] }\n        : action;\n      const newState = reducer(state.entities[id], subAction);\n      if (newState) {\n        entityUpdates[id] = newState;\n      }\n    }\n\n    if (Object.keys(entityUpdates).length > 0) {\n      return {\n        ...state,\n        entities: { ...state.entities, ...entityUpdates },\n      };\n    }\n\n    return state;\n  };\n}\n","import { entityReducer } from '../entity/entity.reducer';\nimport { loaderReducer } from '../loader/loader.reducer';\nimport { LoaderAction } from '../loader/loader.action';\nimport { EntityLoaderState } from './entity-loader-state';\nimport { EntityLoaderAction } from './entity-loader.action';\n\n/**\n * Higher order reducer that wraps LoaderReducer and EntityReducer enhancing\n * single state reducer to support multiple entities with generic loading flags\n */\nexport function entityLoaderReducer<T>(\n  entityType: string,\n  reducer?: (state: T, action: LoaderAction) => T\n): (\n  state: EntityLoaderState<T>,\n  action: EntityLoaderAction\n) => EntityLoaderState<T> {\n  return entityReducer(entityType, loaderReducer(entityType, reducer));\n}\n","import { EntityLoaderState } from './entity-loader-state';\nimport { LoaderState } from '../loader/loader-state';\nimport { initialLoaderState } from '../loader/loader.reducer';\n\nexport function entityStateSelector<T>(\n  state: EntityLoaderState<T>,\n  id: string\n): LoaderState<T> {\n  return state.entities[id] || initialLoaderState;\n}\n\nexport function entityValueSelector<T>(\n  state: EntityLoaderState<T>,\n  id: string\n): T {\n  const entityState = entityStateSelector(state, id);\n  return entityState.value;\n}\n\nexport function entityLoadingSelector<T>(\n  state: EntityLoaderState<T>,\n  id: string\n): boolean {\n  const entityState = entityStateSelector(state, id);\n  return entityState.loading;\n}\n\nexport function entityErrorSelector<T>(\n  state: EntityLoaderState<T>,\n  id: string\n): boolean {\n  const entityState = entityStateSelector(state, id);\n  return entityState.error;\n}\n\nexport function entitySuccessSelector<T>(\n  state: EntityLoaderState<T>,\n  id: string\n): boolean {\n  const entityState = entityStateSelector(state, id);\n  return entityState.success;\n}\n","import { Provider, Type } from '@angular/core';\nimport { LanguageService } from '../facade/language.service';\nimport { CurrencyService } from '../facade/currency.service';\nimport { SiteContext } from '../facade/site-context.interface';\nimport { BaseSiteService } from '../facade/base-site.service';\n\nexport abstract class ContextServiceMap {\n  [context: string]: Type<SiteContext<any>>;\n}\n\nexport const LANGUAGE_CONTEXT_ID = 'LANGUAGE';\nexport const CURRENCY_CONTEXT_ID = 'CURRENCY';\nexport const BASE_SITE_CONTEXT_ID = 'BASE_SITE';\n\nexport function serviceMapFactory() {\n  return {\n    [LANGUAGE_CONTEXT_ID]: LanguageService,\n    [CURRENCY_CONTEXT_ID]: CurrencyService,\n    [BASE_SITE_CONTEXT_ID]: BaseSiteService,\n  };\n}\n\nexport const contextServiceMapProvider: Provider = {\n  provide: ContextServiceMap,\n  useFactory: serviceMapFactory,\n};\n","import { SiteContextConfig } from './site-context-config';\nimport {\n  CURRENCY_CONTEXT_ID,\n  LANGUAGE_CONTEXT_ID,\n} from '../providers/context-service-map';\n\nexport function defaultSiteContextConfigFactory(): SiteContextConfig {\n  return {\n    siteContext: {\n      parameters: {\n        [LANGUAGE_CONTEXT_ID]: {\n          persistence: 'route',\n          defaultValue: 'en',\n          values: [\n            'en',\n            'de',\n            'ja',\n            'zh',\n            'ru',\n            'fr',\n            'tr',\n            'it',\n            'es',\n            'uk',\n            'pl',\n            'nl',\n            'hi',\n            'ar',\n            'pt',\n            'bn',\n            'pa',\n          ],\n        },\n        [CURRENCY_CONTEXT_ID]: {\n          persistence: 'route',\n          defaultValue: 'USD',\n          values: [\n            'USD',\n            'EUR',\n            'JPY',\n            'GBP',\n            'AUD',\n            'CAD',\n            'CHF',\n            'CNY',\n            'SEK',\n            'NZD',\n            'MXN',\n            'SGD',\n            'HKD',\n            'NOK',\n            'KRW',\n            'TRY',\n            'RUB',\n            'INR',\n            'BRL',\n            'ZAR',\n          ],\n        },\n      },\n    },\n  };\n}\n","export type ContextParamPersistence = 'session' | 'cookie' | 'route' | 'domain';\n\nexport interface ContextParams {\n  persistence?: ContextParamPersistence;\n  defaultValue?: string;\n  values?: string[];\n}\n\nexport abstract class SiteContextConfig {\n  siteContext?: {\n    parameters?: {\n      [contextName: string]: ContextParams;\n    };\n    urlEncodingParameters?: string[];\n  };\n}\n","import { APP_INITIALIZER, Provider } from '@angular/core';\nimport { LanguageService } from '../facade/language.service';\nimport { CurrencyService } from '../facade/currency.service';\nimport { OccConfig } from '../../occ/config/occ-config';\nimport { BaseSiteService } from '../facade/base-site.service';\n\nexport function inititializeContext(\n  config: OccConfig,\n  baseSiteService: BaseSiteService,\n  langService: LanguageService,\n  currService: CurrencyService\n) {\n  return () => {\n    baseSiteService.initialize(config.site.baseSite);\n    langService.initialize(config.site.language);\n    currService.initialize(config.site.currency);\n  };\n}\n\nexport const contextServiceProviders: Provider[] = [\n  BaseSiteService,\n  LanguageService,\n  CurrencyService,\n  {\n    provide: APP_INITIALIZER,\n    useFactory: inititializeContext,\n    deps: [OccConfig, BaseSiteService, LanguageService, CurrencyService],\n    multi: true,\n  },\n];\n","import { Injectable, Injector } from '@angular/core';\nimport {\n  ContextParamPersistence,\n  SiteContextConfig,\n} from '../config/site-context-config';\nimport { SiteContext } from '../facade/site-context.interface';\nimport { ContextServiceMap } from '../providers/context-service-map';\n\n@Injectable()\nexport class SiteContextParamsService {\n  constructor(\n    private config: SiteContextConfig,\n    private injector: Injector,\n    private serviceMap: ContextServiceMap\n  ) {}\n\n  getContextParameters(persistence?: ContextParamPersistence): string[] {\n    const contextConfig = this.config.siteContext.parameters;\n    if (contextConfig) {\n      const params = Object.keys(contextConfig);\n      if (persistence) {\n        return params.filter(\n          key => contextConfig[key].persistence === persistence\n        );\n      } else {\n        return params;\n      }\n    }\n    return [];\n  }\n\n  getParamValues(param: string): string[] {\n    return this.config.siteContext.parameters &&\n      this.config.siteContext.parameters[param]\n      ? this.config.siteContext.parameters[param].values\n      : undefined;\n  }\n\n  getParamDefaultValue(param: string): string {\n    return this.config.siteContext.parameters &&\n      this.config.siteContext.parameters[param]\n      ? this.config.siteContext.parameters[param].defaultValue\n      : undefined;\n  }\n\n  getSiteContextService(param: string): SiteContext<any> {\n    if (this.serviceMap[param]) {\n      return this.injector.get<SiteContext<any>>(this.serviceMap[param], null);\n    }\n  }\n\n  getValue(param: string): string {\n    let value: string;\n\n    const service = this.getSiteContextService(param);\n    if (service) {\n      service\n        .getActive()\n        .subscribe(val => (value = val))\n        .unsubscribe();\n    }\n\n    return value !== undefined ? value : this.getParamDefaultValue(param);\n  }\n\n  setValue(param: string, value: string) {\n    const service = this.getSiteContextService(param);\n    if (service) {\n      service.setActive(value);\n    }\n  }\n}\n","import { DefaultUrlSerializer, UrlTree } from '@angular/router';\nimport { Injectable } from '@angular/core';\nimport { SiteContextParamsService } from '../facade/site-context-params.service';\nimport { SiteContextConfig } from '../config/site-context-config';\n\nexport interface ParamValuesMap {\n  [name: string]: string;\n}\n\nexport interface UrlTreeWithSiteContext extends UrlTree {\n  siteContext?: ParamValuesMap;\n}\n\n@Injectable()\nexport class SiteContextUrlSerializer extends DefaultUrlSerializer {\n  private readonly urlEncodingParameters: string[];\n\n  get hasContextInRoutes() {\n    return this.urlEncodingParameters.length > 0;\n  }\n\n  constructor(\n    private siteContextParams: SiteContextParamsService,\n    private config: SiteContextConfig\n  ) {\n    super();\n    this.urlEncodingParameters =\n      this.config.siteContext.urlEncodingParameters || [];\n  }\n\n  parse(url: string): UrlTreeWithSiteContext {\n    if (this.hasContextInRoutes) {\n      const urlWithParams = this.urlExtractContextParameters(url);\n      const parsed = super.parse(urlWithParams.url) as UrlTreeWithSiteContext;\n      this.urlTreeIncludeContextParameters(parsed, urlWithParams.params);\n      return parsed;\n    } else {\n      return super.parse(url);\n    }\n  }\n\n  urlExtractContextParameters(\n    url: string\n  ): { url: string; params: ParamValuesMap } {\n    const segments = url.split('/');\n    if (segments[0] === '') {\n      segments.shift();\n    }\n    const params = {};\n\n    let paramId = 0;\n    let segmentId = 0;\n    while (\n      paramId < this.urlEncodingParameters.length &&\n      segmentId < segments.length\n    ) {\n      const paramName = this.urlEncodingParameters[paramId];\n      const paramValues = this.siteContextParams.getParamValues(paramName);\n\n      if (paramValues.indexOf(segments[segmentId]) > -1) {\n        params[paramName] = segments[segmentId];\n        segmentId++;\n      }\n      paramId++;\n    }\n\n    url = segments.slice(Object.keys(params).length).join('/');\n    return { url, params };\n  }\n\n  private urlTreeIncludeContextParameters(\n    urlTree: UrlTreeWithSiteContext,\n    params: ParamValuesMap\n  ) {\n    urlTree.siteContext = params;\n  }\n\n  serialize(tree: UrlTreeWithSiteContext): string {\n    const params = this.urlTreeExtractContextParameters(tree);\n    const url = super.serialize(tree);\n    const serialized = this.urlIncludeContextParameters(url, params);\n    return serialized;\n  }\n\n  urlTreeExtractContextParameters(\n    urlTree: UrlTreeWithSiteContext\n  ): ParamValuesMap {\n    return urlTree.siteContext ? urlTree.siteContext : {};\n  }\n\n  private urlIncludeContextParameters(url: string, params: ParamValuesMap) {\n    const contextRoutePart = this.urlEncodingParameters\n      .map(param => {\n        return params[param]\n          ? params[param]\n          : this.siteContextParams.getValue(param);\n      })\n      .join('/');\n\n    return contextRoutePart + url;\n  }\n}\n","import { Injectable, Injector, OnDestroy } from '@angular/core';\nimport { Location } from '@angular/common';\nimport {\n  NavigationCancel,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Router,\n  RouterEvent,\n} from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { SiteContextParamsService } from '../facade/site-context-params.service';\nimport { Subscription } from 'rxjs';\nimport { SiteContextUrlSerializer } from './site-context-url-serializer';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SiteContextRoutesHandler implements OnDestroy {\n  constructor(\n    private siteContextParams: SiteContextParamsService,\n    private serializer: SiteContextUrlSerializer,\n    private injector: Injector\n  ) {}\n\n  private subscription = new Subscription();\n\n  private contextValues: {\n    [param: string]: string;\n  } = {};\n\n  private router: Router;\n  private location: Location;\n  private isNavigating = false;\n\n  init() {\n    this.router = this.injector.get<Router>(Router);\n\n    this.location = this.injector.get<Location>(Location);\n    const routingParams = this.siteContextParams.getContextParameters('route');\n\n    if (routingParams.length) {\n      this.setContextParamsFromRoute(this.router.url);\n      this.subscribeChanges(routingParams);\n      this.subscribeRouting();\n    }\n  }\n\n  private subscribeChanges(params: string[]) {\n    params.forEach(param => {\n      const service = this.siteContextParams.getSiteContextService(param);\n      if (service) {\n        this.subscription.add(\n          service.getActive().subscribe(value => {\n            if (\n              !this.isNavigating &&\n              this.contextValues[param] &&\n              this.contextValues[param] !== value\n            ) {\n              const parsed = this.router.parseUrl(this.router.url);\n              const serialized = this.router.serializeUrl(parsed);\n              this.location.replaceState(serialized);\n            }\n            this.contextValues[param] = value;\n          })\n        );\n      }\n    });\n  }\n\n  private subscribeRouting() {\n    this.subscription.add(\n      this.router.events\n        .pipe(\n          filter(\n            event =>\n              event instanceof NavigationStart ||\n              event instanceof NavigationEnd ||\n              event instanceof NavigationError ||\n              event instanceof NavigationCancel\n          )\n        )\n        .subscribe((event: RouterEvent) => {\n          this.isNavigating = event instanceof NavigationStart;\n          if (this.isNavigating) {\n            this.setContextParamsFromRoute(event.url);\n          }\n        })\n    );\n  }\n\n  private setContextParamsFromRoute(url: string) {\n    const { params } = this.serializer.urlExtractContextParameters(url);\n    Object.keys(params).forEach(param =>\n      this.siteContextParams.setValue(param, params[param])\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { APP_INITIALIZER, Provider } from '@angular/core';\nimport { SiteContextParamsService } from '../facade/site-context-params.service';\nimport { UrlSerializer } from '@angular/router';\nimport { SiteContextUrlSerializer } from '../services/site-context-url-serializer';\nimport { SiteContextRoutesHandler } from '../services/site-context-routes-handler';\n\nexport function initSiteContextRoutesHandler(\n  siteContextRoutesHandler: SiteContextRoutesHandler\n) {\n  return () => {\n    siteContextRoutesHandler.init();\n  };\n}\n\nexport const siteContextParamsProviders: Provider[] = [\n  SiteContextParamsService,\n  SiteContextUrlSerializer,\n  { provide: UrlSerializer, useExisting: SiteContextUrlSerializer },\n  {\n    provide: APP_INITIALIZER,\n    useFactory: initSiteContextRoutesHandler,\n    deps: [SiteContextRoutesHandler],\n    multi: true,\n  },\n];\n","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor,\n} from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { CurrencyService } from '../facade/currency.service';\nimport { LanguageService } from '../facade/language.service';\nimport { OccConfig } from '../../occ/config/occ-config';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\n\n@Injectable()\nexport class SiteContextInterceptor implements HttpInterceptor {\n  activeLang: string = this.config.site.language;\n  activeCurr: string = this.config.site.currency;\n\n  constructor(\n    private languageService: LanguageService,\n    private currencyService: CurrencyService,\n    private occEndpoints: OccEndpointsService,\n    private config: OccConfig\n  ) {\n    this.languageService\n      .getActive()\n      .subscribe(data => (this.activeLang = data));\n\n    this.currencyService\n      .getActive()\n      .subscribe(data => (this.activeCurr = data));\n  }\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (request.url.indexOf(this.occEndpoints.getBaseEndpoint()) > -1) {\n      request = request.clone({\n        setParams: {\n          lang: this.activeLang,\n          curr: this.activeCurr,\n        },\n      });\n    }\n\n    return next.handle(request);\n  }\n}\n","import { Provider } from '@angular/core';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { SiteContextInterceptor } from './site-context.interceptor';\n\nexport * from './occ-site.service';\nexport * from './site-context-occ.module';\nexport * from './site-context.interceptor';\n\nexport const interceptors: Provider[] = [\n  {\n    provide: HTTP_INTERCEPTORS,\n    useClass: SiteContextInterceptor,\n    multi: true,\n  },\n];\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { SiteContextOccModule } from './occ/site-context-occ.module';\nimport { SiteContextStoreModule } from './store/site-context-store.module';\nimport { StateModule } from '../state/index';\nimport { Config, ConfigModule } from '../config/config.module';\nimport { defaultSiteContextConfigFactory } from './config/default-site-context-config';\nimport { SiteContextConfig } from './config/site-context-config';\nimport { contextServiceMapProvider } from './providers/context-service-map';\nimport { contextServiceProviders } from './providers/context-service-providers';\nimport { siteContextParamsProviders } from './providers/site-context-params-providers';\nimport { interceptors } from './occ/index';\n\n// @dynamic\n@NgModule({\n  imports: [\n    ConfigModule.withConfigFactory(defaultSiteContextConfigFactory),\n    StateModule,\n    SiteContextOccModule,\n    SiteContextStoreModule,\n  ],\n  providers: [\n    contextServiceMapProvider,\n    ...contextServiceProviders,\n    ...siteContextParamsProviders,\n    { provide: SiteContextConfig, useExisting: Config },\n  ],\n})\nexport class SiteContextModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: SiteContextModule,\n      providers: [...interceptors],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\nimport { CURRENCY_CHANGE, LANGUAGE_CHANGE } from '../../../site-context/index';\nimport * as fromActions from './../actions/cart.action';\nimport { CartDataService } from '../../facade/cart-data.service';\nimport { CartConnector } from '../../connectors/cart/cart.connector';\nimport { UICart } from '../../model/cart';\n\n@Injectable()\nexport class CartEffects {\n  @Effect()\n  loadCart$: Observable<\n    fromActions.LoadCartFail | fromActions.LoadCartSuccess\n  > = this.actions$.pipe(\n    ofType(fromActions.LOAD_CART, LANGUAGE_CHANGE, CURRENCY_CHANGE),\n    map(\n      (action: {\n        type: string;\n        payload?: { userId: string; cartId: string; details?: boolean };\n      }) => action.payload\n    ),\n    mergeMap(payload => {\n      const loadCartParams = {\n        userId: (payload && payload.userId) || this.cartData.userId,\n        cartId: (payload && payload.cartId) || this.cartData.cartId,\n        details:\n          payload && payload.details !== undefined\n            ? payload.details\n            : this.cartData.getDetails,\n      };\n\n      if (this.isMissingData(loadCartParams)) {\n        return of(new fromActions.LoadCartFail({}));\n      }\n\n      return this.cartConnector\n        .load(\n          loadCartParams.userId,\n          loadCartParams.cartId,\n          loadCartParams.details\n        )\n        .pipe(\n          map((cart: UICart) => {\n            return new fromActions.LoadCartSuccess(cart);\n          }),\n          catchError(error => of(new fromActions.LoadCartFail(error)))\n        );\n    })\n  );\n\n  @Effect()\n  createCart$: Observable<\n    | fromActions.MergeCartSuccess\n    | fromActions.CreateCartSuccess\n    | fromActions.CreateCartFail\n  > = this.actions$.pipe(\n    ofType(fromActions.CREATE_CART),\n    map((action: fromActions.CreateCart) => action.payload),\n    mergeMap(payload => {\n      return this.cartConnector\n        .create(payload.userId, payload.oldCartId, payload.toMergeCartGuid)\n        .pipe(\n          switchMap((cart: UICart) => {\n            if (payload.oldCartId) {\n              return [\n                new fromActions.CreateCartSuccess(cart),\n                new fromActions.MergeCartSuccess(),\n              ];\n            }\n            return [new fromActions.CreateCartSuccess(cart)];\n          }),\n          catchError(error => of(new fromActions.CreateCartFail(error)))\n        );\n    })\n  );\n\n  @Effect()\n  mergeCart$: Observable<fromActions.CreateCart> = this.actions$.pipe(\n    ofType(fromActions.MERGE_CART),\n    map((action: fromActions.MergeCart) => action.payload),\n    mergeMap(payload => {\n      return this.cartConnector.load(payload.userId, 'current').pipe(\n        map(currentCart => {\n          return new fromActions.CreateCart({\n            userId: payload.userId,\n            oldCartId: payload.cartId,\n            toMergeCartGuid: currentCart ? currentCart.guid : undefined,\n          });\n        })\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private cartConnector: CartConnector,\n    private cartData: CartDataService\n  ) {}\n\n  private isMissingData(payload) {\n    return payload.userId === undefined || payload.cartId === undefined;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\n\nimport * as fromActions from './../actions';\nimport { CartEntryConnector } from '../../connectors/entry/cart-entry.connector';\n\n@Injectable()\nexport class CartEntryEffects {\n  @Effect()\n  addEntry$: Observable<any> = this.actions$.pipe(\n    ofType(fromActions.ADD_ENTRY),\n    map((action: fromActions.AddEntry) => action.payload),\n    mergeMap(payload =>\n      this.cartEntryConnector\n        .add(\n          payload.userId,\n          payload.cartId,\n          payload.productCode,\n          payload.quantity\n        )\n        .pipe(\n          map((entry: any) => new fromActions.AddEntrySuccess(entry)),\n          catchError(error => of(new fromActions.AddEntryFail(error)))\n        )\n    )\n  );\n\n  @Effect()\n  removeEntry$: Observable<any> = this.actions$.pipe(\n    ofType(fromActions.REMOVE_ENTRY),\n    map((action: fromActions.AddEntry) => action.payload),\n    mergeMap(payload =>\n      this.cartEntryConnector\n        .remove(payload.userId, payload.cartId, payload.entry)\n        .pipe(\n          map(() => {\n            return new fromActions.RemoveEntrySuccess();\n          }),\n          catchError(error => of(new fromActions.RemoveEntryFail(error)))\n        )\n    )\n  );\n\n  @Effect()\n  updateEntry$: Observable<any> = this.actions$.pipe(\n    ofType(fromActions.UPDATE_ENTRY),\n    map((action: fromActions.AddEntry) => action.payload),\n    mergeMap(payload =>\n      this.cartEntryConnector\n        .update(payload.userId, payload.cartId, payload.entry, payload.qty)\n        .pipe(\n          map(() => {\n            return new fromActions.UpdateEntrySuccess();\n          }),\n          catchError(error => of(new fromActions.UpdateEntryFail(error)))\n        )\n    )\n  );\n\n  constructor(\n    private actions$: Actions,\n    private cartEntryConnector: CartEntryConnector\n  ) {}\n}\n","import { CartEffects } from './cart.effect';\nimport { CartEntryEffects } from './cart-entry.effect';\n\nexport const effects: any[] = [CartEffects, CartEntryEffects];\n\nexport * from './cart.effect';\nexport * from './cart-entry.effect';\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { reducerToken, reducerProvider } from './reducers/index';\nimport { metaReducers } from './reducers/index';\nimport { effects } from './effects/index';\nimport { CART_FEATURE } from './cart-state';\nimport { CartOccModule } from './../occ/cart-occ.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    CartOccModule,\n    StoreModule.forFeature(CART_FEATURE, reducerToken, { metaReducers }),\n    EffectsModule.forFeature(effects),\n  ],\n  providers: [reducerProvider],\n})\nexport class CartStoreModule {}\n","import { NgModule } from '@angular/core';\n\nimport { CartDataService, CartService } from './facade/index';\nimport { CartOccModule } from './occ/cart-occ.module';\nimport { CartStoreModule } from './store/cart-store.module';\n@NgModule({\n  imports: [CartOccModule, CartStoreModule],\n  providers: [CartDataService, CartService],\n})\nexport class CartModule {}\n","import {\n  CardType,\n  Address,\n  DeliveryMode,\n  Order,\n  PaymentDetails,\n  AddressValidation,\n} from '../../occ/occ-models/index';\n\nexport const CHECKOUT_FEATURE = 'checkout';\n\nexport interface StateWithCheckout {\n  [CHECKOUT_FEATURE]: CheckoutState;\n}\n\nexport interface AddressVerificationState {\n  results: AddressValidation | string;\n}\n\nexport interface CardTypesState {\n  entities: { [code: string]: CardType };\n}\n\nexport interface CheckoutStepsState {\n  address: Address;\n  deliveryMode: {\n    supported: { [code: string]: DeliveryMode };\n    selected: string;\n  };\n  paymentDetails: PaymentDetails;\n  orderDetails: Order;\n}\n\nexport interface CheckoutState {\n  steps: CheckoutStepsState;\n  cardTypes: CardTypesState;\n  addressVerification: AddressVerificationState;\n}\n","import { Action } from '@ngrx/store';\nimport { CardType } from '../../../occ/occ-models/index';\n\nexport const LOAD_CARD_TYPES = '[Checkout] Load Card Types';\nexport const LOAD_CARD_TYPES_FAIL = '[Checkout] Load Card Fail';\nexport const LOAD_CARD_TYPES_SUCCESS = '[Checkout] Load Card Success';\n\nexport class LoadCardTypes implements Action {\n  readonly type = LOAD_CARD_TYPES;\n  constructor() {}\n}\n\nexport class LoadCardTypesFail implements Action {\n  readonly type = LOAD_CARD_TYPES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadCardTypesSuccess implements Action {\n  readonly type = LOAD_CARD_TYPES_SUCCESS;\n  constructor(public payload: CardType[]) {}\n}\n\nexport type CardTypesAction =\n  | LoadCardTypes\n  | LoadCardTypesFail\n  | LoadCardTypesSuccess;\n","import { Action } from '@ngrx/store';\nimport { Address, AddressValidation } from '../../../occ/occ-models/index';\n\nexport const VERIFY_ADDRESS = '[Checkout] Verify Address';\nexport const VERIFY_ADDRESS_FAIL = '[Checkout] Verify Address Fail';\nexport const VERIFY_ADDRESS_SUCCESS = '[Checkout] Verify Address Success';\n\nexport const CLEAR_ADDRESS_VERIFICATION_RESULTS =\n  '[Checkout] Clear Address Verification Results';\n\nexport class VerifyAddress implements Action {\n  readonly type = VERIFY_ADDRESS;\n  constructor(public payload: { userId: string; address: Address }) {}\n}\n\nexport class VerifyAddressFail implements Action {\n  readonly type = VERIFY_ADDRESS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class VerifyAddressSuccess implements Action {\n  readonly type = VERIFY_ADDRESS_SUCCESS;\n  constructor(public payload: AddressValidation) {}\n}\n\nexport class ClearAddressVerificationResults implements Action {\n  readonly type = CLEAR_ADDRESS_VERIFICATION_RESULTS;\n  constructor() {}\n}\n\nexport type AddressVerificationActions =\n  | VerifyAddress\n  | VerifyAddressFail\n  | VerifyAddressSuccess\n  | ClearAddressVerificationResults;\n","import { Action } from '@ngrx/store';\n\nexport const CHECKOUT_CLEAR_MISCS_DATA = '[Checkout] Clear Miscs Data';\n\nexport class CheckoutClearMiscsData implements Action {\n  readonly type = CHECKOUT_CLEAR_MISCS_DATA;\n}\n\nexport type CheckoutMiscsDataAction = CheckoutClearMiscsData;\n\nexport * from './checkout.action';\nexport * from './card-types.action';\nexport * from './address-verification.action';\n","import { CheckoutStepsState } from '../checkout-state';\nimport * as fromAction from './../actions/index';\nimport { Address, DeliveryMode, Order } from '../../../occ/occ-models/index';\n\nexport const initialState: CheckoutStepsState = {\n  address: {},\n  deliveryMode: {\n    supported: {},\n    selected: '',\n  },\n  paymentDetails: {},\n  orderDetails: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.CheckoutAction | fromAction.CheckoutClearMiscsData\n): CheckoutStepsState {\n  switch (action.type) {\n    case fromAction.ADD_DELIVERY_ADDRESS_SUCCESS:\n    case fromAction.SET_DELIVERY_ADDRESS_SUCCESS: {\n      const address: Address = action.payload;\n\n      return {\n        ...state,\n        address,\n      };\n    }\n\n    case fromAction.LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS: {\n      const supportedModes = action.payload;\n      if (!supportedModes) {\n        return state;\n      }\n\n      const supported = supportedModes.reduce(\n        (modes: { [code: string]: DeliveryMode }, mode: DeliveryMode) => {\n          return {\n            ...modes,\n            [mode.code]: mode,\n          };\n        },\n        {\n          ...state.deliveryMode.supported,\n        }\n      );\n\n      return {\n        ...state,\n        deliveryMode: {\n          ...state.deliveryMode,\n          supported,\n        },\n      };\n    }\n\n    case fromAction.SET_DELIVERY_MODE_SUCCESS: {\n      const selected = action.payload;\n\n      return {\n        ...state,\n        deliveryMode: {\n          ...state.deliveryMode,\n          selected,\n        },\n      };\n    }\n\n    case fromAction.CREATE_PAYMENT_DETAILS_SUCCESS:\n    case fromAction.SET_PAYMENT_DETAILS_SUCCESS: {\n      return {\n        ...state,\n        paymentDetails: action.payload,\n      };\n    }\n\n    case fromAction.CREATE_PAYMENT_DETAILS_FAIL: {\n      const paymentDetails = action.payload;\n      if (paymentDetails['hasError']) {\n        return {\n          ...state,\n          paymentDetails,\n        };\n      }\n\n      return state;\n    }\n\n    case fromAction.PLACE_ORDER_SUCCESS: {\n      const orderDetails: Order = action.payload;\n\n      return {\n        ...state,\n        orderDetails,\n      };\n    }\n\n    case fromAction.CLEAR_CHECKOUT_DATA: {\n      return initialState;\n    }\n\n    case fromAction.CLEAR_CHECKOUT_STEP: {\n      const stepNumber = action.payload;\n      switch (stepNumber) {\n        case 1: {\n          return {\n            ...state,\n            address: {},\n          };\n        }\n\n        case 2: {\n          return {\n            ...state,\n            deliveryMode: {\n              ...state.deliveryMode,\n              supported: {},\n              selected: '',\n            },\n          };\n        }\n\n        case 3: {\n          return {\n            ...state,\n            paymentDetails: {},\n          };\n        }\n      }\n\n      return state;\n    }\n\n    case fromAction.CLEAR_SUPPORTED_DELIVERY_MODES:\n    case fromAction.CHECKOUT_CLEAR_MISCS_DATA: {\n      return {\n        ...state,\n        deliveryMode: {\n          ...state.deliveryMode,\n          supported: {},\n        },\n      };\n    }\n  }\n\n  return state;\n}\n\nexport const getDeliveryAddress = (state: CheckoutStepsState) => state.address;\nexport const getDeliveryMode = (state: CheckoutStepsState) =>\n  state.deliveryMode;\nexport const getPaymentDetails = (state: CheckoutStepsState) =>\n  state.paymentDetails;\nexport const getOrderDetails = (state: CheckoutStepsState) =>\n  state.orderDetails;\n","import * as fromAction from '../actions/index';\nimport { AddressVerificationState } from '../checkout-state';\n\nexport const initialState: AddressVerificationState = {\n  results: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.AddressVerificationActions\n): AddressVerificationState {\n  switch (action.type) {\n    case fromAction.VERIFY_ADDRESS_SUCCESS: {\n      const results = action.payload;\n\n      return {\n        ...state,\n        results,\n      };\n    }\n\n    case fromAction.VERIFY_ADDRESS_FAIL: {\n      return {\n        ...state,\n        results: 'FAIL',\n      };\n    }\n\n    case fromAction.CLEAR_ADDRESS_VERIFICATION_RESULTS: {\n      return {\n        ...state,\n        results: {},\n      };\n    }\n  }\n\n  return state;\n}\n\nexport const getAddressVerificationResults = (\n  state: AddressVerificationState\n) => state.results;\n","import { CardTypesState } from '../checkout-state';\nimport * as fromAction from '../actions/index';\nimport { CardType } from '../../../occ/occ-models/index';\n\nexport const initialState: CardTypesState = {\n  entities: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.CardTypesAction | fromAction.CheckoutMiscsDataAction\n): CardTypesState {\n  switch (action.type) {\n    case fromAction.LOAD_CARD_TYPES_SUCCESS: {\n      const cardTypes: CardType[] = action.payload;\n      const entities = cardTypes.reduce(\n        (cardTypesEntities: { [code: string]: CardType }, name: CardType) => {\n          return {\n            ...cardTypesEntities,\n            [name.code]: name,\n          };\n        },\n        {\n          ...state.entities,\n        }\n      );\n\n      return {\n        ...state,\n        entities,\n      };\n    }\n\n    case fromAction.CHECKOUT_CLEAR_MISCS_DATA: {\n      return initialState;\n    }\n  }\n\n  return state;\n}\n\nexport const getCardTypesEntites = (state: CardTypesState) => state.entities;\n","import { InjectionToken, Provider } from '@angular/core';\n\nimport {\n  ActionReducerMap,\n  createFeatureSelector,\n  MetaReducer,\n  ActionReducer,\n  MemoizedSelector,\n} from '@ngrx/store';\n\nimport { CheckoutState, CHECKOUT_FEATURE } from '../checkout-state';\nimport * as fromAction from '../actions/index';\nimport { LOGOUT } from '../../../auth/store/actions/index';\nimport {\n  CURRENCY_CHANGE,\n  LANGUAGE_CHANGE,\n} from '../../../site-context/store/actions/index';\n\nimport * as fromAddressVerification from './address-verification.reducer';\nimport * as fromCardTypes from './card-types.reducer';\nimport * as fromCheckout from './checkout.reducer';\n\nexport function getReducers(): ActionReducerMap<CheckoutState> {\n  return {\n    steps: fromCheckout.reducer,\n    cardTypes: fromCardTypes.reducer,\n    addressVerification: fromAddressVerification.reducer,\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<CheckoutState>\n> = new InjectionToken<ActionReducerMap<CheckoutState>>('CheckoutReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport const getCheckoutState: MemoizedSelector<\n  any,\n  CheckoutState\n> = createFeatureSelector<CheckoutState>(CHECKOUT_FEATURE);\n\nexport function clearCheckoutState(\n  reducer: ActionReducer<CheckoutState>\n): ActionReducer<CheckoutState> {\n  return function(state, action) {\n    switch (action.type) {\n      case LANGUAGE_CHANGE: {\n        action = new fromAction.CheckoutClearMiscsData();\n        break;\n      }\n      case CURRENCY_CHANGE: {\n        action = new fromAction.ClearSupportedDeliveryModes();\n        break;\n      }\n      case LOGOUT: {\n        action = new fromAction.ClearCheckoutData();\n        break;\n      }\n    }\n    return reducer(state, action);\n  };\n}\n\nexport const metaReducers: MetaReducer<CheckoutState>[] = [clearCheckoutState];\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\n\nimport { CheckoutState, CheckoutStepsState } from '../checkout-state';\nimport * as fromReducer from './../reducers/checkout.reducer';\nimport * as fromFeature from './../reducers/index';\nimport {\n  DeliveryMode,\n  Address,\n  Order,\n  PaymentDetails,\n} from '../../../occ/occ-models/index';\n\nexport const getCheckoutStepsState: MemoizedSelector<\n  CheckoutState,\n  CheckoutStepsState\n> = createSelector(\n  fromFeature.getCheckoutState,\n  (state: CheckoutState) => state.steps\n);\n\nexport const getDeliveryAddress: MemoizedSelector<\n  CheckoutState,\n  Address\n> = createSelector(\n  getCheckoutStepsState,\n  fromReducer.getDeliveryAddress\n);\n\nexport const getDeliveryMode: MemoizedSelector<\n  CheckoutState,\n  {\n    supported: { [code: string]: DeliveryMode };\n    selected: string;\n  }\n> = createSelector(\n  getCheckoutStepsState,\n  fromReducer.getDeliveryMode\n);\n\nexport const getSupportedDeliveryModes: MemoizedSelector<\n  CheckoutState,\n  DeliveryMode[]\n> = createSelector(\n  getDeliveryMode,\n  deliveryMode => {\n    return Object.keys(deliveryMode.supported).map(\n      code => deliveryMode.supported[code]\n    );\n  }\n);\n\nexport const getSelectedCode: MemoizedSelector<\n  CheckoutState,\n  string\n> = createSelector(\n  getDeliveryMode,\n  deliveryMode => {\n    return deliveryMode.selected;\n  }\n);\n\nexport const getSelectedDeliveryMode: MemoizedSelector<\n  CheckoutState,\n  DeliveryMode\n> = createSelector(\n  getDeliveryMode,\n  deliveryMode => {\n    if (deliveryMode.selected !== '') {\n      if (Object.keys(deliveryMode.supported).length === 0) {\n        return null;\n      }\n      return deliveryMode.supported[deliveryMode.selected];\n    }\n  }\n);\n\nexport const getPaymentDetails: MemoizedSelector<\n  CheckoutState,\n  PaymentDetails\n> = createSelector(\n  getCheckoutStepsState,\n  fromReducer.getPaymentDetails\n);\n\nexport const getCheckoutOrderDetails: MemoizedSelector<\n  CheckoutState,\n  Order\n> = createSelector(\n  getCheckoutStepsState,\n  fromReducer.getOrderDetails\n);\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\n\nimport { CheckoutState, CardTypesState } from '../checkout-state';\nimport * as fromReducer from './../reducers/card-types.reducer';\nimport * as fromFeature from './../reducers/index';\nimport { CardType } from '../../../occ/occ-models/index';\n\nexport const getCardTypesState: MemoizedSelector<\n  CheckoutState,\n  CardTypesState\n> = createSelector(\n  fromFeature.getCheckoutState,\n  (state: CheckoutState) => state.cardTypes\n);\n\nexport const getCardTypesEntites: MemoizedSelector<\n  CheckoutState,\n  { [code: string]: CardType }\n> = createSelector(\n  getCardTypesState,\n  fromReducer.getCardTypesEntites\n);\n\nexport const getAllCardTypes: MemoizedSelector<\n  CheckoutState,\n  CardType[]\n> = createSelector(\n  getCardTypesEntites,\n  entites => {\n    return Object.keys(entites).map(code => entites[code]);\n  }\n);\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\n\nimport { CheckoutState, AddressVerificationState } from '../checkout-state';\nimport * as fromReducer from './../reducers/address-verification.reducer';\nimport * as fromFeature from './../reducers/index';\nimport { AddressValidation } from '../../../occ/occ-models/occ.models';\n\nexport const getAddressVerificationResultsState: MemoizedSelector<\n  CheckoutState,\n  AddressVerificationState\n> = createSelector(\n  fromFeature.getCheckoutState,\n  (state: CheckoutState) => state.addressVerification\n);\n\nexport const getAddressVerificationResults: MemoizedSelector<\n  CheckoutState,\n  string | AddressValidation\n> = createSelector(\n  getAddressVerificationResultsState,\n  fromReducer.getAddressVerificationResults\n);\n","export const GLOBAL_MESSAGE_FEATURE = 'global-message';\n\nexport interface StateWithGlobalMessage {\n  [GLOBAL_MESSAGE_FEATURE]: GlobalMessageState;\n}\n\nexport interface GlobalMessageEntities {\n  [messageType: string]: string[];\n}\n\nexport interface GlobalMessageState {\n  entities: GlobalMessageEntities;\n}\n","import { Action } from '@ngrx/store';\nimport {\n  GlobalMessageType,\n  GlobalMessage,\n} from '../../models/global-message.model';\n\nexport const ADD_MESSAGE = '[Global-message] Add a Message';\nexport const REMOVE_MESSAGE = '[Global-message] Remove a Message';\nexport const REMOVE_MESSAGES_BY_TYPE =\n  '[Global-message] Remove messages by type';\n\nexport class AddMessage implements Action {\n  readonly type = ADD_MESSAGE;\n  constructor(public payload: GlobalMessage) {}\n}\n\nexport class RemoveMessage implements Action {\n  readonly type = REMOVE_MESSAGE;\n  constructor(public payload: { type: GlobalMessageType; index: number }) {}\n}\n\nexport class RemoveMessagesByType implements Action {\n  readonly type = REMOVE_MESSAGES_BY_TYPE;\n  constructor(public payload: GlobalMessageType) {}\n}\n\nexport type GlobalMessageAction =\n  | AddMessage\n  | RemoveMessage\n  | RemoveMessagesByType;\n","import { MemoizedSelector, createFeatureSelector } from '@ngrx/store';\nimport {\n  GLOBAL_MESSAGE_FEATURE,\n  GlobalMessageState,\n  StateWithGlobalMessage,\n} from '../global-message-state';\n\nexport const getGlobalMessageState: MemoizedSelector<\n  StateWithGlobalMessage,\n  GlobalMessageState\n> = createFeatureSelector<GlobalMessageState>(GLOBAL_MESSAGE_FEATURE);\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\nimport { getGlobalMessageState } from './feature.selector';\nimport {\n  StateWithGlobalMessage,\n  GlobalMessageState,\n  GlobalMessageEntities,\n} from '../global-message-state';\n\nexport const getGlobalMessageEntities: MemoizedSelector<\n  StateWithGlobalMessage,\n  GlobalMessageEntities\n> = createSelector(\n  getGlobalMessageState,\n  (state: GlobalMessageState) => state.entities\n);\n","import { GlobalMessageAction } from '../actions/global-message.actions';\nimport {\n  GlobalMessage,\n  GlobalMessageType,\n} from '../../models/global-message.model';\nimport * as fromAction from '../actions/index';\nimport { GlobalMessageState } from '../global-message-state';\n\nexport const initialState: GlobalMessageState = {\n  entities: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: GlobalMessageAction\n): GlobalMessageState {\n  switch (action.type) {\n    case fromAction.ADD_MESSAGE: {\n      const message: GlobalMessage = action.payload;\n\n      if (state.entities[message.type] === undefined) {\n        return {\n          ...state,\n          entities: {\n            ...state.entities,\n            [message.type]: [message.text],\n          },\n        };\n      } else {\n        const msgs = state.entities[message.type];\n\n        if (msgs.indexOf(message.text) === -1) {\n          return {\n            ...state,\n            entities: {\n              ...state.entities,\n              [message.type]: [...msgs, message.text],\n            },\n          };\n        }\n      }\n\n      return state;\n    }\n\n    case fromAction.REMOVE_MESSAGE: {\n      const msgType: GlobalMessageType = action.payload.type;\n      const msgIndex: number = action.payload.index;\n      if (\n        Object.keys(state.entities).length === 0 ||\n        !state.entities[msgType]\n      ) {\n        return state;\n      }\n\n      const messages = [...state.entities[msgType]];\n      messages.splice(msgIndex, 1);\n\n      return {\n        ...state,\n        entities: {\n          ...state.entities,\n          [msgType]: messages,\n        },\n      };\n    }\n\n    case fromAction.REMOVE_MESSAGES_BY_TYPE: {\n      const entities = {\n        ...state.entities,\n        [action.payload]: [],\n      };\n      return {\n        ...state,\n        entities,\n      };\n    }\n  }\n\n  return state;\n}\n","import { InjectionToken, Provider } from '@angular/core';\nimport * as fromGlobalMessage from './global-message.reducer';\nimport { GlobalMessageState } from '../global-message-state';\nimport { ActionReducer } from '@ngrx/store';\n\nexport function getReducers(): ActionReducer<GlobalMessageState> {\n  return fromGlobalMessage.reducer;\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducer<GlobalMessageState>\n> = new InjectionToken<ActionReducer<GlobalMessageState>>(\n  'GlobalMessageReducers'\n);\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\n\nimport { reducerToken, reducerProvider } from './reducers/index';\nimport { GLOBAL_MESSAGE_FEATURE } from './global-message-state';\nimport { StateModule } from '../../state/state.module';\n\n@NgModule({\n  imports: [\n    StateModule,\n    StoreModule.forFeature(GLOBAL_MESSAGE_FEATURE, reducerToken),\n  ],\n  providers: [reducerProvider],\n})\nexport class GlobalMessageStoreModule {}\n","import { Injectable } from '@angular/core';\nimport { Store, select } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport {\n  GlobalMessage,\n  GlobalMessageType,\n} from '../models/global-message.model';\nimport {\n  GlobalMessageEntities,\n  StateWithGlobalMessage,\n  getGlobalMessageEntities,\n  AddMessage,\n  RemoveMessage,\n  RemoveMessagesByType,\n} from '../store/index';\n\n@Injectable()\nexport class GlobalMessageService {\n  constructor(private store: Store<StateWithGlobalMessage>) {}\n\n  /**\n   * Get all global messages\n   */\n  get(): Observable<GlobalMessageEntities> {\n    return this.store.pipe(\n      select(getGlobalMessageEntities),\n      filter(data => data !== undefined)\n    );\n  }\n\n  /**\n   * Add one message into store\n   * @param message: GlobalMessage object\n   */\n  add(message: GlobalMessage): void {\n    this.store.dispatch(new AddMessage(message));\n  }\n\n  /**\n   * Remove message(s) from store\n   * @param type: GlobalMessageType\n   * @param index:optional. Without it, messages will be removed by type; otherwise,\n   * message will be removed from list by index.\n   */\n  remove(type: GlobalMessageType, index?: number): void {\n    if (index !== undefined) {\n      this.store.dispatch(\n        new RemoveMessage({\n          type: type,\n          index: index,\n        })\n      );\n    } else {\n      this.store.dispatch(new RemoveMessagesByType(type));\n    }\n  }\n}\n","export enum GlobalMessageType {\n  MSG_TYPE_CONFIRMATION = '[GlobalMessage] Confirmation',\n  MSG_TYPE_ERROR = '[GlobalMessage] Error',\n  MSG_TYPE_INFO = '[GlobalMessage] Information',\n}\n\nexport interface GlobalMessage {\n  text: string;\n  type: GlobalMessageType;\n}\n","import { HttpErrorResponse, HttpRequest } from '@angular/common/http';\nimport { GlobalMessageService } from '../../facade/global-message.service';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport abstract class HttpErrorHandler {\n  constructor(protected globalMessageService: GlobalMessageService) {}\n\n  /**\n   * The http response status number which is handled by this handler.\n   * Implementations can set the response status number, i.e. 404, so that\n   * the handler can be found by the error interceptor.\n   */\n  abstract responseStatus: number;\n\n  /**\n   * Handles the error response for the respose status that is register for the handler\n   * @param { HttpRequest<any> } request : http request\n   * @param { HttpErrorResponse } errorResponse : Http error response\n   */\n  abstract handleError(\n    request: HttpRequest<any>,\n    errorResponse: HttpErrorResponse\n  ): void;\n}\n","export enum HttpResponseStatus {\n  UNKNOWN = -1,\n  BAD_REQUEST = 400,\n  FORBIDDEN = 403,\n  NOT_FOUND = 404,\n  CONFLICT = 409,\n  BAD_GATEWAY = 502,\n  GATEWAY_TIMEOUT = 504,\n}\n","import { Injectable, Inject } from '@angular/core';\nimport {\n  HttpErrorResponse,\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest,\n} from '@angular/common/http';\n\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport { HttpErrorHandler } from './handlers/http-error.handler';\nimport { HttpResponseStatus } from '../models/response-status.model';\n\n@Injectable()\nexport class HttpErrorInterceptor implements HttpInterceptor {\n  constructor(@Inject(HttpErrorHandler) private handlers: HttpErrorHandler[]) {\n    // We reverse the handlers to allow for custom handlers\n    // that replace standard handlers\n    this.handlers.reverse();\n  }\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    return next.handle(request).pipe(\n      catchError((response: any) => {\n        if (response instanceof HttpErrorResponse) {\n          this.handleErrorResponse(request, response);\n          return throwError(response);\n        }\n      })\n    );\n  }\n\n  protected handleErrorResponse(\n    request: HttpRequest<any>,\n    response: HttpErrorResponse\n  ) {\n    const handler = this.getResponseHandler(response);\n    if (handler) {\n      handler.handleError(request, response);\n    }\n  }\n\n  /**\n   * return the error handler that matches the `HttpResponseStatus` code.\n   * If no handler is available, the UNKNOWN handler is returned.\n   */\n  protected getResponseHandler(response: HttpErrorResponse): HttpErrorHandler {\n    const status = response.status;\n    let handler = this.handlers.find(h => h.responseStatus === status);\n    if (!handler) {\n      handler = this.handlers.find(\n        h => h.responseStatus === HttpResponseStatus.UNKNOWN\n      );\n    }\n    return handler;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UnknownErrorHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.UNKNOWN;\n\n  handleError() {\n    this.globalMessageService.add({\n      type: GlobalMessageType.MSG_TYPE_ERROR,\n      text: 'An unknown error occured',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BadGatewayHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.BAD_GATEWAY;\n\n  handleError() {\n    this.globalMessageService.add({\n      type: GlobalMessageType.MSG_TYPE_ERROR,\n      text: 'A server error occurred. Please try again later.',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpErrorResponse } from '@angular/common/http';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\nconst OAUTH_ENDPOINT = '/authorizationserver/oauth/token';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BadRequestHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.BAD_REQUEST;\n\n  handleError(request: HttpRequest<any>, response: HttpErrorResponse) {\n    if (\n      response.url.indexOf(OAUTH_ENDPOINT) !== -1 &&\n      response.error.error === 'invalid_grant'\n    ) {\n      if (request.body.get('grant_type') === 'password') {\n        this.globalMessageService.add({\n          type: GlobalMessageType.MSG_TYPE_ERROR,\n          text: this.getErrorMessage(response) + '. Please login again.',\n        });\n        this.globalMessageService.remove(\n          GlobalMessageType.MSG_TYPE_CONFIRMATION\n        );\n      }\n    } else {\n      // this is currently showing up in case we have a page not found. It should be a 404.\n      // see https://jira.hybris.com/browse/CMSX-8516\n      this.globalMessageService.add({\n        type: GlobalMessageType.MSG_TYPE_ERROR,\n        text: this.getErrorMessage(response),\n      });\n    }\n  }\n\n  protected getErrorMessage(resp: HttpErrorResponse) {\n    let errMsg = resp.message;\n    if (resp.error) {\n      if (resp.error.errors && resp.error.errors instanceof Array) {\n        errMsg = resp.error.errors[0].message;\n      } else if (resp.error.error_description) {\n        errMsg = resp.error.error_description;\n      }\n    }\n\n    return errMsg || 'An unknown error occured';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ConflictHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.CONFLICT;\n\n  handleError() {\n    this.globalMessageService.add({\n      type: GlobalMessageType.MSG_TYPE_ERROR,\n      text: 'Already exists',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ForbiddenHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.FORBIDDEN;\n\n  handleError() {\n    this.globalMessageService.add({\n      type: GlobalMessageType.MSG_TYPE_ERROR,\n      text: 'You are not authorized to perform this action.',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GatewayTimeoutHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.GATEWAY_TIMEOUT;\n\n  handleError() {\n    this.globalMessageService.add({\n      type: GlobalMessageType.MSG_TYPE_ERROR,\n      text: 'The server did not responded, please try again later.',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorHandler } from './http-error.handler';\nimport { GlobalMessageType } from '../../models/global-message.model';\nimport { HttpResponseStatus } from '../../models/response-status.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotFoundHandler extends HttpErrorHandler {\n  responseStatus = HttpResponseStatus.NOT_FOUND;\n\n  handleError() {\n    this.globalMessageService.add({\n      type: GlobalMessageType.MSG_TYPE_ERROR,\n      text: 'The requested resource could not be found',\n    });\n  }\n}\n","import { Provider } from '@angular/core';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { HttpErrorInterceptor } from './http-error.interceptor';\nimport { HttpErrorHandler } from './handlers/http-error.handler';\nimport { UnknownErrorHandler } from './handlers/unknown-error.handler';\nimport { BadGatewayHandler } from './handlers/bad-gateway.handler';\nimport { BadRequestHandler } from './handlers/bad-request.handler';\nimport { ConflictHandler } from './handlers/conflict.handler';\nimport { ForbiddenHandler } from './handlers/forbidden.handler';\nimport { GatewayTimeoutHandler } from './handlers/gateway-timeout.handler';\nimport { NotFoundHandler } from './handlers/not-found.handler';\n\nexport const errorHandlers: Provider[] = [\n  {\n    provide: HttpErrorHandler,\n    useExisting: UnknownErrorHandler,\n    multi: true,\n  },\n  {\n    provide: HttpErrorHandler,\n    useExisting: BadGatewayHandler,\n    multi: true,\n  },\n  {\n    provide: HttpErrorHandler,\n    useExisting: BadRequestHandler,\n    multi: true,\n  },\n  {\n    provide: HttpErrorHandler,\n    useExisting: ConflictHandler,\n    multi: true,\n  },\n  {\n    provide: HttpErrorHandler,\n    useExisting: ForbiddenHandler,\n    multi: true,\n  },\n  {\n    provide: HttpErrorHandler,\n    useExisting: GatewayTimeoutHandler,\n    multi: true,\n  },\n  {\n    provide: HttpErrorHandler,\n    useExisting: NotFoundHandler,\n    multi: true,\n  },\n];\n\nexport const httpErrorInterceptors: Provider[] = [\n  {\n    provide: HTTP_INTERCEPTORS,\n    useClass: HttpErrorInterceptor,\n    multi: true,\n  },\n];\n","import { NgModule, ModuleWithProviders } from '@angular/core';\n\nimport { GlobalMessageService } from './facade/global-message.service';\nimport {\n  httpErrorInterceptors,\n  errorHandlers,\n} from './http-interceptors/index';\nimport { GlobalMessageStoreModule } from './store/global-message-store.module';\n\n@NgModule({\n  imports: [GlobalMessageStoreModule],\n  providers: [GlobalMessageService],\n})\nexport class GlobalMessageModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: GlobalMessageModule,\n      providers: [...errorHandlers, ...httpErrorInterceptors],\n    };\n  }\n}\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport {\n  Address,\n  AddressList,\n  AddressValidation,\n  PaymentDetailsList,\n  User,\n} from '../../occ/occ-models/index';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport {\n  InterceptorUtil,\n  USE_CLIENT_TOKEN,\n} from '../../occ/utils/interceptor-util';\nimport { UserRegisterFormData } from '../model/user.model';\n\nconst USER_ENDPOINT = 'users/';\nconst ADDRESSES_VERIFICATION_ENDPOINT = '/addresses/verification';\nconst ADDRESSES_ENDPOINT = '/addresses';\nconst PAYMENT_DETAILS_ENDPOINT = '/paymentdetails';\nconst FORGOT_PASSWORD_ENDPOINT = '/forgottenpasswordtokens';\nconst RESET_PASSWORD_ENDPOINT = '/resetpassword';\nconst UPDATE_EMAIL_ENDPOINT = '/login';\nconst UPDATE_PASSWORD_ENDPOINT = '/password';\n\n@Injectable()\nexport class OccUserService {\n  // some extending from baseservice is not working here...\n  constructor(\n    protected http: HttpClient,\n    private occEndpoints: OccEndpointsService\n  ) {}\n\n  loadUser(userId: string): Observable<User> {\n    const url = this.getUserEndpoint() + userId;\n    return this.http\n      .get<User>(url)\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  updateUserDetails(username: string, user: User): Observable<{}> {\n    const url = this.getUserEndpoint() + username;\n    return this.http\n      .patch(url, user)\n      .pipe(catchError(error => throwError(error)));\n  }\n\n  verifyAddress(\n    userId: string,\n    address: Address\n  ): Observable<AddressValidation> {\n    const url =\n      this.getUserEndpoint() + userId + ADDRESSES_VERIFICATION_ENDPOINT;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .post<AddressValidation>(url, address, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  loadUserAddresses(userId: string): Observable<AddressList> {\n    const url = this.getUserEndpoint() + userId + ADDRESSES_ENDPOINT;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .get<AddressList>(url, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  addUserAddress(userId: string, address: Address): Observable<{}> {\n    const url = this.getUserEndpoint() + userId + ADDRESSES_ENDPOINT;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .post(url, address, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  updateUserAddress(\n    userId: string,\n    addressId: string,\n    address: Address\n  ): Observable<{}> {\n    const url =\n      this.getUserEndpoint() + userId + ADDRESSES_ENDPOINT + '/' + addressId;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .patch(url, address, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  deleteUserAddress(userId: string, addressId: string): Observable<{}> {\n    const url =\n      this.getUserEndpoint() + userId + ADDRESSES_ENDPOINT + '/' + addressId;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .delete(url, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  loadUserPaymentMethods(userId: string): Observable<PaymentDetailsList> {\n    const url = `${this.getUserEndpoint()}${userId}${PAYMENT_DETAILS_ENDPOINT}?saved=true`;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .get<PaymentDetailsList>(url, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  deleteUserPaymentMethod(\n    userId: string,\n    paymentMethodID: string\n  ): Observable<{}> {\n    const url = `${this.getUserEndpoint()}${userId}${PAYMENT_DETAILS_ENDPOINT}/${paymentMethodID}`;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .delete(url, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  setDefaultUserPaymentMethod(\n    userId: string,\n    paymentMethodID: string\n  ): Observable<{}> {\n    const url = `${this.getUserEndpoint()}${userId}${PAYMENT_DETAILS_ENDPOINT}/${paymentMethodID}`;\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    return this.http\n      .patch(\n        url,\n        // TODO: Remove billingAddress property\n        { billingAddress: { titleCode: 'mr' }, defaultPayment: true },\n        { headers }\n      )\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  registerUser(user: UserRegisterFormData): Observable<User> {\n    const url: string = this.getUserEndpoint();\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n    headers = InterceptorUtil.createHeader(USE_CLIENT_TOKEN, true, headers);\n\n    return this.http\n      .post<User>(url, user, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  requestForgotPasswordEmail(userEmailAddress: string): Observable<{}> {\n    const url = this.occEndpoints.getEndpoint(FORGOT_PASSWORD_ENDPOINT);\n    const httpParams: HttpParams = new HttpParams().set(\n      'userId',\n      userEmailAddress\n    );\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n    headers = InterceptorUtil.createHeader(USE_CLIENT_TOKEN, true, headers);\n    return this.http\n      .post(url, httpParams, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  resetPassword(token: string, newPassword: string): Observable<{}> {\n    const url = this.occEndpoints.getEndpoint(RESET_PASSWORD_ENDPOINT);\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n    headers = InterceptorUtil.createHeader(USE_CLIENT_TOKEN, true, headers);\n\n    return this.http\n      .post(url, { token, newPassword }, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  removeUser(userId: string): Observable<{}> {\n    const url = this.getUserEndpoint() + userId;\n    return this.http\n      .delete<User>(url)\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  updateEmail(\n    userId: string,\n    currentPassword: string,\n    newUserId: string\n  ): Observable<{}> {\n    const url = this.getUserEndpoint() + userId + UPDATE_EMAIL_ENDPOINT;\n    const httpParams: HttpParams = new HttpParams()\n      .set('password', currentPassword)\n      .set('newLogin', newUserId);\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n    return this.http\n      .put(url, httpParams, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n\n  protected getUserEndpoint(): string {\n    return this.occEndpoints.getEndpoint(USER_ENDPOINT);\n  }\n\n  updatePassword(\n    userId: string,\n    oldPassword: string,\n    newPassword: string\n  ): Observable<{}> {\n    const url = this.getUserEndpoint() + userId + UPDATE_PASSWORD_ENDPOINT;\n    const httpParams: HttpParams = new HttpParams()\n      .set('old', oldPassword)\n      .set('new', newPassword);\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n    return this.http\n      .put(url, httpParams, { headers })\n      .pipe(catchError((error: any) => throwError(error)));\n  }\n}\n","import { throwError, Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { catchError } from 'rxjs/operators';\nimport { Order, OrderHistoryList } from '../../occ/occ-models/index';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\n\n// To be changed to a more optimised params after ticket: C3PO-1076\nconst FULL_PARAMS = 'fields=FULL';\n\n@Injectable()\nexport class OccOrderService {\n  constructor(\n    protected http: HttpClient,\n    private occEndpoints: OccEndpointsService\n  ) {}\n\n  protected getOrderEndpoint(userId: string): string {\n    const orderEndpoint = 'users/' + userId + '/orders';\n    return this.occEndpoints.getEndpoint(orderEndpoint);\n  }\n\n  public placeOrder(userId: string, cartId: string): Observable<Order> {\n    const url = this.getOrderEndpoint(userId);\n    const params = new HttpParams({\n      fromString: 'cartId=' + cartId + '&' + FULL_PARAMS,\n    });\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    return this.http\n      .post<Order>(url, {}, { headers, params })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  public getOrders(\n    userId: string,\n    pageSize?: number,\n    currentPage?: number,\n    sort?: string\n  ): Observable<OrderHistoryList> {\n    const url = this.getOrderEndpoint(userId);\n    let params = new HttpParams();\n    if (pageSize) {\n      params = params.set('pageSize', pageSize.toString());\n    }\n    if (currentPage) {\n      params = params.set('currentPage', currentPage.toString());\n    }\n    if (sort) {\n      params = params.set('sort', sort);\n    }\n\n    return this.http\n      .get<OrderHistoryList>(url, { params: params })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  public getOrder(userId: string, orderCode: string): Observable<Order> {\n    const url = this.getOrderEndpoint(userId);\n\n    const orderUrl = url + '/' + orderCode;\n\n    const params = new HttpParams({\n      fromString: FULL_PARAMS,\n    });\n\n    return this.http\n      .get<Order>(orderUrl, {\n        params: params,\n      })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { OccModule } from '../../occ/occ.module';\nimport { OccUserService } from './user.service';\nimport { OccOrderService } from './order.service';\n\n@NgModule({\n  imports: [CommonModule, HttpClientModule, OccModule],\n  providers: [OccUserService, OccOrderService],\n})\nexport class UserOccModule {}\n","import { Action } from '@ngrx/store';\n\nexport const LOAD_BILLING_COUNTRIES = '[User] Load Billing Countries';\nexport const LOAD_BILLING_COUNTRIES_FAIL = '[User] Load Billing Countries Fail';\nexport const LOAD_BILLING_COUNTRIES_SUCCESS =\n  '[User] Load Billing Countries Success';\n\nexport class LoadBillingCountries implements Action {\n  readonly type = LOAD_BILLING_COUNTRIES;\n  constructor() {}\n}\n\nexport class LoadBillingCountriesFail implements Action {\n  readonly type = LOAD_BILLING_COUNTRIES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadBillingCountriesSuccess implements Action {\n  readonly type = LOAD_BILLING_COUNTRIES_SUCCESS;\n  constructor(public payload: any) {}\n}\n\nexport type BillingCountriesAction =\n  | LoadBillingCountries\n  | LoadBillingCountriesFail\n  | LoadBillingCountriesSuccess;\n","import { Action } from '@ngrx/store';\n\nimport { Country } from '../../../occ/occ-models/index';\n\nexport const LOAD_DELIVERY_COUNTRIES = '[User] Load Delivery Countries';\nexport const LOAD_DELIVERY_COUNTRIES_FAIL =\n  '[User] Load Delivery Countries Fail';\nexport const LOAD_DELIVERY_COUNTRIES_SUCCESS =\n  '[User] Load Delivery Countries Success';\n\nexport class LoadDeliveryCountries implements Action {\n  readonly type = LOAD_DELIVERY_COUNTRIES;\n  constructor() {}\n}\n\nexport class LoadDeliveryCountriesFail implements Action {\n  readonly type = LOAD_DELIVERY_COUNTRIES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadDeliveryCountriesSuccess implements Action {\n  readonly type = LOAD_DELIVERY_COUNTRIES_SUCCESS;\n  constructor(public payload: Country[]) {}\n}\n\nexport type DeliveryCountriesAction =\n  | LoadDeliveryCountries\n  | LoadDeliveryCountriesFail\n  | LoadDeliveryCountriesSuccess;\n","import { Action } from '@ngrx/store';\n\nexport const FORGOT_PASSWORD_EMAIL_REQUEST =\n  '[User] Forgot Password Email Request';\nexport const FORGOT_PASSWORD_EMAIL_REQUEST_SUCCESS =\n  '[User] Forgot Password Email Request Success';\nexport const FORGOT_PASSWORD_EMAIL_REQUEST_FAIL =\n  '[User] Forgot Password Email Request Fail';\n\nexport class ForgotPasswordEmailRequest implements Action {\n  readonly type = FORGOT_PASSWORD_EMAIL_REQUEST;\n  constructor(public payload: string) {}\n}\n\nexport class ForgotPasswordEmailRequestFail implements Action {\n  readonly type = FORGOT_PASSWORD_EMAIL_REQUEST_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class ForgotPasswordEmailRequestSuccess implements Action {\n  readonly type = FORGOT_PASSWORD_EMAIL_REQUEST_SUCCESS;\n}\n\nexport type ForgotPasswordEmailRequestAction =\n  | ForgotPasswordEmailRequest\n  | ForgotPasswordEmailRequestFail\n  | ForgotPasswordEmailRequestSuccess;\n","import { Action } from '@ngrx/store';\nimport { Order } from '../../../occ/occ-models/index';\n\nexport const LOAD_ORDER_DETAILS = '[User] Load Order Details';\nexport const LOAD_ORDER_DETAILS_FAIL = '[User] Load Order Details Fail';\nexport const LOAD_ORDER_DETAILS_SUCCESS = '[User] Load Order Details Success';\nexport const CLEAR_ORDER_DETAILS = '[User] Clear Order Details';\n\nexport class LoadOrderDetails implements Action {\n  readonly type = LOAD_ORDER_DETAILS;\n  constructor(\n    public payload: {\n      userId: string;\n      orderCode: string;\n    }\n  ) {}\n}\n\nexport class LoadOrderDetailsFail implements Action {\n  readonly type = LOAD_ORDER_DETAILS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadOrderDetailsSuccess implements Action {\n  readonly type = LOAD_ORDER_DETAILS_SUCCESS;\n  constructor(public payload: Order) {}\n}\n\nexport class ClearOrderDetails implements Action {\n  readonly type = CLEAR_ORDER_DETAILS;\n}\n\nexport type OrderDetailsAction =\n  | LoadOrderDetails\n  | LoadOrderDetailsFail\n  | LoadOrderDetailsSuccess\n  | ClearOrderDetails;\n","import {\n  Address,\n  Country,\n  Order,\n  OrderHistoryList,\n  PaymentDetails,\n  Region,\n  Title,\n  User,\n} from '../../occ/occ-models/index';\nimport { LoaderState } from '../../state';\n\nexport const USER_FEATURE = 'user';\nexport const UPDATE_EMAIL_PROCESS_ID = 'updateEmail';\nexport const UPDATE_PASSWORD_PROCESS_ID = 'updatePassword';\nexport const UPDATE_USER_DETAILS_PROCESS_ID = 'updateUserDetails';\nexport const REMOVE_USER_PROCESS_ID = 'removeUser';\n\nexport const USER_PAYMENT_METHODS = '[User] User Payment Methods';\nexport const USER_ORDERS = '[User] User Orders';\nexport const USER_ADDRESSES = '[User] User Addresses';\n\nexport interface StateWithUser {\n  [USER_FEATURE]: UserState;\n}\n\nexport interface UserState {\n  account: UserDetailsState;\n  addresses: LoaderState<Address[]>;\n  billingCountries: BillingCountriesState;\n  countries: DeliveryCountriesState;\n  payments: LoaderState<PaymentDetails[]>;\n  orders: LoaderState<OrderHistoryList>;\n  order: OrderDetailsState;\n  titles: TitlesState;\n  regions: RegionsState;\n  resetPassword: boolean;\n}\n\nexport interface OrderDetailsState {\n  order: Order;\n}\n\nexport interface RegionsState {\n  entities: Region[];\n}\n\nexport interface BillingCountryEntities {\n  [key: string]: Country;\n}\n\nexport interface BillingCountriesState {\n  entities: BillingCountryEntities;\n}\n\nexport interface DeliveryCountryEntities {\n  [key: string]: Country;\n}\n\nexport interface DeliveryCountriesState {\n  entities: DeliveryCountryEntities;\n}\n\nexport interface TitleEntities {\n  [key: string]: Title;\n}\n\nexport interface TitlesState {\n  entities: TitleEntities;\n}\n\nexport interface UserDetailsState {\n  details: User;\n}\n","import { USER_PAYMENT_METHODS } from '../user-state';\nimport { PaymentDetails } from '../../../occ/occ-models/index';\nimport {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\n\nexport const LOAD_USER_PAYMENT_METHODS = '[User] Load User Payment Methods';\nexport const LOAD_USER_PAYMENT_METHODS_FAIL =\n  '[User] Load User Payment Methods Fail';\nexport const LOAD_USER_PAYMENT_METHODS_SUCCESS =\n  '[User] Load User Payment Methods Success';\n\nexport const SET_DEFAULT_USER_PAYMENT_METHOD =\n  '[User] Set Default User Payment Method';\nexport const SET_DEFAULT_USER_PAYMENT_METHOD_FAIL =\n  '[User] Set Default User Payment Method Fail';\nexport const SET_DEFAULT_USER_PAYMENT_METHOD_SUCCESS =\n  '[User] Set Default User Payment Method Success';\n\nexport const DELETE_USER_PAYMENT_METHOD = '[User] Delete User Payment Method';\nexport const DELETE_USER_PAYMENT_METHOD_FAIL =\n  '[User] Delete User Payment Method Fail';\nexport const DELETE_USER_PAYMENT_METHOD_SUCCESS =\n  '[User] Delete User  Payment Method Success';\n\nexport class LoadUserPaymentMethods extends LoaderLoadAction {\n  readonly type = LOAD_USER_PAYMENT_METHODS;\n  constructor(public payload: string) {\n    super(USER_PAYMENT_METHODS);\n  }\n}\n\nexport class LoadUserPaymentMethodsFail extends LoaderFailAction {\n  readonly type = LOAD_USER_PAYMENT_METHODS_FAIL;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS, payload);\n  }\n}\n\nexport class LoadUserPaymentMethodsSuccess extends LoaderSuccessAction {\n  readonly type = LOAD_USER_PAYMENT_METHODS_SUCCESS;\n  constructor(public payload: PaymentDetails[]) {\n    super(USER_PAYMENT_METHODS);\n  }\n}\n\nexport class SetDefaultUserPaymentMethod extends LoaderLoadAction {\n  readonly type = SET_DEFAULT_USER_PAYMENT_METHOD;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS);\n  }\n}\n\nexport class SetDefaultUserPaymentMethodFail extends LoaderFailAction {\n  readonly type = SET_DEFAULT_USER_PAYMENT_METHOD_FAIL;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS, payload);\n  }\n}\n\nexport class SetDefaultUserPaymentMethodSuccess extends LoaderSuccessAction {\n  readonly type = SET_DEFAULT_USER_PAYMENT_METHOD_SUCCESS;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS);\n  }\n}\n\nexport class DeleteUserPaymentMethod extends LoaderLoadAction {\n  readonly type = DELETE_USER_PAYMENT_METHOD;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS);\n  }\n}\n\nexport class DeleteUserPaymentMethodFail extends LoaderFailAction {\n  readonly type = DELETE_USER_PAYMENT_METHOD_FAIL;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS, payload);\n  }\n}\n\nexport class DeleteUserPaymentMethodSuccess extends LoaderSuccessAction {\n  readonly type = DELETE_USER_PAYMENT_METHOD_SUCCESS;\n  constructor(public payload: any) {\n    super(USER_PAYMENT_METHODS);\n  }\n}\n\n// action types\nexport type UserPaymentMethodsAction =\n  | LoadUserPaymentMethods\n  | LoadUserPaymentMethodsFail\n  | LoadUserPaymentMethodsSuccess\n  | SetDefaultUserPaymentMethod\n  | SetDefaultUserPaymentMethodFail\n  | SetDefaultUserPaymentMethodSuccess\n  | DeleteUserPaymentMethod\n  | DeleteUserPaymentMethodFail\n  | DeleteUserPaymentMethodSuccess;\n","import { Action } from '@ngrx/store';\n\nimport { Region } from '../../../occ/occ-models/index';\n\nexport const LOAD_REGIONS = '[User] Load Regions';\nexport const LOAD_REGIONS_SUCCESS = '[User] Load Regions Success';\nexport const LOAD_REGIONS_FAIL = '[User] Load Regions Fail';\n\nexport class LoadRegions implements Action {\n  readonly type = LOAD_REGIONS;\n  constructor(public payload: string) {}\n}\n\nexport class LoadRegionsFail implements Action {\n  readonly type = LOAD_REGIONS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadRegionsSuccess implements Action {\n  readonly type = LOAD_REGIONS_SUCCESS;\n  constructor(public payload: Region[]) {}\n}\n\nexport type RegionsAction = LoadRegions | LoadRegionsFail | LoadRegionsSuccess;\n","import { Action } from '@ngrx/store';\n\nexport const RESET_PASSWORD = '[User] Reset Password';\nexport const RESET_PASSWORD_SUCCESS = '[User] Reset Password Success';\nexport const RESET_PASSWORD_FAIL = '[User] Reset Password Fail';\n\nexport class ResetPassword implements Action {\n  readonly type = RESET_PASSWORD;\n  constructor(public payload: { token: string; password: string }) {}\n}\n\nexport class ResetPasswordFail implements Action {\n  readonly type = RESET_PASSWORD_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class ResetPasswordSuccess implements Action {\n  readonly type = RESET_PASSWORD_SUCCESS;\n}\n\nexport type ResetPasswordAction =\n  | ResetPassword\n  | ResetPasswordFail\n  | ResetPasswordSuccess;\n","import { Action } from '@ngrx/store';\n\nimport { Title } from '../../../occ/occ-models';\n\nexport const LOAD_TITLES = '[User] Load Tiltes';\nexport const LOAD_TITLES_FAIL = '[User] Load Titles Fail';\nexport const LOAD_TITLES_SUCCESS = '[User] Load Titles Success';\n\nexport class LoadTitles implements Action {\n  readonly type = LOAD_TITLES;\n  constructor() {}\n}\n\nexport class LoadTitlesFail implements Action {\n  readonly type = LOAD_TITLES_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadTitlesSuccess implements Action {\n  readonly type = LOAD_TITLES_SUCCESS;\n  constructor(public payload: Title[]) {}\n}\n\nexport type TitlesAction = LoadTitles | LoadTitlesFail | LoadTitlesSuccess;\n","import { EntityLoaderState } from '../../state/utils/entity-loader/entity-loader-state';\n\nexport const PROCESS_FEATURE = 'process';\n\nexport interface StateWithProcess<T> {\n  [PROCESS_FEATURE]: EntityLoaderState<T>;\n}\n","import { PROCESS_FEATURE } from '../../../process/store/process-state';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntityResetAction,\n  EntitySuccessAction,\n} from '../../../state';\nimport { UPDATE_EMAIL_PROCESS_ID } from '../user-state';\n\nexport const UPDATE_EMAIL = '[User] Update Email';\nexport const UPDATE_EMAIL_ERROR = '[User] Update Email Error';\nexport const UPDATE_EMAIL_SUCCESS = '[User] Update Email Success';\nexport const RESET_EMAIL = '[User] Reset Email';\n\nexport class UpdateEmailAction extends EntityLoadAction {\n  readonly type = UPDATE_EMAIL;\n  constructor(\n    public payload: {\n      uid: string;\n      password: string;\n      newUid: string;\n    }\n  ) {\n    super(PROCESS_FEATURE, UPDATE_EMAIL_PROCESS_ID);\n  }\n}\n\nexport class UpdateEmailSuccessAction extends EntitySuccessAction {\n  readonly type = UPDATE_EMAIL_SUCCESS;\n  constructor(public newUid: string) {\n    super(PROCESS_FEATURE, UPDATE_EMAIL_PROCESS_ID);\n  }\n}\n\nexport class UpdateEmailErrorAction extends EntityFailAction {\n  readonly type = UPDATE_EMAIL_ERROR;\n  constructor(public payload: any) {\n    super(PROCESS_FEATURE, UPDATE_EMAIL_PROCESS_ID, payload);\n  }\n}\n\nexport class ResetUpdateEmailAction extends EntityResetAction {\n  readonly type = RESET_EMAIL;\n  constructor() {\n    super(PROCESS_FEATURE, UPDATE_EMAIL_PROCESS_ID);\n  }\n}\n\nexport type EmailActions =\n  | UpdateEmailAction\n  | UpdateEmailSuccessAction\n  | UpdateEmailErrorAction\n  | ResetUpdateEmailAction;\n","import { PROCESS_FEATURE } from '../../../process/store/process-state';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntityResetAction,\n  EntitySuccessAction,\n} from '../../../state';\nimport { UPDATE_PASSWORD_PROCESS_ID } from '../user-state';\n\nexport const UPDATE_PASSWORD = '[User] Update Password';\nexport const UPDATE_PASSWORD_FAIL = '[User] Update Password Fail';\nexport const UPDATE_PASSWORD_SUCCESS = '[User] Update Password Success';\nexport const UPDATE_PASSWORD_RESET =\n  '[User] Reset Update Password Process State';\n\nexport class UpdatePassword extends EntityLoadAction {\n  readonly type = UPDATE_PASSWORD;\n  constructor(\n    public payload: { userId: string; oldPassword: string; newPassword: string }\n  ) {\n    super(PROCESS_FEATURE, UPDATE_PASSWORD_PROCESS_ID);\n  }\n}\n\nexport class UpdatePasswordFail extends EntityFailAction {\n  readonly type = UPDATE_PASSWORD_FAIL;\n  constructor(public payload: any) {\n    super(PROCESS_FEATURE, UPDATE_PASSWORD_PROCESS_ID, payload);\n  }\n}\n\nexport class UpdatePasswordSuccess extends EntitySuccessAction {\n  readonly type = UPDATE_PASSWORD_SUCCESS;\n  constructor() {\n    super(PROCESS_FEATURE, UPDATE_PASSWORD_PROCESS_ID);\n  }\n}\n\nexport class UpdatePasswordReset extends EntityResetAction {\n  readonly type = UPDATE_PASSWORD_RESET;\n  constructor() {\n    super(PROCESS_FEATURE, UPDATE_PASSWORD_PROCESS_ID);\n  }\n}\n\n// action types\nexport type UpdatePasswordAction =\n  | UpdatePassword\n  | UpdatePasswordFail\n  | UpdatePasswordSuccess\n  | UpdatePasswordReset;\n","import { USER_ADDRESSES } from '../user-state';\nimport { Address } from '../../../occ/occ-models/index';\nimport {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\n\nexport const LOAD_USER_ADDRESSES = '[User] Load User Addresses';\nexport const LOAD_USER_ADDRESSES_FAIL = '[User] Load User Addresses Fail';\nexport const LOAD_USER_ADDRESSES_SUCCESS = '[User] Load User Addresses Success';\n\nexport const ADD_USER_ADDRESS = '[User] Add User Address';\nexport const ADD_USER_ADDRESS_FAIL = '[User] Add User Address Fail';\nexport const ADD_USER_ADDRESS_SUCCESS = '[User] Add User Address Success';\n\nexport const UPDATE_USER_ADDRESS = '[User] Update User Address';\nexport const UPDATE_USER_ADDRESS_FAIL = '[User] Update User Address Fail';\nexport const UPDATE_USER_ADDRESS_SUCCESS = '[User] Update User Address Success';\n\nexport const DELETE_USER_ADDRESS = '[User] Delete User Address';\nexport const DELETE_USER_ADDRESS_FAIL = '[User] Delete User Address Fail';\nexport const DELETE_USER_ADDRESS_SUCCESS = '[User] Delete User Address Success';\n\nexport class LoadUserAddresses extends LoaderLoadAction {\n  readonly type = LOAD_USER_ADDRESSES;\n  constructor(public payload: string) {\n    super(USER_ADDRESSES);\n  }\n}\n\nexport class LoadUserAddressesFail extends LoaderFailAction {\n  readonly type = LOAD_USER_ADDRESSES_FAIL;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES, payload);\n  }\n}\n\nexport class LoadUserAddressesSuccess extends LoaderSuccessAction {\n  readonly type = LOAD_USER_ADDRESSES_SUCCESS;\n  constructor(public payload: Address[]) {\n    super(USER_ADDRESSES);\n  }\n}\n\n// Adding address actions\nexport class AddUserAddress extends LoaderLoadAction {\n  readonly type = ADD_USER_ADDRESS;\n  constructor(public payload: { userId: string; address: Address }) {\n    super(USER_ADDRESSES);\n  }\n}\n\nexport class AddUserAddressFail extends LoaderFailAction {\n  readonly type = ADD_USER_ADDRESS_FAIL;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES, payload);\n  }\n}\n\nexport class AddUserAddressSuccess extends LoaderSuccessAction {\n  readonly type = ADD_USER_ADDRESS_SUCCESS;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES);\n  }\n}\n\n// Updating address actions\nexport class UpdateUserAddress extends LoaderLoadAction {\n  readonly type = UPDATE_USER_ADDRESS;\n  constructor(\n    public payload: { userId: string; addressId: string; address: Address }\n  ) {\n    super(USER_ADDRESSES);\n  }\n}\n\nexport class UpdateUserAddressFail extends LoaderFailAction {\n  readonly type = UPDATE_USER_ADDRESS_FAIL;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES, payload);\n  }\n}\n\nexport class UpdateUserAddressSuccess extends LoaderSuccessAction {\n  readonly type = UPDATE_USER_ADDRESS_SUCCESS;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES);\n  }\n}\n\n// Deleting address actions\nexport class DeleteUserAddress extends LoaderLoadAction {\n  readonly type = DELETE_USER_ADDRESS;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES);\n  }\n}\n\nexport class DeleteUserAddressFail extends LoaderFailAction {\n  readonly type = DELETE_USER_ADDRESS_FAIL;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES, payload);\n  }\n}\n\nexport class DeleteUserAddressSuccess extends LoaderSuccessAction {\n  readonly type = DELETE_USER_ADDRESS_SUCCESS;\n  constructor(public payload: any) {\n    super(USER_ADDRESSES);\n  }\n}\n\n// action types\nexport type UserAddressesAction =\n  | LoadUserAddresses\n  | LoadUserAddressesFail\n  | LoadUserAddressesSuccess\n  | AddUserAddress\n  | AddUserAddressFail\n  | AddUserAddressSuccess\n  | UpdateUserAddress\n  | UpdateUserAddressFail\n  | UpdateUserAddressSuccess\n  | DeleteUserAddress\n  | DeleteUserAddressFail\n  | DeleteUserAddressSuccess;\n","import { Action } from '@ngrx/store';\nimport { User } from '../../../occ/occ-models/index';\nimport { PROCESS_FEATURE } from '../../../process/store/process-state';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntityResetAction,\n  EntitySuccessAction,\n} from '../../../state';\nimport { UPDATE_USER_DETAILS_PROCESS_ID } from '../user-state';\n\nexport const LOAD_USER_DETAILS = '[User] Load User Details';\nexport const LOAD_USER_DETAILS_FAIL = '[User] Load User Details Fail';\nexport const LOAD_USER_DETAILS_SUCCESS = '[User] Load User Details Success';\n\nexport const UPDATE_USER_DETAILS = '[User] Update User Details';\nexport const UPDATE_USER_DETAILS_FAIL = '[User] Update User Details Fail';\nexport const UPDATE_USER_DETAILS_SUCCESS = '[User] Update User Details Success';\nexport const RESET_USER_DETAILS = '[User] Reset User Details';\n\nexport class LoadUserDetails implements Action {\n  readonly type = LOAD_USER_DETAILS;\n  constructor(public payload: string) {}\n}\n\nexport class LoadUserDetailsFail implements Action {\n  readonly type = LOAD_USER_DETAILS_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class LoadUserDetailsSuccess implements Action {\n  readonly type = LOAD_USER_DETAILS_SUCCESS;\n  constructor(public payload: User) {}\n}\n\nexport class UpdateUserDetails extends EntityLoadAction {\n  readonly type = UPDATE_USER_DETAILS;\n  constructor(public payload: { username: string; userDetails: User }) {\n    super(PROCESS_FEATURE, UPDATE_USER_DETAILS_PROCESS_ID);\n  }\n}\n\nexport class UpdateUserDetailsFail extends EntityFailAction {\n  readonly type = UPDATE_USER_DETAILS_FAIL;\n  constructor(public payload: any) {\n    super(PROCESS_FEATURE, UPDATE_USER_DETAILS_PROCESS_ID, payload);\n  }\n}\n\nexport class UpdateUserDetailsSuccess extends EntitySuccessAction {\n  readonly type = UPDATE_USER_DETAILS_SUCCESS;\n  constructor(public userUpdates: User) {\n    super(PROCESS_FEATURE, UPDATE_USER_DETAILS_PROCESS_ID);\n  }\n}\n\nexport class ResetUpdateUserDetails extends EntityResetAction {\n  readonly type = RESET_USER_DETAILS;\n  constructor() {\n    super(PROCESS_FEATURE, UPDATE_USER_DETAILS_PROCESS_ID);\n  }\n}\n\n// action types\nexport type UserDetailsAction =\n  | LoadUserDetails\n  | LoadUserDetailsFail\n  | LoadUserDetailsSuccess\n  | UpdateUserDetails\n  | UpdateUserDetailsFail\n  | UpdateUserDetailsSuccess\n  | ResetUpdateUserDetails;\n","import { USER_ORDERS } from '../user-state';\nimport { OrderHistoryList } from '../../../occ/occ-models/index';\nimport {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\n\nexport const LOAD_USER_ORDERS = '[User] Load User Orders';\nexport const LOAD_USER_ORDERS_FAIL = '[User] Load User Orders Fail';\nexport const LOAD_USER_ORDERS_SUCCESS = '[User] Load User Orders Success';\nexport const CLEAR_USER_ORDERS = '[User] Clear User Orders';\n\nexport class LoadUserOrders extends LoaderLoadAction {\n  readonly type = LOAD_USER_ORDERS;\n  constructor(\n    public payload: {\n      userId: string;\n      pageSize: number;\n      currentPage?: number;\n      sort?: string;\n    }\n  ) {\n    super(USER_ORDERS);\n  }\n}\n\nexport class LoadUserOrdersFail extends LoaderFailAction {\n  readonly type = LOAD_USER_ORDERS_FAIL;\n  constructor(public payload: any) {\n    super(USER_ORDERS, payload);\n  }\n}\n\nexport class LoadUserOrdersSuccess extends LoaderSuccessAction {\n  readonly type = LOAD_USER_ORDERS_SUCCESS;\n  constructor(public payload: OrderHistoryList) {\n    super(USER_ORDERS);\n  }\n}\n\nexport class ClearUserOrders {\n  readonly type = CLEAR_USER_ORDERS;\n  constructor() {}\n}\n\nexport type UserOrdersAction =\n  | LoadUserOrders\n  | LoadUserOrdersFail\n  | LoadUserOrdersSuccess\n  | ClearUserOrders;\n","import { Action } from '@ngrx/store';\n\nimport { UserRegisterFormData } from '../../model/user.model';\nimport { PROCESS_FEATURE } from '../../../process/store/process-state';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntityResetAction,\n  EntitySuccessAction,\n} from '../../../state';\nimport { REMOVE_USER_PROCESS_ID } from '../user-state';\n\nexport const REGISTER_USER = '[User] Register User';\nexport const REGISTER_USER_FAIL = '[User] Register User Fail';\nexport const REGISTER_USER_SUCCESS = '[User] Register User Success';\n\nexport const REMOVE_USER = '[User] Remove User';\nexport const REMOVE_USER_FAIL = '[User] Remove User Fail';\nexport const REMOVE_USER_SUCCESS = '[User] Remove User Success';\nexport const REMOVE_USER_RESET = '[User] Reset Remove User Process State';\n\nexport class RegisterUser implements Action {\n  readonly type = REGISTER_USER;\n  constructor(public payload: UserRegisterFormData) {}\n}\n\nexport class RegisterUserFail implements Action {\n  readonly type = REGISTER_USER_FAIL;\n  constructor(public payload: any) {}\n}\n\nexport class RegisterUserSuccess implements Action {\n  readonly type = REGISTER_USER_SUCCESS;\n  constructor() {}\n}\n\nexport class RemoveUser extends EntityLoadAction {\n  readonly type = REMOVE_USER;\n  constructor(public payload: string) {\n    super(PROCESS_FEATURE, REMOVE_USER_PROCESS_ID);\n  }\n}\n\nexport class RemoveUserFail extends EntityFailAction {\n  readonly type = REMOVE_USER_FAIL;\n  constructor(public payload: any) {\n    super(PROCESS_FEATURE, REMOVE_USER_PROCESS_ID, payload);\n  }\n}\n\nexport class RemoveUserSuccess extends EntitySuccessAction {\n  readonly type = REMOVE_USER_SUCCESS;\n  constructor() {\n    super(PROCESS_FEATURE, REMOVE_USER_PROCESS_ID);\n  }\n}\n\nexport class RemoveUserReset extends EntityResetAction {\n  readonly type = REMOVE_USER_RESET;\n  constructor() {\n    super(PROCESS_FEATURE, REMOVE_USER_PROCESS_ID);\n  }\n}\n\n// action types\nexport type UserRegisterOrRemoveAction =\n  | RegisterUser\n  | RegisterUserFail\n  | RegisterUserSuccess\n  | RemoveUser\n  | RemoveUserFail\n  | RemoveUserSuccess\n  | RemoveUserReset;\n","import { Action } from '@ngrx/store';\n\nexport const CLEAR_MISCS_DATA = '[User] Clear User Misc Data';\n\nexport class ClearMiscsData implements Action {\n  readonly type = CLEAR_MISCS_DATA;\n}\n\nexport * from './billing-countries.action';\nexport * from './delivery-countries.action';\nexport * from './forgot-password.action';\nexport * from './order-details.action';\nexport * from './payment-methods.action';\nexport * from './regions.action';\nexport * from './reset-password.action';\nexport * from './titles.action';\nexport * from './update-email.action';\nexport * from './update-password.action';\nexport * from './user-addresses.action';\nexport * from './user-details.action';\nexport * from './user-orders.action';\nexport * from './user-register.action';\n","import { BillingCountriesState } from '../user-state';\nimport * as fromAction from '../actions/billing-countries.action';\nimport { CLEAR_MISCS_DATA, ClearMiscsData } from '../actions/index';\n\nexport const initialState: BillingCountriesState = {\n  entities: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.BillingCountriesAction | ClearMiscsData\n): BillingCountriesState {\n  switch (action.type) {\n    case fromAction.LOAD_BILLING_COUNTRIES_SUCCESS: {\n      const billingCountries = action.payload;\n      const entities = billingCountries.reduce(\n        (countryEntities: { [isocode: string]: any }, name: any) => {\n          return {\n            ...countryEntities,\n            [name.isocode]: name,\n          };\n        },\n        {\n          ...state.entities,\n        }\n      );\n\n      return {\n        ...state,\n        entities,\n      };\n    }\n\n    case CLEAR_MISCS_DATA: {\n      return initialState;\n    }\n  }\n\n  return state;\n}\n","import { DeliveryCountriesState } from '../user-state';\nimport * as fromAction from '../actions/index';\nimport { Country } from '../../../occ/occ-models/index';\n\nexport const initialState: DeliveryCountriesState = {\n  entities: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.DeliveryCountriesAction | fromAction.ClearMiscsData\n): DeliveryCountriesState {\n  switch (action.type) {\n    case fromAction.LOAD_DELIVERY_COUNTRIES_SUCCESS: {\n      const deliveryCountries = action.payload;\n      const entities = deliveryCountries.reduce(\n        (countryEntities: { [isocode: string]: Country }, country: Country) => {\n          return {\n            ...countryEntities,\n            [country.isocode]: country,\n          };\n        },\n        {\n          ...state.entities,\n        }\n      );\n\n      return {\n        ...state,\n        entities,\n      };\n    }\n\n    case fromAction.CLEAR_MISCS_DATA: {\n      return initialState;\n    }\n  }\n\n  return state;\n}\n","import * as fromOrderDetailsAction from '../actions/order-details.action';\nimport { OrderDetailsState } from '../user-state';\nimport { Order } from '../../../occ/occ-models/index';\n\nexport const initialState: OrderDetailsState = {\n  order: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromOrderDetailsAction.OrderDetailsAction\n): OrderDetailsState {\n  switch (action.type) {\n    case fromOrderDetailsAction.LOAD_ORDER_DETAILS_SUCCESS: {\n      const order: Order = action.payload;\n\n      return {\n        ...state,\n        order,\n      };\n    }\n    case fromOrderDetailsAction.CLEAR_ORDER_DETAILS: {\n      return initialState;\n    }\n  }\n  return state;\n}\n","import * as fromPaymentMethodsAction from '../actions/payment-methods.action';\nimport { PaymentDetails } from '../../../occ/occ-models/index';\n\nexport const initialState: PaymentDetails[] = [];\n\nexport function reducer(\n  state = initialState,\n  action: fromPaymentMethodsAction.UserPaymentMethodsAction\n): PaymentDetails[] {\n  switch (action.type) {\n    case fromPaymentMethodsAction.LOAD_USER_PAYMENT_METHODS_SUCCESS: {\n      return action.payload ? action.payload : initialState;\n    }\n\n    case fromPaymentMethodsAction.LOAD_USER_PAYMENT_METHODS_FAIL: {\n      return initialState;\n    }\n  }\n  return state;\n}\n","import { RegionsState } from '../user-state';\nimport * as fromAction from '../actions/index';\nimport { Region } from '../../../occ/occ-models';\n\nexport const initialState: RegionsState = {\n  entities: [],\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.RegionsAction | fromAction.ClearMiscsData\n): RegionsState {\n  switch (action.type) {\n    case fromAction.LOAD_REGIONS_SUCCESS: {\n      const entities: Region[] = action.payload;\n      if (entities) {\n        return {\n          ...state,\n          entities,\n        };\n      }\n      return initialState;\n    }\n\n    case fromAction.LOAD_REGIONS: {\n      return {\n        ...state,\n      };\n    }\n\n    case fromAction.CLEAR_MISCS_DATA: {\n      return {\n        ...initialState,\n      };\n    }\n  }\n\n  return state;\n}\n","import * as fromAction from '../actions/reset-password.action';\n\nexport const initialState = false;\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.ResetPasswordAction\n): boolean {\n  switch (action.type) {\n    case fromAction.RESET_PASSWORD_SUCCESS: {\n      return true;\n    }\n  }\n  return state;\n}\n","import { TitlesState } from '../user-state';\nimport * as fromAction from '../actions/index';\nimport { Title } from '../../../occ';\n\nexport const initialState: TitlesState = {\n  entities: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.TitlesAction | fromAction.ClearMiscsData\n): TitlesState {\n  switch (action.type) {\n    case fromAction.LOAD_TITLES_SUCCESS: {\n      const titles = action.payload;\n      const entities = titles.reduce(\n        (titleEntities: { [code: string]: Title }, name: Title) => {\n          return {\n            ...titleEntities,\n            [name.code]: name,\n          };\n        },\n        {\n          ...state.entities,\n        }\n      );\n\n      return {\n        ...state,\n        entities,\n      };\n    }\n\n    case fromAction.CLEAR_MISCS_DATA: {\n      return initialState;\n    }\n  }\n\n  return state;\n}\n","import * as fromActions from '../actions/user-addresses.action';\nimport { Address } from '../../../occ';\n\nexport const initialState: Address[] = [];\n\nexport function reducer(\n  state = initialState,\n  action: fromActions.UserAddressesAction\n): Address[] {\n  switch (action.type) {\n    case fromActions.LOAD_USER_ADDRESSES_FAIL: {\n      return initialState;\n    }\n\n    case fromActions.LOAD_USER_ADDRESSES_SUCCESS: {\n      return action.payload ? action.payload : initialState;\n    }\n  }\n  return state;\n}\n","import { User } from '../../../occ/occ-models/index';\nimport * as fromUpdateEmailAction from '../actions/update-email.action';\nimport * as fromUserDetailsAction from '../actions/user-details.action';\n\nexport const initialState: User = <User>{};\n\nexport function reducer(\n  state = initialState,\n  action:\n    | fromUserDetailsAction.UserDetailsAction\n    | fromUpdateEmailAction.EmailActions\n): User {\n  switch (action.type) {\n    case fromUserDetailsAction.LOAD_USER_DETAILS_SUCCESS: {\n      return action.payload;\n    }\n\n    case fromUserDetailsAction.UPDATE_USER_DETAILS_SUCCESS: {\n      const updatedDetails: User = {\n        ...state,\n        ...action.userUpdates,\n      };\n      return {\n        ...updatedDetails,\n        name: `${updatedDetails.firstName} ${updatedDetails.lastName}`,\n      };\n    }\n  }\n\n  return state;\n}\n","import * as fromUserOrdersAction from '../actions/user-orders.action';\nimport { OrderHistoryList } from '../../../occ';\n\nexport const initialState: OrderHistoryList = {\n  orders: [],\n  pagination: {},\n  sorts: [],\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromUserOrdersAction.UserOrdersAction\n): OrderHistoryList {\n  switch (action.type) {\n    case fromUserOrdersAction.LOAD_USER_ORDERS_SUCCESS: {\n      return action.payload ? action.payload : initialState;\n    }\n    case fromUserOrdersAction.LOAD_USER_ORDERS_FAIL: {\n      return initialState;\n    }\n  }\n\n  return state;\n}\n","import { InjectionToken, Provider } from '@angular/core';\nimport {\n  ActionReducer,\n  ActionReducerMap,\n  combineReducers,\n  MetaReducer,\n} from '@ngrx/store';\nimport { LOGOUT } from '../../../auth/index';\nimport {\n  Address,\n  OrderHistoryList,\n  PaymentDetails,\n} from '../../../occ/occ-models/occ.models';\nimport { loaderReducer } from '../../../state/utils/loader/loader.reducer';\nimport {\n  UserState,\n  USER_ADDRESSES,\n  USER_ORDERS,\n  USER_PAYMENT_METHODS,\n} from '../user-state';\nimport * as fromBillingCountriesReducer from './billing-countries.reducer';\nimport * as fromDeliveryCountries from './delivery-countries.reducer';\nimport * as fromOrderDetailsReducer from './order-details.reducer';\nimport * as fromPaymentReducer from './payment-methods.reducer';\nimport * as fromRegionsReducer from './regions.reducer';\nimport * as fromResetPasswordReducer from './reset-password.reducer';\nimport * as fromTitlesReducer from './titles.reducer';\nimport * as fromAddressesReducer from './user-addresses.reducer';\nimport * as fromUserDetailsReducer from './user-details.reducer';\nimport * as fromUserOrdersReducer from './user-orders.reducer';\n\nexport function getReducers(): ActionReducerMap<UserState> {\n  return {\n    account: combineReducers({\n      details: fromUserDetailsReducer.reducer,\n    }),\n    addresses: loaderReducer<Address[]>(\n      USER_ADDRESSES,\n      fromAddressesReducer.reducer\n    ),\n    billingCountries: fromBillingCountriesReducer.reducer,\n    payments: loaderReducer<PaymentDetails[]>(\n      USER_PAYMENT_METHODS,\n      fromPaymentReducer.reducer\n    ),\n    orders: loaderReducer<OrderHistoryList>(\n      USER_ORDERS,\n      fromUserOrdersReducer.reducer\n    ),\n    order: fromOrderDetailsReducer.reducer,\n    countries: fromDeliveryCountries.reducer,\n    titles: fromTitlesReducer.reducer,\n    regions: fromRegionsReducer.reducer,\n    resetPassword: fromResetPasswordReducer.reducer,\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<UserState>\n> = new InjectionToken<ActionReducerMap<UserState>>('UserReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport function clearUserState(\n  reducer: ActionReducer<any>\n): ActionReducer<any> {\n  return function(state, action) {\n    if (action.type === LOGOUT) {\n      state = undefined;\n    }\n\n    return reducer(state, action);\n  };\n}\n\nexport const metaReducers: MetaReducer<any>[] = [clearUserState];\n","import { MemoizedSelector, createFeatureSelector } from '@ngrx/store';\nimport { UserState, USER_FEATURE, StateWithUser } from '../user-state';\n\nexport const getUserState: MemoizedSelector<\n  StateWithUser,\n  UserState\n> = createFeatureSelector<UserState>(USER_FEATURE);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { User } from '../../../occ/occ-models/index';\nimport { StateWithUser, UserDetailsState, UserState } from '../user-state';\nimport { getUserState } from './feature.selector';\n\nexport const getDetailsState: MemoizedSelector<\n  StateWithUser,\n  UserDetailsState\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.account\n);\n\nexport const getDetails: MemoizedSelector<StateWithUser, User> = createSelector(\n  getDetailsState,\n  (state: UserDetailsState) => state.details\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { UserState, StateWithUser } from '../user-state';\nimport { Address } from '../../../occ/occ-models/index';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderValueSelector,\n  loaderLoadingSelector,\n} from '../../../state/utils/loader/loader.selectors';\n\nimport { getUserState } from './feature.selector';\n\nexport const getAddressesLoaderState: MemoizedSelector<\n  StateWithUser,\n  LoaderState<Address[]>\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.addresses\n);\n\nexport const getAddresses: MemoizedSelector<\n  StateWithUser,\n  Address[]\n> = createSelector(\n  getAddressesLoaderState,\n  (state: LoaderState<Address[]>) => loaderValueSelector(state)\n);\n\nexport const getAddressesLoading: MemoizedSelector<\n  StateWithUser,\n  boolean\n> = createSelector(\n  getAddressesLoaderState,\n  (state: LoaderState<Address[]>) => loaderLoadingSelector(state)\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { UserState, StateWithUser } from '../user-state';\nimport { PaymentDetails } from '../../../occ/occ-models/index';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderValueSelector,\n  loaderLoadingSelector,\n} from '../../../state/utils/loader/loader.selectors';\n\nimport { getUserState } from './feature.selector';\n\nexport const getPaymentMethodsState: MemoizedSelector<\n  StateWithUser,\n  LoaderState<PaymentDetails[]>\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.payments\n);\n\nexport const getPaymentMethods: MemoizedSelector<\n  StateWithUser,\n  PaymentDetails[]\n> = createSelector(\n  getPaymentMethodsState,\n  (state: LoaderState<PaymentDetails[]>) => loaderValueSelector(state)\n);\n\nexport const getPaymentMethodsLoading: MemoizedSelector<\n  StateWithUser,\n  boolean\n> = createSelector(\n  getPaymentMethodsState,\n  (state: LoaderState<PaymentDetails[]>) => loaderLoadingSelector(state)\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { UserState, StateWithUser } from '../user-state';\nimport { OrderHistoryList } from '../../../occ/occ-models/index';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderValueSelector,\n  loaderSuccessSelector,\n} from '../../../state/utils/loader/loader.selectors';\n\nimport { getUserState } from './feature.selector';\n\nexport const getOrdersState: MemoizedSelector<\n  StateWithUser,\n  LoaderState<OrderHistoryList>\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.orders\n);\n\nexport const getOrdersLoaded: MemoizedSelector<\n  StateWithUser,\n  boolean\n> = createSelector(\n  getOrdersState,\n  (state: LoaderState<OrderHistoryList>) => loaderSuccessSelector(state)\n);\n\nexport const getOrders: MemoizedSelector<\n  StateWithUser,\n  OrderHistoryList\n> = createSelector(\n  getOrdersState,\n  (state: LoaderState<OrderHistoryList>) => loaderValueSelector(state)\n);\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\n\nimport {\n  UserState,\n  TitlesState,\n  StateWithUser,\n  TitleEntities,\n} from '../user-state';\nimport { Title } from '../../../occ/occ-models/index';\nimport { getUserState } from './feature.selector';\n\nexport const getTitlesState: MemoizedSelector<\n  StateWithUser,\n  TitlesState\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.titles\n);\n\nexport const getTitlesEntites: MemoizedSelector<\n  StateWithUser,\n  TitleEntities\n> = createSelector(\n  getTitlesState,\n  (state: TitlesState) => state.entities\n);\n\nexport const getAllTitles: MemoizedSelector<\n  StateWithUser,\n  Title[]\n> = createSelector(\n  getTitlesEntites,\n  entites => Object.keys(entites).map(code => entites[code])\n);\n\nexport const titleSelectorFactory = (\n  code: string\n): MemoizedSelector<StateWithUser, Title> =>\n  createSelector(\n    getTitlesEntites,\n    entities => (Object.keys(entities).length !== 0 ? entities[code] : null)\n  );\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\nimport {\n  UserState,\n  DeliveryCountriesState,\n  StateWithUser,\n  DeliveryCountryEntities,\n} from '../user-state';\nimport { Country } from '../../../occ/occ-models/index';\nimport { getUserState } from './feature.selector';\n\nexport const getDeliveryCountriesState: MemoizedSelector<\n  StateWithUser,\n  DeliveryCountriesState\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.countries\n);\n\nexport const getDeliveryCountriesEntites: MemoizedSelector<\n  StateWithUser,\n  DeliveryCountryEntities\n> = createSelector(\n  getDeliveryCountriesState,\n  (state: DeliveryCountriesState) => state.entities\n);\n\nexport const getAllDeliveryCountries: MemoizedSelector<\n  StateWithUser,\n  Country[]\n> = createSelector(\n  getDeliveryCountriesEntites,\n  entites => Object.keys(entites).map(isocode => entites[isocode])\n);\n\nexport const countrySelectorFactory = (\n  isocode: string\n): MemoizedSelector<StateWithUser, Country> =>\n  createSelector(\n    getDeliveryCountriesEntites,\n    entities => (Object.keys(entities).length !== 0 ? entities[isocode] : null)\n  );\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\n\nimport { UserState, RegionsState, StateWithUser } from '../user-state';\nimport { Region } from '../../../occ/occ-models/index';\nimport { getUserState } from './feature.selector';\n\nexport const getRegionsState: MemoizedSelector<\n  StateWithUser,\n  RegionsState\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.regions\n);\n\nexport const getAllRegions: MemoizedSelector<\n  StateWithUser,\n  Region[]\n> = createSelector(\n  getRegionsState,\n  (state: RegionsState) => state.entities\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { OrderDetailsState, UserState, StateWithUser } from '../user-state';\nimport { Order } from '../../../occ/occ-models/index';\nimport { getUserState } from './feature.selector';\n\nexport const getOrderState: MemoizedSelector<\n  StateWithUser,\n  OrderDetailsState\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.order\n);\n\nexport const getOrderDetails: MemoizedSelector<\n  StateWithUser,\n  Order\n> = createSelector(\n  getOrderState,\n  (state: OrderDetailsState) => state.order\n);\n","import { MemoizedSelector, createSelector } from '@ngrx/store';\nimport {\n  UserState,\n  BillingCountriesState,\n  StateWithUser,\n  BillingCountryEntities,\n} from '../user-state';\nimport { getUserState } from './feature.selector';\nimport { Country } from '../../../occ/occ-models/occ.models';\n\nexport const getBillingCountriesState: MemoizedSelector<\n  StateWithUser,\n  BillingCountriesState\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.billingCountries\n);\n\nexport const getBillingCountriesEntites: MemoizedSelector<\n  StateWithUser,\n  BillingCountryEntities\n> = createSelector(\n  getBillingCountriesState,\n  (state: BillingCountriesState) => state.entities\n);\n\nexport const getAllBillingCountries: MemoizedSelector<\n  StateWithUser,\n  Country[]\n> = createSelector(\n  getBillingCountriesEntites,\n  entites => Object.keys(entites).map(isocode => entites[isocode])\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { UserState, StateWithUser } from '../user-state';\nimport { getUserState } from './feature.selector';\n\nexport const getResetPassword: MemoizedSelector<\n  StateWithUser,\n  boolean\n> = createSelector(\n  getUserState,\n  (state: UserState) => state.resetPassword\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { entityStateSelector } from '../../../state/utils/entity-loader/entity-loader.selectors';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderErrorSelector,\n  loaderLoadingSelector,\n  loaderSuccessSelector,\n} from '../../../state/utils/loader/loader.selectors';\nimport { StateWithProcess } from '../process-state';\nimport { getProcessState } from './feature.selector';\n\nexport function getProcessStateFactory<T>(\n  processId: string\n): MemoizedSelector<StateWithProcess<T>, LoaderState<T>> {\n  return createSelector(\n    getProcessState(),\n    entityState => entityStateSelector(entityState, processId)\n  );\n}\n\nexport function getProcessLoadingFactory<T>(\n  processId: string\n): MemoizedSelector<StateWithProcess<T>, boolean> {\n  return createSelector(\n    getProcessStateFactory(processId),\n    loaderState => loaderLoadingSelector(loaderState)\n  );\n}\n\nexport function getProcessSuccessFactory<T>(\n  processId: string\n): MemoizedSelector<StateWithProcess<T>, boolean> {\n  return createSelector(\n    getProcessStateFactory(processId),\n    loaderState => loaderSuccessSelector(loaderState)\n  );\n}\n\nexport function getProcessErrorFactory<T>(\n  processId: string\n): MemoizedSelector<StateWithProcess<T>, boolean> {\n  return createSelector(\n    getProcessStateFactory(processId),\n    loaderState => loaderErrorSelector(loaderState)\n  );\n}\n","import { MemoizedSelector, createFeatureSelector } from '@ngrx/store';\n\nimport { StateWithProcess, PROCESS_FEATURE } from '../process-state';\nimport { EntityLoaderState } from '../../../state/utils/entity-loader/entity-loader-state';\n\nexport function getProcessState<T>(): MemoizedSelector<\n  StateWithProcess<T>,\n  EntityLoaderState<T>\n> {\n  return createFeatureSelector<EntityLoaderState<T>>(PROCESS_FEATURE);\n}\n","import { Injectable } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport {\n  Address,\n  Country,\n  Order,\n  OrderHistoryList,\n  PaymentDetails,\n  Region,\n  Title,\n  User,\n} from '../../occ/occ-models/index';\nimport * as fromProcessStore from '../../process/store/process-state';\nimport {\n  getProcessErrorFactory,\n  getProcessLoadingFactory,\n  getProcessSuccessFactory,\n} from '../../process/store/selectors/process.selectors';\nimport { UserRegisterFormData } from '../model/user.model';\nimport * as fromStore from '../store/index';\nimport {\n  UPDATE_EMAIL_PROCESS_ID,\n  UPDATE_USER_DETAILS_PROCESS_ID,\n} from '../store/user-state';\n\n@Injectable()\nexport class UserService {\n  constructor(\n    private store: Store<\n      fromStore.StateWithUser | fromProcessStore.StateWithProcess<void>\n    >\n  ) {}\n\n  /**\n   * Returns a user\n   */\n  get(): Observable<User> {\n    return this.store.pipe(select(fromStore.getDetails));\n  }\n\n  /**\n   * Loads the user's details\n   */\n  load(userId: string): void {\n    this.store.dispatch(new fromStore.LoadUserDetails(userId));\n  }\n\n  /**\n   * Register a new user\n   *\n   * @param submitFormData as UserRegisterFormData\n   */\n  register(userRegisterFormData: UserRegisterFormData): void {\n    this.store.dispatch(new fromStore.RegisterUser(userRegisterFormData));\n  }\n\n  /**\n   * Remove user account, that's also called close user's account\n   *\n   * @param userId\n   */\n  remove(userId: string): void {\n    this.store.dispatch(new fromStore.RemoveUser(userId));\n  }\n\n  /**\n   * Returns the remove user loading flag\n   */\n  getRemoveUserResultLoading(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessLoadingFactory(fromStore.REMOVE_USER_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the remove user failure outcome.\n   */\n  getRemoveUserResultError(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessErrorFactory(fromStore.REMOVE_USER_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the remove user process success outcome.\n   */\n  getRemoveUserResultSuccess(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessSuccessFactory(fromStore.REMOVE_USER_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Resets the remove user process state. The state needs to be reset after the process\n   * concludes, regardless if it's a success or an error\n   */\n  resetRemoveUserProcessState(): void {\n    this.store.dispatch(new fromStore.RemoveUserReset());\n  }\n\n  /**\n   * Returns an order's detail\n   */\n  getOrderDetails(): Observable<Order> {\n    return this.store.pipe(select(fromStore.getOrderDetails));\n  }\n\n  /**\n   * Retrieves order's details\n   *\n   * @param userId a user's ID\n   * @param orderCode an order code\n   */\n  loadOrderDetails(userId: string, orderCode: string): void {\n    this.store.dispatch(\n      new fromStore.LoadOrderDetails({\n        userId: userId,\n        orderCode: orderCode,\n      })\n    );\n  }\n\n  /**\n   * Clears order's details\n   */\n  clearOrderDetails(): void {\n    this.store.dispatch(new fromStore.ClearOrderDetails());\n  }\n\n  /**\n   * Returns order history list\n   */\n  getOrderHistoryList(\n    userId: string,\n    pageSize: number\n  ): Observable<OrderHistoryList> {\n    return this.store.pipe(\n      select(fromStore.getOrdersState),\n      tap(orderListState => {\n        const attemptedLoad =\n          orderListState.loading ||\n          orderListState.success ||\n          orderListState.error;\n        if (!attemptedLoad && !!userId) {\n          this.loadOrderList(userId, pageSize);\n        }\n      }),\n      map(orderListState => orderListState.value)\n    );\n  }\n\n  /**\n   * Returns a loaded flag for order history list\n   */\n  getOrderHistoryListLoaded(): Observable<boolean> {\n    return this.store.pipe(select(fromStore.getOrdersLoaded));\n  }\n\n  /**\n   * Loads all user's payment methods.\n   * @param userId a user ID\n   */\n  loadPaymentMethods(userId: string): void {\n    this.store.dispatch(new fromStore.LoadUserPaymentMethods(userId));\n  }\n\n  /**\n   * Returns all user's payment methods\n   */\n  getPaymentMethods(): Observable<PaymentDetails[]> {\n    return this.store.pipe(select(fromStore.getPaymentMethods));\n  }\n\n  /**\n   * Returns a loading flag for payment methods\n   */\n  getPaymentMethodsLoading(): Observable<boolean> {\n    return this.store.pipe(select(fromStore.getPaymentMethodsLoading));\n  }\n\n  /**\n   * Sets the payment as a default one\n   * @param userId a user ID\n   * @param paymentMethodId a payment method ID\n   */\n  setPaymentMethodAsDefault(userId: string, paymentMethodId: string): void {\n    this.store.dispatch(\n      new fromStore.SetDefaultUserPaymentMethod({\n        userId: userId,\n        paymentMethodId,\n      })\n    );\n  }\n\n  /**\n   * Deletes the payment method\n   *\n   * @param userId a user ID\n   * @param paymentMethodId a payment method ID\n   */\n  deletePaymentMethod(userId: string, paymentMethodId: string): void {\n    this.store.dispatch(\n      new fromStore.DeleteUserPaymentMethod({\n        userId: userId,\n        paymentMethodId,\n      })\n    );\n  }\n\n  /**\n   * Retrieves an order list\n   * @param userId a user ID\n   * @param pageSize page size\n   * @param currentPage current page\n   * @param sort sort\n   */\n  loadOrderList(\n    userId: string,\n    pageSize: number,\n    currentPage?: number,\n    sort?: string\n  ): void {\n    this.store.dispatch(\n      new fromStore.LoadUserOrders({\n        userId: userId,\n        pageSize: pageSize,\n        currentPage: currentPage,\n        sort: sort,\n      })\n    );\n  }\n\n  /**\n   * Retrieves user's addresses\n   * @param userId a user ID\n   */\n  loadAddresses(userId: string): void {\n    this.store.dispatch(new fromStore.LoadUserAddresses(userId));\n  }\n\n  /**\n   * Adds user address\n   * @param userId a user ID\n   * @param address a user address\n   */\n  addUserAddress(userId: string, address: Address): void {\n    this.store.dispatch(\n      new fromStore.AddUserAddress({\n        userId: userId,\n        address: address,\n      })\n    );\n  }\n\n  /**\n   * Sets user address as default\n   * @param userId a user ID\n   * @param addressId a user address ID\n   */\n  setAddressAsDefault(userId: string, addressId: string): void {\n    this.store.dispatch(\n      new fromStore.UpdateUserAddress({\n        userId: userId,\n        addressId: addressId,\n        address: { defaultAddress: true },\n      })\n    );\n  }\n\n  /**\n   * Updates existing user address\n   * @param userId a user ID\n   * @param addressId a user address ID\n   * @param address a user address\n   */\n  updateUserAddress(userId: string, addressId: string, address: Address): void {\n    this.store.dispatch(\n      new fromStore.UpdateUserAddress({\n        userId: userId,\n        addressId: addressId,\n        address: address,\n      })\n    );\n  }\n\n  /**\n   * Deletes existing user address\n   * @param userId a user ID\n   * @param addressId a user address ID\n   */\n  deleteUserAddress(userId: string, addressId: string): void {\n    this.store.dispatch(\n      new fromStore.DeleteUserAddress({\n        userId: userId,\n        addressId: addressId,\n      })\n    );\n  }\n\n  /**\n   * Returns addresses\n   */\n  getAddresses(): Observable<Address[]> {\n    return this.store.pipe(select(fromStore.getAddresses));\n  }\n\n  /**\n   * Returns a loading flag for addresses\n   */\n  getAddressesLoading(): Observable<boolean> {\n    return this.store.pipe(select(fromStore.getAddressesLoading));\n  }\n\n  /**\n   * Returns titles\n   */\n  getTitles(): Observable<Title[]> {\n    return this.store.pipe(select(fromStore.getAllTitles));\n  }\n\n  /**\n   * Retrieves titles\n   */\n  loadTitles(): void {\n    this.store.dispatch(new fromStore.LoadTitles());\n  }\n\n  /**\n   * Retrieves delivery countries\n   */\n  loadDeliveryCountries(): void {\n    this.store.dispatch(new fromStore.LoadDeliveryCountries());\n  }\n\n  /**\n   * Returns all delivery countries\n   */\n  getDeliveryCountries(): Observable<Country[]> {\n    return this.store.pipe(select(fromStore.getAllDeliveryCountries));\n  }\n\n  /**\n   * Returns a country based on the provided `isocode`\n   * @param isocode an isocode for a country\n   */\n  getCountry(isocode: string): Observable<Country> {\n    return this.store.pipe(select(fromStore.countrySelectorFactory(isocode)));\n  }\n\n  /**\n   * Retrieves regions for specified country by `countryIsoCode`\n   * @param countryIsoCode\n   */\n  loadRegions(countryIsoCode: string): void {\n    this.store.dispatch(new fromStore.LoadRegions(countryIsoCode));\n  }\n\n  /**\n   * Returns all regions\n   */\n  getRegions(): Observable<Region[]> {\n    return this.store.pipe(select(fromStore.getAllRegions));\n  }\n\n  /**\n   * Returns all billing countries\n   */\n  getAllBillingCountries(): Observable<Country[]> {\n    return this.store.pipe(select(fromStore.getAllBillingCountries));\n  }\n\n  /**\n   * Retrieves billing countries\n   */\n  loadBillingCountries(): void {\n    this.store.dispatch(new fromStore.LoadBillingCountries());\n  }\n\n  /**\n   * Cleaning order list\n   */\n  clearOrderList(): void {\n    this.store.dispatch(new fromStore.ClearUserOrders());\n  }\n\n  /**\n   * Return whether user's password is successfully reset\n   */\n  isPasswordReset(): Observable<boolean> {\n    return this.store.pipe(select(fromStore.getResetPassword));\n  }\n\n  /**\n   * Updates the user's details\n   * @param userDetails to be updated\n   */\n  updatePersonalDetails(username: string, userDetails: User): void {\n    this.store.dispatch(\n      new fromStore.UpdateUserDetails({ username, userDetails })\n    );\n  }\n\n  /**\n   * Returns the update user's personal details loading flag\n   */\n  getUpdatePersonalDetailsResultLoading(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessLoadingFactory(UPDATE_USER_DETAILS_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the update user's personal details error flag\n   */\n  getUpdatePersonalDetailsResultError(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessErrorFactory(UPDATE_USER_DETAILS_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the update user's personal details success flag\n   */\n  getUpdatePersonalDetailsResultSuccess(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessSuccessFactory(UPDATE_USER_DETAILS_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Resets the update user details processing state\n   */\n  resetUpdatePersonalDetailsProcessingState(): void {\n    this.store.dispatch(new fromStore.ResetUpdateUserDetails());\n  }\n\n  /**\n   * Reset new password.  Part of the forgot password flow.\n   * @param token\n   * @param password\n   */\n  resetPassword(token: string, password: string): void {\n    this.store.dispatch(new fromStore.ResetPassword({ token, password }));\n  }\n\n  /*\n   * Request an email to reset a forgotten password.\n   */\n  requestForgotPasswordEmail(userEmailAddress: string): void {\n    this.store.dispatch(\n      new fromStore.ForgotPasswordEmailRequest(userEmailAddress)\n    );\n  }\n\n  /**\n   * Updates the user's email\n   * @param uid to be updated\n   */\n  updateEmail(uid: string, password: string, newUid: string): void {\n    this.store.dispatch(\n      new fromStore.UpdateEmailAction({ uid, password, newUid })\n    );\n  }\n\n  /**\n   * Returns the update user's email success flag\n   */\n  getUpdateEmailResultSuccess(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessSuccessFactory(UPDATE_EMAIL_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the update user's email error flag\n   */\n  getUpdateEmailResultError(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessErrorFactory(UPDATE_EMAIL_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the update user's email loading flag\n   */\n  getUpdateEmailResultLoading(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessLoadingFactory(UPDATE_EMAIL_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Resets the update user's email processing state\n   */\n  resetUpdateEmailResultState(): void {\n    this.store.dispatch(new fromStore.ResetUpdateEmailAction());\n  }\n\n  /**\n   * Updates the password for an authenticated user\n   * @param userId the user id for which the password will be updated\n   * @param oldPassword the current password that will be changed\n   * @param newPassword the new password\n   */\n  updatePassword(\n    userId: string,\n    oldPassword: string,\n    newPassword: string\n  ): void {\n    this.store.dispatch(\n      new fromStore.UpdatePassword({ userId, oldPassword, newPassword })\n    );\n  }\n\n  /**\n   * Returns the update passwrod loading flag\n   */\n  getUpdatePasswordResultLoading(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessLoadingFactory(fromStore.UPDATE_PASSWORD_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the update password failure outcome.\n   */\n  getUpdatePasswordResultError(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessErrorFactory(fromStore.UPDATE_PASSWORD_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Returns the update password process success outcome.\n   */\n  getUpdatePasswordResultSuccess(): Observable<boolean> {\n    return this.store.pipe(\n      select(getProcessSuccessFactory(fromStore.UPDATE_PASSWORD_PROCESS_ID))\n    );\n  }\n\n  /**\n   * Resets the update password process state. The state needs to be reset after the process\n   * concludes, regardless if it's a success or an error\n   */\n  resetUpdatePasswordProcessState(): void {\n    this.store.dispatch(new fromStore.UpdatePasswordReset());\n  }\n}\n","import { InjectionToken, Provider } from '@angular/core';\nimport { ActionReducer, ActionReducerMap } from '@ngrx/store';\nimport { EntityLoaderState } from '../../../state/utils/entity-loader/entity-loader-state';\nimport { entityLoaderReducer } from '../../../state/utils/entity-loader/entity-loader.reducer';\nimport { PROCESS_FEATURE } from '../process-state';\n\nexport function getReducers<T>(): ActionReducer<EntityLoaderState<T>> {\n  return entityLoaderReducer(PROCESS_FEATURE);\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<EntityLoaderState<any>>\n> = new InjectionToken<ActionReducerMap<EntityLoaderState<any>>>(\n  'ProcessReducers'\n);\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { StateModule } from '../../state/state.module';\nimport { PROCESS_FEATURE } from './process-state';\nimport { reducerProvider, reducerToken } from './reducers/index';\n\n@NgModule({\n  imports: [StateModule, StoreModule.forFeature(PROCESS_FEATURE, reducerToken)],\n  providers: [reducerProvider],\n})\nexport class ProcessStoreModule {}\n","import { NgModule } from '@angular/core';\nimport { ProcessStoreModule } from './store/process-store.module';\n\n@NgModule({\n  imports: [ProcessStoreModule],\n})\nexport class ProcessModule {}\n","import { throwError, Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { catchError } from 'rxjs/operators';\nimport {\n  CountryList,\n  TitleList,\n  CardTypeList,\n  RegionList,\n} from '../../occ/occ-models/index';\nimport { OccEndpointsService } from '../services/occ-endpoints.service';\n\nconst ENDPOINT_COUNTRIES = 'countries';\nconst ENDPOINT_TITLES = 'titles';\nconst ENDPOINT_CARD_TYPES = 'cardtypes';\nconst ENDPOINT_REGIONS = 'regions';\nconst COUNTRIES_TYPE_SHIPPING = 'SHIPPING';\nconst COUNTRIES_TYPE_BILLING = 'BILLING';\n\n@Injectable()\nexport class OccMiscsService {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService\n  ) {}\n\n  loadDeliveryCountries(): Observable<CountryList> {\n    return this.http\n      .get<CountryList>(this.occEndpoints.getEndpoint(ENDPOINT_COUNTRIES), {\n        params: new HttpParams().set('type', COUNTRIES_TYPE_SHIPPING),\n      })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  loadBillingCountries(): Observable<CountryList> {\n    return this.http\n      .get<CountryList>(this.occEndpoints.getEndpoint(ENDPOINT_COUNTRIES), {\n        params: new HttpParams().set('type', COUNTRIES_TYPE_BILLING),\n      })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  loadTitles(): Observable<TitleList> {\n    return this.http\n      .get<TitleList>(this.occEndpoints.getEndpoint(ENDPOINT_TITLES))\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  loadCardTypes(): Observable<CardTypeList> {\n    return this.http\n      .get<CardTypeList>(this.occEndpoints.getEndpoint(ENDPOINT_CARD_TYPES))\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  loadRegions(countryIsoCode: string): Observable<RegionList> {\n    return this.http\n      .get<RegionList>(\n        this.occEndpoints.getEndpoint(this.buildRegionsUrl(countryIsoCode))\n      )\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  private buildRegionsUrl(countryIsoCode: string): string {\n    return `${ENDPOINT_COUNTRIES}/${countryIsoCode}/${ENDPOINT_REGIONS}`;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\n\nimport * as fromAction from '../actions/billing-countries.action';\nimport { OccMiscsService } from '../../../occ/miscs/miscs.service';\n\n@Injectable()\nexport class BillingCountriesEffect {\n  @Effect()\n  loadBillingCountries$: Observable<\n    fromAction.BillingCountriesAction\n  > = this.actions$.pipe(\n    ofType(fromAction.LOAD_BILLING_COUNTRIES),\n    switchMap(() => {\n      return this.occMiscsService.loadBillingCountries().pipe(\n        map(data => new fromAction.LoadBillingCountriesSuccess(data.countries)),\n        catchError(error => of(new fromAction.LoadBillingCountriesFail(error)))\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occMiscsService: OccMiscsService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\n\nimport * as fromAction from '../actions/delivery-countries.action';\nimport { OccMiscsService } from '../../../occ/miscs/miscs.service';\n\n@Injectable()\nexport class DeliveryCountriesEffects {\n  @Effect()\n  loadDeliveryCountries$: Observable<\n    fromAction.DeliveryCountriesAction\n  > = this.actions$.pipe(\n    ofType(fromAction.LOAD_DELIVERY_COUNTRIES),\n    switchMap(() => {\n      return this.occMiscsService.loadDeliveryCountries().pipe(\n        map(\n          data => new fromAction.LoadDeliveryCountriesSuccess(data.countries)\n        ),\n        catchError(error => of(new fromAction.LoadDeliveryCountriesFail(error)))\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occMiscsService: OccMiscsService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { concatMap, switchMap, map, catchError } from 'rxjs/operators';\nimport { GlobalMessageType, AddMessage } from '../../../global-message/index';\n\nimport * as fromActions from '../actions/index';\nimport { OccUserService } from '../../occ/user.service';\n\n@Injectable()\nexport class ForgotPasswordEffects {\n  @Effect()\n  requestForgotPasswordEmail$: Observable<\n    | fromActions.ForgotPasswordEmailRequestSuccess\n    | AddMessage\n    | fromActions.ForgotPasswordEmailRequestFail\n  > = this.actions$.pipe(\n    ofType(fromActions.FORGOT_PASSWORD_EMAIL_REQUEST),\n    map((action: fromActions.ForgotPasswordEmailRequest) => {\n      return action.payload;\n    }),\n    concatMap(userEmailAddress => {\n      return this.occUserService\n        .requestForgotPasswordEmail(userEmailAddress)\n        .pipe(\n          switchMap(() => [\n            new fromActions.ForgotPasswordEmailRequestSuccess(),\n            new AddMessage({\n              text:\n                'An email has been sent to you with information on how to reset your password.',\n              type: GlobalMessageType.MSG_TYPE_CONFIRMATION,\n            }),\n          ]),\n          catchError(error =>\n            of(new fromActions.ForgotPasswordEmailRequestFail(error))\n          )\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport * as fromOrderDetailsAction from '../actions/order-details.action';\nimport { OccOrderService } from '../../occ/index';\nimport { Order } from '../../../occ/occ-models/index';\nimport { ConverterService } from '../../../util/converter.service';\nimport { PRODUCT_NORMALIZER } from '../../../product/connectors/product/converters';\n\n@Injectable()\nexport class OrderDetailsEffect {\n  @Effect()\n  loadOrderDetails$: Observable<\n    fromOrderDetailsAction.OrderDetailsAction\n  > = this.actions$.pipe(\n    ofType(fromOrderDetailsAction.LOAD_ORDER_DETAILS),\n    map((action: fromOrderDetailsAction.LoadOrderDetails) => action.payload),\n    switchMap(payload => {\n      return this.occOrderService\n        .getOrder(payload.userId, payload.orderCode)\n        .pipe(\n          map((order: Order) => {\n            if (order.consignments) {\n              order.consignments.forEach(element => {\n                element.entries.forEach(entry => {\n                  entry.orderEntry.product = this.converter.convert(\n                    entry.orderEntry.product,\n                    PRODUCT_NORMALIZER\n                  ) as any;\n                });\n              });\n            }\n            if (order.unconsignedEntries) {\n              order.unconsignedEntries.forEach(entry => {\n                entry.product = this.converter.convert(\n                  entry.product,\n                  PRODUCT_NORMALIZER\n                ) as any;\n              });\n            }\n            return new fromOrderDetailsAction.LoadOrderDetailsSuccess(order);\n          }),\n          catchError(error =>\n            of(new fromOrderDetailsAction.LoadOrderDetailsFail(error))\n          )\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occOrderService: OccOrderService,\n    private converter: ConverterService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\n\nimport { OccUserService } from '../../occ/index';\nimport * as fromUserPaymentMethodsAction from '../actions/payment-methods.action';\nimport { PaymentDetailsList } from '../../../occ/occ-models/index';\n\n@Injectable()\nexport class UserPaymentMethodsEffects {\n  @Effect()\n  loadUserPaymentMethods$: Observable<any> = this.actions$.pipe(\n    ofType(fromUserPaymentMethodsAction.LOAD_USER_PAYMENT_METHODS),\n    map(\n      (action: fromUserPaymentMethodsAction.LoadUserPaymentMethods) =>\n        action.payload\n    ),\n    mergeMap(payload => {\n      return this.occUserService.loadUserPaymentMethods(payload).pipe(\n        map((paymentsList: PaymentDetailsList) => {\n          return new fromUserPaymentMethodsAction.LoadUserPaymentMethodsSuccess(\n            paymentsList.payments\n          );\n        }),\n        catchError(error =>\n          of(new fromUserPaymentMethodsAction.LoadUserPaymentMethodsFail(error))\n        )\n      );\n    })\n  );\n\n  @Effect()\n  setDefaultUserPaymentMethod$: Observable<any> = this.actions$.pipe(\n    ofType(fromUserPaymentMethodsAction.SET_DEFAULT_USER_PAYMENT_METHOD),\n    map(\n      (action: fromUserPaymentMethodsAction.SetDefaultUserPaymentMethod) =>\n        action.payload\n    ),\n    mergeMap(payload => {\n      return this.occUserService\n        .setDefaultUserPaymentMethod(payload.userId, payload.paymentMethodId)\n        .pipe(\n          switchMap((data: any) => {\n            return [\n              new fromUserPaymentMethodsAction.SetDefaultUserPaymentMethodSuccess(\n                data\n              ),\n              new fromUserPaymentMethodsAction.LoadUserPaymentMethods(\n                payload.userId\n              ),\n            ];\n          }),\n          catchError(error =>\n            of(\n              new fromUserPaymentMethodsAction.SetDefaultUserPaymentMethodFail(\n                error\n              )\n            )\n          )\n        );\n    })\n  );\n  @Effect()\n  deleteUserPaymentMethod$: Observable<any> = this.actions$.pipe(\n    ofType(fromUserPaymentMethodsAction.DELETE_USER_PAYMENT_METHOD),\n    map(\n      (action: fromUserPaymentMethodsAction.DeleteUserPaymentMethod) =>\n        action.payload\n    ),\n    mergeMap(payload => {\n      return this.occUserService\n        .deleteUserPaymentMethod(payload.userId, payload.paymentMethodId)\n        .pipe(\n          switchMap((data: any) => {\n            return [\n              new fromUserPaymentMethodsAction.DeleteUserPaymentMethodSuccess(\n                data\n              ),\n              new fromUserPaymentMethodsAction.LoadUserPaymentMethods(\n                payload.userId\n              ),\n            ];\n          }),\n          catchError(error =>\n            of(\n              new fromUserPaymentMethodsAction.DeleteUserPaymentMethodFail(\n                error\n              )\n            )\n          )\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { switchMap, map, catchError } from 'rxjs/operators';\n\nimport * as fromActions from '../actions/index';\nimport { OccMiscsService } from '../../../occ/miscs/miscs.service';\n\n@Injectable()\nexport class RegionsEffects {\n  @Effect()\n  loadRegions$: Observable<fromActions.RegionsAction> = this.actions$.pipe(\n    ofType(fromActions.LOAD_REGIONS),\n    map((action: fromActions.LoadRegions) => {\n      return action.payload;\n    }),\n    switchMap((countryCode: string) => {\n      return this.occMiscsService.loadRegions(countryCode).pipe(\n        map(data => new fromActions.LoadRegionsSuccess(data.regions)),\n        catchError(error => of(new fromActions.LoadRegionsFail(error)))\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occMiscsService: OccMiscsService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { switchMap, map, catchError } from 'rxjs/operators';\n\nimport * as fromActions from '../actions/index';\nimport { OccUserService } from '../../occ/user.service';\nimport { GlobalMessageType, AddMessage } from '../../../global-message/index';\n\n@Injectable()\nexport class ResetPasswordEffects {\n  @Effect()\n  resetPassword$: Observable<\n    | fromActions.ResetPasswordSuccess\n    | AddMessage\n    | fromActions.ResetPasswordFail\n  > = this.actions$.pipe(\n    ofType(fromActions.RESET_PASSWORD),\n    map((action: fromActions.ResetPassword) => {\n      return action.payload;\n    }),\n    switchMap(({ token, password }) => {\n      return this.occUserService.resetPassword(token, password).pipe(\n        switchMap(() => [\n          new fromActions.ResetPasswordSuccess(),\n          new AddMessage({\n            text: 'Success! You can now login using your new password.',\n            type: GlobalMessageType.MSG_TYPE_CONFIRMATION,\n          }),\n        ]),\n        catchError(error => of(new fromActions.ResetPasswordFail(error)))\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { OccMiscsService } from '../../../occ/miscs/miscs.service';\nimport { Title } from '../../../occ/occ-models/occ.models';\nimport * as fromAction from '../actions/titles.action';\n\n@Injectable()\nexport class TitlesEffects {\n  @Effect()\n  loadTitles$: Observable<fromAction.TitlesAction> = this.actions$.pipe(\n    ofType(fromAction.LOAD_TITLES),\n    switchMap(() => {\n      return this.occMiscsService.loadTitles().pipe(\n        map(data => {\n          const sortedTitles = this.sortTitles(data.titles);\n          return new fromAction.LoadTitlesSuccess(sortedTitles);\n        }),\n        catchError(error => of(new fromAction.LoadTitlesFail(error)))\n      );\n    })\n  );\n\n  private sortTitles(titles: Title[]) {\n    const drTitle = { code: 'dr', name: 'Dr.' };\n    const revTitle = { code: 'rev', name: 'Rev.' };\n\n    const filteredTitles = titles.filter(\n      t => t.code !== 'dr' && t.code !== 'rev'\n    );\n    const sortedTitles = [...filteredTitles, drTitle, revTitle];\n    return sortedTitles;\n  }\n\n  constructor(\n    private actions$: Actions,\n    private occMiscsService: OccMiscsService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, concatMap, map } from 'rxjs/operators';\nimport { OccUserService } from '../../occ/index';\nimport * as fromUpdateEmailAction from '../actions/update-email.action';\n\n@Injectable()\nexport class UpdateEmailEffects {\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n\n  @Effect()\n  updateEmail$: Observable<\n    | fromUpdateEmailAction.UpdateEmailSuccessAction\n    | fromUpdateEmailAction.UpdateEmailErrorAction\n  > = this.actions$.pipe(\n    ofType(fromUpdateEmailAction.UPDATE_EMAIL),\n    map((action: fromUpdateEmailAction.UpdateEmailAction) => action.payload),\n    concatMap(payload =>\n      this.occUserService\n        .updateEmail(payload.uid, payload.password, payload.newUid)\n        .pipe(\n          map(\n            () =>\n              new fromUpdateEmailAction.UpdateEmailSuccessAction(payload.newUid)\n          ),\n          catchError(error =>\n            of(new fromUpdateEmailAction.UpdateEmailErrorAction(error))\n          )\n        )\n    )\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, concatMap, map } from 'rxjs/operators';\nimport { OccUserService } from '../../occ/index';\nimport * as fromActions from '../actions/update-password.action';\n\n@Injectable()\nexport class UpdatePasswordEffects {\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n\n  @Effect()\n  updatePassword$: Observable<\n    fromActions.UpdatePasswordSuccess | fromActions.UpdatePasswordFail\n  > = this.actions$.pipe(\n    ofType(fromActions.UPDATE_PASSWORD),\n    map((action: fromActions.UpdatePassword) => action.payload),\n    concatMap(payload =>\n      this.occUserService\n        .updatePassword(\n          payload.userId,\n          payload.oldPassword,\n          payload.newPassword\n        )\n        .pipe(\n          map(_ => new fromActions.UpdatePasswordSuccess()),\n          catchError(error => of(new fromActions.UpdatePasswordFail(error)))\n        )\n    )\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap, tap, take } from 'rxjs/operators';\n\nimport * as fromUserAddressesAction from '../actions/user-addresses.action';\nimport { AddressList, User } from '../../../occ/occ-models/index';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n} from '../../../global-message/index';\nimport { UserService } from '../../facade/index';\nimport { OccUserService } from '../../occ/index';\n\n@Injectable()\nexport class UserAddressesEffects {\n  @Effect()\n  loadUserAddresses$: Observable<\n    fromUserAddressesAction.UserAddressesAction\n  > = this.actions$.pipe(\n    ofType(fromUserAddressesAction.LOAD_USER_ADDRESSES),\n    map((action: fromUserAddressesAction.LoadUserAddresses) => action.payload),\n    mergeMap(payload => {\n      return this.occUserService.loadUserAddresses(payload).pipe(\n        map((addressesList: AddressList) => {\n          return new fromUserAddressesAction.LoadUserAddressesSuccess(\n            addressesList.addresses\n          );\n        }),\n        catchError(error =>\n          of(new fromUserAddressesAction.LoadUserAddressesFail(error))\n        )\n      );\n    })\n  );\n\n  @Effect()\n  addUserAddress$: Observable<\n    fromUserAddressesAction.UserAddressesAction\n  > = this.actions$.pipe(\n    ofType(fromUserAddressesAction.ADD_USER_ADDRESS),\n    map((action: fromUserAddressesAction.AddUserAddress) => action.payload),\n    mergeMap(payload => {\n      return this.occUserService\n        .addUserAddress(payload.userId, payload.address)\n        .pipe(\n          map((data: any) => {\n            return new fromUserAddressesAction.AddUserAddressSuccess(data);\n          }),\n          catchError(error =>\n            of(new fromUserAddressesAction.AddUserAddressFail(error))\n          )\n        );\n    })\n  );\n\n  @Effect()\n  updateUserAddress$: Observable<\n    fromUserAddressesAction.UserAddressesAction\n  > = this.actions$.pipe(\n    ofType(fromUserAddressesAction.UPDATE_USER_ADDRESS),\n    map((action: fromUserAddressesAction.UpdateUserAddress) => action.payload),\n    mergeMap(payload => {\n      return this.occUserService\n        .updateUserAddress(payload.userId, payload.addressId, payload.address)\n        .pipe(\n          map((data: any) => {\n            return new fromUserAddressesAction.UpdateUserAddressSuccess(data);\n          }),\n          catchError(error =>\n            of(new fromUserAddressesAction.UpdateUserAddressFail(error))\n          )\n        );\n    })\n  );\n\n  @Effect()\n  deleteUserAddress$: Observable<\n    fromUserAddressesAction.UserAddressesAction\n  > = this.actions$.pipe(\n    ofType(fromUserAddressesAction.DELETE_USER_ADDRESS),\n    map((action: fromUserAddressesAction.DeleteUserAddress) => action.payload),\n    mergeMap(payload => {\n      return this.occUserService\n        .deleteUserAddress(payload.userId, payload.addressId)\n        .pipe(\n          map((data: any) => {\n            return new fromUserAddressesAction.DeleteUserAddressSuccess(data);\n          }),\n          catchError(error =>\n            of(new fromUserAddressesAction.DeleteUserAddressFail(error))\n          )\n        );\n    })\n  );\n\n  /**\n   *  Reload addresses and notify about add success\n   */\n  @Effect({ dispatch: false })\n  showGlobalMessageOnAddSuccess$ = this.actions$.pipe(\n    ofType(fromUserAddressesAction.ADD_USER_ADDRESS_SUCCESS),\n    tap(() => {\n      this.loadAddresses();\n      this.showGlobalMessage('New address was added successfully!');\n    })\n  );\n\n  /**\n   *  Reload addresses and notify about update success\n   */\n  @Effect({ dispatch: false })\n  showGlobalMessageOnUpdateSuccess$ = this.actions$.pipe(\n    ofType(fromUserAddressesAction.UPDATE_USER_ADDRESS_SUCCESS),\n    tap(() => {\n      this.loadAddresses();\n      this.showGlobalMessage('Address updated successfully!');\n    })\n  );\n\n  /**\n   *  Reload addresses and notify about delete success\n   */\n  @Effect({ dispatch: false })\n  showGlobalMessageOnDeleteSuccess$ = this.actions$.pipe(\n    ofType(fromUserAddressesAction.DELETE_USER_ADDRESS_SUCCESS),\n    tap(() => {\n      this.loadAddresses();\n      this.showGlobalMessage('Address deleted successfully!');\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService,\n    private userService: UserService,\n    private messageService: GlobalMessageService\n  ) {}\n\n  /**\n   * Show global confirmation message with provided text\n   */\n  private showGlobalMessage(text: string) {\n    // ----------\n    // todo: handle automatic removal of outdated messages\n    this.messageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n    this.messageService.remove(GlobalMessageType.MSG_TYPE_CONFIRMATION);\n    // ----------\n\n    this.messageService.add({\n      type: GlobalMessageType.MSG_TYPE_CONFIRMATION,\n      text,\n    });\n  }\n\n  private loadAddresses() {\n    this.userService\n      .get()\n      .pipe(take(1))\n      .subscribe(({ uid }: User) => {\n        this.userService.loadAddresses(uid);\n      });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, concatMap, map, mergeMap } from 'rxjs/operators';\nimport { User } from '../../../occ/occ-models/index';\nimport { OccUserService } from '../../occ/index';\nimport * as fromUserDetailsAction from '../actions/user-details.action';\n\n@Injectable()\nexport class UserDetailsEffects {\n  @Effect()\n  loadUserDetails$: Observable<\n    fromUserDetailsAction.UserDetailsAction\n  > = this.actions$.pipe(\n    ofType(fromUserDetailsAction.LOAD_USER_DETAILS),\n    map((action: fromUserDetailsAction.LoadUserDetails) => action.payload),\n    mergeMap(userId => {\n      return this.occUserService.loadUser(userId).pipe(\n        map((user: User) => {\n          return new fromUserDetailsAction.LoadUserDetailsSuccess(user);\n        }),\n        catchError(error =>\n          of(new fromUserDetailsAction.LoadUserDetailsFail(error))\n        )\n      );\n    })\n  );\n\n  @Effect()\n  updateUserDetails$: Observable<\n    | fromUserDetailsAction.UpdateUserDetailsSuccess\n    | fromUserDetailsAction.UpdateUserDetailsFail\n  > = this.actions$.pipe(\n    ofType(fromUserDetailsAction.UPDATE_USER_DETAILS),\n    map((action: fromUserDetailsAction.UpdateUserDetails) => action.payload),\n    concatMap(payload =>\n      this.occUserService\n        .updateUserDetails(payload.username, payload.userDetails)\n        .pipe(\n          map(\n            _ =>\n              new fromUserDetailsAction.UpdateUserDetailsSuccess(\n                payload.userDetails\n              )\n          ),\n          catchError(error =>\n            of(new fromUserDetailsAction.UpdateUserDetailsFail(error))\n          )\n        )\n    )\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport { Action } from '@ngrx/store';\n\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap, catchError } from 'rxjs/operators';\n\nimport { USER_ORDERS } from '../user-state';\nimport { CLEAR_MISCS_DATA } from '../actions/index';\nimport * as fromUserOrdersAction from '../actions/user-orders.action';\nimport { LoaderResetAction } from '../../../state';\nimport { OccOrderService } from '../../occ/index';\nimport { OrderHistoryList } from '../../../occ/occ-models/index';\n\n@Injectable()\nexport class UserOrdersEffect {\n  constructor(\n    private actions$: Actions,\n    private occOrderService: OccOrderService\n  ) {}\n\n  @Effect()\n  loadUserOrders$: Observable<\n    fromUserOrdersAction.UserOrdersAction\n  > = this.actions$.pipe(\n    ofType(fromUserOrdersAction.LOAD_USER_ORDERS),\n    map((action: fromUserOrdersAction.LoadUserOrders) => action.payload),\n    switchMap(payload => {\n      return this.occOrderService\n        .getOrders(\n          payload.userId,\n          payload.pageSize,\n          payload.currentPage,\n          payload.sort\n        )\n        .pipe(\n          map((orders: OrderHistoryList) => {\n            return new fromUserOrdersAction.LoadUserOrdersSuccess(orders);\n          }),\n          catchError(error =>\n            of(new fromUserOrdersAction.LoadUserOrdersFail(error))\n          )\n        );\n    })\n  );\n\n  @Effect()\n  resetUserOrders$: Observable<Action> = this.actions$.pipe(\n    ofType(CLEAR_MISCS_DATA, fromUserOrdersAction.CLEAR_USER_ORDERS),\n    map(() => {\n      return new LoaderResetAction(USER_ORDERS);\n    })\n  );\n}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, catchError, switchMap } from 'rxjs/operators';\n\nimport * as fromActions from '../actions/user-register.action';\nimport { LoadUserToken, Logout } from '../../../auth/index';\nimport { UserRegisterFormData } from '../../../user/model/user.model';\nimport { OccUserService } from '../../../user/occ/index';\n\n@Injectable()\nexport class UserRegisterEffects {\n  @Effect()\n  registerUser$: Observable<\n    fromActions.UserRegisterOrRemoveAction | LoadUserToken\n  > = this.actions$.pipe(\n    ofType(fromActions.REGISTER_USER),\n    map((action: fromActions.RegisterUser) => action.payload),\n    mergeMap((user: UserRegisterFormData) => {\n      return this.userService.registerUser(user).pipe(\n        switchMap(_result => [\n          new LoadUserToken({\n            userId: user.uid,\n            password: user.password,\n          }),\n          new fromActions.RegisterUserSuccess(),\n        ]),\n        catchError(error => of(new fromActions.RegisterUserFail(error)))\n      );\n    })\n  );\n\n  @Effect()\n  removeUser$: Observable<\n    fromActions.UserRegisterOrRemoveAction | Logout\n  > = this.actions$.pipe(\n    ofType(fromActions.REMOVE_USER),\n    map((action: fromActions.RemoveUser) => action.payload),\n    mergeMap((userId: string) => {\n      return this.userService.removeUser(userId).pipe(\n        switchMap(_result => [\n          new fromActions.RemoveUserSuccess(),\n          new Logout(),\n        ]),\n        catchError(error => of(new fromActions.RemoveUserFail(error)))\n      );\n    })\n  );\n\n  constructor(private actions$: Actions, private userService: OccUserService) {}\n}\n","import { BillingCountriesEffect } from './billing-countries.effect';\nimport { DeliveryCountriesEffects } from './delivery-countries.effect';\nimport { ForgotPasswordEffects } from './forgot-password.effect';\nimport { OrderDetailsEffect } from './order-details.effect';\nimport { UserPaymentMethodsEffects } from './payment-methods.effect';\nimport { RegionsEffects } from './regions.effect';\nimport { ResetPasswordEffects } from './reset-password.effect';\nimport { TitlesEffects } from './titles.effect';\nimport { UpdateEmailEffects } from './update-email.effect';\nimport { UpdatePasswordEffects } from './update-password.effect';\nimport { UserAddressesEffects } from './user-addresses.effect';\nimport { UserDetailsEffects } from './user-details.effect';\nimport { UserOrdersEffect } from './user-orders.effect';\nimport { UserRegisterEffects } from './user-register.effect';\n\nexport const effects: any[] = [\n  DeliveryCountriesEffects,\n  RegionsEffects,\n  TitlesEffects,\n  UserDetailsEffects,\n  UserAddressesEffects,\n  UserPaymentMethodsEffects,\n  UserRegisterEffects,\n  UserOrdersEffect,\n  OrderDetailsEffect,\n  BillingCountriesEffect,\n  ResetPasswordEffects,\n  ForgotPasswordEffects,\n  UpdateEmailEffects,\n  UpdatePasswordEffects,\n];\n\nexport * from './billing-countries.effect';\nexport * from './delivery-countries.effect';\nexport * from './order-details.effect';\nexport * from './payment-methods.effect';\nexport * from './regions.effect';\nexport * from './reset-password.effect';\nexport * from './titles.effect';\nexport * from './user-addresses.effect';\nexport * from './user-details.effect';\nexport * from './user-orders.effect';\nexport * from './user-register.effect';\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { RouterModule } from '@angular/router';\n\nimport { metaReducers, reducerToken, reducerProvider } from './reducers/index';\nimport { effects } from './effects/index';\nimport { USER_FEATURE } from './user-state';\nimport { StateModule } from '../../state/state.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    StateModule,\n    StoreModule.forFeature(USER_FEATURE, reducerToken, { metaReducers }),\n    EffectsModule.forFeature(effects),\n    RouterModule,\n  ],\n  providers: [reducerProvider],\n})\nexport class UserStoreModule {}\n","import { NgModule } from '@angular/core';\nimport { ProcessModule } from '../process/process.module';\nimport { UserService } from './facade/index';\nimport { UserOccModule } from './occ/user-occ.module';\nimport { UserStoreModule } from './store/user-store.module';\n\n@NgModule({\n  imports: [UserOccModule, UserStoreModule, ProcessModule],\n  providers: [UserService],\n})\nexport class UserModule {}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\nimport * as fromActions from '../actions/index';\nimport { AddMessage, GlobalMessageType } from '../../../global-message/index';\nimport { PRODUCT_NORMALIZER } from '../../../product/connectors/product/converters';\nimport { OccOrderService } from '../../../user/index';\nimport { OrderEntry } from '../../../occ/occ-models/index';\nimport * as fromUserActions from '../../../user/store/actions/index';\nimport { CartDeliveryConnector } from '../../../cart/connectors/delivery/cart-delivery.connector';\nimport { CartPaymentConnector } from '../../../cart/connectors/payment/cart-payment.connector';\nimport { ConverterService } from '../../../util/converter.service';\n\n@Injectable()\nexport class CheckoutEffects {\n  @Effect()\n  addDeliveryAddress$: Observable<\n    | fromUserActions.LoadUserAddresses\n    | fromActions.SetDeliveryAddress\n    | fromActions.AddDeliveryAddressFail\n  > = this.actions$.pipe(\n    ofType(fromActions.ADD_DELIVERY_ADDRESS),\n    map((action: fromActions.AddDeliveryAddress) => action.payload),\n    mergeMap(payload =>\n      this.cartDeliveryConnector\n        .createAddress(payload.userId, payload.cartId, payload.address)\n        .pipe(\n          mergeMap(address => {\n            address['titleCode'] = payload.address.titleCode;\n            return [\n              new fromUserActions.LoadUserAddresses(payload.userId),\n              new fromActions.SetDeliveryAddress({\n                userId: payload.userId,\n                cartId: payload.cartId,\n                address: address,\n              }),\n            ];\n          }),\n          catchError(error => of(new fromActions.AddDeliveryAddressFail(error)))\n        )\n    )\n  );\n\n  @Effect()\n  setDeliveryAddress$: Observable<\n    fromActions.SetDeliveryAddressSuccess | fromActions.SetDeliveryAddressFail\n  > = this.actions$.pipe(\n    ofType(fromActions.SET_DELIVERY_ADDRESS),\n    map((action: any) => action.payload),\n    mergeMap(payload => {\n      return this.cartDeliveryConnector\n        .setAddress(payload.userId, payload.cartId, payload.address.id)\n        .pipe(\n          map(() => new fromActions.SetDeliveryAddressSuccess(payload.address)),\n          catchError(error => of(new fromActions.SetDeliveryAddressFail(error)))\n        );\n    })\n  );\n\n  @Effect()\n  loadSupportedDeliveryModes$: Observable<\n    | fromActions.LoadSupportedDeliveryModesSuccess\n    | fromActions.LoadSupportedDeliveryModesFail\n  > = this.actions$.pipe(\n    ofType(fromActions.LOAD_SUPPORTED_DELIVERY_MODES),\n    map((action: any) => action.payload),\n    mergeMap(payload => {\n      return this.cartDeliveryConnector\n        .getSupportedModes(payload.userId, payload.cartId)\n        .pipe(\n          map(data => {\n            return new fromActions.LoadSupportedDeliveryModesSuccess(data);\n          }),\n          catchError(error =>\n            of(new fromActions.LoadSupportedDeliveryModesFail(error))\n          )\n        );\n    })\n  );\n\n  @Effect()\n  setDeliveryMode$: Observable<\n    fromActions.SetDeliveryModeSuccess | fromActions.SetDeliveryModeFail\n  > = this.actions$.pipe(\n    ofType(fromActions.SET_DELIVERY_MODE),\n    map((action: any) => action.payload),\n    mergeMap(payload => {\n      return this.cartDeliveryConnector\n        .setMode(payload.userId, payload.cartId, payload.selectedModeId)\n        .pipe(\n          map(\n            () => new fromActions.SetDeliveryModeSuccess(payload.selectedModeId)\n          ),\n          catchError(error => of(new fromActions.SetDeliveryModeFail(error)))\n        );\n    })\n  );\n\n  @Effect()\n  createPaymentDetails$: Observable<\n    | fromUserActions.LoadUserPaymentMethods\n    | fromActions.CreatePaymentDetailsSuccess\n    | fromActions.CreatePaymentDetailsFail\n  > = this.actions$.pipe(\n    ofType(fromActions.CREATE_PAYMENT_DETAILS),\n    map((action: any) => action.payload),\n    mergeMap(payload => {\n      // get information for creating a subscription directly with payment provider\n      return this.cartPaymentConnector\n        .create(payload.userId, payload.cartId, payload.paymentDetails)\n        .pipe(\n          mergeMap(details => {\n            return [\n              new fromUserActions.LoadUserPaymentMethods(payload.userId),\n              new fromActions.CreatePaymentDetailsSuccess(details),\n            ];\n          }),\n          catchError(error =>\n            of(new fromActions.CreatePaymentDetailsFail(error))\n          )\n        );\n    })\n  );\n\n  @Effect()\n  setPaymentDetails$: Observable<\n    fromActions.SetPaymentDetailsSuccess | fromActions.SetPaymentDetailsFail\n  > = this.actions$.pipe(\n    ofType(fromActions.SET_PAYMENT_DETAILS),\n    map((action: any) => action.payload),\n    mergeMap(payload => {\n      return this.cartPaymentConnector\n        .set(payload.userId, payload.cartId, payload.paymentDetails.id)\n        .pipe(\n          map(\n            () =>\n              new fromActions.SetPaymentDetailsSuccess(payload.paymentDetails)\n          ),\n          catchError(error => of(new fromActions.SetPaymentDetailsFail(error)))\n        );\n    })\n  );\n\n  @Effect()\n  placeOrder$: Observable<\n    fromActions.PlaceOrderSuccess | AddMessage | fromActions.PlaceOrderFail\n  > = this.actions$.pipe(\n    ofType(fromActions.PLACE_ORDER),\n    map((action: any) => action.payload),\n    mergeMap(payload => {\n      return this.occOrderService\n        .placeOrder(payload.userId, payload.cartId)\n        .pipe(\n          map(data => {\n            for (const entry of data.entries as OrderEntry[]) {\n              entry.product = this.converter.convert(\n                entry.product,\n                PRODUCT_NORMALIZER\n              ) as any;\n            }\n            return data;\n          }),\n          switchMap(data => [\n            new fromActions.PlaceOrderSuccess(data),\n            new AddMessage({\n              text: 'Order placed successfully',\n              type: GlobalMessageType.MSG_TYPE_CONFIRMATION,\n            }),\n          ]),\n          catchError(error => of(new fromActions.PlaceOrderFail(error)))\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private cartDeliveryConnector: CartDeliveryConnector,\n    private cartPaymentConnector: CartPaymentConnector,\n    private occOrderService: OccOrderService,\n    private converter: ConverterService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\n\nimport * as fromAction from '../actions/card-types.action';\nimport { OccMiscsService } from '../../../occ/miscs/miscs.service';\n\n@Injectable()\nexport class CardTypesEffects {\n  @Effect()\n  loadCardTypes$: Observable<\n    fromAction.LoadCardTypesSuccess | fromAction.LoadCardTypesFail\n  > = this.actions$.pipe(\n    ofType(fromAction.LOAD_CARD_TYPES),\n    switchMap(() => {\n      return this.occMiscsService.loadCardTypes().pipe(\n        map(data => new fromAction.LoadCardTypesSuccess(data.cardTypes)),\n        catchError(error => of(new fromAction.LoadCardTypesFail(error)))\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occMiscsService: OccMiscsService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\n\nimport * as fromAction from '../actions/address-verification.action';\nimport { OccUserService } from '../../../user/occ/user.service';\n\n@Injectable()\nexport class AddressVerificationEffect {\n  @Effect()\n  verifyAddress$: Observable<\n    fromAction.VerifyAddressSuccess | fromAction.VerifyAddressFail\n  > = this.actions$.pipe(\n    ofType(fromAction.VERIFY_ADDRESS),\n    map((action: any) => action.payload),\n    mergeMap(payload =>\n      this.occUserService.verifyAddress(payload.userId, payload.address).pipe(\n        map(data => {\n          return new fromAction.VerifyAddressSuccess(data);\n        }),\n        catchError(error => of(new fromAction.VerifyAddressFail(error)))\n      )\n    )\n  );\n\n  constructor(\n    private actions$: Actions,\n    private occUserService: OccUserService\n  ) {}\n}\n","import { CheckoutEffects } from './checkout.effect';\nimport { CardTypesEffects } from './card-types.effect';\nimport { AddressVerificationEffect } from './address-verification.effect';\n\nexport const effects: any[] = [\n  CheckoutEffects,\n  AddressVerificationEffect,\n  CardTypesEffects,\n];\n\nexport * from './checkout.effect';\nexport * from './card-types.effect';\nexport * from './address-verification.effect';\n","import { Injectable } from '@angular/core';\n\nimport { Store, select } from '@ngrx/store';\n\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport * as fromCheckoutStore from '../store/index';\nimport { CartDataService, ANONYMOUS_USERID } from '../../cart/index';\nimport {\n  PaymentDetails,\n  CardType,\n  Order,\n  DeliveryMode,\n  AddressValidation,\n  Address,\n} from '../../occ/occ-models/index';\n\n@Injectable()\nexport class CheckoutService {\n  constructor(\n    private checkoutStore: Store<fromCheckoutStore.CheckoutState>,\n    private cartData: CartDataService\n  ) {}\n\n  /**\n   * Get supported delivery modes\n   */\n  getSupportedDeliveryModes(): Observable<DeliveryMode[]> {\n    return this.checkoutStore.pipe(\n      select(fromCheckoutStore.getSupportedDeliveryModes)\n    );\n  }\n\n  /**\n   * Get selected delivery mode\n   */\n  getSelectedDeliveryMode(): Observable<DeliveryMode> {\n    return this.checkoutStore.pipe(\n      select(fromCheckoutStore.getSelectedDeliveryMode)\n    );\n  }\n\n  /**\n   * Get selected delivery mode code\n   */\n  getSelectedDeliveryModeCode(): Observable<string> {\n    return this.checkoutStore.pipe(select(fromCheckoutStore.getSelectedCode));\n  }\n\n  /**\n   * Get card types\n   */\n  getCardTypes(): Observable<CardType[]> {\n    return this.checkoutStore.pipe(select(fromCheckoutStore.getAllCardTypes));\n  }\n\n  /**\n   * Get delivery address\n   */\n  getDeliveryAddress(): Observable<Address> {\n    return this.checkoutStore.pipe(\n      select(fromCheckoutStore.getDeliveryAddress)\n    );\n  }\n\n  /**\n   * Get address verification results\n   */\n  getAddressVerificationResults(): Observable<AddressValidation | string> {\n    return this.checkoutStore.pipe(\n      select(fromCheckoutStore.getAddressVerificationResults),\n      filter(results => Object.keys(results).length !== 0)\n    );\n  }\n\n  /**\n   * Get payment details\n   */\n  getPaymentDetails(): Observable<PaymentDetails> {\n    return this.checkoutStore.pipe(select(fromCheckoutStore.getPaymentDetails));\n  }\n\n  /**\n   * Get order details\n   */\n  getOrderDetails(): Observable<Order> {\n    return this.checkoutStore.pipe(\n      select(fromCheckoutStore.getCheckoutOrderDetails)\n    );\n  }\n\n  /**\n   * Create and set a delivery address using the address param\n   * @param address : the Address to be created and set\n   */\n  createAndSetAddress(address: Address): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.AddDeliveryAddress({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          address: address,\n        })\n      );\n    }\n  }\n\n  /**\n   * Load supported delivery modes\n   */\n  loadSupportedDeliveryModes(): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.LoadSupportedDeliveryModes({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n        })\n      );\n    }\n  }\n\n  /**\n   * Set delivery mode\n   * @param mode : The delivery mode to be set\n   */\n  setDeliveryMode(mode: string): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.SetDeliveryMode({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          selectedModeId: mode,\n        })\n      );\n    }\n  }\n\n  /**\n   * Load the supported card types\n   */\n  loadSupportedCardTypes(): void {\n    this.checkoutStore.dispatch(new fromCheckoutStore.LoadCardTypes());\n  }\n\n  /**\n   * Create payment details using the given paymentDetails param\n   * @param paymentDetails: the PaymentDetails to be created\n   */\n  createPaymentDetails(paymentDetails: PaymentDetails): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.CreatePaymentDetails({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n          paymentDetails,\n        })\n      );\n    }\n  }\n\n  /**\n   * Places an order\n   */\n  placeOrder(): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.PlaceOrder({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cartId,\n        })\n      );\n    }\n  }\n\n  /**\n   * Verifies the address\n   * @param address : the address to be verified\n   */\n  verifyAddress(address: Address): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.VerifyAddress({\n          userId: this.cartData.userId,\n          address,\n        })\n      );\n    }\n  }\n\n  /**\n   * Set delivery address\n   * @param address : The address to be set\n   */\n  setDeliveryAddress(address: Address): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.SetDeliveryAddress({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cart.code,\n          address: address,\n        })\n      );\n    }\n  }\n\n  /**\n   * Set payment details\n   * @param paymentDetails : the PaymentDetails to be set\n   */\n  setPaymentDetails(paymentDetails: PaymentDetails): void {\n    if (this.actionAllowed()) {\n      this.checkoutStore.dispatch(\n        new fromCheckoutStore.SetPaymentDetails({\n          userId: this.cartData.userId,\n          cartId: this.cartData.cart.code,\n          paymentDetails: paymentDetails,\n        })\n      );\n    }\n  }\n\n  /**\n   * Clear address verification results\n   */\n  clearAddressVerificationResults(): void {\n    this.checkoutStore.dispatch(\n      new fromCheckoutStore.ClearAddressVerificationResults()\n    );\n  }\n\n  /**\n   * Clear checkout data\n   */\n  clearCheckoutData(): void {\n    this.checkoutStore.dispatch(new fromCheckoutStore.ClearCheckoutData());\n  }\n\n  /**\n   * Clear checkout step\n   * @param stepNumber : the step number to be cleared\n   */\n  clearCheckoutStep(stepNumber: number): void {\n    this.checkoutStore.dispatch(\n      new fromCheckoutStore.ClearCheckoutStep(stepNumber)\n    );\n  }\n\n  private actionAllowed(): boolean {\n    return this.cartData.userId !== ANONYMOUS_USERID;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { metaReducers, reducerToken, reducerProvider } from './reducers/index';\nimport { effects } from './effects/index';\nimport { CHECKOUT_FEATURE } from './checkout-state';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    StoreModule.forFeature(CHECKOUT_FEATURE, reducerToken, { metaReducers }),\n    EffectsModule.forFeature(effects),\n  ],\n  providers: [reducerProvider],\n})\nexport class CheckoutStoreModule {}\n","import { StaticProvider } from '@angular/core';\n\nimport { AuthConfig } from '../../auth/config/auth-config';\nimport { OccConfig } from '../../occ/config/occ-config';\nimport { Routes } from '@angular/router';\n\nexport interface StandardCmsComponentConfig {\n  CMSSiteContextComponent?: CmsComponentMapping;\n  CMSLinkComponent?: CmsComponentMapping;\n  SimpleResponsiveBannerComponent?: CmsComponentMapping;\n  SimpleBannerComponent?: CmsComponentMapping;\n  BannerComponent?: CmsComponentMapping;\n  CMSParagraphComponent?: CmsComponentMapping;\n  BreadcrumbComponent?: CmsComponentMapping;\n  NavigationComponent?: CmsComponentMapping;\n  FooterNavigationComponent?: CmsComponentMapping;\n  CategoryNavigationComponent?: CmsComponentMapping;\n  ProductAddToCartComponent?: CmsComponentMapping;\n  MiniCartComponent?: CmsComponentMapping;\n  ProductCarouselComponent?: CmsComponentMapping;\n  SearchBoxComponent?: CmsComponentMapping;\n  ProductReferencesComponent?: CmsComponentMapping;\n  CMSTabParagraphComponent?: CmsComponentMapping;\n  LoginComponent?: CmsComponentMapping;\n}\n\nexport interface JspIncludeCmsComponentConfig {\n  AccountAddressBookComponent?: CmsComponentMapping;\n  ForgotPasswordComponent?: CmsComponentMapping;\n  ResetPasswordComponent?: CmsComponentMapping;\n}\n\nexport const JSP_INCLUDE_CMS_COMPONENT_TYPE = 'JspIncludeComponent';\nexport const CMS_FLEX_COMPONENT_TYPE = 'CMSFlexComponent';\n\nexport interface CmsComponentMapping {\n  selector?: string;\n  providers?: StaticProvider[];\n  childRoutes?: Routes;\n  disableSSR?: boolean;\n  i18nKeys?: string[];\n  guards?: any[];\n}\n\nexport interface CMSComponentConfig\n  extends StandardCmsComponentConfig,\n    JspIncludeCmsComponentConfig {\n  [_: string]: CmsComponentMapping;\n}\n\nexport abstract class CmsConfig extends OccConfig implements AuthConfig {\n  authentication?: {\n    client_id?: string;\n    client_secret?: string;\n  };\n\n  cmsComponents?: CMSComponentConfig;\n}\n","import { ContentSlotComponentData } from '../model/content-slot-component-data.model';\nimport { CmsConfig } from './cms-config';\n\n/**\n * The `CmsPageConfig` is used to build pages by configuration.\n * The interfaces are designed to have a clean configuration for\n * static CMS structure. Ordinary attributes that are not\n * required for configurable pages have been left out and\n * will not be serialized in the adapter logic.\n */\nexport interface CmsPageConfig {\n  /**\n   * When the `ignoreBackend` is set to true, the CMS backend\n   * will not be consumed. This saves network latency and is\n   * useful for commodity commerce pages.\n   * */\n  ignoreBackend?: boolean;\n\n  pageId?: string;\n\n  type?: string;\n\n  /**\n   * The page title is typically used to display the page heading\n   * as well as for the page title tag. The latter is used for browser\n   * navigation as well as SEO and social share platforms.\n   */\n  title?: string;\n\n  /**\n   * the template is used to bind to the layout\n   * configuration and css layout class\n   */\n  template?: string;\n\n  /**\n   * The page slots represent various sections on the page that\n   * can contain components.\n   */\n  slots: { [key: string]: CmsPageSlotConfig };\n}\n\n/**\n * The `CmsPageSlotsConfig` (plural) holds `CmsPageSlotConfig` objects.\n */\nexport interface CmsPageSlotsConfig {\n  [key: string]: CmsPageSlotConfig;\n}\n\n/**\n * The `CmsPageSlotConfig` is a simplified configuration model\n * that can be used to configure slots in static configuration,\n * rather than loading from a backend.\n */\nexport interface CmsPageSlotConfig {\n  componentIds?: string[];\n  properties?: any;\n}\n\n/**\n * The `CmsStructureConfig` is used to build pages in Spartacus by configuration\n * instead of using a backend CMS system. The configuration can be used to build\n * complete pages or parts of a page. The `CmsStructureConfig` is optimized to\n * only require the necessary properties. Adapter logic is applied to serialize\n * the `CmsStructureConfig` into the required UI model.\n */\nexport abstract class CmsStructureConfig extends CmsConfig {\n  cmsStructure: {\n    components?: { [key: string]: ContentSlotComponentData | any };\n    pages?: CmsPageConfig[];\n    slots?: CmsPageSlotsConfig;\n  };\n}\n","import { ContentSlotData } from './content-slot-data.model';\n\nimport { CmsComponent } from '../../occ/occ-models/index';\n\nexport interface Page {\n  pageId?: string;\n  name?: string;\n  type?: string;\n  title?: string;\n  template?: string;\n  loadTime?: number;\n  slots: { [key: string]: ContentSlotData };\n  properties?: any;\n}\n\n/**\n * Represents the cms structure for pages, slots and components.\n */\nexport interface CmsStructureModel {\n  page?: Page;\n  components?: CmsComponent[];\n}\n\n/**\n * Represents the page meta data that can be used\n * to resolve page data and seo related data.\n */\nexport interface PageMeta {\n  /**\n   * the page title is used for the page title tag which\n   * is visible in the browser navigation as well as in the\n   * Search Engine Result Page\n   */\n  title?: string;\n\n  /**\n   * the page heading is typically used in the UI\n   */\n  heading?: string;\n\n  /**\n   * the page description is used in the Search Engine Result Page\n   */\n  description?: string;\n\n  /**\n   * the robots information drives search engines to index the page and\n   * follow links in the page\n   */\n  robots?: PageRobotsMeta[];\n\n  /**\n   * image that can be added to the og:image metatag\n   */\n  image?: string;\n}\n\nexport enum PageRobotsMeta {\n  INDEX = 'INDEX',\n  NOINDEX = 'NOINDEX',\n  FOLLOW = 'FOLLOW',\n  NOFOLLOW = 'NOFOLLOW',\n}\n","import { InjectionToken } from '@angular/core';\nimport { CmsStructureModel } from '../../model/page.model';\nimport { Converter } from '../../../util/converter.service';\n\nexport const CMS_PAGE_NORMALIZE = new InjectionToken<\n  Converter<any, CmsStructureModel>\n>('CmsPageNormalizer');\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { PageType } from '../../occ/occ-models/index';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { PageContext } from '../../routing/index';\nimport { CmsPageAdapter } from '../connectors/page/cms-page.adapter';\nimport { CMS_PAGE_NORMALIZE } from '../connectors/page/converters';\nimport { ConverterService } from '../../util/converter.service';\nimport { CmsStructureModel } from '../model/page.model';\n\n@Injectable()\nexport class OccCmsPageAdapter implements CmsPageAdapter {\n  protected headers = new HttpHeaders().set('Content-Type', 'application/json');\n\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  load(\n    pageContext: PageContext,\n    fields?: string\n  ): Observable<CmsStructureModel> {\n    const httpParams = this.getPagesRequestParams(pageContext);\n\n    return this.http\n      .get(this.getPagesEndpoint(httpParams, fields), {\n        headers: this.headers,\n      })\n      .pipe(this.converter.pipeable(CMS_PAGE_NORMALIZE));\n  }\n\n  private getPagesEndpoint(\n    params: {\n      [key: string]: string;\n    },\n    fields?: string\n  ): string {\n    fields = fields ? fields : 'DEFAULT';\n    return this.occEndpoints.getUrl('pages', { fields }, params);\n  }\n\n  private getPagesRequestParams(\n    pageContext: PageContext\n  ): { [key: string]: any } {\n    let httpParams = {};\n\n    if (pageContext.id !== 'smartedit-preview') {\n      httpParams = { pageType: pageContext.type };\n\n      if (pageContext.type === PageType.CONTENT_PAGE) {\n        httpParams['pageLabelOrId'] = pageContext.id;\n      } else {\n        httpParams['code'] = pageContext.id;\n      }\n    }\n    return httpParams;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CMSPage } from '../../../occ';\nimport {\n  CMS_FLEX_COMPONENT_TYPE,\n  JSP_INCLUDE_CMS_COMPONENT_TYPE,\n} from '../../config/cms-config';\nimport { ContentSlotComponentData } from '../../model/content-slot-component-data.model';\nimport { ContentSlotData } from '../../model/content-slot-data.model';\nimport { CmsStructureModel } from '../../model/page.model';\nimport { Converter } from '../../../util/converter.service';\n\n@Injectable()\nexport class OccCmsPageNormalizer\n  implements Converter<CMSPage, CmsStructureModel> {\n  convert(source: CMSPage, target: CmsStructureModel = {}): CmsStructureModel {\n    this.normalizePageData(source, target);\n    this.normalizePageSlotData(source, target);\n    this.normalizePageComponentData(source, target);\n    this.normalizeComponentData(source, target);\n    return target;\n  }\n\n  private normalizePageData(source: any, target: CmsStructureModel): void {\n    target.page = {\n      loadTime: Date.now(),\n      name: source.name,\n      type: source.typeCode,\n      title: source.title,\n      pageId: source.uid,\n      template: source.template,\n      slots: {},\n      properties: source.properties,\n    };\n  }\n\n  private normalizePageSlotData(source: any, target: CmsStructureModel): void {\n    for (const slot of source.contentSlots.contentSlot) {\n      target.page.slots[slot.position] = {\n        components: [],\n        properties: slot.properties,\n      } as ContentSlotData;\n    }\n  }\n\n  private normalizePageComponentData(\n    source: any,\n    target: CmsStructureModel\n  ): void {\n    for (const slot of source.contentSlots.contentSlot) {\n      if (\n        slot.components.component &&\n        Array.isArray(slot.components.component)\n      ) {\n        for (const component of slot.components.component) {\n          const comp: ContentSlotComponentData = {\n            uid: component.uid,\n            typeCode: component.typeCode,\n            properties: component.properties,\n          };\n\n          if (component.typeCode === CMS_FLEX_COMPONENT_TYPE) {\n            comp.flexType = component.flexType;\n          } else if (component.typeCode === JSP_INCLUDE_CMS_COMPONENT_TYPE) {\n            comp.flexType = component.uid;\n          } else {\n            comp.flexType = component.typeCode;\n          }\n          target.page.slots[slot.position].components.push(comp);\n        }\n      }\n    }\n  }\n\n  private normalizeComponentData(source: any, target: CmsStructureModel): void {\n    target.components = [];\n\n    for (const slot of source.contentSlots.contentSlot) {\n      if (\n        slot.components.component &&\n        Array.isArray(slot.components.component)\n      ) {\n        for (const component of slot.components.component as any) {\n          // we dont put properties into component state\n          if (component.properties) {\n            component.properties = undefined;\n          }\n          target.components.push(component);\n        }\n      }\n    }\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { CmsComponent } from '../../../occ/occ-models/index';\nimport { Converter } from '../../../util/converter.service';\n\nexport const CMS_COMPONENT_NORMALIZER = new InjectionToken<\n  Converter<any, CmsComponent>\n>('CmsComponentNormalizer');\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport {\n  CmsComponent,\n  CmsComponentList,\n  PageType,\n} from '../../occ/occ-models/index';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { PageContext } from '../../routing/index';\nimport { CmsComponentAdapter } from '../connectors/component/cms-component.adapter';\nimport { IdList } from '../model/idList.model';\nimport { ConverterService } from '../../util/converter.service';\nimport { CMS_COMPONENT_NORMALIZER } from '../connectors/component/converters';\nimport { pluck } from 'rxjs/operators';\n\n@Injectable()\nexport class OccCmsComponentAdapter implements CmsComponentAdapter {\n  protected headers = new HttpHeaders().set('Content-Type', 'application/json');\n\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  load<T extends CmsComponent>(\n    id: string,\n    pageContext: PageContext\n  ): Observable<T> {\n    return this.http\n      .get<T>(this.getComponentEndPoint(id, pageContext), {\n        headers: this.headers,\n      })\n      .pipe(this.converter.pipeable<any, T>(CMS_COMPONENT_NORMALIZER));\n  }\n\n  loadList(\n    ids: string[],\n    pageContext: PageContext,\n    fields = 'DEFAULT',\n    currentPage = 0,\n    pageSize = ids.length,\n    sort?: string\n  ): Observable<CmsComponent[]> {\n    const requestParams = this.getComponentsRequestParams(\n      pageContext,\n      currentPage,\n      pageSize,\n      sort\n    );\n\n    const idList: IdList = { idList: ids };\n\n    return this.http\n      .post<CmsComponentList>(\n        this.getComponentsEndpoint(requestParams, fields),\n        idList,\n        {\n          headers: this.headers,\n        }\n      )\n      .pipe(\n        pluck('component'),\n        this.converter.pipeableMany(CMS_COMPONENT_NORMALIZER)\n      );\n  }\n\n  protected getComponentEndPoint(id: string, pageContext: PageContext): string {\n    return this.occEndpoints.getUrl(\n      'component',\n      { id },\n      this.getComponentRequestParams(pageContext)\n    );\n  }\n\n  protected getComponentsEndpoint(requestParams: any, fields: string): string {\n    return this.occEndpoints.getUrl('components', { fields }, requestParams);\n  }\n\n  private getComponentsRequestParams(\n    pageContext: PageContext,\n    currentPage?: number,\n    pageSize?: number,\n    sort?: string\n  ): { [key: string]: string } {\n    const requestParams = this.getComponentRequestParams(pageContext);\n\n    if (currentPage !== undefined) {\n      requestParams['currentPage'] = currentPage.toString();\n    }\n    if (pageSize !== undefined) {\n      requestParams['pageSize'] = pageSize.toString();\n    }\n    if (sort !== undefined) {\n      requestParams['sort'] = sort;\n    }\n\n    return requestParams;\n  }\n\n  private getComponentRequestParams(\n    pageContext: PageContext\n  ): { [key: string]: string } {\n    let requestParams = {};\n    switch (pageContext.type) {\n      case PageType.PRODUCT_PAGE: {\n        requestParams = { productCode: pageContext.id };\n        break;\n      }\n      case PageType.CATEGORY_PAGE: {\n        requestParams = { categoryCode: pageContext.id };\n        break;\n      }\n      case PageType.CATALOG_PAGE: {\n        requestParams = { catalogCode: pageContext.id };\n        break;\n      }\n    }\n\n    return requestParams;\n  }\n}\n","import { Observable } from 'rxjs';\nimport { PageContext } from '../../../routing/models/page-context.model';\nimport { CmsStructureModel } from '../../model/page.model';\n\n/**\n * Abstract class that can be used to implement custom loader logic\n * in order to load CMS structure from third-party CMS system.\n */\nexport abstract class CmsPageAdapter {\n  /**\n   * Abstract method must be used to load the page structure for a given `PageContext`.\n   * The page can be loaded from alternative sources, as long as the structure\n   * converts to the `CmsStructureModel`.\n   *\n   * @param pageContext The `PageContext` holding the page Id.\n   */\n  abstract load(pageContext: PageContext): Observable<CmsStructureModel>;\n}\n","import {\n  Injectable,\n  Type,\n  ComponentFactoryResolver,\n  Inject,\n  Renderer2,\n  PLATFORM_ID,\n} from '@angular/core';\nimport { CmsConfig } from '../config/cms-config';\nimport { DOCUMENT, isPlatformBrowser } from '@angular/common';\n\n@Injectable()\nexport class ComponentMapperService {\n  missingComponents: string[] = [];\n\n  private loadedWebComponents: { [path: string]: any } = {};\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private config: CmsConfig,\n    @Inject(DOCUMENT) private document: any,\n    @Inject(PLATFORM_ID) private platform: any\n  ) {}\n\n  /**\n   * @desc\n   * returns a web component for the CMS typecode.\n   *\n   * The mapping of CMS components to web componetns requires a mapping.\n   * This is configurable when the module is loaded.\n   *\n   * For example:\n   *\n   *  {\n   *      'CMSLinkComponent': 'LinkComponent',\n   *      'SimpleResponsiveBannerComponent': 'SimpleResponsiveBannerComponent',\n   *      [etc.]\n   *  }\n   *\n   * The type codes are dynamic since they depend on the implementation.\n   * Customer will add, extend or ingore standard components.\n   *\n   * @param typeCode the component type\n   */\n  protected getType(typeCode: string): string {\n    const componentConfig = this.config.cmsComponents[typeCode];\n    if (!componentConfig) {\n      if (this.missingComponents.indexOf(typeCode) === -1) {\n        this.missingComponents.push(typeCode);\n        console.warn(\n          `No component implementation found for the CMS component type '${typeCode}'.\\n`,\n          `Make sure you implement a component and register it in the mapper.`\n        );\n      }\n    }\n    return componentConfig ? componentConfig.selector : null;\n  }\n\n  getFactoryEntryByCode(typeCode: string): any {\n    const alias = this.getType(typeCode);\n    if (!alias) {\n      return;\n    }\n    const factoryEntries = Array.from(\n      this.componentFactoryResolver['_factories'].entries()\n    );\n\n    const factory = factoryEntries.find(\n      ([, value]: any) => value.selector === alias\n    );\n    if (!factory) {\n      console.warn(\n        `No component factory found for the CMS component type '${typeCode}'.\\n`,\n        `Make sure you add a component to the 'entryComponents' array in the NgModule.`\n      );\n    }\n    return factory;\n  }\n\n  getComponentTypeByCode(typeCode: string): Type<any> {\n    const factoryEntry = this.getFactoryEntryByCode(typeCode);\n    return factoryEntry ? factoryEntry[0] : null;\n  }\n\n  getComponentFactoryByCode(typeCode: string): any {\n    const factoryEntry = this.getFactoryEntryByCode(typeCode);\n    return factoryEntry ? factoryEntry[1] : null;\n  }\n\n  isWebComponent(typeCode: string): boolean {\n    return (this.getType(typeCode) || '').includes('#');\n  }\n\n  initWebComponent(\n    componentType: string,\n    renderer: Renderer2\n  ): Promise<string> {\n    return new Promise(resolve => {\n      const [path, selector] = this.getType(componentType).split('#');\n\n      let script = this.loadedWebComponents[path];\n\n      if (!script) {\n        script = renderer.createElement('script');\n        this.loadedWebComponents[path] = script;\n        script.setAttribute('src', path);\n        renderer.appendChild(this.document.body, script);\n\n        if (isPlatformBrowser(this.platform)) {\n          script.onload = () => {\n            script.onload = null;\n          };\n        }\n      }\n\n      if (script.onload) {\n        // If script is still loading (has onload callback defined)\n        // add new callback and chain it with the existing one.\n        // Needed to support loading multiple components from one script\n        const chainedOnload = script.onload;\n        script.onload = () => {\n          chainedOnload();\n          resolve(selector);\n        };\n      } else {\n        resolve(selector);\n      }\n    });\n  }\n}\n","import { Observable } from 'rxjs';\nimport { PageContext } from '../../../routing/models/page-context.model';\nimport { CmsComponent } from '../../../occ/occ-models/index';\n\nexport abstract class CmsComponentAdapter {\n  /**\n   * Abstract method must be used to load the component for a given `id` and `PageContext`.\n   * The component can be loaded from alternative backend, as long as the structure\n   * converts to the `CmsStructureModel`.\n   *\n   * @param pageContext The `PageContext` holding the page Id.\n   */\n  abstract load<T extends CmsComponent>(\n    id: string,\n    pageContext: PageContext,\n    fields?: string\n  ): Observable<T>;\n\n  abstract loadList(\n    ids: string[],\n    pageContext: PageContext\n  ): Observable<CmsComponent[]>;\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { CmsPageAdapter } from '../connectors/page/cms-page.adapter';\nimport { ComponentMapperService } from '../services/component-mapper.service';\nimport { OccCmsComponentAdapter } from './occ-cms-component.adapter';\nimport { OccCmsPageNormalizer } from './converters/occ-cms-page-normalizer';\nimport { OccCmsPageAdapter } from './occ-cms-page.adapter';\nimport { CMS_PAGE_NORMALIZE } from '../connectors/page/converters';\nimport { CmsComponentAdapter } from '../connectors/component/cms-component.adapter';\n\n@NgModule({\n  imports: [CommonModule, HttpClientModule],\n  providers: [\n    ComponentMapperService,\n    {\n      provide: CmsPageAdapter,\n      useClass: OccCmsPageAdapter,\n    },\n    {\n      provide: CMS_PAGE_NORMALIZE,\n      useClass: OccCmsPageNormalizer,\n      multi: true,\n    },\n    {\n      provide: CmsComponentAdapter,\n      useClass: OccCmsComponentAdapter,\n    },\n  ],\n})\nexport class CmsOccModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport {\n  CmsPageConfig,\n  CmsPageSlotsConfig,\n  CmsStructureConfig,\n} from '../config/cms-structure.config';\nimport { ContentSlotComponentData } from '../model/content-slot-component-data.model';\nimport { CmsStructureModel } from '../model/page.model';\n\n/**\n * Service that provides access to CMS structure from a static\n * configuration or configuration file. This class uses static\n * configuration is designed in async fashion so that configuratiosn\n * can be loaded from a file or stream.\n *\n * The intend of the `CmsStructureConfigService` however is to provide\n * fast loading pages and default cms structure for comodoty commerce.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport abstract class CmsStructureConfigService {\n  constructor(protected cmsDataConfig: CmsStructureConfig) {}\n\n  /**\n   * Merge the cms structure to the pageStructure. The page structure\n   * can either hold complete page structures or global structures that\n   * might apply to all pages (such has header coponents).\n   */\n  mergePageStructure(\n    pageId: string,\n    pageStructure: CmsStructureModel\n  ): Observable<CmsStructureModel> {\n    return this.mergePage(pageId, pageStructure).pipe(\n      switchMap(page => this.mergeSlots(page))\n    );\n  }\n\n  /**\n   *\n   * Returns boolean observable to indicate whether the page should not be\n   * loaded from the backend. This is useful for pages which are comoditized\n   * and follow best practice.\n   *\n   * By default, configurable pages are driven by static configuration,\n   * in order to allow for fast loading pages (preventing network delays).\n   */\n  shouldIgnoreBackend(pageId: string): Observable<boolean> {\n    return this.getPageFromConfig(pageId).pipe(\n      map(page => !!page && !!page.ignoreBackend)\n    );\n  }\n\n  /**\n   * returns an Observable component data from the static configuration.\n   */\n  getComponentFromConfig(\n    componentId: string\n  ): Observable<ContentSlotComponentData | any> {\n    return of(this.getComponentById(componentId));\n  }\n\n  /**\n   * returns an Observable components data from the static configuration.\n   */\n  getComponentsFromConfig(\n    ids: string[]\n  ): Observable<ContentSlotComponentData[]> {\n    return of(ids.map(id => this.getComponentById(id)));\n  }\n\n  /**\n   * returns an observable with the `PageConfig`.\n   */\n  private getPageFromConfig(pageId: string): Observable<CmsPageConfig> {\n    return of(\n      this.cmsDataConfig.cmsStructure && this.cmsDataConfig.cmsStructure.pages\n        ? this.cmsDataConfig.cmsStructure.pages.find(p => p.pageId === pageId)\n        : null\n    );\n  }\n\n  /**\n   * Merge page data from the configuration into the given structure, if any.\n   * If the given page structure is empty, a page is created and the page slots are\n   * are merged into the page.\n   */\n  private mergePage(\n    pageId: string,\n    pageStructure: CmsStructureModel\n  ): Observable<CmsStructureModel> {\n    return this.getPageFromConfig(pageId).pipe(\n      switchMap(page => {\n        if (page) {\n          // serialize page data\n          if (!pageStructure.page) {\n            pageStructure.page = {\n              ...page,\n            };\n            pageStructure.page.slots = {};\n          }\n          if (!pageStructure.page.slots) {\n            pageStructure.page.slots = {};\n          }\n          return this.mergeSlots(pageStructure, page.slots);\n        } else {\n          return of(pageStructure);\n        }\n      })\n    );\n  }\n\n  /**\n   * Adds any pre-configured slots for pages that do not use them.\n   * If pages have a slot for the given position, the configiuration\n   * is ingored. Even if the slot does not have inner structure (such as\n   * components), so that the cms structure is able to override the (static)\n   * configuration.\n   */\n  private mergeSlots(\n    pageStructure: CmsStructureModel,\n    slots?: CmsPageSlotsConfig\n  ): Observable<CmsStructureModel> {\n    // if no slots have been given, we use the global configured slots\n    if (\n      !slots &&\n      this.cmsDataConfig.cmsStructure &&\n      this.cmsDataConfig.cmsStructure.slots\n    ) {\n      slots = this.cmsDataConfig.cmsStructure.slots;\n    }\n\n    if (!slots) {\n      return of(pageStructure);\n    }\n\n    for (const position of Object.keys(slots)) {\n      if (Object.keys(pageStructure.page.slots).indexOf(position) === -1) {\n        // the global slot isn't yet part of the page structure\n        pageStructure.page.slots[position] = {};\n\n        for (const component of this.getComponentsByPosition(slots, position)) {\n          if (!pageStructure.page.slots[position].components) {\n            pageStructure.page.slots[position].components = [];\n          }\n          pageStructure.page.slots[position].components.push({\n            uid: component.uid,\n            flexType: component.flexType,\n            typeCode: component.typeCode,\n          });\n          if (!pageStructure.components) {\n            pageStructure.components = [];\n          }\n\n          pageStructure.components.push(component);\n        }\n      }\n    }\n\n    return of(pageStructure);\n  }\n\n  private getComponentsByPosition(\n    slots: CmsPageSlotsConfig,\n    position: string\n  ): ContentSlotComponentData[] {\n    const components = [];\n    if (slots[position] && slots[position].componentIds) {\n      for (const componentId of slots[position].componentIds) {\n        if (\n          this.cmsDataConfig.cmsStructure &&\n          this.cmsDataConfig.cmsStructure.components\n        ) {\n          const component = this.cmsDataConfig.cmsStructure.components[\n            componentId\n          ];\n          if (component) {\n            components.push({ uid: componentId, ...component });\n          }\n        }\n      }\n    }\n    return components;\n  }\n\n  private getComponentById(componentId: string): ContentSlotComponentData {\n    return this.cmsDataConfig.cmsStructure &&\n      this.cmsDataConfig.cmsStructure.components\n      ? this.cmsDataConfig.cmsStructure.components[componentId]\n      : undefined;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { CmsPageAdapter } from './cms-page.adapter';\nimport { CmsStructureConfigService } from '../../services/cms-structure-config.service';\nimport { PageContext } from '../../../routing/models/page-context.model';\nimport { CmsStructureModel } from '../../model/page.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsPageConnector {\n  constructor(\n    protected cmsPageAdapter: CmsPageAdapter,\n    protected cmsStructureConfigService: CmsStructureConfigService\n  ) {}\n\n  /**\n   * Returns an observable with the page structure. The page structure is\n   * typically loaded from a backend, but can also be returned from static\n   * configuration (see `CmsStructureConfigService`).\n   */\n  get(pageContext: PageContext): Observable<CmsStructureModel> {\n    return this.cmsStructureConfigService\n      .shouldIgnoreBackend(pageContext.id)\n      .pipe(\n        switchMap(loadFromConfig => {\n          if (!loadFromConfig) {\n            return this.cmsPageAdapter.load(pageContext).pipe(\n              catchError(error => {\n                if (\n                  error instanceof HttpErrorResponse &&\n                  error.status === 400\n                ) {\n                  return of({});\n                } else {\n                  return throwError(error);\n                }\n              })\n            );\n          } else {\n            return of({});\n          }\n        }),\n        switchMap(page => this.mergeDefaultPageStructure(pageContext, page))\n      );\n  }\n\n  /**\n   *\n   * Merge default page structure inot the given `CmsStructureModel`.\n   * This is benefitial for a fast setup of the UI without necessary\n   * finegrained CMS setup.\n   */\n  private mergeDefaultPageStructure(\n    pageContext: PageContext,\n    pageStructure: CmsStructureModel\n  ): Observable<CmsStructureModel> {\n    return this.cmsStructureConfigService.mergePageStructure(\n      pageContext.id,\n      pageStructure\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { CmsComponent } from '../../../occ/occ-models/index';\nimport { CmsComponentAdapter } from './cms-component.adapter';\nimport { CmsStructureConfigService } from '../../services/cms-structure-config.service';\nimport { PageContext } from '../../../routing/models/page-context.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsComponentConnector {\n  constructor(\n    protected cmsStructureConfigService: CmsStructureConfigService,\n    protected adapter: CmsComponentAdapter\n  ) {}\n\n  get<T extends CmsComponent>(\n    id: string,\n    pageContext: PageContext\n  ): Observable<T> {\n    return this.cmsStructureConfigService\n      .getComponentFromConfig(id)\n      .pipe(\n        switchMap(configuredComponent =>\n          configuredComponent\n            ? of(configuredComponent)\n            : this.adapter.load(id, pageContext)\n        )\n      );\n  }\n\n  getList(ids: string[], pageContext: PageContext): Observable<CmsComponent[]> {\n    return this.cmsStructureConfigService.getComponentsFromConfig(ids).pipe(\n      switchMap(configuredComponents => {\n        // check if we have some components that are not loaded from configuration\n        const missingIds = configuredComponents.reduce(\n          (acc, component, index) => {\n            if (component === undefined) {\n              acc.push(ids[index]);\n            }\n            return acc;\n          },\n          []\n        );\n\n        if (missingIds.length > 0) {\n          return this.adapter\n            .loadList(missingIds, pageContext)\n            .pipe(\n              map(loadedComponents => [\n                ...configuredComponents.filter(Boolean),\n                ...loadedComponents,\n              ])\n            );\n        } else {\n          return of(configuredComponents);\n        }\n      })\n    );\n  }\n}\n","import { EntityState } from '../../state';\nimport { NodeItem } from '../model/node-item.model';\nimport { Page } from '../model/page.model';\nimport { EntityLoaderState } from '../../state/utils/entity-loader/entity-loader-state';\n\nexport const CMS_FEATURE = 'cms';\nexport const NAVIGATION_DETAIL_ENTITY = '[Cms] Navigation Entity';\nexport const COMPONENT_ENTITY = '[Cms[ Component Entity';\n\nexport interface StateWithCms {\n  [CMS_FEATURE]: CmsState;\n}\n\nexport type ComponentState = EntityLoaderState<any>;\n\nexport type IndexType = {\n  content: EntityLoaderState<string>;\n  product: EntityLoaderState<string>;\n  category: EntityLoaderState<string>;\n  catalog: EntityLoaderState<string>;\n};\n\nexport interface NavigationNodes {\n  [nodeId: string]: NodeItem;\n}\n\nexport interface PageState {\n  pageData: EntityState<Page>;\n  index: IndexType;\n}\n\nexport interface CmsState {\n  page: PageState;\n  component: ComponentState;\n  navigation: EntityLoaderState<NodeItem>;\n}\n","import {\n  EntitySuccessAction,\n  EntityLoadAction,\n  EntityFailAction,\n} from '../../../state';\nimport { Page } from '../../model/page.model';\nimport { PageContext } from '../../../routing/index';\n\nexport const LOAD_PAGE_DATA = '[Cms] Load Page Data';\nexport const LOAD_PAGE_DATA_FAIL = '[Cms] Load Page Data Fail';\nexport const LOAD_PAGE_DATA_SUCCESS = '[Cms] Load Page Data Success';\n\nexport class LoadPageData extends EntityLoadAction {\n  readonly type = LOAD_PAGE_DATA;\n  constructor(public payload: PageContext) {\n    super(payload.type, payload.id);\n  }\n}\n\nexport class LoadPageDataFail extends EntityFailAction {\n  readonly type = LOAD_PAGE_DATA_FAIL;\n  constructor(pageContext: PageContext, error: any) {\n    super(pageContext.type, pageContext.id, error);\n  }\n}\n\nexport class LoadPageDataSuccess extends EntitySuccessAction {\n  readonly type = LOAD_PAGE_DATA_SUCCESS;\n  constructor(pageContext: PageContext, payload: Page) {\n    super(pageContext.type, pageContext.id, payload);\n  }\n}\n\n// action types\nexport type PageAction = LoadPageData | LoadPageDataFail | LoadPageDataSuccess;\n","import { CmsComponent } from '../../../occ/occ-models/index';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntitySuccessAction,\n} from '../../../state/utils/entity-loader/entity-loader.action';\nimport { COMPONENT_ENTITY } from '../cms-state';\n\nexport const LOAD_COMPONENT = '[Cms] Load Component';\nexport const LOAD_COMPONENT_FAIL = '[Cms] Load Component Fail';\nexport const LOAD_COMPONENT_SUCCESS = '[Cms] Load Component Success';\nexport const GET_COMPONENET_FROM_PAGE = '[Cms] Get Component from Page';\n\nexport class LoadComponent extends EntityLoadAction {\n  readonly type = LOAD_COMPONENT;\n  constructor(public payload: string) {\n    super(COMPONENT_ENTITY, payload);\n  }\n}\n\nexport class LoadComponentFail extends EntityFailAction {\n  readonly type = LOAD_COMPONENT_FAIL;\n  constructor(uid: string, public payload: any) {\n    super(COMPONENT_ENTITY, uid, payload);\n  }\n}\n\nexport class LoadComponentSuccess<\n  T extends CmsComponent\n> extends EntitySuccessAction {\n  readonly type = LOAD_COMPONENT_SUCCESS;\n  constructor(public payload: T) {\n    super(COMPONENT_ENTITY, payload.uid);\n  }\n}\n\nexport class GetComponentFromPage<\n  T extends CmsComponent\n> extends EntitySuccessAction {\n  readonly type = GET_COMPONENET_FROM_PAGE;\n  constructor(public payload: T[]) {\n    super(COMPONENT_ENTITY, payload.map(cmp => cmp.uid));\n  }\n}\n\n// action types\nexport type ComponentAction<T extends CmsComponent> =\n  | LoadComponent\n  | LoadComponentFail\n  | LoadComponentSuccess<T>\n  | GetComponentFromPage<T>;\n","import { NAVIGATION_DETAIL_ENTITY } from '../cms-state';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntitySuccessAction,\n} from '../../../state/utils/entity-loader/entity-loader.action';\n\nexport const LOAD_NAVIGATION_ITEMS = '[Cms] Load NavigationEntry items';\nexport const LOAD_NAVIGATION_ITEMS_FAIL =\n  '[Cms] Load NavigationEntry items Fail';\nexport const LOAD_NAVIGATION_ITEMS_SUCCESS =\n  '[Cms] Load NavigationEntry items Success';\n\nexport class LoadNavigationItems extends EntityLoadAction {\n  readonly type = LOAD_NAVIGATION_ITEMS;\n  constructor(public payload: { nodeId: string; items: any[] }) {\n    super(NAVIGATION_DETAIL_ENTITY, payload.nodeId);\n  }\n}\n\nexport class LoadNavigationItemsFail extends EntityFailAction {\n  readonly type = LOAD_NAVIGATION_ITEMS_FAIL;\n  constructor(nodeId: string, public payload: any) {\n    super(NAVIGATION_DETAIL_ENTITY, nodeId, payload);\n  }\n}\n\nexport class LoadNavigationItemsSuccess extends EntitySuccessAction {\n  readonly type = LOAD_NAVIGATION_ITEMS_SUCCESS;\n  constructor(public payload: { nodeId: string; components: any[] }) {\n    super(NAVIGATION_DETAIL_ENTITY, payload.nodeId);\n  }\n}\n\n// action types\nexport type NavigationEntryItemAction =\n  | LoadNavigationItems\n  | LoadNavigationItemsFail\n  | LoadNavigationItemsSuccess;\n","import { createFeatureSelector, MemoizedSelector } from '@ngrx/store';\nimport { CMS_FEATURE, CmsState, StateWithCms } from '../cms-state';\n\nexport const getCmsState: MemoizedSelector<\n  StateWithCms,\n  CmsState\n> = createFeatureSelector<CmsState>(CMS_FEATURE);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { CmsState, PageState, StateWithCms, IndexType } from '../cms-state';\nimport { PageContext } from '../../../routing';\nimport { EntityLoaderState, LoaderState } from '../../../state';\nimport { ContentSlotData } from '../../model/content-slot-data.model';\nimport { Page } from '../../model/page.model';\nimport { PageType } from '../../../occ/occ-models/occ.models';\n\nimport { getCmsState } from './feature.selectors';\n\nexport const getPageEntitiesSelector = (state: PageState) =>\n  state.pageData.entities;\nexport const getIndexByType = (\n  index: IndexType,\n  type: PageType\n): EntityLoaderState<string> => {\n  switch (type) {\n    case PageType.CONTENT_PAGE: {\n      return index.content;\n    }\n    case PageType.PRODUCT_PAGE: {\n      return index.product;\n    }\n    case PageType.CATEGORY_PAGE: {\n      return index.category;\n    }\n    case PageType.CATALOG_PAGE: {\n      return index.catalog;\n    }\n  }\n  return { entities: {} };\n};\n\nexport const getPageComponentTypesSelector: (page: Page) => string[] = (\n  page: Page\n) => {\n  const componentTypes = new Set<string>();\n  if (page && page.slots) {\n    for (const slot of Object.keys(page.slots)) {\n      for (const component of page.slots[slot].components || []) {\n        componentTypes.add(component.flexType);\n      }\n    }\n  }\n  return Array.from(componentTypes);\n};\n\nexport const getPageState: MemoizedSelector<\n  StateWithCms,\n  PageState\n> = createSelector(\n  getCmsState,\n  (state: CmsState) => state.page\n);\n\nexport const getPageStateIndex: MemoizedSelector<\n  StateWithCms,\n  IndexType\n> = createSelector(\n  getPageState,\n  (page: PageState) => page.index\n);\n\nexport const getIndex = (\n  pageContext: PageContext\n): MemoizedSelector<StateWithCms, EntityLoaderState<string>> =>\n  createSelector(\n    getPageStateIndex,\n    (index: IndexType) => getIndexByType(index, pageContext.type)\n  );\n\nexport const getIndexEntity = (\n  pageContext: PageContext\n): MemoizedSelector<StateWithCms, LoaderState<string>> =>\n  createSelector(\n    getIndex(pageContext),\n    index => index.entities[pageContext.id] || {}\n  );\n\nexport const getPageEntities: MemoizedSelector<\n  StateWithCms,\n  { [id: string]: Page }\n> = createSelector(\n  getPageState,\n  getPageEntitiesSelector\n);\n\nexport const getPageData = (\n  pageContext: PageContext\n): MemoizedSelector<StateWithCms, Page> =>\n  createSelector(\n    getPageEntities,\n    getIndexEntity(pageContext),\n    (entities: { [id: string]: Page }, entity: LoaderState<string>) =>\n      entities[entity.value]\n  );\n\nexport const getPageComponentTypes = (\n  pageContext: PageContext\n): MemoizedSelector<StateWithCms, string[]> =>\n  createSelector(\n    getPageData(pageContext),\n    pageData => getPageComponentTypesSelector(pageData)\n  );\n\nexport const currentSlotSelectorFactory = (\n  pageContext: PageContext,\n  position: string\n): MemoizedSelector<StateWithCms, ContentSlotData> => {\n  return createSelector(\n    getPageData(pageContext),\n    entity => {\n      if (entity) {\n        return entity.slots[position];\n      }\n    }\n  );\n};\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { CmsState, ComponentState, StateWithCms } from '../cms-state';\n\nimport { getCmsState } from './feature.selectors';\nimport { entityStateSelector } from '../../../state/utils/entity-loader/entity-loader.selectors';\nimport { loaderValueSelector } from '../../../state/utils/loader/loader.selectors';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\n\nexport const getComponentEntitiesSelector = (state: ComponentState) =>\n  Object.keys(state.entities).reduce((acc, cur) => {\n    acc[cur] = state.entities[cur].value;\n    return acc;\n  }, {});\n\nexport const getComponentState: MemoizedSelector<\n  StateWithCms,\n  ComponentState\n> = createSelector(\n  getCmsState,\n  (state: CmsState) => state.component\n);\n\nexport const getComponentEntities: MemoizedSelector<\n  StateWithCms,\n  { [id: string]: any }\n> = createSelector(\n  getComponentState,\n  getComponentEntitiesSelector\n);\n\nexport const componentStateSelectorFactory = (\n  uid: string\n): MemoizedSelector<StateWithCms, LoaderState<any>> => {\n  return createSelector(\n    getComponentState,\n    entities => entityStateSelector(entities, uid)\n  );\n};\n\nexport const componentSelectorFactory = (\n  uid: string\n): MemoizedSelector<StateWithCms, any> => {\n  return createSelector(\n    componentStateSelectorFactory(uid),\n    state => loaderValueSelector(state)\n  );\n};\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { CmsState, StateWithCms } from '../cms-state';\nimport { getCmsState } from './feature.selectors';\nimport { NodeItem } from '../../model/node-item.model';\nimport { EntityLoaderState } from '../../../state/utils/entity-loader/entity-loader-state';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport { entityStateSelector } from '../../../state/utils/entity-loader/entity-loader.selectors';\nimport { loaderValueSelector } from '../../../state/utils/loader/loader.selectors';\n\nexport const getNavigationEntryItemState: MemoizedSelector<\n  StateWithCms,\n  EntityLoaderState<NodeItem>\n> = createSelector(\n  getCmsState,\n  (state: CmsState) => state.navigation\n);\n\nexport const getSelectedNavigationEntryItemState = (\n  nodeId: string\n): MemoizedSelector<StateWithCms, LoaderState<NodeItem>> => {\n  return createSelector(\n    getNavigationEntryItemState,\n    nodes => entityStateSelector(nodes, nodeId)\n  );\n};\n\nexport const itemsSelectorFactory = (\n  nodeId: string\n): MemoizedSelector<StateWithCms, NodeItem> => {\n  return createSelector(\n    getSelectedNavigationEntryItemState(nodeId),\n    itemState => loaderValueSelector(itemState)\n  );\n};\n","import { Meta } from '@angular/platform-browser';\nimport { OccConfig } from './occ-config';\n\nexport const SERVER_BASE_URL_META_TAG_NAME = 'occ-backend-base-url';\nexport const SERVER_BASE_URL_META_TAG_PLACEHOLDER =\n  'OCC_BACKEND_BASE_URL_VALUE';\n\nexport function serverConfigFromMetaTagFactory(meta: Meta): OccConfig {\n  const baseUrl = getMetaTagContent(SERVER_BASE_URL_META_TAG_NAME, meta);\n  return baseUrl && baseUrl !== SERVER_BASE_URL_META_TAG_PLACEHOLDER\n    ? { backend: { occ: { baseUrl } } }\n    : {};\n}\n\nfunction getMetaTagContent(name: string, meta: Meta) {\n  const metaTag = meta.getTag(`name=\"${name}\"`);\n  return metaTag && metaTag.content;\n}\n","import * as fromNavigationItem from '../actions/navigation-entry-item.action';\nimport { NodeItem } from '../../model/node-item.model';\n\nexport const initialState: NodeItem = undefined;\n\nexport function reducer(\n  state = initialState,\n  action: fromNavigationItem.NavigationEntryItemAction\n): NodeItem {\n  switch (action.type) {\n    case fromNavigationItem.LOAD_NAVIGATION_ITEMS_SUCCESS: {\n      if (action.payload.components) {\n        const components = action.payload.components;\n\n        const newItem: NodeItem = components.reduce(\n          (compItems: { [uid_type: string]: any }, component: any) => {\n            return {\n              ...compItems,\n              [`${component.uid}_AbstractCMSComponent`]: component,\n            };\n          },\n          {\n            ...{},\n          }\n        );\n\n        return {\n          ...state,\n          ...newItem,\n        };\n      }\n    }\n  }\n\n  return state;\n}\n","import * as fromAction from '../actions';\nimport { Page } from '../../model/page.model';\nimport { EntityState } from '../../../state/utils/entity/entity-state';\n\nexport const initialState: EntityState<Page> = { entities: {} };\n\nexport function reducer(\n  state = initialState,\n  action: fromAction.LoadPageDataSuccess\n): EntityState<Page> {\n  switch (action.type) {\n    case fromAction.LOAD_PAGE_DATA_SUCCESS: {\n      const page: Page = action.payload;\n      return { ...state, entities: { ...state.entities, [page.pageId]: page } };\n    }\n  }\n  return state;\n}\n","import * as fromAction from '../actions/page.action';\n\nexport const initialState = undefined;\n\nexport function reducer(\n  entityType: string\n): (\n  state: string,\n  action: fromAction.LoadPageDataSuccess | fromAction.LoadPageDataFail\n) => string {\n  return (\n    state = initialState,\n    action: fromAction.LoadPageDataSuccess | fromAction.LoadPageDataFail\n  ): string => {\n    if (action.meta && action.meta.entityType === entityType) {\n      switch (action.type) {\n        case fromAction.LOAD_PAGE_DATA_SUCCESS: {\n          return action.payload.pageId;\n        }\n\n        case fromAction.LOAD_PAGE_DATA_FAIL: {\n          return initialState;\n        }\n      }\n    }\n    return state;\n  };\n}\n","import { InjectionToken, Provider } from '@angular/core';\n\nimport {\n  ActionReducer,\n  ActionReducerMap,\n  MetaReducer,\n  Action,\n  combineReducers,\n} from '@ngrx/store';\n\nimport {\n  CmsState,\n  COMPONENT_ENTITY,\n  NAVIGATION_DETAIL_ENTITY,\n  StateWithCms,\n} from '../cms-state';\nimport { PageType } from '../../../occ';\nimport { NodeItem } from '../../model/node-item.model';\nimport { LOGIN, LOGOUT } from '../../../auth/store/actions/login-logout.action';\nimport { LANGUAGE_CHANGE } from '../../../site-context/store/actions/languages.action';\nimport { entityLoaderReducer } from '../../../state/utils/entity-loader/entity-loader.reducer';\n\nimport * as fromNavigation from './navigation-entry-item.reducer';\nimport * as fromPageReducer from './page-data.reducer';\nimport * as fromPageIndexReducer from './page-index.reducer';\n\nexport function getReducers(): ActionReducerMap<CmsState> {\n  return {\n    page: combineReducers({\n      pageData: fromPageReducer.reducer,\n      index: combineReducers({\n        content: entityLoaderReducer<string>(\n          PageType.CONTENT_PAGE,\n          fromPageIndexReducer.reducer(PageType.CONTENT_PAGE)\n        ),\n        product: entityLoaderReducer<string>(\n          PageType.PRODUCT_PAGE,\n          fromPageIndexReducer.reducer(PageType.PRODUCT_PAGE)\n        ),\n        category: entityLoaderReducer<string>(\n          PageType.CATEGORY_PAGE,\n          fromPageIndexReducer.reducer(PageType.CATEGORY_PAGE)\n        ),\n        catalog: entityLoaderReducer<string>(\n          PageType.CATALOG_PAGE,\n          fromPageIndexReducer.reducer(PageType.CATALOG_PAGE)\n        ),\n      }),\n    }),\n    component: entityLoaderReducer(COMPONENT_ENTITY),\n    navigation: entityLoaderReducer<NodeItem>(\n      NAVIGATION_DETAIL_ENTITY,\n      fromNavigation.reducer\n    ),\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<CmsState>\n> = new InjectionToken<ActionReducerMap<CmsState>>('CmsReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport function clearCmsState(\n  reducer: ActionReducer<StateWithCms, Action>\n): ActionReducer<StateWithCms, Action> {\n  return function(state, action) {\n    if (\n      action.type === LANGUAGE_CHANGE ||\n      action.type === LOGOUT ||\n      action.type === LOGIN\n    ) {\n      state = undefined;\n    }\n    return reducer(state, action);\n  };\n}\n\nexport const metaReducers: MetaReducer<StateWithCms>[] = [clearCmsState];\n","import { PageType } from '../../occ/occ-models';\n\nexport class PageContext {\n  id: string;\n  type?: PageType;\n\n  constructor(id: string, type?: PageType) {\n    this.id = id;\n    this.type = type;\n\n    if (this.type == null) {\n      this.type = PageType.CONTENT_PAGE;\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { UrlTranslationService } from './url-translation.service';\nimport {\n  TranslateUrlCommands,\n  TranslateUrlOptions,\n} from './translate-url-commands';\n\n@Pipe({\n  name: 'cxTranslateUrl',\n})\nexport class TranslateUrlPipe implements PipeTransform {\n  constructor(private urlTranslator: UrlTranslationService) {}\n\n  transform(\n    commands: TranslateUrlCommands,\n    options: TranslateUrlOptions = {}\n  ): any[] {\n    return this.urlTranslator.translate(commands, options);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TranslateUrlPipe } from './translate-url.pipe';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TranslateUrlPipe],\n  exports: [TranslateUrlPipe],\n})\nexport class UrlTranslationModule {}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Action } from '@ngrx/store';\n\nimport { Observable, of } from 'rxjs';\nimport {\n  catchError,\n  filter,\n  map,\n  mergeMap,\n  switchMap,\n  take,\n} from 'rxjs/operators';\n\nimport * as componentActions from '../actions/component.action';\nimport * as pageActions from '../actions/page.action';\n\nimport { RoutingService } from '../../../routing/index';\nimport { LOGIN, LOGOUT } from '../../../auth/store/actions/login-logout.action';\nimport { LANGUAGE_CHANGE } from '../../../site-context/store/actions/languages.action';\nimport { CmsStructureModel } from '../../model/page.model';\nimport { CmsPageConnector } from '../../connectors/page/cms-page.connector';\n\n@Injectable()\nexport class PageEffects {\n  @Effect()\n  refreshPage$: Observable<Action> = this.actions$.pipe(\n    ofType(LANGUAGE_CHANGE, LOGOUT, LOGIN),\n    switchMap(_ =>\n      this.routingService.getRouterState().pipe(\n        filter(\n          routerState =>\n            routerState && routerState.state && routerState.state.cmsRequired\n        ),\n        map(routerState => routerState.state.context),\n        take(1),\n        mergeMap(context => of(new pageActions.LoadPageData(context)))\n      )\n    )\n  );\n\n  @Effect()\n  loadPageData$: Observable<Action> = this.actions$.pipe(\n    ofType(pageActions.LOAD_PAGE_DATA),\n    map((action: pageActions.LoadPageData) => action.payload),\n    switchMap(pageContext => {\n      return this.cmsPageConnector.get(pageContext).pipe(\n        mergeMap((cmsStructure: CmsStructureModel) => {\n          return [\n            new pageActions.LoadPageDataSuccess(pageContext, cmsStructure.page),\n            new componentActions.GetComponentFromPage(cmsStructure.components),\n          ];\n        }),\n        catchError(error => {\n          return of(new pageActions.LoadPageDataFail(pageContext, error));\n        })\n      );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private cmsPageConnector: CmsPageConnector,\n    private routingService: RoutingService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport {\n  catchError,\n  filter,\n  groupBy,\n  map,\n  mergeMap,\n  switchMap,\n  take,\n} from 'rxjs/operators';\nimport { RoutingService } from '../../../routing/index';\nimport { CmsComponentConnector } from '../../connectors/component/cms-component.connector';\nimport * as componentActions from '../actions/component.action';\n\n@Injectable()\nexport class ComponentEffects {\n  constructor(\n    private actions$: Actions,\n    private cmsComponentLoader: CmsComponentConnector,\n    private routingService: RoutingService\n  ) {}\n\n  @Effect()\n  loadComponent$: Observable<any> = this.actions$.pipe(\n    ofType(componentActions.LOAD_COMPONENT),\n    map((action: componentActions.LoadComponent) => action.payload),\n    groupBy(uid => uid),\n    mergeMap(group =>\n      group.pipe(\n        switchMap(uid => {\n          return this.routingService.getRouterState().pipe(\n            filter(routerState => routerState !== undefined),\n            map(routerState => routerState.state.context),\n            take(1),\n            mergeMap(pageContext =>\n              this.cmsComponentLoader.get(uid, pageContext).pipe(\n                map(data => new componentActions.LoadComponentSuccess(data)),\n                catchError(error =>\n                  of(new componentActions.LoadComponentFail(uid, error))\n                )\n              )\n            )\n          );\n        })\n      )\n    )\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, filter, map, mergeMap, take } from 'rxjs/operators';\nimport * as navigationItemActions from '../actions/navigation-entry-item.action';\nimport { RoutingService } from '../../../routing/index';\nimport { CmsComponentConnector } from '../../connectors/component/cms-component.connector';\n\n@Injectable()\nexport class NavigationEntryItemEffects {\n  @Effect()\n  loadNavigationItems$: Observable<any> = this.actions$.pipe(\n    ofType(navigationItemActions.LOAD_NAVIGATION_ITEMS),\n    map((action: navigationItemActions.LoadNavigationItems) => action.payload),\n    map(payload => {\n      return {\n        ids: this.getIdListByItemType(payload.items),\n        nodeId: payload.nodeId,\n      };\n    }),\n    mergeMap(data => {\n      if (data.ids.componentIds.length > 0) {\n        return this.routingService.getRouterState().pipe(\n          filter(routerState => routerState !== undefined),\n          map(routerState => routerState.state.context),\n          take(1),\n          mergeMap(pageContext => {\n            // download all items in one request\n            return this.cmsComponentConnector\n              .getList(data.ids.componentIds, pageContext)\n              .pipe(\n                map(\n                  components =>\n                    new navigationItemActions.LoadNavigationItemsSuccess({\n                      nodeId: data.nodeId,\n                      components: components,\n                    })\n                ),\n                catchError(error =>\n                  of(\n                    new navigationItemActions.LoadNavigationItemsFail(\n                      data.nodeId,\n                      error\n                    )\n                  )\n                )\n              );\n          })\n        );\n      } else if (data.ids.pageIds.length > 0) {\n        // TODO: future work\n        // dispatch action to load cms page one by one\n      } else if (data.ids.mediaIds.length > 0) {\n        // TODO: future work\n        // send request to get list of media\n      } else {\n        return of(\n          new navigationItemActions.LoadNavigationItemsFail(\n            data.nodeId,\n            'navigation nodes are empty'\n          )\n        );\n      }\n    })\n  );\n\n  // We only consider 3 item types: cms page, cms component, and media.\n  getIdListByItemType(\n    itemList: any[]\n  ): { pageIds: string[]; componentIds: string[]; mediaIds: string[] } {\n    const pageIds: string[] = [];\n    const componentIds: string[] = [];\n    const mediaIds: string[] = [];\n\n    itemList.forEach(item => {\n      if (item.superType === 'AbstractCMSComponent') {\n        componentIds.push(item.id);\n      } else if (item.superType === 'AbstractPage') {\n        pageIds.push(item.id);\n      } else if (item.superType === 'AbstractMedia') {\n        mediaIds.push(item.id);\n      }\n    });\n    return { pageIds: pageIds, componentIds: componentIds, mediaIds: mediaIds };\n  }\n\n  constructor(\n    private actions$: Actions,\n    private cmsComponentConnector: CmsComponentConnector,\n    private routingService: RoutingService\n  ) {}\n}\n","import { PageEffects } from './page.effect';\nimport { ComponentEffects } from './component.effect';\nimport { NavigationEntryItemEffects } from './navigation-entry-item.effect';\n\nexport const effects: any[] = [\n  PageEffects,\n  ComponentEffects,\n  NavigationEntryItemEffects,\n];\n\nexport * from './page.effect';\nexport * from './component.effect';\nexport * from './navigation-entry-item.effect';\n","import { Injectable } from '@angular/core';\n\nimport { select, Store } from '@ngrx/store';\n\nimport { Observable, of, ReplaySubject } from 'rxjs';\nimport {\n  filter,\n  tap,\n  map,\n  withLatestFrom,\n  switchMap,\n  take,\n  multicast,\n  refCount,\n  catchError,\n} from 'rxjs/operators';\n\nimport * as fromStore from '../store';\nimport { LoaderState } from '../../state';\nimport { ContentSlotData } from '../model/content-slot-data.model';\nimport { NodeItem } from '../model/node-item.model';\nimport { Page } from '../model/page.model';\nimport { StateWithCms } from '../store/cms-state';\nimport { CmsComponent } from '../../occ/occ-models/cms-component.models';\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { PageContext } from '../../routing/models/page-context.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsService {\n  private _launchInSmartEdit = false;\n\n  private components: {\n    [uid: string]: Observable<CmsComponent>;\n  } = {};\n\n  constructor(\n    private store: Store<StateWithCms>,\n    private routingService: RoutingService\n  ) {}\n\n  /**\n   * Set _launchInSmartEdit value\n   */\n  set launchInSmartEdit(value: boolean) {\n    this._launchInSmartEdit = value;\n  }\n\n  /**\n   * Whether the app launched in smart edit\n   */\n  isLaunchInSmartEdit(): boolean {\n    return this._launchInSmartEdit;\n  }\n\n  /**\n   * Get current CMS page data\n   */\n  getCurrentPage(): Observable<Page> {\n    return this.routingService\n      .getPageContext()\n      .pipe(\n        switchMap(pageContext =>\n          this.store.select(fromStore.getPageData(pageContext))\n        )\n      );\n  }\n\n  /**\n   * Get CMS component data by uid\n   * @param uid : CMS componet uid\n   */\n  getComponentData<T extends CmsComponent>(uid: string): Observable<T> {\n    if (!this.components[uid]) {\n      this.components[uid] = this.store.pipe(\n        select(fromStore.componentStateSelectorFactory(uid)),\n        withLatestFrom(this.getCurrentPage()),\n        tap(([componentState, currentPage]) => {\n          const attemptedLoad =\n            componentState.loading ||\n            componentState.success ||\n            componentState.error;\n          if (!attemptedLoad && currentPage) {\n            this.store.dispatch(new fromStore.LoadComponent(uid));\n          }\n        }),\n        map(([productState]) => productState.value),\n        filter(Boolean),\n        // TODO: Replace next two lines with shareReplay(1, undefined, true) when RxJS 6.4 will be in use\n        multicast(() => new ReplaySubject(1)),\n        refCount()\n      );\n    }\n\n    return this.components[uid] as Observable<T>;\n  }\n\n  /**\n   * Given the position, get the content slot data\n   * @param position : content slot position\n   */\n  getContentSlot(position: string): Observable<ContentSlotData> {\n    return this.routingService.getPageContext().pipe(\n      switchMap(pageContext =>\n        this.store.pipe(\n          select(fromStore.currentSlotSelectorFactory(pageContext, position)),\n          filter(Boolean)\n        )\n      )\n    );\n  }\n\n  /**\n   * Given navigation node uid, get items (with id and type) inside the navigation entries\n   * @param navigationNodeUid : uid of the navigation node\n   */\n  getNavigationEntryItems(navigationNodeUid: string): Observable<NodeItem> {\n    return this.store.pipe(\n      select(fromStore.itemsSelectorFactory(navigationNodeUid))\n    );\n  }\n\n  /**\n   * Load navigation items data\n   * @param rootUid : the uid of the root navigation node\n   * @param itemList : list of items (with id and type)\n   */\n  loadNavigationItems(\n    rootUid: string,\n    itemList: { id: string; superType: string }[]\n  ): void {\n    this.store.dispatch(\n      new fromStore.LoadNavigationItems({\n        nodeId: rootUid,\n        items: itemList,\n      })\n    );\n  }\n\n  /**\n   * Refresh the content of the latest cms page\n   */\n  refreshLatestPage(): void {\n    this.routingService\n      .getPageContext()\n      .pipe(take(1))\n      .subscribe(pageContext =>\n        this.store.dispatch(new fromStore.LoadPageData(pageContext))\n      );\n  }\n\n  /**\n   * Refresh cms component's content\n   * @param uid : component uid\n   */\n  refreshComponent(uid: string): void {\n    this.store.dispatch(new fromStore.LoadComponent(uid));\n  }\n\n  /**\n   * Given pageContext, return the CMS page data\n   * @param pageContext\n   */\n  getPageState(pageContext: PageContext): Observable<Page> {\n    return this.store.pipe(select(fromStore.getPageData(pageContext)));\n  }\n\n  /**\n   * Given pageContext, return the CMS page data\n   * @param pageContext\n   */\n  getPageComponentTypes(pageContext: PageContext): Observable<string[]> {\n    return this.store.pipe(\n      select(fromStore.getPageComponentTypes(pageContext))\n    );\n  }\n\n  /**\n   * Given pageContext, return whether the CMS page data exists or not\n   * @param pageContext\n   */\n  hasPage(pageContext: PageContext): Observable<boolean> {\n    return this.store.pipe(\n      select(fromStore.getIndexEntity(pageContext)),\n      tap((entity: LoaderState<string>) => {\n        const attemptedLoad = entity.loading || entity.success || entity.error;\n        if (!attemptedLoad) {\n          this.store.dispatch(new fromStore.LoadPageData(pageContext));\n        }\n      }),\n      filter(entity => entity.success || entity.error),\n      map(entity => entity.success),\n      catchError(() => of(false))\n    );\n  }\n}\n","import { Observable } from 'rxjs';\nimport { PageType } from '../../occ';\nimport { Page, PageMeta } from '../model/page.model';\n\nexport abstract class PageMetaResolver {\n  pageType: PageType;\n  pageTemplate: string;\n\n  abstract resolve(): Observable<PageMeta>;\n\n  getScore(page: Page): number {\n    let score = 0;\n\n    if (this.pageType) {\n      score += page.type === this.pageType ? 1 : -1;\n    }\n    if (this.pageTemplate) {\n      score += page.template === this.pageTemplate ? 1 : -1;\n    }\n    return score;\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMap, filter } from 'rxjs/operators';\nimport { Page, PageMeta } from '../model/page.model';\nimport { CmsService } from './cms.service';\nimport { PageMetaResolver } from '../page/page-meta.resolver';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageMetaService {\n  constructor(\n    @Inject(PageMetaResolver) private resolvers: PageMetaResolver[],\n    protected cms: CmsService\n  ) {}\n\n  getMeta(): Observable<PageMeta> {\n    return this.cms.getCurrentPage().pipe(\n      filter(Boolean),\n      switchMap((page: Page) => {\n        const metaResolver = this.getMetaResolver(page);\n        if (metaResolver) {\n          return metaResolver.resolve();\n        } else {\n          // we do not have a page resolver\n          return of(null);\n        }\n      })\n    );\n  }\n\n  /**\n   * return the title resolver with the best match\n   * title resovers can by default match on PageType and page template\n   * but custom match comparisors can be implemented.\n   */\n  protected getMetaResolver(page: Page) {\n    const matchingResolvers = this.resolvers.filter(\n      resolver => resolver.getScore(page) > 0\n    );\n    matchingResolvers.sort(function(a, b) {\n      return b.getScore(page) - a.getScore(page);\n    });\n    return matchingResolvers[0];\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { ConfigModule } from '../../config/config.module';\nimport {\n  StateConfig,\n  StateTransferType,\n} from '../../state/config/state-config';\nimport { StateModule } from '../../state/state.module';\nimport { CMS_FEATURE } from './cms-state';\nimport { effects } from './effects/index';\nimport { metaReducers, reducerProvider, reducerToken } from './reducers/index';\n\nexport function cmsStoreConfigFactory(): StateConfig {\n  // if we want to reuse CMS_FEATURE const in config, we have to use factory instead of plain object\n  const config = {\n    state: {\n      ssrTransfer: {\n        keys: { [CMS_FEATURE]: StateTransferType.TRANSFER_STATE },\n      },\n    },\n  };\n  return config;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    StateModule,\n    StoreModule.forFeature(CMS_FEATURE, reducerToken, { metaReducers }),\n    EffectsModule.forFeature(effects),\n    ConfigModule.withConfigFactory(cmsStoreConfigFactory),\n  ],\n  providers: [reducerProvider],\n})\nexport class CmsStoreModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, filter, switchMap } from 'rxjs/operators';\nimport { PageType } from '../../occ/occ-models/occ.models';\nimport { CmsService } from '../facade/cms.service';\nimport { PageMetaResolver } from './page-meta.resolver';\nimport { PageMeta, Page } from '../model/page.model';\nimport { PageTitleResolver } from './page.resolvers';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ContentPageMetaResolver extends PageMetaResolver\n  implements PageTitleResolver {\n  constructor(protected cms: CmsService) {\n    super();\n    this.pageType = PageType.CONTENT_PAGE;\n  }\n\n  resolve(): Observable<PageMeta> {\n    return this.cms.getCurrentPage().pipe(\n      filter(Boolean),\n      switchMap(page => this.resolveTitle(page)),\n      map((title): PageMeta => ({ title }))\n    );\n  }\n\n  resolveTitle(page: Page): Observable<string> {\n    return of(page.title);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { PageMetaResolver } from './page-meta.resolver';\nimport { ContentPageMetaResolver } from './content-page-meta.resolver';\n\n@NgModule({\n  providers: [\n    {\n      provide: PageMetaResolver,\n      useExisting: ContentPageMetaResolver,\n      multi: true,\n    },\n  ],\n})\nexport class CmsPageTitleModule {}\n","import { NgModule } from '@angular/core';\n\nimport { CmsService } from './facade/index';\nimport { CmsStoreModule } from './store/cms-store.module';\nimport { CmsOccModule } from './occ/cms-occ.module';\nimport { CmsPageTitleModule } from './page/page.module';\n\nimport { CmsStructureConfig } from './config/cms-structure.config';\nimport { Config } from '../config/index';\n\n@NgModule({\n  imports: [CmsOccModule, CmsStoreModule, CmsPageTitleModule],\n  providers: [CmsService, { provide: CmsStructureConfig, useExisting: Config }],\n})\nexport class CmsModule {}\n","import { Injectable, Renderer2 } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DynamicAttributeService {\n  /**\n   * Add dynamic attributes to DOM. These attributes are extracted from the properties of cms items received from backend.\n   * There can by many different groups of properties, one of them is smaredit. But EC allows addons to create different groups.\n   * For example, personalization may add 'script' group etc.\n   * @param properties: properties in each cms item response data\n   * @param element: slot or cms component element\n   * @param renderer\n   */\n  addDynamicAttributes(\n    properties: any,\n    element: Element,\n    renderer: Renderer2\n  ): void {\n    if (properties) {\n      // check each group of properties, e.g. smartedit\n      Object.keys(properties).forEach(group => {\n        const name = 'data-' + group + '-';\n        const groupProps = properties[group];\n\n        // check each property in the group\n        Object.keys(groupProps).forEach(propName => {\n          const propValue = groupProps[propName];\n          if (propName === 'classes') {\n            const classes = propValue.split(' ');\n            classes.forEach(classItem => {\n              element.classList.add(classItem);\n            });\n          } else {\n            renderer.setAttribute(\n              element,\n              name +\n                propName\n                  .split(/(?=[A-Z])/)\n                  .join('-')\n                  .toLowerCase(),\n              propValue\n            );\n          }\n        });\n      });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, combineLatest } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { PageType } from '../../occ/occ-models/occ.models';\nimport { CartService } from '../../cart/facade/cart.service';\nimport { PageMetaResolver } from '../../cms/page/page-meta.resolver';\nimport {\n  PageRobotsResolver,\n  PageTitleResolver,\n} from '../../cms/page/page.resolvers';\nimport { PageMeta, PageRobotsMeta } from '../../cms/model/page.model';\nimport { UICart } from '../../cart/model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutPageMetaResolver extends PageMetaResolver\n  implements PageTitleResolver, PageRobotsResolver {\n  constructor(\n    protected routingService: RoutingService,\n    protected cartService: CartService\n  ) {\n    super();\n    this.pageType = PageType.CONTENT_PAGE;\n    this.pageTemplate = 'MultiStepCheckoutSummaryPageTemplate';\n  }\n\n  resolve(): Observable<PageMeta> {\n    return this.cartService.getActive().pipe(\n      switchMap(cart =>\n        combineLatest([this.resolveTitle(cart), this.resolveRobots()])\n      ),\n      map(([title, robots]) => ({ title, robots }))\n    );\n  }\n\n  resolveTitle(cart: UICart): Observable<string> {\n    return of(`Checkout ${cart.totalItems} items`);\n  }\n\n  resolveRobots(): Observable<PageRobotsMeta[]> {\n    return of([PageRobotsMeta.NOFOLLOW, PageRobotsMeta.NOINDEX]);\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { CheckoutService } from './facade/index';\nimport { CheckoutStoreModule } from './store/checkout-store.module';\nimport { PageMetaResolver } from '../cms/index';\nimport { CheckoutPageMetaResolver } from './services/checkout-page-meta.resolver';\n\n@NgModule({\n  imports: [CheckoutStoreModule],\n  providers: [\n    CheckoutService,\n    {\n      provide: PageMetaResolver,\n      useExisting: CheckoutPageMetaResolver,\n      multi: true,\n    },\n  ],\n})\nexport class CheckoutModule {}\n","import { NgModule } from '@angular/core';\n\n@NgModule({})\nexport class CxApiModule {}\n","import { OccConfig } from '../../occ/config/occ-config';\n\nexport const defaultOccProductConfig: OccConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        product:\n          'products/${productCode}?fields=DEFAULT,averageRating,images(FULL),classifications,numberOfReviews',\n        productReviews: 'products/${productCode}/reviews',\n        // tslint:disable:max-line-length\n        productSearch:\n          'products/search?fields=products(code,name,summary,price(FULL),images(DEFAULT),stock(FULL),averageRating),facets,breadcrumbs,pagination(DEFAULT),sorts(DEFAULT)&query=${query}',\n        // tslint:enable\n        productSuggestions: 'products/suggestions?term=${term}&max=${max}',\n      },\n    },\n  },\n};\n","import { Observable } from 'rxjs';\nimport { Review } from '../../../occ/occ-models/occ.models';\n\nexport abstract class ProductReviewsAdapter {\n  /**\n   * Abstract method used to load reviews for a given product.\n   * Reviews can be loaded from alternative sources, as long as the structure\n   * converts to the `Review[]`.\n   *\n   * @param productCode The `productCode` for given product\n   * @param maxCount Maximum number of review to load\n   */\n  abstract load(productCode: string, maxCount?: number): Observable<Review[]>;\n\n  /**\n   * Abstract method used to post review for a given product.\n   *\n   * @param productCode The `productCode` for given product\n   * @param review Review to post\n   */\n  abstract post(productCode: string, review: any): Observable<Review>;\n}\n","import { InjectionToken } from '@angular/core';\nimport { Converter } from '../../../util/converter.service';\nimport { Review } from '../../../occ/occ-models/occ.models';\n\nexport const PRODUCT_REVIEW_NORMALIZER = new InjectionToken<\n  Converter<any, Review>\n>('ProductReviewNormalizer');\n\nexport const PRODUCT_REVIEW_SERIALIZER = new InjectionToken<\n  Converter<Review, any>\n>('ProductReviewSerializer');\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Review } from '../../occ/occ-models/occ.models';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { ConverterService } from '../../util/converter.service';\nimport {\n  PRODUCT_REVIEW_NORMALIZER,\n  PRODUCT_REVIEW_SERIALIZER,\n} from '../connectors/reviews/converters';\nimport { ProductReviewsAdapter } from '../connectors/reviews/product-reviews.adapter';\nimport { pluck } from 'rxjs/operators';\n\n@Injectable()\nexport class OccProductReviewsAdapter implements ProductReviewsAdapter {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  load(productCode: string, maxCount?: number): Observable<Review[]> {\n    return this.http.get(this.getEndpoint(productCode, maxCount)).pipe(\n      pluck('reviews'),\n      this.converter.pipeableMany(PRODUCT_REVIEW_NORMALIZER)\n    );\n  }\n\n  post(productCode: string, review: any): Observable<Review> {\n    review = this.converter.convert(review, PRODUCT_REVIEW_SERIALIZER);\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    });\n\n    const body = new URLSearchParams();\n    body.append('headline', review.headline);\n    body.append('comment', review.comment);\n    body.append('rating', review.rating.toString());\n    body.append('alias', review.alias);\n\n    return this.http.post(this.getEndpoint(productCode), body.toString(), {\n      headers,\n    });\n  }\n\n  protected getEndpoint(code: string, maxCount?: number): string {\n    return this.occEndpoints.getUrl(\n      'productReviews',\n      {\n        productCode: code,\n      },\n      { maxCount }\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ProductAdapter } from '../connectors/product/product.adapter';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { ConverterService } from '../../util/converter.service';\nimport { PRODUCT_NORMALIZER } from '../connectors/product/converters';\nimport { UIProduct } from '../model/product';\n\n@Injectable()\nexport class OccProductAdapter implements ProductAdapter {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  load(productCode: string): Observable<UIProduct> {\n    return this.http\n      .get(this.getEndpoint(productCode))\n      .pipe(this.converter.pipeable(PRODUCT_NORMALIZER));\n  }\n\n  protected getEndpoint(code: string): string {\n    return this.occEndpoints.getUrl('product', {\n      productCode: code,\n    });\n  }\n}\n","import { Observable } from 'rxjs';\nimport { UIProduct } from '../../model/product';\n\nexport abstract class ProductAdapter {\n  /**\n   * Abstract method used to load product's details data.\n   * Product's data can be loaded from alternative sources, as long as the structure\n   * converts to the `Product`.\n   *\n   * @param productCode The `productCode` for given product\n   */\n  abstract load(productCode: string): Observable<UIProduct>;\n}\n","import { Injectable } from '@angular/core';\nimport { OccConfig } from '../../../occ/config/occ-config';\nimport { Image } from '../../../occ/occ-models';\nimport { Product } from '../../../occ/occ-models/occ.models';\nimport { Converter } from '../../../util/converter.service';\nimport { UIImages, UIProduct } from '../../model/product';\n\n@Injectable()\nexport class ProductImageNormalizer implements Converter<Product, UIProduct> {\n  constructor(protected config: OccConfig) {}\n\n  convert(source: Product, target?: UIProduct): UIProduct {\n    if (target === undefined) {\n      target = { ...(source as any) };\n    }\n    if (source.images) {\n      target.images = this.normalize(source.images);\n    }\n    return target;\n  }\n\n  /**\n   * @desc\n   * Creates the image structure we'd like to have. Instead of\n   * having a single list with all images despite type and format\n   * we create a proper structure. With that we can do:\n   * - images.primary.thumnail.url\n   * - images.GALLERY[0].thumnail.url\n   */\n  normalize(source: Image[]): UIImages {\n    const images = {};\n    if (source) {\n      for (const image of source) {\n        const isList = image.hasOwnProperty('galleryIndex');\n        if (!images.hasOwnProperty(image.imageType)) {\n          images[image.imageType] = isList ? [] : {};\n        }\n\n        let imageContainer;\n        if (isList && !images[image.imageType][image.galleryIndex]) {\n          images[image.imageType][image.galleryIndex] = {};\n        }\n\n        if (isList) {\n          imageContainer = images[image.imageType][image.galleryIndex];\n        } else {\n          imageContainer = images[image.imageType];\n        }\n\n        // set full image URL path\n        image.url = (this.config.backend.occ.baseUrl || '') + image.url;\n\n        imageContainer[image.format] = image;\n      }\n    }\n    return images;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product, ProductReference } from '../../../occ/occ-models/occ.models';\nimport { Converter } from '../../../util/converter.service';\nimport { UIProduct, UIProductReferences } from '../../model/product';\n\n@Injectable()\nexport class ProductReferenceNormalizer\n  implements Converter<Product, UIProduct> {\n  convert(source: Product, target?: UIProduct): UIProduct {\n    if (target === undefined) {\n      target = { ...(source as any) };\n    }\n\n    if (source.productReferences) {\n      target.productReferences = this.normalize(source.productReferences);\n    }\n    return target;\n  }\n\n  /**\n   * @desc\n   * Creates the reference structure we'd like to have. Instead of\n   * having a single list with all references we create a proper structure.\n   * With that we have a semantic API for the clients\n   * - product.references.SIMILAR[0].code\n   */\n  protected normalize(source: ProductReference[]): UIProductReferences {\n    const references = {};\n\n    if (source) {\n      for (const reference of source) {\n        if (!references.hasOwnProperty(reference.referenceType)) {\n          references[reference.referenceType] = [];\n        }\n        references[reference.referenceType].push(reference);\n      }\n    }\n    return references;\n  }\n}\n","import { SearchConfig } from '../../model/search-config';\nimport { Suggestion } from '../../../occ/occ-models/occ.models';\nimport { UIProductSearchPage } from '../../model/product-search-page';\n\nimport { Observable } from 'rxjs';\n\nexport abstract class ProductSearchAdapter {\n  abstract search(\n    query: string,\n    searchConfig?: SearchConfig\n  ): Observable<UIProductSearchPage>;\n\n  abstract loadSuggestions(\n    term: string,\n    pageSize?: number\n  ): Observable<Suggestion[]>;\n}\n","import { InjectionToken } from '@angular/core';\nimport { Suggestion } from '../../../occ/occ-models/occ.models';\nimport { Converter } from '../../../util/converter.service';\nimport { UIProductSearchPage } from '../../model/product-search-page';\n\nexport const PRODUCT_SEARCH_PAGE_NORMALIZER = new InjectionToken<\n  Converter<any, UIProductSearchPage>\n>('ProductSearchPageNormalizer');\n\nexport const PRODUCT_SUGGESTION_NORMALIZER = new InjectionToken<\n  Converter<any, Suggestion>\n>('ProductSuggestionNormalizer');\n","import { Injectable } from '@angular/core';\nimport { ProductSearchAdapter } from '../connectors/search/product-search.adapter';\nimport { SearchConfig } from '../model/search-config';\nimport { Suggestion } from '../../occ/occ-models/occ.models';\n\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\nimport { ConverterService } from '../../util/converter.service';\nimport {\n  PRODUCT_SEARCH_PAGE_NORMALIZER,\n  PRODUCT_SUGGESTION_NORMALIZER,\n} from '../connectors/search/converters';\nimport { UIProductSearchPage } from '../model/product-search-page';\nimport { pluck } from 'rxjs/operators';\n\nconst DEFAULT_SEARCH_CONFIG: SearchConfig = {\n  pageSize: 20,\n};\n\n@Injectable()\nexport class OccProductSearchAdapter implements ProductSearchAdapter {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  search(\n    query: string,\n    searchConfig: SearchConfig = DEFAULT_SEARCH_CONFIG\n  ): Observable<UIProductSearchPage> {\n    return this.http\n      .get(this.getSearchEndpoint(query, searchConfig))\n      .pipe(this.converter.pipeable(PRODUCT_SEARCH_PAGE_NORMALIZER));\n  }\n\n  loadSuggestions(\n    term: string,\n    pageSize: number = 3\n  ): Observable<Suggestion[]> {\n    return this.http\n      .get(this.getSuggestionEndpoint(term, pageSize.toString()))\n      .pipe(\n        pluck('suggestions'),\n        this.converter.pipeableMany(PRODUCT_SUGGESTION_NORMALIZER)\n      );\n  }\n\n  protected getSearchEndpoint(\n    query: string,\n    searchConfig: SearchConfig\n  ): string {\n    return this.occEndpoints.getUrl(\n      'productSearch',\n      {\n        query,\n      },\n      {\n        pageSize: searchConfig.pageSize,\n        currentPage: searchConfig.currentPage,\n        sort: searchConfig.sortCode,\n      }\n    );\n  }\n\n  protected getSuggestionEndpoint(term: string, max: string): string {\n    return this.occEndpoints.getUrl('productSuggestions', {\n      term,\n      max,\n    });\n  }\n}\n","import { ProductSearchPage } from '../../../occ/occ-models/occ.models';\nimport { Converter, ConverterService } from '../../../util/converter.service';\nimport { Injectable } from '@angular/core';\nimport { UIProductSearchPage } from '../../model/product-search-page';\nimport { PRODUCT_NORMALIZER } from '../../connectors/product/converters';\n\n@Injectable()\nexport class OccProductSearchPageNormalizer\n  implements Converter<ProductSearchPage, UIProductSearchPage> {\n  constructor(private converterService: ConverterService) {}\n\n  convert(\n    source: ProductSearchPage,\n    target: UIProductSearchPage = {}\n  ): UIProductSearchPage {\n    target = {\n      ...target,\n      ...(source as any),\n    };\n    if (source.products) {\n      target.products = source.products.map(product =>\n        this.converterService.convert(product, PRODUCT_NORMALIZER)\n      );\n    }\n    return target;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { OccModule } from '../../occ/occ.module';\nimport { defaultOccProductConfig } from '../config/product-config';\nimport { ConfigModule } from '../../config/index';\nimport { ProductReviewsAdapter } from '../connectors/reviews/product-reviews.adapter';\nimport { OccProductReviewsAdapter } from './occ-product-reviews.adapter';\nimport { OccProductAdapter } from './occ-product.adapter';\nimport { ProductAdapter } from '../connectors/product/product.adapter';\nimport { PRODUCT_NORMALIZER } from '../connectors/product/converters';\nimport { ProductImageNormalizer } from './converters/product-image-normalizer';\nimport { ProductReferenceNormalizer } from './converters/product-reference-normalizer';\nimport { ProductSearchAdapter } from '../connectors/search/product-search.adapter';\nimport { OccProductSearchAdapter } from './occ-product-search.adapter';\nimport { PRODUCT_SEARCH_PAGE_NORMALIZER } from '../connectors/search/converters';\nimport { OccProductSearchPageNormalizer } from './converters/occ-product-search-page-normalizer.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    OccModule,\n    ConfigModule.withConfig(defaultOccProductConfig),\n  ],\n  providers: [\n    {\n      provide: ProductAdapter,\n      useClass: OccProductAdapter,\n    },\n    {\n      provide: PRODUCT_NORMALIZER,\n      useClass: ProductImageNormalizer,\n      multi: true,\n    },\n    {\n      provide: PRODUCT_NORMALIZER,\n      useClass: ProductReferenceNormalizer,\n      multi: true,\n    },\n    {\n      provide: ProductSearchAdapter,\n      useClass: OccProductSearchAdapter,\n    },\n    {\n      provide: PRODUCT_SEARCH_PAGE_NORMALIZER,\n      useClass: OccProductSearchPageNormalizer,\n      multi: true,\n    },\n    {\n      provide: ProductReviewsAdapter,\n      useClass: OccProductReviewsAdapter,\n    },\n  ],\n})\nexport class ProductOccModule {}\n","import { Review, Suggestion } from '../../occ/occ-models/occ.models';\nimport { EntityLoaderState } from '../../state/utils/entity-loader/entity-loader-state';\nimport { UIProductSearchPage } from '../model/product-search-page';\nimport { UIProduct } from '../model/product';\n\nexport const PRODUCT_FEATURE = 'product';\nexport const PRODUCT_DETAIL_ENTITY = '[Product] Detail Entity';\n\nexport interface StateWithProduct {\n  [PRODUCT_FEATURE]: ProductsState;\n}\n\nexport interface ProductsState {\n  details: EntityLoaderState<UIProduct>;\n  search: ProductsSearchState;\n  reviews: ProductReviewsState;\n}\n\nexport interface ProductsSearchState {\n  results: UIProductSearchPage;\n  suggestions: Suggestion[];\n  auxResults: UIProductSearchPage;\n}\n\nexport interface ProductReviewsState {\n  productCode: string;\n  list: Review[];\n}\n","import { Action } from '@ngrx/store';\n\nimport { SearchConfig } from '../../model/search-config';\nimport { ErrorModel, Suggestion } from '../../../occ/occ-models';\nimport { UIProductSearchPage } from '../../model/product-search-page';\n\nexport const SEARCH_PRODUCTS = '[Product] Search Products';\nexport const SEARCH_PRODUCTS_FAIL = '[Product] Search Products Fail';\nexport const SEARCH_PRODUCTS_SUCCESS = '[Product] Search Products Success';\nexport const GET_PRODUCT_SUGGESTIONS = '[Product] Get Product Suggestions';\nexport const GET_PRODUCT_SUGGESTIONS_SUCCESS =\n  '[Product] Get Product Suggestions Success';\nexport const GET_PRODUCT_SUGGESTIONS_FAIL =\n  '[Product] Get Product Suggestions Fail';\nexport const CLEAN_PRODUCT_SEARCH = '[Product] Clean Product Search State';\n\nexport class SearchProducts implements Action {\n  readonly type = SEARCH_PRODUCTS;\n  constructor(\n    public payload: { queryText: string; searchConfig: SearchConfig },\n    public auxiliary?: boolean\n  ) {}\n}\n\nexport class SearchProductsFail implements Action {\n  readonly type = SEARCH_PRODUCTS_FAIL;\n  constructor(public payload: ErrorModel, public auxiliary?: boolean) {}\n}\n\nexport class SearchProductsSuccess implements Action {\n  readonly type = SEARCH_PRODUCTS_SUCCESS;\n  constructor(\n    public payload: UIProductSearchPage,\n    public auxiliary?: boolean\n  ) {}\n}\n\nexport class GetProductSuggestions implements Action {\n  readonly type = GET_PRODUCT_SUGGESTIONS;\n  constructor(public payload: { term: string; searchConfig: SearchConfig }) {}\n}\n\nexport class GetProductSuggestionsSuccess implements Action {\n  readonly type = GET_PRODUCT_SUGGESTIONS_SUCCESS;\n  constructor(public payload: Suggestion[]) {}\n}\n\nexport class GetProductSuggestionsFail implements Action {\n  readonly type = GET_PRODUCT_SUGGESTIONS_FAIL;\n  constructor(public payload: ErrorModel) {}\n}\n\nexport class CleanProductSearchState implements Action {\n  readonly type = CLEAN_PRODUCT_SEARCH;\n  constructor() {}\n}\n\n// action types\nexport type ProductSearchAction =\n  | SearchProducts\n  | SearchProductsFail\n  | SearchProductsSuccess\n  | GetProductSuggestions\n  | GetProductSuggestionsSuccess\n  | GetProductSuggestionsFail\n  | CleanProductSearchState;\n","import { PRODUCT_DETAIL_ENTITY } from '../product-state';\nimport {\n  EntityFailAction,\n  EntityLoadAction,\n  EntitySuccessAction,\n} from '../../../state/utils/entity-loader/entity-loader.action';\nimport { UIProduct } from '../../model/product';\n\nexport const LOAD_PRODUCT = '[Product] Load Product Data';\nexport const LOAD_PRODUCT_FAIL = '[Product] Load Product Data Fail';\nexport const LOAD_PRODUCT_SUCCESS = '[Product] Load Product Data Success';\n\nexport class LoadProduct extends EntityLoadAction {\n  readonly type = LOAD_PRODUCT;\n  constructor(public payload: string) {\n    super(PRODUCT_DETAIL_ENTITY, payload);\n  }\n}\n\nexport class LoadProductFail extends EntityFailAction {\n  readonly type = LOAD_PRODUCT_FAIL;\n  constructor(productCode: string, public payload: any) {\n    super(PRODUCT_DETAIL_ENTITY, productCode, payload);\n  }\n}\n\nexport class LoadProductSuccess extends EntitySuccessAction {\n  readonly type = LOAD_PRODUCT_SUCCESS;\n  constructor(public payload: UIProduct) {\n    super(PRODUCT_DETAIL_ENTITY, payload.code);\n  }\n}\n\n// action types\nexport type ProductAction = LoadProduct | LoadProductFail | LoadProductSuccess;\n","import { Action } from '@ngrx/store';\n\nimport { Review, ErrorModel } from '../../../occ/occ-models';\n\nexport const LOAD_PRODUCT_REVIEWS = '[Product] Load Product Reviews Data';\nexport const LOAD_PRODUCT_REVIEWS_FAIL =\n  '[Product] Load Product Reviews Data Fail';\nexport const LOAD_PRODUCT_REVIEWS_SUCCESS =\n  '[Product] Load Product Reviews Data Success';\nexport const POST_PRODUCT_REVIEW = '[Product] Post Product Review';\nexport const POST_PRODUCT_REVIEW_FAIL = '[Product] Post Product Review Fail';\nexport const POST_PRODUCT_REVIEW_SUCCESS =\n  '[Product] Post Product Review Success';\n\nexport class LoadProductReviews implements Action {\n  readonly type = LOAD_PRODUCT_REVIEWS;\n  constructor(public payload: string) {}\n}\n\nexport class LoadProductReviewsFail implements Action {\n  readonly type = LOAD_PRODUCT_REVIEWS_FAIL;\n  constructor(public payload: ErrorModel) {}\n}\n\nexport class LoadProductReviewsSuccess implements Action {\n  readonly type = LOAD_PRODUCT_REVIEWS_SUCCESS;\n  constructor(public payload: { productCode: string; list: Review[] }) {}\n}\n\nexport class PostProductReview implements Action {\n  readonly type = POST_PRODUCT_REVIEW;\n  constructor(public payload: { productCode: string; review: Review }) {}\n}\n\nexport class PostProductReviewFail implements Action {\n  readonly type = POST_PRODUCT_REVIEW_FAIL;\n  constructor(public payload: string) {}\n}\n\nexport class PostProductReviewSuccess implements Action {\n  readonly type = POST_PRODUCT_REVIEW_SUCCESS;\n  constructor(public payload: Review) {}\n}\n\n// action types\nexport type ProductReviewsAction =\n  | LoadProductReviews\n  | LoadProductReviewsFail\n  | LoadProductReviewsSuccess\n  | PostProductReview\n  | PostProductReviewFail\n  | PostProductReviewSuccess;\n","import { MemoizedSelector, createFeatureSelector } from '@ngrx/store';\nimport {\n  PRODUCT_FEATURE,\n  ProductsState,\n  StateWithProduct,\n} from '../product-state';\n\nexport const getProductsState: MemoizedSelector<\n  StateWithProduct,\n  ProductsState\n> = createFeatureSelector<ProductsState>(PRODUCT_FEATURE);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { ProductsState, StateWithProduct } from '../product-state';\nimport { EntityLoaderState } from '../../../state/utils/entity-loader/entity-loader-state';\nimport { entityStateSelector } from '../../../state/utils/entity-loader/entity-loader.selectors';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderErrorSelector,\n  loaderLoadingSelector,\n  loaderSuccessSelector,\n  loaderValueSelector,\n} from '../../../state/utils/loader/loader.selectors';\nimport { UIProduct } from '../../model/product';\nimport { getProductsState } from './feature.selector';\n\nexport const getProductState: MemoizedSelector<\n  StateWithProduct,\n  EntityLoaderState<UIProduct>\n> = createSelector(\n  getProductsState,\n  (state: ProductsState) => state.details\n);\n\nexport const getSelectedProductsFactory = (\n  codes: string[]\n): MemoizedSelector<StateWithProduct, UIProduct[]> => {\n  return createSelector(\n    getProductState,\n    (details: EntityLoaderState<UIProduct>) => {\n      return codes\n        .map(code =>\n          details.entities[code] ? details.entities[code].value : undefined\n        )\n        .filter(product => product !== undefined);\n    }\n  );\n};\n\nexport const getSelectedProductStateFactory = (\n  code: string\n): MemoizedSelector<StateWithProduct, LoaderState<UIProduct>> => {\n  return createSelector(\n    getProductState,\n    details => entityStateSelector(details, code)\n  );\n};\n\nexport const getSelectedProductFactory = (\n  code: string\n): MemoizedSelector<StateWithProduct, UIProduct> => {\n  return createSelector(\n    getSelectedProductStateFactory(code),\n    productState => loaderValueSelector(productState)\n  );\n};\n\nexport const getSelectedProductLoadingFactory = (\n  code: string\n): MemoizedSelector<StateWithProduct, boolean> => {\n  return createSelector(\n    getSelectedProductStateFactory(code),\n    productState => loaderLoadingSelector(productState)\n  );\n};\n\nexport const getSelectedProductSuccessFactory = (\n  code: string\n): MemoizedSelector<StateWithProduct, boolean> => {\n  return createSelector(\n    getSelectedProductStateFactory(code),\n    productState => loaderSuccessSelector(productState)\n  );\n};\n\nexport const getSelectedProductErrorFactory = (\n  code: string\n): MemoizedSelector<StateWithProduct, boolean> => {\n  return createSelector(\n    getSelectedProductStateFactory(code),\n    productState => loaderErrorSelector(productState)\n  );\n};\n\nexport const getAllProductCodes: MemoizedSelector<\n  StateWithProduct,\n  string[]\n> = createSelector(\n  getProductState,\n  details => {\n    return Object.keys(details.entities);\n  }\n);\n","import { ProductsSearchState } from '../product-state';\nimport * as fromProductsSearch from '../actions/product-search.action';\nimport { Suggestion } from '../../../occ/occ-models';\nimport { UIProductSearchPage } from '../../model/product-search-page';\n\nexport const initialState: ProductsSearchState = {\n  results: {},\n  suggestions: [],\n  auxResults: {},\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromProductsSearch.ProductSearchAction\n): ProductsSearchState {\n  switch (action.type) {\n    case fromProductsSearch.SEARCH_PRODUCTS_SUCCESS: {\n      const results = action.payload;\n      const res = action.auxiliary ? { auxResults: results } : { results };\n      return {\n        ...state,\n        ...res,\n      };\n    }\n\n    case fromProductsSearch.GET_PRODUCT_SUGGESTIONS_SUCCESS: {\n      const suggestions: Suggestion[] = action.payload;\n\n      return {\n        ...state,\n        suggestions,\n      };\n    }\n\n    case fromProductsSearch.CLEAN_PRODUCT_SEARCH: {\n      return initialState;\n    }\n  }\n  return state;\n}\n\nexport const getSearchResults = (\n  state: ProductsSearchState\n): UIProductSearchPage => state.results;\nexport const getAuxSearchResults = (\n  state: ProductsSearchState\n): UIProductSearchPage => state.auxResults;\nexport const getProductSuggestions = (\n  state: ProductsSearchState\n): Suggestion[] => state.suggestions;\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { UIProductSearchPage } from '../../model/product-search-page';\n\nimport {\n  ProductsSearchState,\n  ProductsState,\n  StateWithProduct,\n} from '../product-state';\nimport * as fromProductSearch from '../reducers/product-search.reducer';\nimport { Suggestion } from '../../../occ/occ-models/occ.models';\n\nimport { getProductsState } from './feature.selector';\n\nexport const getProductsSearchState: MemoizedSelector<\n  StateWithProduct,\n  ProductsSearchState\n> = createSelector(\n  getProductsState,\n  (state: ProductsState) => state.search\n);\n\nexport const getSearchResults: MemoizedSelector<\n  StateWithProduct,\n  UIProductSearchPage\n> = createSelector(\n  getProductsSearchState,\n  fromProductSearch.getSearchResults\n);\n\nexport const getAuxSearchResults: MemoizedSelector<\n  StateWithProduct,\n  UIProductSearchPage\n> = createSelector(\n  getProductsSearchState,\n  fromProductSearch.getAuxSearchResults\n);\n\nexport const getProductSuggestions: MemoizedSelector<\n  StateWithProduct,\n  Suggestion[]\n> = createSelector(\n  getProductsSearchState,\n  fromProductSearch.getProductSuggestions\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport {\n  ProductReviewsState,\n  ProductsState,\n  StateWithProduct,\n} from '../product-state';\nimport { Review } from '../../../occ/occ-models/occ.models';\n\nimport { getProductsState } from './feature.selector';\n\nexport const getProductReviewsState: MemoizedSelector<\n  StateWithProduct,\n  ProductReviewsState\n> = createSelector(\n  getProductsState,\n  (state: ProductsState) => state.reviews\n);\n\nexport const getSelectedProductReviewsFactory = (\n  productCode\n): MemoizedSelector<StateWithProduct, Review[]> => {\n  return createSelector(\n    getProductReviewsState,\n    reviewData => {\n      if (reviewData.productCode === productCode) {\n        return reviewData.list;\n      }\n    }\n  );\n};\n","import { ProductReviewsState } from '../product-state';\nimport * as fromProductReviews from './../actions/product-reviews.action';\nimport { Review } from '../../../occ/occ-models';\n\nexport const initialState: ProductReviewsState = {\n  productCode: '',\n  list: [],\n};\n\nexport function reducer(\n  state = initialState,\n  action: fromProductReviews.ProductReviewsAction\n): ProductReviewsState {\n  switch (action.type) {\n    case fromProductReviews.LOAD_PRODUCT_REVIEWS_SUCCESS: {\n      const productCode = action.payload.productCode;\n      const list = action.payload.list;\n\n      return {\n        ...state,\n        productCode,\n        list,\n      };\n    }\n  }\n\n  return state;\n}\n\nexport const getReviewList = (state: ProductReviewsState): Review[] =>\n  state.list;\nexport const getReviewProductCode = (state: ProductReviewsState): string =>\n  state.productCode;\n","import { InjectionToken, Provider } from '@angular/core';\nimport { ActionReducer, ActionReducerMap, MetaReducer } from '@ngrx/store';\nimport * as fromProductsSearch from './product-search.reducer';\nimport * as fromProductReviews from './product-reviews.reducer';\nimport { PRODUCT_DETAIL_ENTITY, ProductsState } from '../product-state';\nimport { CURRENCY_CHANGE, LANGUAGE_CHANGE } from '../../../site-context';\nimport { entityLoaderReducer } from '../../../state/utils/entity-loader/entity-loader.reducer';\nimport { UIProduct } from '../../model/product';\n\nexport function getReducers(): ActionReducerMap<ProductsState> {\n  return {\n    search: fromProductsSearch.reducer,\n    details: entityLoaderReducer<UIProduct>(PRODUCT_DETAIL_ENTITY),\n    reviews: fromProductReviews.reducer,\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<ProductsState>\n> = new InjectionToken<ActionReducerMap<ProductsState>>('ProductReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport function clearProductsState(\n  reducer: ActionReducer<any>\n): ActionReducer<any> {\n  return function(state, action) {\n    if (action.type === CURRENCY_CHANGE || action.type === LANGUAGE_CHANGE) {\n      state = undefined;\n    }\n    return reducer(state, action);\n  };\n}\n\nexport const metaReducers: MetaReducer<any>[] = [clearProductsState];\n","import { Injectable } from '@angular/core';\nimport { ProductSearchAdapter } from './product-search.adapter';\nimport { Suggestion } from '../../../occ/occ-models/occ.models';\nimport { SearchConfig } from '../../model/search-config';\nimport { Observable } from 'rxjs';\nimport { UIProductSearchPage } from '../../model/product-search-page';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductSearchConnector {\n  constructor(protected adapter: ProductSearchAdapter) {}\n\n  search(\n    query: string,\n    searchConfig?: SearchConfig\n  ): Observable<UIProductSearchPage> {\n    return this.adapter.search(query, searchConfig);\n  }\n\n  getSuggestions(term: string, pageSize?: number): Observable<Suggestion[]> {\n    return this.adapter.loadSuggestions(term, pageSize);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\n\nimport * as productsSearchActions from '../actions/product-search.action';\nimport { ProductSearchConnector } from '../../connectors/search/product-search.connector';\n\n@Injectable()\nexport class ProductsSearchEffects {\n  @Effect()\n  searchProducts$: Observable<\n    | productsSearchActions.SearchProductsSuccess\n    | productsSearchActions.SearchProductsFail\n  > = this.actions$.pipe(\n    ofType(productsSearchActions.SEARCH_PRODUCTS),\n    switchMap((action: productsSearchActions.SearchProducts) => {\n      return this.productSearchConnector\n        .search(action.payload.queryText, action.payload.searchConfig)\n        .pipe(\n          map(data => {\n            return new productsSearchActions.SearchProductsSuccess(\n              data,\n              action.auxiliary\n            );\n          }),\n          catchError(error =>\n            of(\n              new productsSearchActions.SearchProductsFail(\n                error,\n                action.auxiliary\n              )\n            )\n          )\n        );\n    })\n  );\n\n  @Effect()\n  getProductSuggestions$: Observable<\n    | productsSearchActions.GetProductSuggestionsSuccess\n    | productsSearchActions.GetProductSuggestionsFail\n  > = this.actions$.pipe(\n    ofType(productsSearchActions.GET_PRODUCT_SUGGESTIONS),\n    map(\n      (action: productsSearchActions.GetProductSuggestions) => action.payload\n    ),\n    switchMap(payload => {\n      return this.productSearchConnector\n        .getSuggestions(payload.term, payload.searchConfig.pageSize)\n        .pipe(\n          map(suggestions => {\n            if (suggestions === undefined) {\n              return new productsSearchActions.GetProductSuggestionsSuccess([]);\n            }\n            return new productsSearchActions.GetProductSuggestionsSuccess(\n              suggestions\n            );\n          }),\n          catchError(error =>\n            of(new productsSearchActions.GetProductSuggestionsFail(error))\n          )\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private productSearchConnector: ProductSearchConnector\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ProductAdapter } from './product.adapter';\nimport { UIProduct } from '../../model/product';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductConnector {\n  constructor(private adapter: ProductAdapter) {}\n\n  get(productCode: string): Observable<UIProduct> {\n    return this.adapter.load(productCode);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport { of, Observable } from 'rxjs';\nimport { map, catchError, mergeMap, switchMap, groupBy } from 'rxjs/operators';\n\nimport * as actions from '../actions/index';\nimport { ProductConnector } from '../../connectors/product/product.connector';\n\n@Injectable()\nexport class ProductEffects {\n  @Effect()\n  loadProduct$: Observable<\n    actions.LoadProductSuccess | actions.LoadProductFail\n  > = this.actions$.pipe(\n    ofType(actions.LOAD_PRODUCT),\n    map((action: actions.LoadProduct) => action.payload),\n    groupBy(productCode => productCode),\n    mergeMap(group =>\n      group.pipe(\n        switchMap(productCode => {\n          return this.productConnector.get(productCode).pipe(\n            map(product => {\n              return new actions.LoadProductSuccess(product);\n            }),\n            catchError(error =>\n              of(new actions.LoadProductFail(productCode, error))\n            )\n          );\n        })\n      )\n    )\n  );\n\n  constructor(\n    private actions$: Actions,\n    private productConnector: ProductConnector\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Review } from '../../../occ/occ-models/occ.models';\nimport { ProductReviewsAdapter } from './product-reviews.adapter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductReviewsConnector {\n  constructor(protected adapter: ProductReviewsAdapter) {}\n\n  get(productCode: string, maxCount?: number): Observable<Review[]> {\n    return this.adapter.load(productCode, maxCount);\n  }\n\n  add(productCode: string, review: any): Observable<Review> {\n    return this.adapter.post(productCode, review);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\nimport { ErrorModel } from '../../../occ/occ-models/occ.models';\nimport { ProductReviewsConnector } from '../../connectors/reviews/product-reviews.connector';\nimport * as productReviewsActions from './../actions/product-reviews.action';\n\n@Injectable()\nexport class ProductReviewsEffects {\n  @Effect()\n  loadProductReviews$: Observable<\n    | productReviewsActions.LoadProductReviewsSuccess\n    | productReviewsActions.LoadProductReviewsFail\n  > = this.actions$.pipe(\n    ofType(productReviewsActions.LOAD_PRODUCT_REVIEWS),\n    map((action: productReviewsActions.LoadProductReviews) => action.payload),\n    mergeMap(productCode => {\n      return this.productReviewsConnector.get(productCode).pipe(\n        map(data => {\n          return new productReviewsActions.LoadProductReviewsSuccess({\n            productCode,\n            list: data,\n          });\n        }),\n        catchError(_error =>\n          of(\n            new productReviewsActions.LoadProductReviewsFail({\n              message: productCode,\n            } as ErrorModel)\n          )\n        )\n      );\n    })\n  );\n\n  @Effect()\n  postProductReview: Observable<\n    | productReviewsActions.PostProductReviewSuccess\n    | productReviewsActions.PostProductReviewFail\n  > = this.actions$.pipe(\n    ofType(productReviewsActions.POST_PRODUCT_REVIEW),\n    map((action: productReviewsActions.PostProductReview) => action.payload),\n    mergeMap(payload => {\n      return this.productReviewsConnector\n        .add(payload.productCode, payload.review)\n        .pipe(\n          map(reviewResponse => {\n            return new productReviewsActions.PostProductReviewSuccess(\n              reviewResponse\n            );\n          }),\n          catchError(_error =>\n            of(\n              new productReviewsActions.PostProductReviewFail(\n                payload.productCode\n              )\n            )\n          )\n        );\n    })\n  );\n\n  constructor(\n    private actions$: Actions,\n    private productReviewsConnector: ProductReviewsConnector\n  ) {}\n}\n","import { ProductsSearchEffects } from './product-search.effect';\nimport { ProductEffects } from './product.effect';\nimport { ProductReviewsEffects } from './product-reviews.effect';\n\nexport const effects: any[] = [\n  ProductsSearchEffects,\n  ProductEffects,\n  ProductReviewsEffects,\n];\n\nexport * from './product-search.effect';\nexport * from './product.effect';\nexport * from './product-reviews.effect';\n","import { Injectable } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { map, multicast, refCount, tap } from 'rxjs/operators';\nimport * as fromStore from '../store/index';\nimport { UIProduct } from '../model/product';\n\n@Injectable()\nexport class ProductService {\n  constructor(private store: Store<fromStore.StateWithProduct>) {}\n\n  private products: { [code: string]: Observable<UIProduct> } = {};\n\n  /**\n   * Returns the product observable. The product will be loaded\n   * whenever there's no value observed.\n   *\n   * The underlying product loader ensures that the product is\n   * only loaded once, even in case of parallel observers.\n   */\n  get(productCode: string): Observable<UIProduct> {\n    if (!this.products[productCode]) {\n      this.products[productCode] = this.store.pipe(\n        select(fromStore.getSelectedProductStateFactory(productCode)),\n        tap(productState => {\n          const attemptedLoad =\n            productState.loading || productState.success || productState.error;\n\n          if (!attemptedLoad) {\n            this.store.dispatch(new fromStore.LoadProduct(productCode));\n          }\n        }),\n        map(productState => productState.value),\n        // TODO: Replace next two lines with shareReplay(1, undefined, true) when RxJS 6.4 will be in use\n        multicast(() => new ReplaySubject(1)),\n        refCount()\n      );\n    }\n    return this.products[productCode];\n  }\n\n  /**\n   * Returns boolean observable for product's loading state\n   */\n  isLoading(productCode: string): Observable<boolean> {\n    return this.store.pipe(\n      select(fromStore.getSelectedProductLoadingFactory(productCode))\n    );\n  }\n\n  /**\n   * Returns boolean observable for product's load success state\n   */\n  isSuccess(productCode: string): Observable<boolean> {\n    return this.store.pipe(\n      select(fromStore.getSelectedProductSuccessFactory(productCode))\n    );\n  }\n\n  /**\n   * Returns boolean observable for product's load error state\n   */\n  hasError(productCode: string): Observable<boolean> {\n    return this.store.pipe(\n      select(fromStore.getSelectedProductErrorFactory(productCode))\n    );\n  }\n\n  /**\n   * Reloads the product. The product is loaded implicetly\n   * whenever selected by the `get`, but in some cases an\n   * explicit reload might be needed.\n   */\n  reload(productCode: string): void {\n    this.store.dispatch(new fromStore.LoadProduct(productCode));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { select, Store } from '@ngrx/store';\n\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { SearchConfig } from '../model/search-config';\nimport * as fromStore from '../store/index';\nimport { Suggestion } from '../../occ/occ-models';\nimport { UIProductSearchPage } from '../model/product-search-page';\n\n@Injectable()\nexport class ProductSearchService {\n  constructor(\n    private store: Store<fromStore.StateWithProduct>,\n    private router: Router\n  ) {}\n\n  search(query: string, searchConfig?: SearchConfig): void {\n    const urlTree = this.router.createUrlTree([], {\n      queryParams: { ...searchConfig, query },\n      preserveFragment: false,\n    });\n\n    this.router.navigateByUrl(urlTree);\n    this.store.dispatch(\n      new fromStore.SearchProducts({\n        queryText: query,\n        searchConfig: searchConfig,\n      })\n    );\n  }\n\n  getSearchResults(): Observable<UIProductSearchPage> {\n    return this.store.pipe(select(fromStore.getSearchResults));\n  }\n\n  clearSearchResults(): void {\n    this.store.dispatch(new fromStore.CleanProductSearchState());\n  }\n\n  getAuxSearchResults(): Observable<UIProductSearchPage> {\n    return this.store.pipe(\n      select(fromStore.getAuxSearchResults),\n      filter(results => Object.keys(results).length > 0)\n    );\n  }\n\n  getSearchSuggestions(): Observable<Suggestion[]> {\n    return this.store.pipe(select(fromStore.getProductSuggestions));\n  }\n\n  searchAuxiliary(query: string, searchConfig?: SearchConfig): void {\n    this.store.dispatch(\n      new fromStore.SearchProducts(\n        {\n          queryText: query,\n          searchConfig: searchConfig,\n        },\n        true\n      )\n    );\n  }\n\n  getSuggestions(query: string, searchConfig?: SearchConfig): void {\n    this.store.dispatch(\n      new fromStore.GetProductSuggestions({\n        term: query,\n        searchConfig: searchConfig,\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Store, select } from '@ngrx/store';\n\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nimport * as fromStore from '../store/index';\nimport { Review } from '../../occ/occ-models/occ.models';\n\n@Injectable()\nexport class ProductReviewService {\n  constructor(private store: Store<fromStore.StateWithProduct>) {}\n\n  getByProductCode(productCode: string): Observable<Review[]> {\n    const selector = fromStore.getSelectedProductReviewsFactory(productCode);\n    return this.store.pipe(\n      select(selector),\n      tap(reviews => {\n        if (reviews === undefined && productCode !== undefined) {\n          this.store.dispatch(new fromStore.LoadProductReviews(productCode));\n        }\n      })\n    );\n  }\n\n  add(productCode: string, review: Review): void {\n    this.store.dispatch(\n      new fromStore.PostProductReview({\n        productCode: productCode,\n        review,\n      })\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { ConfigModule } from '../../config/config.module';\nimport {\n  StateConfig,\n  StateTransferType,\n} from '../../state/config/state-config';\nimport { ProductOccModule } from '../occ/product-occ.module';\nimport { effects } from './effects/index';\nimport { PRODUCT_FEATURE } from './product-state';\nimport { metaReducers, reducerProvider, reducerToken } from './reducers/index';\n\nexport function productStoreConfigFactory(): StateConfig {\n  // if we want to reuse PRODUCT_FEATURE const in config, we have to use factory instead of plain object\n  const config = {\n    state: {\n      ssrTransfer: {\n        keys: { [PRODUCT_FEATURE]: StateTransferType.TRANSFER_STATE },\n      },\n    },\n  };\n  return config;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    ProductOccModule,\n    StoreModule.forFeature(PRODUCT_FEATURE, reducerToken, { metaReducers }),\n    EffectsModule.forFeature(effects),\n    ConfigModule.withConfigFactory(productStoreConfigFactory),\n  ],\n  providers: [reducerProvider],\n})\nexport class ProductStoreModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, combineLatest } from 'rxjs';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { PageMeta } from '../../cms/model/page.model';\nimport { PageMetaResolver } from '../../cms/page/page-meta.resolver';\nimport {\n  PageDescriptionResolver,\n  PageHeadingResolver,\n  PageImageResolver,\n  PageTitleResolver,\n} from '../../cms/page/page.resolvers';\nimport { PageType } from '../../occ/occ-models/occ.models';\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { ProductService } from '../facade/product.service';\nimport { UIProduct } from '../model/product';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductPageMetaResolver extends PageMetaResolver\n  implements\n    PageHeadingResolver,\n    PageTitleResolver,\n    PageDescriptionResolver,\n    PageImageResolver {\n  constructor(\n    protected routingService: RoutingService,\n    protected productService: ProductService\n  ) {\n    super();\n    this.pageType = PageType.PRODUCT_PAGE;\n  }\n\n  resolve(): Observable<PageMeta> {\n    return this.routingService.getRouterState().pipe(\n      map(state => state.state.params['productCode']),\n      filter(Boolean),\n      switchMap(code => this.productService.get(code)),\n      filter(Boolean),\n      switchMap((p: UIProduct) =>\n        combineLatest([\n          this.resolveHeading(p),\n          this.resolveTitle(p),\n          this.resolveDescription(p),\n          this.resolveImage(p),\n        ])\n      ),\n      map(([heading, title, description, image]) => ({\n        heading,\n        title,\n        description,\n        image,\n      }))\n    );\n  }\n\n  resolveHeading(product: UIProduct): Observable<string> {\n    return of(product.name);\n  }\n\n  resolveTitle(product: UIProduct): Observable<string> {\n    let title = product.name;\n    title += this.resolveFirstCategory(product);\n    title += this.resolveManufacturer(product);\n\n    return of(title);\n  }\n\n  resolveDescription(product: UIProduct): Observable<string> {\n    return of(product.summary);\n  }\n\n  resolveImage(product: any): Observable<string> {\n    let result;\n    if (\n      product.images &&\n      product.images.PRIMARY &&\n      product.images.PRIMARY.zoom &&\n      product.images.PRIMARY.zoom.url\n    ) {\n      result = product.images.PRIMARY.zoom.url;\n    }\n    return of(result);\n  }\n\n  private resolveFirstCategory(product: UIProduct): string {\n    let firstCategory;\n    if (product.categories && product.categories.length > 0) {\n      firstCategory = product.categories[0];\n    }\n    return firstCategory\n      ? ` | ${firstCategory.name || firstCategory.code}`\n      : '';\n  }\n\n  private resolveManufacturer(product: UIProduct): string {\n    return product.manufacturer ? ` | ${product.manufacturer}` : '';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, combineLatest, of } from 'rxjs';\nimport { map, filter, switchMap } from 'rxjs/operators';\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { PageType } from '../../occ/occ-models/occ.models';\nimport { ProductSearchService } from '../facade/product-search.service';\nimport { PageMetaResolver } from '../../cms/page/page-meta.resolver';\nimport { PageMeta } from '../../cms/model/page.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SearchPageMetaResolver extends PageMetaResolver\n  implements PageMetaResolver {\n  constructor(\n    protected routingService: RoutingService,\n    protected productSearchService: ProductSearchService\n  ) {\n    super();\n    this.pageType = PageType.CONTENT_PAGE;\n    this.pageTemplate = 'SearchResultsListPageTemplate';\n  }\n\n  resolve(): Observable<PageMeta> {\n    const total$: Observable<\n      number\n    > = this.productSearchService.getSearchResults().pipe(\n      filter(data => !!(data && data.pagination)),\n      map(results => results.pagination.totalResults)\n    );\n\n    const query$: Observable<\n      string\n    > = this.routingService.getRouterState().pipe(\n      map(state => state.state.params['query']),\n      filter(Boolean)\n    );\n\n    return combineLatest([total$, query$]).pipe(\n      switchMap(([total, query]: [number, string]) =>\n        this.resolveTitle(total, query)\n      ),\n      map(title => ({ title }))\n    );\n  }\n\n  resolveTitle(total: number, query: string): Observable<string> {\n    return of(`${total} results for \"${query}\"`);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { CmsService } from '../../cms/facade/cms.service';\nimport { Page, PageMeta } from '../../cms/model/page.model';\n\nimport { PageType } from '../../occ/occ-models/occ.models';\nimport { PageMetaResolver } from '../../cms/page/page-meta.resolver';\nimport { ProductSearchService } from '../facade/product-search.service';\nimport { PageTitleResolver } from '../../cms/page/page.resolvers';\nimport { UIProductSearchPage } from '../model/product-search-page';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CategoryPageMetaResolver extends PageMetaResolver\n  implements PageTitleResolver {\n  constructor(\n    protected routingService: RoutingService,\n    protected productSearchService: ProductSearchService,\n    protected cms: CmsService\n  ) {\n    super();\n    this.pageType = PageType.CATEGORY_PAGE;\n  }\n\n  resolve(): Observable<PageMeta> {\n    return this.cms.getCurrentPage().pipe(\n      filter(Boolean),\n      switchMap(page => {\n        // only the existence of a plp component tells us if products\n        // are rendered or if this is an ordinary content page\n        if (this.hasProductListComponent(page)) {\n          return this.productSearchService.getSearchResults().pipe(\n            filter(data => data.breadcrumbs && data.breadcrumbs.length > 0),\n            switchMap(data => {\n              return this.resolveTitle(data).pipe(map(title => ({ title })));\n            })\n          );\n        } else {\n          return of({\n            title: page.title || page.name,\n          });\n        }\n      })\n    );\n  }\n\n  resolveTitle(data: UIProductSearchPage): Observable<string> {\n    return of(\n      `${data.pagination.totalResults} results for ${\n        data.breadcrumbs[0].facetValueName\n      }`\n    );\n  }\n\n  protected hasProductListComponent(page: Page): boolean {\n    // ProductListComponent\n    return !!Object.keys(page.slots).find(\n      key =>\n        !!page.slots[key].components.find(\n          comp => comp.typeCode === 'CMSProductListComponent'\n        )\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport {\n  ProductService,\n  ProductSearchService,\n  ProductReviewService,\n} from './facade/index';\nimport { ProductStoreModule } from './store/product-store.module';\nimport { ProductOccModule } from './occ/product-occ.module';\n\nimport { CmsModule } from '../cms/cms.module';\nimport { PageMetaResolver } from '../cms/page/page-meta.resolver';\nimport { ProductPageMetaResolver } from './services/product-page-meta.resolver';\nimport { SearchPageMetaResolver } from './services/search-page-meta.resolver';\nimport { CategoryPageMetaResolver } from './services/category-page-meta.resolver';\n\nconst pageTitleResolvers = [\n  {\n    provide: PageMetaResolver,\n    useExisting: ProductPageMetaResolver,\n    multi: true,\n  },\n  {\n    provide: PageMetaResolver,\n    useExisting: CategoryPageMetaResolver,\n    multi: true,\n  },\n  {\n    provide: PageMetaResolver,\n    useExisting: SearchPageMetaResolver,\n    multi: true,\n  },\n];\n\n@NgModule({\n  imports: [ProductOccModule, ProductStoreModule, CmsModule],\n  providers: [\n    ProductService,\n    ProductSearchService,\n    ProductReviewService,\n    ...pageTitleResolvers,\n  ],\n})\nexport class ProductModule {}\n","import { ServerConfig } from '../../config';\nimport { TranslationResources } from '../translation-resources';\n\nexport abstract class I18nConfig extends ServerConfig {\n  i18n?: {\n    fallbackLang?: string | false;\n    backend?: {\n      loadPath?: string;\n      crossDomain?: boolean;\n    };\n    resources?: TranslationResources;\n    debug?: boolean;\n    chunks?: {\n      [mainKey: string]: string;\n    };\n  };\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DatePipe as NativeDatePipe } from '@angular/common';\nimport { getLocaleId } from '@angular/common';\nimport { LanguageService } from '../site-context/facade/language.service';\nimport { I18nConfig } from './config/i18n-config';\n\n@Pipe({ name: 'cxDate' })\nexport class DatePipe extends NativeDatePipe implements PipeTransform {\n  constructor(private language: LanguageService, private config: I18nConfig) {\n    super(null);\n  }\n\n  transform(value: any, format?: string, timezone?: string): string | null {\n    return super.transform(value, format, timezone, this.getLang());\n  }\n\n  private getLang() {\n    const lang = this.getActiveLang();\n    try {\n      getLocaleId(lang);\n      return lang;\n    } catch {\n      this.reportMissingLocaleData(lang);\n      return 'en';\n    }\n  }\n\n  private getActiveLang(): string {\n    let result;\n    this.language\n      .getActive()\n      .subscribe(lang => (result = lang))\n      .unsubscribe();\n    return result;\n  }\n\n  private reportMissingLocaleData(lang: string) {\n    if (!this.config.production) {\n      console.warn(\n        `cxDate pipe: No locale data registered for '${lang}' (see https://angular.io/api/common/registerLocaleData).`\n      );\n    }\n  }\n}\n","import { Observable } from 'rxjs';\n\nexport abstract class TranslationService {\n  /**\n   * Translates given key with options.\n   * If key is missing, it tries to load the chunk and emits a value when chunk is loaded.\n   * If key is missing after loaded chunk, a fallback value is emitted\n   *\n   * @param key translation key\n   * @param options values for interpolation in translation\n   * @param whitespaceUntilLoaded if true, immediately emits a non-breaking space\n   */\n  translate: (\n    key: string,\n    options?: any,\n    whitespaceUntilLoaded?: boolean\n  ) => Observable<string>;\n\n  /**\n   * Loads chunks with translations\n   *\n   * @param chunkNames array of chunk names to be loaded\n   */\n  loadChunks: (chunkNames: string | string[]) => Promise<any>;\n}\n","import {\n  ChangeDetectorRef,\n  OnDestroy,\n  Pipe,\n  PipeTransform,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { TranslationService } from './translation.service';\nimport { shallowEqualObjects } from './utils/shallow-equal-objects';\n\n@Pipe({ name: 'cxTranslate', pure: false })\nexport class TranslatePipe implements PipeTransform, OnDestroy {\n  private lastKey: string;\n  private lastOptions: object;\n  private value: string;\n  private sub: Subscription;\n\n  constructor(\n    private service: TranslationService,\n    private cd: ChangeDetectorRef\n  ) {}\n\n  transform(key: any, options: object = {}): string {\n    if (\n      key !== this.lastKey ||\n      !shallowEqualObjects(options, this.lastOptions)\n    ) {\n      this.lastKey = key;\n      this.lastOptions = options;\n\n      if (this.sub) {\n        this.sub.unsubscribe();\n      }\n      this.sub = this.service\n        .translate(key, options, true)\n        .subscribe(val => this.markForCheck(val));\n    }\n    return this.value;\n  }\n\n  private markForCheck(value: string) {\n    this.value = value;\n    this.cd.markForCheck();\n  }\n\n  ngOnDestroy(): void {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n  }\n}\n","export function shallowEqualObjects(objA: object, objB: object): boolean {\n  if (objA === objB) {\n    return true;\n  }\n  if (!objA || !objB) {\n    return false;\n  }\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  const aKeysLen = aKeys.length;\n  const bKeysLen = bKeys.length;\n\n  if (aKeysLen !== bKeysLen) {\n    return false;\n  }\n  for (let i = 0; i < aKeysLen; i++) {\n    const key = aKeys[i];\n    if (objA[key] !== objB[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n","import { Injectable } from '@angular/core';\nimport { I18nConfig } from './config/i18n-config';\n\n@Injectable()\nexport class TranslationChunkService {\n  constructor(protected config: I18nConfig) {}\n\n  protected readonly KEY_SEPARATOR = '.';\n\n  getChunkNameForKey(key: string): string {\n    const mainKey = (key || '').split(this.KEY_SEPARATOR)[0];\n    const chunk = this.getChunkFromConfig(mainKey);\n\n    if (!chunk) {\n      return mainKey; // fallback to main key as a chunk\n    }\n    return chunk;\n  }\n\n  private getChunkFromConfig(mainKey: string): string {\n    return (\n      this.config.i18n &&\n      this.config.i18n.chunks &&\n      this.config.i18n.chunks[mainKey]\n    );\n  }\n}\n","import i18next from 'i18next';\nimport i18nextXhrBackend from 'i18next-xhr-backend';\nimport { I18nConfig } from '../config/i18n-config';\nimport { LanguageService } from '../../site-context/facade/language.service';\nimport { TranslationResources } from '../translation-resources';\n\nexport function i18nextInit(\n  config: I18nConfig,\n  languageService: LanguageService\n): () => Promise<any> {\n  return () => {\n    let i18nextConfig: i18next.InitOptions = {\n      ns: [], // don't preload any namespaces\n      fallbackLng: config.i18n.fallbackLang,\n      debug: config.i18n.debug,\n    };\n    if (config.i18n.backend) {\n      i18next.use(i18nextXhrBackend);\n      i18nextConfig = { ...i18nextConfig, backend: config.i18n.backend };\n    }\n    return i18next.init(i18nextConfig, () => {\n      // Don't use i18next's 'resources' config key for adding static translations,\n      // because it will disable loading chunks from backend. We add resources here, in the init's callback.\n      i18nextAddTranslations(config.i18n.resources);\n      syncI18nextWithSiteContext(languageService);\n    });\n  };\n}\n\nexport function i18nextAddTranslations(resources: TranslationResources = {}) {\n  Object.keys(resources).forEach(lang => {\n    Object.keys(resources[lang]).forEach(chunkName => {\n      i18next.addResourceBundle(\n        lang,\n        chunkName,\n        resources[lang][chunkName],\n        true,\n        true\n      );\n    });\n  });\n}\n\nexport function syncI18nextWithSiteContext(language: LanguageService) {\n  // always update language of i18next on site context (language) change\n  language.getActive().subscribe(lang => i18next.changeLanguage(lang));\n}\n","import { Provider, APP_INITIALIZER } from '@angular/core';\nimport { I18nConfig } from '../config/i18n-config';\nimport { LanguageService } from '../../site-context/facade/language.service';\nimport { i18nextInit } from './i18next-init';\n\nexport const i18nextProviders: Provider[] = [\n  {\n    provide: APP_INITIALIZER,\n    useFactory: i18nextInit,\n    deps: [I18nConfig, LanguageService],\n    multi: true,\n  },\n];\n","import { I18nConfig } from './i18n-config';\n\nexport const defaultI18nConfig: I18nConfig = {\n  i18n: {\n    fallbackLang: false,\n    debug: false,\n    chunks: {\n      common: 'common',\n      spinner: 'common',\n      header: 'common',\n      searchBox: 'common',\n\n      cartDetails: 'cart',\n      cartItems: 'cart',\n      orderCost: 'cart',\n\n      addressForm: 'address',\n      addressBook: 'address',\n      addressCard: 'address',\n\n      paymentForm: 'payment',\n      paymentMethods: 'payment',\n\n      checkout: 'checkout',\n      checkoutAddress: 'checkout',\n      checkoutOrderConfirmation: 'checkout',\n      checkoutReview: 'checkout',\n      checkoutShipping: 'checkout',\n\n      orderDetails: 'myAccount',\n      orderHistory: 'myAccount',\n\n      productDetails: 'product',\n      productList: 'product',\n      productFacetNavigation: 'product',\n      productSummary: 'product',\n      productReview: 'product',\n      addToCart: 'product',\n\n      forgottenPassword: 'user',\n      loginForm: 'user',\n      login: 'user',\n      register: 'user',\n      updateEmailForm: 'user',\n      updatePasswordForm: 'user',\n      updateProfileForm: 'user',\n\n      storeFinder: 'storeFinder',\n      pwa: 'pwa',\n    },\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { TranslationService } from '../translation.service';\nimport i18next from 'i18next';\nimport { I18nConfig } from '../config/i18n-config';\nimport { TranslationChunkService } from '../translation-chunk.service';\n\n@Injectable()\nexport class I18nextTranslationService implements TranslationService {\n  private readonly NON_BREAKING_SPACE = String.fromCharCode(160);\n  protected readonly NAMESPACE_SEPARATOR = ':';\n\n  constructor(\n    protected config: I18nConfig,\n    protected translationChunk: TranslationChunkService\n  ) {}\n\n  translate(\n    key: string,\n    options: any = {},\n    whitespaceUntilLoaded: boolean = false\n  ): Observable<string> {\n    // If we've already loaded the chunk (or failed to load), we should immediately emit the value\n    // (or the fallback value in case the key is missing).\n\n    // Moreover, we SHOULD emit a value (or a fallback value) synchronously (not in a promise/setTimeout).\n    // Otherwise, we the will trigger additional deferred change detection in a view that consumes the returned observable,\n    // which together with `switchMap` operator may lead to an infinite loop.\n\n    const chunkName = this.translationChunk.getChunkNameForKey(key);\n    const namespacedKey = this.getNamespacedKey(key, chunkName);\n\n    return new Observable<string>(subscriber => {\n      const translate = () => {\n        if (i18next.exists(namespacedKey, options)) {\n          subscriber.next(i18next.t(namespacedKey, options));\n        } else {\n          if (whitespaceUntilLoaded) {\n            subscriber.next(this.NON_BREAKING_SPACE);\n          }\n          i18next.loadNamespaces(chunkName, () => {\n            if (!i18next.exists(namespacedKey, options)) {\n              this.reportMissingKey(key, chunkName);\n              subscriber.next(this.getFallbackValue(namespacedKey));\n            } else {\n              subscriber.next(i18next.t(namespacedKey, options));\n            }\n          });\n        }\n      };\n\n      translate();\n      i18next.on('languageChanged', translate);\n      return () => i18next.off('languageChanged', translate);\n    });\n  }\n\n  loadChunks(chunkNames: string | string[]): Promise<any> {\n    return i18next.loadNamespaces(chunkNames);\n  }\n\n  /**\n   * Returns a fallback value in case when the given key is missing\n   * @param key\n   */\n  protected getFallbackValue(key: string): string {\n    return this.config.production ? this.NON_BREAKING_SPACE : `[${key}]`;\n  }\n\n  private reportMissingKey(key: string, chunkName: string) {\n    if (!this.config.production) {\n      console.warn(\n        `Translation key missing '${key}' in the chunk '${chunkName}'`\n      );\n    }\n  }\n\n  private getNamespacedKey(key: string, chunk: string): string {\n    return chunk + this.NAMESPACE_SEPARATOR + key;\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { TranslatePipe } from './translate.pipe';\nimport { i18nextProviders } from './i18next/i18next-providers';\nimport { defaultI18nConfig } from './config/default-i18n-config';\nimport { I18nConfig } from './config/i18n-config';\nimport { TranslationService } from './translation.service';\nimport { provideConfig, Config } from '../config/config.module';\nimport { I18nextTranslationService } from './i18next/i18next-translation.service';\nimport { DatePipe } from './date.pipe';\nimport { TranslationChunkService } from './translation-chunk.service';\n\n@NgModule({\n  declarations: [TranslatePipe, DatePipe],\n  exports: [TranslatePipe, DatePipe],\n})\nexport class I18nModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: I18nModule,\n      providers: [\n        provideConfig(defaultI18nConfig),\n        { provide: I18nConfig, useExisting: Config },\n        { provide: TranslationService, useClass: I18nextTranslationService },\n        TranslationChunkService,\n        ...i18nextProviders,\n      ],\n    };\n  }\n}\n","export function mockTranslate(key: string, options: any = {}) {\n  const optionsString = Object.keys(options)\n    .sort()\n    .map(optionName => `${optionName}:${options[optionName]}`)\n    .join(' ');\n  return optionsString ? `${key} ${optionsString}` : key;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { mockTranslate } from './mock-translate';\n\n@Pipe({ name: 'cxTranslate' })\nexport class MockTranslatePipe implements PipeTransform {\n  transform(key: any, options: object = {}): string {\n    return mockTranslate(key, options);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { TranslationService } from '../translation.service';\nimport { mockTranslate } from './mock-translate';\n\n@Injectable()\nexport class MockTranslationService implements TranslationService {\n  translate(\n    key: string,\n    options: any = {},\n    _whitespaceUntilLoaded: boolean = false\n  ): Observable<string> {\n    return new Observable<string>(subscriber => {\n      const value = mockTranslate(key, options);\n      subscriber.next(value);\n      subscriber.complete();\n    });\n  }\n\n  loadChunks(_chunks: string | string[]): Promise<any> {\n    return Promise.resolve();\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DatePipe as NativeDatePipe } from '@angular/common';\n\n@Pipe({ name: 'cxDate' })\nexport class MockDatePipe extends NativeDatePipe implements PipeTransform {\n  transform(value: any, format?: string, timezone?: string): string {\n    return super.transform(value, format, timezone, 'en');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MockTranslatePipe } from './mock-translate.pipe';\nimport { TranslationService } from '../translation.service';\nimport { MockTranslationService } from './mock-translation.service';\nimport { MockDatePipe } from './mock-date.pipe';\n\n@NgModule({\n  declarations: [MockTranslatePipe, MockDatePipe],\n  exports: [MockTranslatePipe, MockDatePipe],\n  providers: [\n    { provide: TranslationService, useClass: MockTranslationService },\n  ],\n})\nexport class I18nTestingModule {}\n","import { Injectable, Optional } from '@angular/core';\n\nimport { AuthService } from '../auth/index';\nimport { CmsService } from '../cms/index';\nimport { RoutingService } from '../routing/index';\nimport { LanguageService, CurrencyService } from '../site-context/index';\nimport {\n  ProductService,\n  ProductSearchService,\n  ProductReviewService,\n} from '../product/index';\nimport { UserService } from '../user/index';\nimport { TranslationService } from '../i18n/index';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CxApiService {\n  constructor(\n    @Optional() public auth: AuthService,\n    @Optional() public cms: CmsService,\n    @Optional() public routing: RoutingService,\n    // site context\n    @Optional() public currency: CurrencyService,\n    @Optional() public language: LanguageService,\n    // product\n    @Optional() public product: ProductService,\n    @Optional() public productSearch: ProductSearchService,\n    @Optional() public productReview: ProductReviewService,\n    // user\n    @Optional() public user: UserService,\n    // translation\n    @Optional() public translation: TranslationService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { combineLatest } from 'rxjs';\nimport { takeWhile } from 'rxjs/operators';\n\nimport { RoutingService } from '../../routing/facade/routing.service';\nimport { CmsService } from '../../cms/facade/cms.service';\nimport { PageType } from '../../occ/occ-models/index';\nimport { Page } from '../../cms/model/page.model';\nimport { WindowRef } from '../../window/window-ref';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SmartEditService {\n  private _cmsTicketId: string;\n  private getPreviewPage = false;\n\n  constructor(\n    private cmsService: CmsService,\n    private routingService: RoutingService,\n    winRef: WindowRef\n  ) {\n    this.getCmsTicket();\n    this.addPageContract();\n\n    if (winRef.nativeWindow) {\n      const window = winRef.nativeWindow as any;\n      // rerender components and slots after editing\n      window.smartedit = window.smartedit || {};\n      window.smartedit.renderComponent = (\n        componentId,\n        componentType,\n        parentId\n      ) => {\n        return this.renderComponent(componentId, componentType, parentId);\n      };\n\n      // reprocess page\n      window.smartedit.reprocessPage = this.reprocessPage;\n    }\n  }\n\n  get cmsTicketId(): string {\n    return this._cmsTicketId;\n  }\n\n  protected getCmsTicket() {\n    combineLatest(\n      this.cmsService.getCurrentPage(),\n      this.routingService.getRouterState()\n    )\n      .pipe(takeWhile(([cmsPage]) => cmsPage === undefined))\n      .subscribe(([, routerState]) => {\n        if (routerState.state && !this._cmsTicketId) {\n          this._cmsTicketId = routerState.state.queryParams['cmsTicketId'];\n          if (this._cmsTicketId) {\n            this.cmsService.launchInSmartEdit = true;\n          }\n        }\n      });\n  }\n\n  protected addPageContract() {\n    this.cmsService.getCurrentPage().subscribe(cmsPage => {\n      if (cmsPage && this._cmsTicketId) {\n        // before adding contract, we need redirect to preview page\n        this.goToPreviewPage(cmsPage);\n\n        // remove old page contract\n        const previousContract = [];\n        Array.from(document.body.classList).forEach(attr =>\n          previousContract.push(attr)\n        );\n        previousContract.forEach(attr => document.body.classList.remove(attr));\n\n        // add new page contract\n        if (cmsPage.properties && cmsPage.properties.smartedit) {\n          const seClasses = cmsPage.properties.smartedit.classes.split(' ');\n          seClasses.forEach(classItem => {\n            document.body.classList.add(classItem);\n          });\n        }\n      }\n    });\n  }\n\n  private goToPreviewPage(cmsPage: Page) {\n    // the first page is the smartedit preview page\n    if (!this.getPreviewPage) {\n      this.getPreviewPage = true;\n\n      if (cmsPage.type === PageType.PRODUCT_PAGE) {\n        this.routingService.go({\n          route: 'product',\n          params: { code: 2053367 },\n        });\n      } else if (cmsPage.type === PageType.CATEGORY_PAGE) {\n        this.routingService.go({\n          route: 'category',\n          params: { code: 575 },\n        });\n      }\n    }\n  }\n\n  protected renderComponent(\n    componentId: string,\n    componentType?: string,\n    parentId?: string\n  ): boolean {\n    if (componentId) {\n      // without parentId, it is slot\n      if (!parentId) {\n        this.cmsService.refreshLatestPage();\n      } else if (componentType) {\n        this.cmsService.refreshComponent(componentId);\n      }\n    }\n\n    return true;\n  }\n\n  protected reprocessPage() {\n    // TODO: reprocess page API\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor,\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { SmartEditService } from '../services/smart-edit.service';\n\n@Injectable()\nexport class CmsTicketInterceptor implements HttpInterceptor {\n  constructor(private service: SmartEditService) {}\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (request.url.indexOf('/cms/') > -1 && this.service.cmsTicketId) {\n      request = request.clone({\n        setParams: {\n          cmsTicketId: this.service.cmsTicketId,\n        },\n      });\n    }\n\n    return next.handle(request);\n  }\n}\n","import { Provider } from '@angular/core';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { CmsTicketInterceptor } from './cms-ticket.interceptor';\n\nexport const interceptors: Provider[] = [\n  {\n    provide: HTTP_INTERCEPTORS,\n    useClass: CmsTicketInterceptor,\n    multi: true,\n  },\n];\n","import { NgModule, ModuleWithProviders } from '@angular/core';\n\nimport { interceptors } from './http-interceptors/index';\n\n@NgModule({})\nexport class SmartEditModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: SmartEditModule,\n      providers: [...interceptors],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { throwError, Observable } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport { StoreFinderSearchConfig, LongitudeLatitude } from './../model/index';\nimport { StoreFinderSearchPage } from '../../occ/occ-models';\nimport { OccEndpointsService } from '../../occ/services/occ-endpoints.service';\n\nconst STORES_ENDPOINT = 'stores';\n\n@Injectable()\nexport class OccStoreFinderService {\n  constructor(\n    private http: HttpClient,\n    private occEndpoints: OccEndpointsService\n  ) {}\n\n  findStores(\n    query: string,\n    searchConfig: StoreFinderSearchConfig,\n    longitudeLatitude?: LongitudeLatitude\n  ): Observable<any> {\n    return this.callOccFindStores(query, searchConfig, longitudeLatitude);\n  }\n\n  storesCount(): Observable<any> {\n    const storeCountUrl = this.getStoresEndpoint('storescounts');\n\n    return this.http\n      .get(storeCountUrl)\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  findStoreById(storeId: string): Observable<any> {\n    const storeDetailsUrl = this.getStoresEndpoint(storeId);\n    const params = { fields: 'FULL' };\n\n    return this.http\n      .get(storeDetailsUrl, { params })\n      .pipe(catchError((error: any) => throwError(error.json())));\n  }\n\n  protected callOccFindStores(\n    query: string,\n    searchConfig: StoreFinderSearchConfig,\n    longitudeLatitude?: LongitudeLatitude\n  ): Observable<StoreFinderSearchPage> {\n    const url = this.getStoresEndpoint();\n    let params: HttpParams = new HttpParams({\n      fromString:\n        'fields=stores(name,displayName,openingHours(weekDayOpeningList(FULL),specialDayOpeningList(FULL)),' +\n        'geoPoint(latitude,longitude),address(line1,line2,town,region(FULL),postalCode,phone,country,email), features),' +\n        'pagination(DEFAULT),' +\n        'sorts(DEFAULT)',\n    });\n\n    if (longitudeLatitude) {\n      params = params.set('longitude', String(longitudeLatitude.longitude));\n      params = params.set('latitude', String(longitudeLatitude.latitude));\n    } else {\n      params = params.set('query', query);\n    }\n    if (searchConfig.pageSize) {\n      params = params.set('pageSize', String(searchConfig.pageSize));\n    }\n    if (searchConfig.currentPage) {\n      params = params.set('currentPage', String(searchConfig.currentPage));\n    }\n    if (searchConfig.sort) {\n      params = params.set('sort', searchConfig.sort);\n    }\n\n    return this.http.get<StoreFinderSearchPage>(url, { params }).pipe(\n      catchError((error: any) => {\n        if (error.json) {\n          return throwError(error.json());\n        }\n        return throwError(error);\n      })\n    );\n  }\n\n  protected getStoresEndpoint(url?: string): string {\n    const baseUrl = this.occEndpoints.getEndpoint(STORES_ENDPOINT);\n\n    return url ? baseUrl + '/' + url : baseUrl;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { OccModule } from '../../occ/occ.module';\nimport { OccStoreFinderService } from './store-finder.service';\n\n@NgModule({\n  imports: [CommonModule, HttpClientModule, OccModule],\n  providers: [OccStoreFinderService],\n})\nexport class StoreFinderOccModule {}\n","export abstract class StoreFinderConfig {\n  googleMaps?: {\n    apiUrl: string;\n    apiKey: string;\n    scale: number;\n    selectedMarkerScale: number;\n  };\n}\n","import { LoaderState } from '../../state';\nimport { StoreEntities } from '../model';\n\nexport const STORE_FINDER_FEATURE = 'stores';\nexport const STORE_FINDER_DATA = '[StoreFinder] Store Finder Data';\n\nexport interface StateWithStoreFinder {\n  [STORE_FINDER_FEATURE]: StoresState;\n}\n\nexport interface StoresState {\n  findStores: LoaderState<FindStoresState>;\n  viewAllStores: LoaderState<ViewAllStoresState>;\n}\n\nexport interface FindStoresState {\n  findStoresEntities: StoreEntities;\n}\n\nexport interface ViewAllStoresState {\n  viewAllStoresEntities: StoreEntities;\n}\n","import { StoreFinderSearchConfig } from '../../model/search-config';\nimport { LongitudeLatitude } from '../../model/longitude-latitude';\nimport {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\nimport { STORE_FINDER_DATA } from '../store-finder-state';\n\nexport const ON_HOLD = '[StoreFinder] On Hold';\nexport const FIND_STORES = '[StoreFinder] Find Stores';\nexport const FIND_STORES_FAIL = '[StoreFinder] Find Stores Fail';\nexport const FIND_STORES_SUCCESS = '[StoreFinder] Find Stores Success';\n\nexport const FIND_STORE_BY_ID = '[StoreFinder] Find a Store by Id';\nexport const FIND_STORE_BY_ID_FAIL = '[StoreFinder] Find a Store by Id Fail';\nexport const FIND_STORE_BY_ID_SUCCESS =\n  '[StoreFinder] Find a Store by Id Success';\n\nexport class OnHold extends LoaderLoadAction {\n  readonly type = ON_HOLD;\n  constructor() {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport class FindStores extends LoaderLoadAction {\n  readonly type = FIND_STORES;\n  constructor(\n    public payload: {\n      queryText: string;\n      longitudeLatitude?: LongitudeLatitude;\n      useMyLocation?: boolean;\n      searchConfig?: StoreFinderSearchConfig;\n      countryIsoCode?: string;\n    }\n  ) {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport class FindStoresFail extends LoaderFailAction {\n  readonly type = FIND_STORES_FAIL;\n  constructor(public payload: any) {\n    super(STORE_FINDER_DATA, payload);\n  }\n}\n\nexport class FindStoresSuccess extends LoaderSuccessAction {\n  readonly type = FIND_STORES_SUCCESS;\n  constructor(public payload: any) {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport class FindStoreById extends LoaderLoadAction {\n  readonly type = FIND_STORE_BY_ID;\n  constructor(public payload: { storeId: string }) {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport class FindStoreByIdFail extends LoaderFailAction {\n  readonly type = FIND_STORE_BY_ID_FAIL;\n  constructor(public payload: any) {\n    super(STORE_FINDER_DATA, payload);\n  }\n}\n\nexport class FindStoreByIdSuccess extends LoaderSuccessAction {\n  readonly type = FIND_STORE_BY_ID_SUCCESS;\n  constructor(public payload: any) {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport type FindStoresAction =\n  | OnHold\n  | FindStores\n  | FindStoresFail\n  | FindStoresSuccess\n  | FindStoreById\n  | FindStoreByIdFail\n  | FindStoreByIdSuccess;\n","import {\n  LoaderLoadAction,\n  LoaderFailAction,\n  LoaderSuccessAction,\n} from '../../../state/utils/loader/loader.action';\nimport { STORE_FINDER_DATA } from '../store-finder-state';\n\nexport const VIEW_ALL_STORES = '[StoreFinder] View All Stores';\nexport const VIEW_ALL_STORES_FAIL = '[StoreFinder] View All Stores Fail';\nexport const VIEW_ALL_STORES_SUCCESS = '[StoreFinder] View All Stores Success';\n\nexport class ViewAllStores extends LoaderLoadAction {\n  readonly type = VIEW_ALL_STORES;\n  constructor() {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport class ViewAllStoresFail extends LoaderFailAction {\n  readonly type = VIEW_ALL_STORES_FAIL;\n  constructor(public payload: any) {\n    super(STORE_FINDER_DATA, payload);\n  }\n}\n\nexport class ViewAllStoresSuccess extends LoaderSuccessAction {\n  readonly type = VIEW_ALL_STORES_SUCCESS;\n  constructor(public payload: any) {\n    super(STORE_FINDER_DATA);\n  }\n}\n\nexport type ViewAllStoresAction =\n  | ViewAllStores\n  | ViewAllStoresFail\n  | ViewAllStoresSuccess;\n","import { MemoizedSelector, createFeatureSelector } from '@ngrx/store';\nimport {\n  StoresState,\n  STORE_FINDER_FEATURE,\n  StateWithStoreFinder,\n} from '../store-finder-state';\n\nexport const getStoreFinderState: MemoizedSelector<\n  StateWithStoreFinder,\n  StoresState\n> = createFeatureSelector<StoresState>(STORE_FINDER_FEATURE);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport {\n  FindStoresState,\n  StoresState,\n  StateWithStoreFinder,\n} from '../store-finder-state';\nimport { getStoreFinderState } from './feature.selector';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderLoadingSelector,\n  loaderValueSelector,\n} from '../../../state/utils/loader/loader.selectors';\n\nexport const getFindStoresState: MemoizedSelector<\n  StateWithStoreFinder,\n  LoaderState<FindStoresState>\n> = createSelector(\n  getStoreFinderState,\n  (storesState: StoresState) => storesState.findStores\n);\n\nexport const getFindStoresEntities: MemoizedSelector<\n  StateWithStoreFinder,\n  FindStoresState\n> = createSelector(\n  getFindStoresState,\n  state => loaderValueSelector(state)\n);\n\nexport const getStoresLoading: MemoizedSelector<\n  StateWithStoreFinder,\n  boolean\n> = createSelector(\n  getFindStoresState,\n  state => loaderLoadingSelector(state)\n);\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport {\n  StoresState,\n  StateWithStoreFinder,\n  ViewAllStoresState,\n} from '../store-finder-state';\nimport { getStoreFinderState } from './feature.selector';\nimport { LoaderState } from '../../../state/utils/loader/loader-state';\nimport {\n  loaderLoadingSelector,\n  loaderValueSelector,\n} from '../../../state/utils/loader/loader.selectors';\n\nexport const getViewAllStoresState: MemoizedSelector<\n  StateWithStoreFinder,\n  LoaderState<ViewAllStoresState>\n> = createSelector(\n  getStoreFinderState,\n  (storesState: StoresState) => storesState.viewAllStores\n);\n\nexport const getViewAllStoresEntities: MemoizedSelector<\n  StateWithStoreFinder,\n  ViewAllStoresState\n> = createSelector(\n  getViewAllStoresState,\n  state => loaderValueSelector(state)\n);\n\nexport const getViewAllStoresLoading: MemoizedSelector<\n  StateWithStoreFinder,\n  boolean\n> = createSelector(\n  getViewAllStoresState,\n  state => loaderLoadingSelector(state)\n);\n","import { Inject, Injectable } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n@Injectable()\nexport class ExternalJsFileLoader {\n  constructor(@Inject(DOCUMENT) private document: any) {}\n\n  /**\n   * Loads a javascript from an external URL\n   * @param src URL for the script to be loaded\n   * @param params additional parameters to be attached to the given URL\n   * @param callback a function to be invoked after the script has been loaded\n   */\n  public load(src: string, params?: Object, callback?: EventListener): void {\n    const script = this.document.createElement('script');\n    script.type = 'text/javascript';\n    if (params) {\n      script.src = src + this.parseParams(params);\n    } else {\n      script.src = src;\n    }\n\n    script.async = true;\n    script.defer = true;\n    if (callback) {\n      script.addEventListener('load', callback);\n    }\n\n    document.head.appendChild(script);\n  }\n\n  /**\n   * Parses the given object with parameters to a string \"param1=value1&param2=value2\"\n   * @param params object containing parameters\n   */\n  private parseParams(params: Object): string {\n    let result = '';\n    const keysArray = Object.keys(params);\n    if (keysArray.length > 0) {\n      result =\n        '?' +\n        keysArray\n          .map(key => encodeURI(key) + '=' + encodeURI(params[key]))\n          .join('&');\n    }\n    return result;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Location } from '../model';\n\n@Injectable()\nexport class StoreDataService {\n  readonly DECIMAL_BASE: 10;\n  readonly weekDays = {\n    0: 'Sun',\n    1: 'Mon',\n    2: 'Tue',\n    3: 'Wed',\n    4: 'Thu',\n    5: 'Fri',\n    6: 'Sat',\n  };\n\n  /**\n   * Returns store latitude\n   * @param location store location\n   */\n  getStoreLatitude(location: Location): number {\n    return location.geoPoint.latitude;\n  }\n\n  /**\n   * Returns store longitude\n   * @param location store location\n   */\n  getStoreLongitude(location: Location): number {\n    return location.geoPoint.longitude;\n  }\n\n  /**\n   * Returns store closing time\n   * @param location store location\n   * @param date date to compare\n   */\n  getStoreClosingTime(location: Location, date: Date): Date {\n    const requestedDaySchedule = this.getSchedule(location, date);\n    let result: Date = null;\n\n    if (requestedDaySchedule.closed === false) {\n      const closingHour = requestedDaySchedule.closingTime.formattedHour.split(\n        ':'\n      )[0];\n      const closingMinute = requestedDaySchedule.closingTime.minute;\n      result = new Date(date.valueOf());\n      result.setHours(closingHour);\n      result.setMinutes(closingMinute);\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns store opening time\n   * @param location store location\n   * @param date date to compare\n   */\n  getStoreOpeningTime(location: Location, date: Date): Date {\n    const requestedDaySchedule = this.getSchedule(location, date);\n    let result: Date = null;\n\n    if (requestedDaySchedule.closed === false) {\n      const openingHour = requestedDaySchedule.openingTime.formattedHour.split(\n        ':'\n      )[0];\n      const openingMinutes = requestedDaySchedule.openingTime.minute;\n      result = new Date(date.valueOf());\n      result.setHours(openingHour);\n      result.setMinutes(openingMinutes);\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns information about store open status\n   * @param location store location\n   * @param date date to compare\n   */\n  isStoreOpen(location: Location, date: Date): boolean {\n    const requestedDaySchedule = this.getSchedule(location, date);\n    let result = false;\n\n    if (requestedDaySchedule.closed === false) {\n      const openingDate = this.getStoreOpeningTime(location, date);\n      const closingDate = this.getStoreClosingTime(location, date);\n\n      result = date > openingDate && date < closingDate;\n    }\n\n    return result;\n  }\n\n  /**\n   * Extracts schedule from the given location for the given date\n   * @param location location\n   * @param date date\n   *\n   * @returns payload describing the store's schedule for the given day.\n   */\n  private getSchedule(location: Location, date: Date): any {\n    const weekday = this.weekDays[date.getDay()];\n    return location.openingHours.weekDayOpeningList.find(\n      weekDayOpeningListItem => weekDayOpeningListItem.weekDay === weekday\n    );\n  }\n}\n","/// <reference types=\"@types/googlemaps\" />\nimport { ExternalJsFileLoader } from './external-js-file-loader.service';\nimport { Injectable } from '@angular/core';\nimport { StoreDataService } from '../facade/store-data.service';\nimport { StoreFinderConfig } from '../config/store-finder-config';\n\n@Injectable()\nexport class GoogleMapRendererService {\n  private googleMap: google.maps.Map = null;\n  private markers: google.maps.Marker[];\n\n  constructor(\n    private config: StoreFinderConfig,\n    private externalJsFileLoader: ExternalJsFileLoader,\n    private storeDataService: StoreDataService\n  ) {}\n\n  /**\n   * Renders google map on the given element and draws markers on it.\n   * If map already exists it will use an existing map otherwise it will create one\n   * @param mapElement HTML element inside of which the map will be displayed\n   * @param locations array containign geo data to be displayed on the map\n   * @param selectMarkerHandler function to handle whenever a marker on a map is clicked\n   */\n  renderMap(\n    mapElement: HTMLElement,\n    locations: any[],\n    selectMarkerHandler?: Function\n  ): void {\n    if (this.googleMap === null) {\n      this.externalJsFileLoader.load(\n        this.config.googleMaps.apiUrl,\n        { key: this.config.googleMaps.apiKey },\n        () => {\n          this.drawMap(mapElement, locations, selectMarkerHandler);\n        }\n      );\n    } else {\n      this.drawMap(mapElement, locations, selectMarkerHandler);\n    }\n  }\n\n  /**\n   * Centers the map to the given point\n   * @param latitute latitude of the new center\n   * @param longitude longitude of the new center\n   */\n  centerMap(latitute: number, longitude: number): void {\n    this.googleMap.panTo({ lat: latitute, lng: longitude });\n    this.googleMap.setZoom(this.config.googleMaps.selectedMarkerScale);\n  }\n\n  /**\n   * Defines and returns {@link google.maps.LatLng} representing a point where the map will be centered\n   * @param locations list of locations\n   */\n  private defineMapCenter(locations: any[]): google.maps.LatLng {\n    return new google.maps.LatLng(\n      this.storeDataService.getStoreLatitude(locations[0]),\n      this.storeDataService.getStoreLongitude(locations[0])\n    );\n  }\n\n  /**\n   * Creates google map inside if the given HTML element centered to the given point\n   * @param mapElement {@link HTMLElement} inside of which the map will be created\n   * @param mapCenter {@link google.maps.LatLng} the point where the map will be centered\n   */\n  private initMap(\n    mapElement: HTMLElement,\n    mapCenter: google.maps.LatLng\n  ): void {\n    const mapProp = {\n      center: mapCenter,\n      zoom: this.config.googleMaps.scale,\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\n    };\n    this.googleMap = new google.maps.Map(mapElement, mapProp);\n  }\n\n  /**\n   * Erases the current map's markers and create a new one based on the given locations\n   * @param locations array of locations to be displayed on the map\n   * @param selectMarkerHandler function to handle whenever a marker on a map is clicked\n   */\n  private createMarkers(\n    locations: any[],\n    selectMarkerHandler?: Function\n  ): void {\n    this.markers = [];\n    locations.forEach((element, index) => {\n      const marker = new google.maps.Marker({\n        position: new google.maps.LatLng(\n          this.storeDataService.getStoreLatitude(element),\n          this.storeDataService.getStoreLongitude(element)\n        ),\n        label: index + 1 + '',\n      });\n      this.markers.push(marker);\n      marker.setMap(this.googleMap);\n      marker.addListener('mouseover', function() {\n        marker.setAnimation(google.maps.Animation.BOUNCE);\n      });\n      marker.addListener('mouseout', function() {\n        marker.setAnimation(null);\n      });\n      if (selectMarkerHandler) {\n        marker.addListener('click', function() {\n          selectMarkerHandler(index);\n        });\n      }\n    });\n  }\n\n  /**\n   * Initialize and draw the map\n   * @param mapElement {@link HTMLElement} inside of which the map will be drawn\n   * @param locations array of locations to be displayed on the map\n   * @param selectMarkerHandler function to handle whenever a marker on a map is clicked\n   */\n  private drawMap(\n    mapElement: HTMLElement,\n    locations: any[],\n    selectMarkerHandler: Function\n  ) {\n    this.initMap(mapElement, this.defineMapCenter(locations));\n    this.createMarkers(locations, selectMarkerHandler);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\n\nimport * as fromAction from './../actions/find-stores.action';\n\nimport { OccStoreFinderService } from '../../occ/store-finder.service';\n\n@Injectable()\nexport class FindStoresEffect {\n  constructor(\n    private actions$: Actions,\n    private occStoreFinderService: OccStoreFinderService\n  ) {}\n\n  @Effect()\n  findStores$: Observable<any> = this.actions$.pipe(\n    ofType(fromAction.FIND_STORES),\n    map((action: fromAction.FindStores) => action.payload),\n    mergeMap(payload =>\n      this.occStoreFinderService\n        .findStores(\n          payload.queryText,\n          payload.searchConfig,\n          payload.longitudeLatitude\n        )\n        .pipe(\n          map(data => {\n            data.geolocation = payload.longitudeLatitude;\n\n            if (payload.countryIsoCode) {\n              data.stores = data.stores.filter(\n                store =>\n                  store.address.country.isocode === payload.countryIsoCode\n              );\n            }\n\n            return new fromAction.FindStoresSuccess(data);\n          }),\n          catchError(error => of(new fromAction.FindStoresFail(error)))\n        )\n    )\n  );\n\n  @Effect()\n  findStoreById$: Observable<any> = this.actions$.pipe(\n    ofType(fromAction.FIND_STORE_BY_ID),\n    map((action: fromAction.FindStoreById) => action.payload),\n    switchMap(payload =>\n      this.occStoreFinderService.findStoreById(payload.storeId).pipe(\n        map(data => new fromAction.FindStoreByIdSuccess(data)),\n        catchError(error => of(new fromAction.FindStoreByIdFail(error)))\n      )\n    )\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\n\nimport { OccStoreFinderService } from '../../occ/store-finder.service';\n\nimport * as fromAction from './../actions/view-all-stores.action';\n\n@Injectable()\nexport class ViewAllStoresEffect {\n  constructor(\n    private actions$: Actions,\n    private occStoreFinderService: OccStoreFinderService\n  ) {}\n\n  @Effect()\n  viewAllStores$: Observable<any> = this.actions$.pipe(\n    ofType(fromAction.VIEW_ALL_STORES),\n    switchMap(() => {\n      return this.occStoreFinderService.storesCount().pipe(\n        map(data => new fromAction.ViewAllStoresSuccess(data)),\n        catchError(error => of(new fromAction.ViewAllStoresFail(error)))\n      );\n    })\n  );\n}\n","import { FindStoresEffect } from './find-stores.effect';\nimport { ViewAllStoresEffect } from './view-all-stores.effect';\n\nexport const effects: any[] = [FindStoresEffect, ViewAllStoresEffect];\n\nexport * from './find-stores.effect';\nexport * from './view-all-stores.effect';\n","import { ActionReducerMap, MetaReducer } from '@ngrx/store';\n\nimport { InjectionToken, Provider } from '@angular/core';\nimport { StoresState, STORE_FINDER_DATA } from '../store-finder-state';\nimport { loaderReducer } from '../../../state/utils/loader/loader.reducer';\n\nexport function getReducers(): ActionReducerMap<StoresState> {\n  return {\n    findStores: loaderReducer(STORE_FINDER_DATA),\n    viewAllStores: loaderReducer(STORE_FINDER_DATA),\n  };\n}\n\nexport const reducerToken: InjectionToken<\n  ActionReducerMap<StoresState>\n> = new InjectionToken<ActionReducerMap<StoresState>>('StoreFinderReducers');\n\nexport const reducerProvider: Provider = {\n  provide: reducerToken,\n  useFactory: getReducers,\n};\n\nexport const metaReducers: MetaReducer<any>[] = [];\n","import { Injectable } from '@angular/core';\nimport { Store, Action, select } from '@ngrx/store';\nimport {\n  StateWithStoreFinder,\n  FindStoresState,\n  ViewAllStoresState,\n} from '../store/store-finder-state';\n\nimport * as fromStore from '../store/index';\nimport { StoreFinderSearchConfig } from './../model/search-config';\nimport { LongitudeLatitude } from './../model/longitude-latitude';\nimport { Observable } from 'rxjs';\nimport { WindowRef } from '../../window/window-ref';\n\n@Injectable()\nexport class StoreFinderService {\n  private geolocationWatchId: number = null;\n\n  constructor(\n    private store: Store<StateWithStoreFinder>,\n    private winRef: WindowRef\n  ) {}\n\n  /**\n   * Returns boolean observable for store's loading state\n   */\n  getStoresLoading(): Observable<boolean> {\n    return this.store.pipe(select(fromStore.getStoresLoading));\n  }\n\n  /**\n   * Returns observable for store's entities\n   */\n  getFindStoresEntities(): Observable<FindStoresState> {\n    return this.store.pipe(select(fromStore.getFindStoresEntities));\n  }\n\n  /**\n   * Returns boolean observable for view all store's loading state\n   */\n  getViewAllStoresLoading(): Observable<boolean> {\n    return this.store.pipe(select(fromStore.getViewAllStoresLoading));\n  }\n\n  /**\n   * Returns observable for view all store's entities\n   */\n  getViewAllStoresEntities(): Observable<ViewAllStoresState> {\n    return this.store.pipe(select(fromStore.getViewAllStoresEntities));\n  }\n\n  /**\n   * Store finding action functionality\n   * @param queryText text query\n   * @param longitudeLatitude longitude and latitude coordinates\n   * @param searchConfig search configuration\n   * @param countryIsoCode country ISO code\n   */\n  findStoresAction(\n    queryText: string,\n    longitudeLatitude: LongitudeLatitude,\n    searchConfig: StoreFinderSearchConfig,\n    countryIsoCode?: string\n  ) {\n    this.store.dispatch(\n      new fromStore.FindStores({\n        queryText: queryText,\n        longitudeLatitude: longitudeLatitude,\n        searchConfig: searchConfig,\n        countryIsoCode: countryIsoCode,\n      })\n    );\n  }\n\n  /**\n   * View all stores\n   */\n  viewAllStores() {\n    this.clearWatchGeolocation(new fromStore.ViewAllStores());\n  }\n\n  /**\n   * View all stores by id\n   * @param storeId store id\n   */\n  viewStoreById(storeId: string) {\n    this.clearWatchGeolocation(new fromStore.FindStoreById({ storeId }));\n  }\n\n  /**\n   * Find all stores\n   * @param queryText text query\n   * @param useMyLocation use current location\n   */\n  findStores(queryText: string, useMyLocation?: boolean) {\n    if (useMyLocation && this.winRef.nativeWindow) {\n      this.clearWatchGeolocation(new fromStore.OnHold());\n      this.geolocationWatchId = this.winRef.nativeWindow.navigator.geolocation.watchPosition(\n        (pos: Position) => {\n          const longitudeLatitude: LongitudeLatitude = {\n            longitude: pos.coords.longitude,\n            latitude: pos.coords.latitude,\n          };\n          this.clearWatchGeolocation(\n            new fromStore.FindStores({ queryText, longitudeLatitude })\n          );\n        }\n      );\n    } else {\n      this.clearWatchGeolocation(new fromStore.FindStores({ queryText }));\n    }\n  }\n\n  private clearWatchGeolocation(callbackAction: Action) {\n    if (this.geolocationWatchId !== null) {\n      this.winRef.nativeWindow.navigator.geolocation.clearWatch(\n        this.geolocationWatchId\n      );\n      this.geolocationWatchId = null;\n    }\n    this.store.dispatch(callbackAction);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { reducerToken, reducerProvider } from './reducers/index';\nimport { effects } from './effects/index';\nimport { STORE_FINDER_FEATURE } from './store-finder-state';\n\nimport { StoreFinderOccModule } from '../occ/store-finder-occ.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    StoreFinderOccModule,\n    StoreModule.forFeature(STORE_FINDER_FEATURE, reducerToken),\n    EffectsModule.forFeature(effects),\n  ],\n  providers: [reducerProvider],\n})\nexport class StoreFinderStoreModule {}\n","import { StoreFinderConfig } from './store-finder-config';\n\nexport const defaultStoreFinderConfig: StoreFinderConfig = {\n  googleMaps: {\n    apiUrl: 'https://maps.googleapis.com/maps/api/js',\n    apiKey: '',\n    scale: 12,\n    selectedMarkerScale: 16,\n  },\n};\n","import { NgModule } from '@angular/core';\nimport { StoreFinderStoreModule } from './store/store-finder-store.module';\nimport { StoreFinderService } from './facade/store-finder.service';\nimport { StoreDataService } from './facade/store-data.service';\nimport {\n  GoogleMapRendererService,\n  ExternalJsFileLoader,\n} from './service/index';\nimport { StoreFinderOccModule } from './occ/store-finder-occ.module';\nimport { ConfigModule } from '../config';\nimport { defaultStoreFinderConfig } from './config/default-store-finder-config';\nimport { StoreFinderConfig } from './config/store-finder-config';\n\n@NgModule({\n  imports: [\n    ConfigModule.withConfig(defaultStoreFinderConfig),\n    StoreFinderStoreModule,\n    StoreFinderOccModule,\n  ],\n  providers: [\n    StoreFinderService,\n    StoreDataService,\n    GoogleMapRendererService,\n    ExternalJsFileLoader,\n    { provide: StoreFinderConfig, useValue: defaultStoreFinderConfig },\n  ],\n})\nexport class StoreFinderCoreModule {}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport { Product } from '../../../occ/occ-models/occ.models';\n\n@Pipe({ name: 'stripHtml' })\nexport class StripHtmlPipe implements PipeTransform {\n  transform(product: Product): Product {\n    const productClone = Object.assign({}, product);\n    productClone.name = product.name.replace(/<[^>]*>/g, '');\n\n    return productClone;\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { StripHtmlPipe } from './strip-html.pipe';\n\n@NgModule({\n  declarations: [StripHtmlPipe],\n  exports: [StripHtmlPipe],\n})\nexport class StripHtmlModule {}\n","import { NgModule } from '@angular/core';\n\nimport { StripHtmlModule } from './strip-html/strip-html.module';\n\n@NgModule({\n  imports: [StripHtmlModule],\n})\nexport class PipeModule {}\n","import { NgModule } from '@angular/core';\n\nimport { PipeModule } from './pipe/pipe.module';\n\n@NgModule({\n  imports: [PipeModule],\n})\nexport class UtilModule {}\n","import { CmsConfig } from './cms-config';\n\nexport const defaultCmsModuleConfig: CmsConfig = {\n  cmsComponents: {\n    CMSTabParagraphComponent: { selector: 'cx-paragraph' },\n  },\n  backend: {\n    occ: {\n      endpoints: {\n        component: 'cms/components/${id}',\n        components: 'cms/components?fields=${fields}',\n        pages: 'cms/pages?fields=${fields}',\n      },\n    },\n  },\n};\n","import { EntityState } from './entity-state';\n\nexport function entitySelector<T>(state: EntityState<T>, id: string): T {\n  return state.entities[id] || undefined;\n}\n","import { filter } from 'rxjs/operators';\n\nimport { EntityLoadAction } from '../entity-loader/entity-loader.action';\nimport { MonoTypeOperatorFunction } from 'rxjs';\n\nexport function ofLoaderLoad(\n  entityType: string\n): MonoTypeOperatorFunction<EntityLoadAction> {\n  return filter(\n    (action: EntityLoadAction) =>\n      action.meta &&\n      action.meta.loader &&\n      action.meta.entityType === entityType &&\n      action.meta.loader.load\n  );\n}\n\nexport function ofLoaderFail(\n  entityType: string\n): MonoTypeOperatorFunction<EntityLoadAction> {\n  return filter(\n    (action: EntityLoadAction) =>\n      action.meta &&\n      action.meta.loader &&\n      action.meta.entityType === entityType &&\n      action.meta.loader.error\n  );\n}\n\nexport function ofLoaderSuccess(\n  entityType: string\n): MonoTypeOperatorFunction<EntityLoadAction> {\n  return filter(\n    (action: EntityLoadAction) =>\n      action.meta &&\n      action.meta.loader &&\n      action.meta.entityType === entityType &&\n      !action.meta.loader.load &&\n      !action.meta.loader.error\n  );\n}\n"]}