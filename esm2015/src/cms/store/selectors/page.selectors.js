/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { createSelector } from '@ngrx/store';
import { entityStateSelector, loaderValueSelector, } from '../../../state';
import { getCmsState } from './feature.selectors';
import { PageType } from '../../../model/cms.model';
/** @type {?} */
export const getPageEntitiesSelector = (state) => state.pageData.entities;
/** @type {?} */
export const getIndexByType = (index, type) => {
    switch (type) {
        case PageType.CONTENT_PAGE: {
            return index.content;
        }
        case PageType.PRODUCT_PAGE: {
            return index.product;
        }
        case PageType.CATEGORY_PAGE: {
            return index.category;
        }
        case PageType.CATALOG_PAGE: {
            return index.catalog;
        }
    }
    return { entities: {} };
};
/** @type {?} */
export const getPageComponentTypesSelector = (page) => {
    /** @type {?} */
    const componentTypes = new Set();
    if (page && page.slots) {
        for (const slot of Object.keys(page.slots)) {
            for (const component of page.slots[slot].components || []) {
                componentTypes.add(component.flexType);
            }
        }
    }
    return Array.from(componentTypes);
};
/** @type {?} */
export const getPageState = createSelector(getCmsState, (state) => state.page);
/** @type {?} */
export const getPageStateIndex = createSelector(getPageState, (page) => page.index);
/** @type {?} */
export const getIndex = (pageContext) => createSelector(getPageStateIndex, (index) => getIndexByType(index, pageContext.type));
/** @type {?} */
export const getIndexEntity = (pageContext) => createSelector(getIndex(pageContext), indexState => entityStateSelector(indexState, pageContext.id));
/** @type {?} */
export const getIndexValue = (pageContext) => createSelector(getIndexEntity(pageContext), entity => loaderValueSelector(entity));
/** @type {?} */
export const getPageEntities = createSelector(getPageState, getPageEntitiesSelector);
/** @type {?} */
export const getPageData = (pageContext) => createSelector(getPageEntities, getIndexValue(pageContext), (entities, indexValue) => entities[indexValue]);
/** @type {?} */
export const getPageComponentTypes = (pageContext) => createSelector(getPageData(pageContext), pageData => getPageComponentTypesSelector(pageData));
/** @type {?} */
export const currentSlotSelectorFactory = (pageContext, position) => {
    return createSelector(getPageData(pageContext), entity => {
        if (entity) {
            return entity.slots[position] || { components: [] };
        }
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS5zZWxlY3RvcnMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvY21zL3N0b3JlL3NlbGVjdG9ycy9wYWdlLnNlbGVjdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLGNBQWMsRUFBb0IsTUFBTSxhQUFhLENBQUM7QUFJL0QsT0FBTyxFQUVMLG1CQUFtQixFQUVuQixtQkFBbUIsR0FDcEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUl4QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLDBCQUEwQixDQUFDOztBQUVwRCxNQUFNLE9BQU8sdUJBQXVCLEdBQUcsQ0FBQyxLQUFnQixFQUFFLEVBQUUsQ0FDMUQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFROztBQUN6QixNQUFNLE9BQU8sY0FBYyxHQUFHLENBQzVCLEtBQWdCLEVBQ2hCLElBQWMsRUFDYSxFQUFFO0lBQzdCLFFBQVEsSUFBSSxFQUFFO1FBQ1osS0FBSyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDMUIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDO1NBQ3RCO1FBQ0QsS0FBSyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDMUIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDO1NBQ3RCO1FBQ0QsS0FBSyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDM0IsT0FBTyxLQUFLLENBQUMsUUFBUSxDQUFDO1NBQ3ZCO1FBQ0QsS0FBSyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDMUIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDO1NBQ3RCO0tBQ0Y7SUFDRCxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQzFCLENBQUM7O0FBRUQsTUFBTSxPQUFPLDZCQUE2QixHQUE2QixDQUNyRSxJQUFVLEVBQ1YsRUFBRTs7VUFDSSxjQUFjLEdBQUcsSUFBSSxHQUFHLEVBQVU7SUFDeEMsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtRQUN0QixLQUFLLE1BQU0sSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzFDLEtBQUssTUFBTSxTQUFTLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLElBQUksRUFBRSxFQUFFO2dCQUN6RCxjQUFjLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN4QztTQUNGO0tBQ0Y7SUFDRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDcEMsQ0FBQzs7QUFFRCxNQUFNLE9BQU8sWUFBWSxHQUdyQixjQUFjLENBQ2hCLFdBQVcsRUFDWCxDQUFDLEtBQWUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FDaEM7O0FBRUQsTUFBTSxPQUFPLGlCQUFpQixHQUcxQixjQUFjLENBQ2hCLFlBQVksRUFDWixDQUFDLElBQWUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FDaEM7O0FBRUQsTUFBTSxPQUFPLFFBQVEsR0FBRyxDQUN0QixXQUF3QixFQUNtQyxFQUFFLENBQzdELGNBQWMsQ0FDWixpQkFBaUIsRUFDakIsQ0FBQyxLQUFnQixFQUFFLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FDOUQ7O0FBRUgsTUFBTSxPQUFPLGNBQWMsR0FBRyxDQUM1QixXQUF3QixFQUM2QixFQUFFLENBQ3ZELGNBQWMsQ0FDWixRQUFRLENBQUMsV0FBVyxDQUFDLEVBQ3JCLFVBQVUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FDOUQ7O0FBRUgsTUFBTSxPQUFPLGFBQWEsR0FBRyxDQUMzQixXQUF3QixFQUNnQixFQUFFLENBQzFDLGNBQWMsQ0FDWixjQUFjLENBQUMsV0FBVyxDQUFDLEVBQzNCLE1BQU0sQ0FBQyxFQUFFLENBQUMsbUJBQW1CLENBQVMsTUFBTSxDQUFDLENBQzlDOztBQUVILE1BQU0sT0FBTyxlQUFlLEdBR3hCLGNBQWMsQ0FDaEIsWUFBWSxFQUNaLHVCQUF1QixDQUN4Qjs7QUFFRCxNQUFNLE9BQU8sV0FBVyxHQUFHLENBQ3pCLFdBQXdCLEVBQ2MsRUFBRSxDQUN4QyxjQUFjLENBQ1osZUFBZSxFQUNmLGFBQWEsQ0FBQyxXQUFXLENBQUMsRUFDMUIsQ0FBQyxRQUFnQyxFQUFFLFVBQWtCLEVBQUUsRUFBRSxDQUN2RCxRQUFRLENBQUMsVUFBVSxDQUFDLENBQ3ZCOztBQUVILE1BQU0sT0FBTyxxQkFBcUIsR0FBRyxDQUNuQyxXQUF3QixFQUNrQixFQUFFLENBQzVDLGNBQWMsQ0FDWixXQUFXLENBQUMsV0FBVyxDQUFDLEVBQ3hCLFFBQVEsQ0FBQyxFQUFFLENBQUMsNkJBQTZCLENBQUMsUUFBUSxDQUFDLENBQ3BEOztBQUVILE1BQU0sT0FBTywwQkFBMEIsR0FBRyxDQUN4QyxXQUF3QixFQUN4QixRQUFnQixFQUNpQyxFQUFFO0lBQ25ELE9BQU8sY0FBYyxDQUNuQixXQUFXLENBQUMsV0FBVyxDQUFDLEVBQ3hCLE1BQU0sQ0FBQyxFQUFFO1FBQ1AsSUFBSSxNQUFNLEVBQUU7WUFDVixPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDckQ7SUFDSCxDQUFDLENBQ0YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZWxlY3RvciwgTWVtb2l6ZWRTZWxlY3RvciB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcblxuaW1wb3J0IHsgQ21zU3RhdGUsIEluZGV4VHlwZSwgUGFnZVN0YXRlLCBTdGF0ZVdpdGhDbXMgfSBmcm9tICcuLi9jbXMtc3RhdGUnO1xuaW1wb3J0IHsgUGFnZUNvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9yb3V0aW5nJztcbmltcG9ydCB7XG4gIEVudGl0eUxvYWRlclN0YXRlLFxuICBlbnRpdHlTdGF0ZVNlbGVjdG9yLFxuICBMb2FkZXJTdGF0ZSxcbiAgbG9hZGVyVmFsdWVTZWxlY3Rvcixcbn0gZnJvbSAnLi4vLi4vLi4vc3RhdGUnO1xuaW1wb3J0IHsgQ29udGVudFNsb3REYXRhIH0gZnJvbSAnLi4vLi4vbW9kZWwvY29udGVudC1zbG90LWRhdGEubW9kZWwnO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uLy4uL21vZGVsL3BhZ2UubW9kZWwnO1xuXG5pbXBvcnQgeyBnZXRDbXNTdGF0ZSB9IGZyb20gJy4vZmVhdHVyZS5zZWxlY3RvcnMnO1xuaW1wb3J0IHsgUGFnZVR5cGUgfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9jbXMubW9kZWwnO1xuXG5leHBvcnQgY29uc3QgZ2V0UGFnZUVudGl0aWVzU2VsZWN0b3IgPSAoc3RhdGU6IFBhZ2VTdGF0ZSkgPT5cbiAgc3RhdGUucGFnZURhdGEuZW50aXRpZXM7XG5leHBvcnQgY29uc3QgZ2V0SW5kZXhCeVR5cGUgPSAoXG4gIGluZGV4OiBJbmRleFR5cGUsXG4gIHR5cGU6IFBhZ2VUeXBlXG4pOiBFbnRpdHlMb2FkZXJTdGF0ZTxzdHJpbmc+ID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBQYWdlVHlwZS5DT05URU5UX1BBR0U6IHtcbiAgICAgIHJldHVybiBpbmRleC5jb250ZW50O1xuICAgIH1cbiAgICBjYXNlIFBhZ2VUeXBlLlBST0RVQ1RfUEFHRToge1xuICAgICAgcmV0dXJuIGluZGV4LnByb2R1Y3Q7XG4gICAgfVxuICAgIGNhc2UgUGFnZVR5cGUuQ0FURUdPUllfUEFHRToge1xuICAgICAgcmV0dXJuIGluZGV4LmNhdGVnb3J5O1xuICAgIH1cbiAgICBjYXNlIFBhZ2VUeXBlLkNBVEFMT0dfUEFHRToge1xuICAgICAgcmV0dXJuIGluZGV4LmNhdGFsb2c7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGVudGl0aWVzOiB7fSB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFBhZ2VDb21wb25lbnRUeXBlc1NlbGVjdG9yOiAocGFnZTogUGFnZSkgPT4gc3RyaW5nW10gPSAoXG4gIHBhZ2U6IFBhZ2VcbikgPT4ge1xuICBjb25zdCBjb21wb25lbnRUeXBlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBpZiAocGFnZSAmJiBwYWdlLnNsb3RzKSB7XG4gICAgZm9yIChjb25zdCBzbG90IG9mIE9iamVjdC5rZXlzKHBhZ2Uuc2xvdHMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBwYWdlLnNsb3RzW3Nsb3RdLmNvbXBvbmVudHMgfHwgW10pIHtcbiAgICAgICAgY29tcG9uZW50VHlwZXMuYWRkKGNvbXBvbmVudC5mbGV4VHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGNvbXBvbmVudFR5cGVzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRQYWdlU3RhdGU6IE1lbW9pemVkU2VsZWN0b3I8XG4gIFN0YXRlV2l0aENtcyxcbiAgUGFnZVN0YXRlXG4+ID0gY3JlYXRlU2VsZWN0b3IoXG4gIGdldENtc1N0YXRlLFxuICAoc3RhdGU6IENtc1N0YXRlKSA9PiBzdGF0ZS5wYWdlXG4pO1xuXG5leHBvcnQgY29uc3QgZ2V0UGFnZVN0YXRlSW5kZXg6IE1lbW9pemVkU2VsZWN0b3I8XG4gIFN0YXRlV2l0aENtcyxcbiAgSW5kZXhUeXBlXG4+ID0gY3JlYXRlU2VsZWN0b3IoXG4gIGdldFBhZ2VTdGF0ZSxcbiAgKHBhZ2U6IFBhZ2VTdGF0ZSkgPT4gcGFnZS5pbmRleFxuKTtcblxuZXhwb3J0IGNvbnN0IGdldEluZGV4ID0gKFxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoQ21zLCBFbnRpdHlMb2FkZXJTdGF0ZTxzdHJpbmc+PiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRQYWdlU3RhdGVJbmRleCxcbiAgICAoaW5kZXg6IEluZGV4VHlwZSkgPT4gZ2V0SW5kZXhCeVR5cGUoaW5kZXgsIHBhZ2VDb250ZXh0LnR5cGUpXG4gICk7XG5cbmV4cG9ydCBjb25zdCBnZXRJbmRleEVudGl0eSA9IChcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0XG4pOiBNZW1vaXplZFNlbGVjdG9yPFN0YXRlV2l0aENtcywgTG9hZGVyU3RhdGU8c3RyaW5nPj4gPT5cbiAgY3JlYXRlU2VsZWN0b3IoXG4gICAgZ2V0SW5kZXgocGFnZUNvbnRleHQpLFxuICAgIGluZGV4U3RhdGUgPT4gZW50aXR5U3RhdGVTZWxlY3RvcihpbmRleFN0YXRlLCBwYWdlQ29udGV4dC5pZClcbiAgKTtcblxuZXhwb3J0IGNvbnN0IGdldEluZGV4VmFsdWUgPSAoXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFxuKTogTWVtb2l6ZWRTZWxlY3RvcjxTdGF0ZVdpdGhDbXMsIHN0cmluZz4gPT5cbiAgY3JlYXRlU2VsZWN0b3IoXG4gICAgZ2V0SW5kZXhFbnRpdHkocGFnZUNvbnRleHQpLFxuICAgIGVudGl0eSA9PiBsb2FkZXJWYWx1ZVNlbGVjdG9yPHN0cmluZz4oZW50aXR5KVxuICApO1xuXG5leHBvcnQgY29uc3QgZ2V0UGFnZUVudGl0aWVzOiBNZW1vaXplZFNlbGVjdG9yPFxuICBTdGF0ZVdpdGhDbXMsXG4gIHsgW2lkOiBzdHJpbmddOiBQYWdlIH1cbj4gPSBjcmVhdGVTZWxlY3RvcihcbiAgZ2V0UGFnZVN0YXRlLFxuICBnZXRQYWdlRW50aXRpZXNTZWxlY3RvclxuKTtcblxuZXhwb3J0IGNvbnN0IGdldFBhZ2VEYXRhID0gKFxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoQ21zLCBQYWdlPiA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBnZXRQYWdlRW50aXRpZXMsXG4gICAgZ2V0SW5kZXhWYWx1ZShwYWdlQ29udGV4dCksXG4gICAgKGVudGl0aWVzOiB7IFtpZDogc3RyaW5nXTogUGFnZSB9LCBpbmRleFZhbHVlOiBzdHJpbmcpID0+XG4gICAgICBlbnRpdGllc1tpbmRleFZhbHVlXVxuICApO1xuXG5leHBvcnQgY29uc3QgZ2V0UGFnZUNvbXBvbmVudFR5cGVzID0gKFxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoQ21zLCBzdHJpbmdbXT4gPT5cbiAgY3JlYXRlU2VsZWN0b3IoXG4gICAgZ2V0UGFnZURhdGEocGFnZUNvbnRleHQpLFxuICAgIHBhZ2VEYXRhID0+IGdldFBhZ2VDb21wb25lbnRUeXBlc1NlbGVjdG9yKHBhZ2VEYXRhKVxuICApO1xuXG5leHBvcnQgY29uc3QgY3VycmVudFNsb3RTZWxlY3RvckZhY3RvcnkgPSAoXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dCxcbiAgcG9zaXRpb246IHN0cmluZ1xuKTogTWVtb2l6ZWRTZWxlY3RvcjxTdGF0ZVdpdGhDbXMsIENvbnRlbnRTbG90RGF0YT4gPT4ge1xuICByZXR1cm4gY3JlYXRlU2VsZWN0b3IoXG4gICAgZ2V0UGFnZURhdGEocGFnZUNvbnRleHQpLFxuICAgIGVudGl0eSA9PiB7XG4gICAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBlbnRpdHkuc2xvdHNbcG9zaXRpb25dIHx8IHsgY29tcG9uZW50czogW10gfTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG59O1xuIl19