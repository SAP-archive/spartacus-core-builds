function isFeatureConfig(config) {
    return typeof config === 'object' && config.features;
}
function isInLevel(level, version) {
    if (level === '*') {
        return true;
    }
    const levelParts = level.split('.');
    const versionParts = version.split('.');
    for (let i = 0; i < versionParts.length; i++) {
        const versionNumberPart = Number(versionParts[i]);
        const levelNumberPart = Number(levelParts[i]) || 0;
        if (versionNumberPart !== levelNumberPart) {
            return levelNumberPart > versionNumberPart;
        }
    }
    return true;
}
export function isFeatureLevel(config, level) {
    if (isFeatureConfig(config)) {
        return level[0] === '!'
            ? !isInLevel(config.features.level, level.substr(1, level.length))
            : isInLevel(config.features.level, level);
    }
}
export function isFeatureEnabled(config, feature) {
    if (isFeatureConfig(config)) {
        const featureConfig = feature[0] === '!'
            ? config.features[feature.substr(1, feature.length)]
            : config.features[feature];
        const result = typeof featureConfig === 'string'
            ? isFeatureLevel(config, featureConfig)
            : featureConfig;
        return feature[0] === '!' ? !result : result;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVhdHVyZS1jb25maWctdXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb3JlL3NyYy9mZWF0dXJlcy1jb25maWcvdXRpbHMvZmVhdHVyZS1jb25maWctdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsU0FBUyxlQUFlLENBQUMsTUFBVztJQUNsQyxPQUFPLE9BQU8sTUFBTSxLQUFLLFFBQVEsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQ3ZELENBQUM7QUFFRCxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsT0FBTztJQUMvQixJQUFJLEtBQUssS0FBSyxHQUFHLEVBQUU7UUFDakIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEMsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV4QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUM1QyxNQUFNLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRCxNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRW5ELElBQUksaUJBQWlCLEtBQUssZUFBZSxFQUFFO1lBQ3pDLE9BQU8sZUFBZSxHQUFHLGlCQUFpQixDQUFDO1NBQzVDO0tBQ0Y7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFFRCxNQUFNLFVBQVUsY0FBYyxDQUFDLE1BQWUsRUFBRSxLQUFhO0lBQzNELElBQUksZUFBZSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQzNCLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUc7WUFDckIsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQzdDO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxNQUFlLEVBQUUsT0FBZTtJQUMvRCxJQUFJLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUMzQixNQUFNLGFBQWEsR0FDakIsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUc7WUFDaEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BELENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRS9CLE1BQU0sTUFBTSxHQUNWLE9BQU8sYUFBYSxLQUFLLFFBQVE7WUFDL0IsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsYUFBYSxDQUFDO1lBQ3ZDLENBQUMsQ0FBQyxhQUFhLENBQUM7UUFFcEIsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQzlDO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZlYXR1cmVzQ29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL2ZlYXR1cmVzLWNvbmZpZyc7XG5cbmZ1bmN0aW9uIGlzRmVhdHVyZUNvbmZpZyhjb25maWc6IGFueSk6IGNvbmZpZyBpcyBGZWF0dXJlc0NvbmZpZyB7XG4gIHJldHVybiB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcuZmVhdHVyZXM7XG59XG5cbmZ1bmN0aW9uIGlzSW5MZXZlbChsZXZlbCwgdmVyc2lvbikge1xuICBpZiAobGV2ZWwgPT09ICcqJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IGxldmVsUGFydHMgPSBsZXZlbC5zcGxpdCgnLicpO1xuICBjb25zdCB2ZXJzaW9uUGFydHMgPSB2ZXJzaW9uLnNwbGl0KCcuJyk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJzaW9uUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB2ZXJzaW9uTnVtYmVyUGFydCA9IE51bWJlcih2ZXJzaW9uUGFydHNbaV0pO1xuICAgIGNvbnN0IGxldmVsTnVtYmVyUGFydCA9IE51bWJlcihsZXZlbFBhcnRzW2ldKSB8fCAwO1xuXG4gICAgaWYgKHZlcnNpb25OdW1iZXJQYXJ0ICE9PSBsZXZlbE51bWJlclBhcnQpIHtcbiAgICAgIHJldHVybiBsZXZlbE51bWJlclBhcnQgPiB2ZXJzaW9uTnVtYmVyUGFydDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ZlYXR1cmVMZXZlbChjb25maWc6IHVua25vd24sIGxldmVsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKGlzRmVhdHVyZUNvbmZpZyhjb25maWcpKSB7XG4gICAgcmV0dXJuIGxldmVsWzBdID09PSAnISdcbiAgICAgID8gIWlzSW5MZXZlbChjb25maWcuZmVhdHVyZXMubGV2ZWwsIGxldmVsLnN1YnN0cigxLCBsZXZlbC5sZW5ndGgpKVxuICAgICAgOiBpc0luTGV2ZWwoY29uZmlnLmZlYXR1cmVzLmxldmVsLCBsZXZlbCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRmVhdHVyZUVuYWJsZWQoY29uZmlnOiB1bmtub3duLCBmZWF0dXJlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKGlzRmVhdHVyZUNvbmZpZyhjb25maWcpKSB7XG4gICAgY29uc3QgZmVhdHVyZUNvbmZpZyA9XG4gICAgICBmZWF0dXJlWzBdID09PSAnISdcbiAgICAgICAgPyBjb25maWcuZmVhdHVyZXNbZmVhdHVyZS5zdWJzdHIoMSwgZmVhdHVyZS5sZW5ndGgpXVxuICAgICAgICA6IGNvbmZpZy5mZWF0dXJlc1tmZWF0dXJlXTtcblxuICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICB0eXBlb2YgZmVhdHVyZUNvbmZpZyA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBpc0ZlYXR1cmVMZXZlbChjb25maWcsIGZlYXR1cmVDb25maWcpXG4gICAgICAgIDogZmVhdHVyZUNvbmZpZztcblxuICAgIHJldHVybiBmZWF0dXJlWzBdID09PSAnIScgPyAhcmVzdWx0IDogcmVzdWx0O1xuICB9XG59XG4iXX0=