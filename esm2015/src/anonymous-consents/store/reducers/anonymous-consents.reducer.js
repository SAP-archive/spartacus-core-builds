import { ANONYMOUS_CONSENT_STATUS, } from '../../../model/consent.model';
import { AnonymousConsentsActions } from '../actions/index';
export const initialState = [];
export function toggleConsentStatus(consents, templateCode, status) {
    if (!consents) {
        return [];
    }
    return consents.map((consent) => {
        if (consent.templateCode === templateCode) {
            consent = Object.assign(Object.assign({}, consent), { consentState: status });
        }
        return consent;
    });
}
export function reducer(state = initialState, action) {
    switch (action.type) {
        case AnonymousConsentsActions.GIVE_ANONYMOUS_CONSENT: {
            return toggleConsentStatus(state, action.templateCode, ANONYMOUS_CONSENT_STATUS.GIVEN);
        }
        case AnonymousConsentsActions.WITHDRAW_ANONYMOUS_CONSENT: {
            return toggleConsentStatus(state, action.templateCode, ANONYMOUS_CONSENT_STATUS.WITHDRAWN);
        }
        case AnonymousConsentsActions.SET_ANONYMOUS_CONSENTS: {
            return action.payload;
        }
    }
    return state;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5vbnltb3VzLWNvbnNlbnRzLnJlZHVjZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvYW5vbnltb3VzLWNvbnNlbnRzL3N0b3JlL3JlZHVjZXJzL2Fub255bW91cy1jb25zZW50cy5yZWR1Y2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCx3QkFBd0IsR0FDekIsTUFBTSw4QkFBOEIsQ0FBQztBQUN0QyxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUU1RCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQXVCLEVBQUUsQ0FBQztBQUVuRCxNQUFNLFVBQVUsbUJBQW1CLENBQ2pDLFFBQTRCLEVBQzVCLFlBQW9CLEVBQ3BCLE1BQWdDO0lBRWhDLElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDYixPQUFPLEVBQUUsQ0FBQztLQUNYO0lBRUQsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7UUFDOUIsSUFBSSxPQUFPLENBQUMsWUFBWSxLQUFLLFlBQVksRUFBRTtZQUN6QyxPQUFPLG1DQUNGLE9BQU8sS0FDVixZQUFZLEVBQUUsTUFBTSxHQUNyQixDQUFDO1NBQ0g7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUNyQixLQUFLLEdBQUcsWUFBWSxFQUNwQixNQUF5RDtJQUV6RCxRQUFRLE1BQU0sQ0FBQyxJQUFJLEVBQUU7UUFDbkIsS0FBSyx3QkFBd0IsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQ3BELE9BQU8sbUJBQW1CLENBQ3hCLEtBQUssRUFDTCxNQUFNLENBQUMsWUFBWSxFQUNuQix3QkFBd0IsQ0FBQyxLQUFLLENBQy9CLENBQUM7U0FDSDtRQUVELEtBQUssd0JBQXdCLENBQUMsMEJBQTBCLENBQUMsQ0FBQztZQUN4RCxPQUFPLG1CQUFtQixDQUN4QixLQUFLLEVBQ0wsTUFBTSxDQUFDLFlBQVksRUFDbkIsd0JBQXdCLENBQUMsU0FBUyxDQUNuQyxDQUFDO1NBQ0g7UUFFRCxLQUFLLHdCQUF3QixDQUFDLHNCQUFzQixDQUFDLENBQUM7WUFDcEQsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDO1NBQ3ZCO0tBQ0Y7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBbm9ueW1vdXNDb25zZW50LFxuICBBTk9OWU1PVVNfQ09OU0VOVF9TVEFUVVMsXG59IGZyb20gJy4uLy4uLy4uL21vZGVsL2NvbnNlbnQubW9kZWwnO1xuaW1wb3J0IHsgQW5vbnltb3VzQ29uc2VudHNBY3Rpb25zIH0gZnJvbSAnLi4vYWN0aW9ucy9pbmRleCc7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsU3RhdGU6IEFub255bW91c0NvbnNlbnRbXSA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlQ29uc2VudFN0YXR1cyhcbiAgY29uc2VudHM6IEFub255bW91c0NvbnNlbnRbXSxcbiAgdGVtcGxhdGVDb2RlOiBzdHJpbmcsXG4gIHN0YXR1czogQU5PTllNT1VTX0NPTlNFTlRfU1RBVFVTXG4pOiBBbm9ueW1vdXNDb25zZW50W10ge1xuICBpZiAoIWNvbnNlbnRzKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcmV0dXJuIGNvbnNlbnRzLm1hcCgoY29uc2VudCkgPT4ge1xuICAgIGlmIChjb25zZW50LnRlbXBsYXRlQ29kZSA9PT0gdGVtcGxhdGVDb2RlKSB7XG4gICAgICBjb25zZW50ID0ge1xuICAgICAgICAuLi5jb25zZW50LFxuICAgICAgICBjb25zZW50U3RhdGU6IHN0YXR1cyxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjb25zZW50O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZXIoXG4gIHN0YXRlID0gaW5pdGlhbFN0YXRlLFxuICBhY3Rpb246IEFub255bW91c0NvbnNlbnRzQWN0aW9ucy5Bbm9ueW1vdXNDb25zZW50c0FjdGlvbnNcbik6IEFub255bW91c0NvbnNlbnRbXSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIEFub255bW91c0NvbnNlbnRzQWN0aW9ucy5HSVZFX0FOT05ZTU9VU19DT05TRU5UOiB7XG4gICAgICByZXR1cm4gdG9nZ2xlQ29uc2VudFN0YXR1cyhcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGFjdGlvbi50ZW1wbGF0ZUNvZGUsXG4gICAgICAgIEFOT05ZTU9VU19DT05TRU5UX1NUQVRVUy5HSVZFTlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjYXNlIEFub255bW91c0NvbnNlbnRzQWN0aW9ucy5XSVRIRFJBV19BTk9OWU1PVVNfQ09OU0VOVDoge1xuICAgICAgcmV0dXJuIHRvZ2dsZUNvbnNlbnRTdGF0dXMoXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBhY3Rpb24udGVtcGxhdGVDb2RlLFxuICAgICAgICBBTk9OWU1PVVNfQ09OU0VOVF9TVEFUVVMuV0lUSERSQVdOXG4gICAgICApO1xuICAgIH1cblxuICAgIGNhc2UgQW5vbnltb3VzQ29uc2VudHNBY3Rpb25zLlNFVF9BTk9OWU1PVVNfQ09OU0VOVFM6IHtcbiAgICAgIHJldHVybiBhY3Rpb24ucGF5bG9hZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59XG4iXX0=