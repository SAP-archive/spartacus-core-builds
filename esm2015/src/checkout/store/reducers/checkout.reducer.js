/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as fromAction from './../actions/index';
/** @type {?} */
export const initialState = {
    address: {},
    deliveryMode: {
        supported: {},
        selected: '',
    },
    paymentDetails: {},
    orderDetails: {},
};
/**
 * @param {?=} state
 * @param {?=} action
 * @return {?}
 */
export function reducer(state = initialState, action) {
    switch (action.type) {
        case fromAction.ADD_DELIVERY_ADDRESS_SUCCESS:
        case fromAction.SET_DELIVERY_ADDRESS_SUCCESS: {
            /** @type {?} */
            const address = action.payload;
            return Object.assign({}, state, { address });
        }
        case fromAction.LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS: {
            /** @type {?} */
            const supportedModes = action.payload;
            if (!supportedModes) {
                return state;
            }
            /** @type {?} */
            const supported = supportedModes.reduce((modes, mode) => {
                return Object.assign({}, modes, { [mode.code]: mode });
            }, Object.assign({}, state.deliveryMode.supported));
            return Object.assign({}, state, { deliveryMode: Object.assign({}, state.deliveryMode, { supported }) });
        }
        case fromAction.SET_DELIVERY_MODE_SUCCESS: {
            /** @type {?} */
            const selected = action.payload;
            return Object.assign({}, state, { deliveryMode: Object.assign({}, state.deliveryMode, { selected }) });
        }
        case fromAction.CREATE_PAYMENT_DETAILS_SUCCESS:
        case fromAction.SET_PAYMENT_DETAILS_SUCCESS: {
            return Object.assign({}, state, { paymentDetails: action.payload });
        }
        case fromAction.CREATE_PAYMENT_DETAILS_FAIL: {
            /** @type {?} */
            const paymentDetails = action.payload;
            if (paymentDetails['hasError']) {
                return Object.assign({}, state, { paymentDetails });
            }
            return state;
        }
        case fromAction.PLACE_ORDER_SUCCESS: {
            /** @type {?} */
            const orderDetails = action.payload;
            return Object.assign({}, state, { orderDetails });
        }
        case fromAction.CLEAR_CHECKOUT_DATA: {
            return initialState;
        }
        case fromAction.CLEAR_CHECKOUT_STEP: {
            /** @type {?} */
            const stepNumber = action.payload;
            switch (stepNumber) {
                case 1: {
                    return Object.assign({}, state, { address: {} });
                }
                case 2: {
                    return Object.assign({}, state, { deliveryMode: Object.assign({}, state.deliveryMode, { supported: {}, selected: '' }) });
                }
                case 3: {
                    return Object.assign({}, state, { paymentDetails: {} });
                }
            }
            return state;
        }
        case fromAction.CLEAR_SUPPORTED_DELIVERY_MODES:
        case fromAction.CHECKOUT_CLEAR_MISCS_DATA: {
            return Object.assign({}, state, { deliveryMode: Object.assign({}, state.deliveryMode, { supported: {} }) });
        }
    }
    return state;
}
/** @type {?} */
export const getDeliveryAddress = (state) => state.address;
/** @type {?} */
export const getDeliveryMode = (state) => state.deliveryMode;
/** @type {?} */
export const getPaymentDetails = (state) => state.paymentDetails;
/** @type {?} */
export const getOrderDetails = (state) => state.orderDetails;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tvdXQucmVkdWNlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzcGFydGFjdXMvY29yZS8iLCJzb3VyY2VzIjpbInNyYy9jaGVja291dC9zdG9yZS9yZWR1Y2Vycy9jaGVja291dC5yZWR1Y2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxPQUFPLEtBQUssVUFBVSxNQUFNLG9CQUFvQixDQUFDOztBQUdqRCxNQUFNLE9BQU8sWUFBWSxHQUF1QjtJQUM5QyxPQUFPLEVBQUUsRUFBRTtJQUNYLFlBQVksRUFBRTtRQUNaLFNBQVMsRUFBRSxFQUFFO1FBQ2IsUUFBUSxFQUFFLEVBQUU7S0FDYjtJQUNELGNBQWMsRUFBRSxFQUFFO0lBQ2xCLFlBQVksRUFBRSxFQUFFO0NBQ2pCOzs7Ozs7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUNyQixLQUFLLEdBQUcsWUFBWSxFQUNwQixNQUFxRTtJQUVyRSxRQUFRLE1BQU0sQ0FBQyxJQUFJLEVBQUU7UUFDbkIsS0FBSyxVQUFVLENBQUMsNEJBQTRCLENBQUM7UUFDN0MsS0FBSyxVQUFVLENBQUMsNEJBQTRCLENBQUMsQ0FBQzs7a0JBQ3RDLE9BQU8sR0FBWSxNQUFNLENBQUMsT0FBTztZQUV2Qyx5QkFDSyxLQUFLLElBQ1IsT0FBTyxJQUNQO1NBQ0g7UUFFRCxLQUFLLFVBQVUsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDOztrQkFDL0MsY0FBYyxHQUFHLE1BQU0sQ0FBQyxPQUFPO1lBQ3JDLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQ25CLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7O2tCQUVLLFNBQVMsR0FBRyxjQUFjLENBQUMsTUFBTSxDQUNyQyxDQUFDLEtBQXVDLEVBQUUsSUFBa0IsRUFBRSxFQUFFO2dCQUM5RCx5QkFDSyxLQUFLLElBQ1IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUNqQjtZQUNKLENBQUMsb0JBRUksS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBRWxDO1lBRUQseUJBQ0ssS0FBSyxJQUNSLFlBQVksb0JBQ1AsS0FBSyxDQUFDLFlBQVksSUFDckIsU0FBUyxPQUVYO1NBQ0g7UUFFRCxLQUFLLFVBQVUsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDOztrQkFDbkMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPO1lBRS9CLHlCQUNLLEtBQUssSUFDUixZQUFZLG9CQUNQLEtBQUssQ0FBQyxZQUFZLElBQ3JCLFFBQVEsT0FFVjtTQUNIO1FBRUQsS0FBSyxVQUFVLENBQUMsOEJBQThCLENBQUM7UUFDL0MsS0FBSyxVQUFVLENBQUMsMkJBQTJCLENBQUMsQ0FBQztZQUMzQyx5QkFDSyxLQUFLLElBQ1IsY0FBYyxFQUFFLE1BQU0sQ0FBQyxPQUFPLElBQzlCO1NBQ0g7UUFFRCxLQUFLLFVBQVUsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDOztrQkFDckMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxPQUFPO1lBQ3JDLElBQUksY0FBYyxDQUFDLFVBQVUsQ0FBQyxFQUFFO2dCQUM5Qix5QkFDSyxLQUFLLElBQ1IsY0FBYyxJQUNkO2FBQ0g7WUFFRCxPQUFPLEtBQUssQ0FBQztTQUNkO1FBRUQsS0FBSyxVQUFVLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7a0JBQzdCLFlBQVksR0FBVSxNQUFNLENBQUMsT0FBTztZQUUxQyx5QkFDSyxLQUFLLElBQ1IsWUFBWSxJQUNaO1NBQ0g7UUFFRCxLQUFLLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQ25DLE9BQU8sWUFBWSxDQUFDO1NBQ3JCO1FBRUQsS0FBSyxVQUFVLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7a0JBQzdCLFVBQVUsR0FBRyxNQUFNLENBQUMsT0FBTztZQUNqQyxRQUFRLFVBQVUsRUFBRTtnQkFDbEIsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDTix5QkFDSyxLQUFLLElBQ1IsT0FBTyxFQUFFLEVBQUUsSUFDWDtpQkFDSDtnQkFFRCxLQUFLLENBQUMsQ0FBQyxDQUFDO29CQUNOLHlCQUNLLEtBQUssSUFDUixZQUFZLG9CQUNQLEtBQUssQ0FBQyxZQUFZLElBQ3JCLFNBQVMsRUFBRSxFQUFFLEVBQ2IsUUFBUSxFQUFFLEVBQUUsT0FFZDtpQkFDSDtnQkFFRCxLQUFLLENBQUMsQ0FBQyxDQUFDO29CQUNOLHlCQUNLLEtBQUssSUFDUixjQUFjLEVBQUUsRUFBRSxJQUNsQjtpQkFDSDthQUNGO1lBRUQsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELEtBQUssVUFBVSxDQUFDLDhCQUE4QixDQUFDO1FBQy9DLEtBQUssVUFBVSxDQUFDLHlCQUF5QixDQUFDLENBQUM7WUFDekMseUJBQ0ssS0FBSyxJQUNSLFlBQVksb0JBQ1AsS0FBSyxDQUFDLFlBQVksSUFDckIsU0FBUyxFQUFFLEVBQUUsT0FFZjtTQUNIO0tBQ0Y7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7O0FBRUQsTUFBTSxPQUFPLGtCQUFrQixHQUFHLENBQUMsS0FBeUIsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU87O0FBQzlFLE1BQU0sT0FBTyxlQUFlLEdBQUcsQ0FBQyxLQUF5QixFQUFFLEVBQUUsQ0FDM0QsS0FBSyxDQUFDLFlBQVk7O0FBQ3BCLE1BQU0sT0FBTyxpQkFBaUIsR0FBRyxDQUFDLEtBQXlCLEVBQUUsRUFBRSxDQUM3RCxLQUFLLENBQUMsY0FBYzs7QUFDdEIsTUFBTSxPQUFPLGVBQWUsR0FBRyxDQUFDLEtBQXlCLEVBQUUsRUFBRSxDQUMzRCxLQUFLLENBQUMsWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoZWNrb3V0U3RlcHNTdGF0ZSB9IGZyb20gJy4uL2NoZWNrb3V0LXN0YXRlJztcbmltcG9ydCAqIGFzIGZyb21BY3Rpb24gZnJvbSAnLi8uLi9hY3Rpb25zL2luZGV4JztcbmltcG9ydCB7IEFkZHJlc3MsIERlbGl2ZXJ5TW9kZSwgT3JkZXIgfSBmcm9tICcuLi8uLi8uLi9vY2Mvb2NjLW1vZGVscy9pbmRleCc7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsU3RhdGU6IENoZWNrb3V0U3RlcHNTdGF0ZSA9IHtcbiAgYWRkcmVzczoge30sXG4gIGRlbGl2ZXJ5TW9kZToge1xuICAgIHN1cHBvcnRlZDoge30sXG4gICAgc2VsZWN0ZWQ6ICcnLFxuICB9LFxuICBwYXltZW50RGV0YWlsczoge30sXG4gIG9yZGVyRGV0YWlsczoge30sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlcihcbiAgc3RhdGUgPSBpbml0aWFsU3RhdGUsXG4gIGFjdGlvbjogZnJvbUFjdGlvbi5DaGVja291dEFjdGlvbiB8IGZyb21BY3Rpb24uQ2hlY2tvdXRDbGVhck1pc2NzRGF0YVxuKTogQ2hlY2tvdXRTdGVwc1N0YXRlIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgZnJvbUFjdGlvbi5BRERfREVMSVZFUllfQUREUkVTU19TVUNDRVNTOlxuICAgIGNhc2UgZnJvbUFjdGlvbi5TRVRfREVMSVZFUllfQUREUkVTU19TVUNDRVNTOiB7XG4gICAgICBjb25zdCBhZGRyZXNzOiBBZGRyZXNzID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBhZGRyZXNzLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjYXNlIGZyb21BY3Rpb24uTE9BRF9TVVBQT1JURURfREVMSVZFUllfTU9ERVNfU1VDQ0VTUzoge1xuICAgICAgY29uc3Qgc3VwcG9ydGVkTW9kZXMgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGlmICghc3VwcG9ydGVkTW9kZXMpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdXBwb3J0ZWQgPSBzdXBwb3J0ZWRNb2Rlcy5yZWR1Y2UoXG4gICAgICAgIChtb2RlczogeyBbY29kZTogc3RyaW5nXTogRGVsaXZlcnlNb2RlIH0sIG1vZGU6IERlbGl2ZXJ5TW9kZSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5tb2RlcyxcbiAgICAgICAgICAgIFttb2RlLmNvZGVdOiBtb2RlLFxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5zdGF0ZS5kZWxpdmVyeU1vZGUuc3VwcG9ydGVkLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgZGVsaXZlcnlNb2RlOiB7XG4gICAgICAgICAgLi4uc3RhdGUuZGVsaXZlcnlNb2RlLFxuICAgICAgICAgIHN1cHBvcnRlZCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBmcm9tQWN0aW9uLlNFVF9ERUxJVkVSWV9NT0RFX1NVQ0NFU1M6IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBkZWxpdmVyeU1vZGU6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5kZWxpdmVyeU1vZGUsXG4gICAgICAgICAgc2VsZWN0ZWQsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNhc2UgZnJvbUFjdGlvbi5DUkVBVEVfUEFZTUVOVF9ERVRBSUxTX1NVQ0NFU1M6XG4gICAgY2FzZSBmcm9tQWN0aW9uLlNFVF9QQVlNRU5UX0RFVEFJTFNfU1VDQ0VTUzoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHBheW1lbnREZXRhaWxzOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBmcm9tQWN0aW9uLkNSRUFURV9QQVlNRU5UX0RFVEFJTFNfRkFJTDoge1xuICAgICAgY29uc3QgcGF5bWVudERldGFpbHMgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGlmIChwYXltZW50RGV0YWlsc1snaGFzRXJyb3InXSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgIHBheW1lbnREZXRhaWxzLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgY2FzZSBmcm9tQWN0aW9uLlBMQUNFX09SREVSX1NVQ0NFU1M6IHtcbiAgICAgIGNvbnN0IG9yZGVyRGV0YWlsczogT3JkZXIgPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBmcm9tQWN0aW9uLkNMRUFSX0NIRUNLT1VUX0RBVEE6IHtcbiAgICAgIHJldHVybiBpbml0aWFsU3RhdGU7XG4gICAgfVxuXG4gICAgY2FzZSBmcm9tQWN0aW9uLkNMRUFSX0NIRUNLT1VUX1NURVA6IHtcbiAgICAgIGNvbnN0IHN0ZXBOdW1iZXIgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIHN3aXRjaCAoc3RlcE51bWJlcikge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICBhZGRyZXNzOiB7fSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgZGVsaXZlcnlNb2RlOiB7XG4gICAgICAgICAgICAgIC4uLnN0YXRlLmRlbGl2ZXJ5TW9kZSxcbiAgICAgICAgICAgICAgc3VwcG9ydGVkOiB7fSxcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ6ICcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgcGF5bWVudERldGFpbHM6IHt9LFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIGNhc2UgZnJvbUFjdGlvbi5DTEVBUl9TVVBQT1JURURfREVMSVZFUllfTU9ERVM6XG4gICAgY2FzZSBmcm9tQWN0aW9uLkNIRUNLT1VUX0NMRUFSX01JU0NTX0RBVEE6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBkZWxpdmVyeU1vZGU6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5kZWxpdmVyeU1vZGUsXG4gICAgICAgICAgc3VwcG9ydGVkOiB7fSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0RGVsaXZlcnlBZGRyZXNzID0gKHN0YXRlOiBDaGVja291dFN0ZXBzU3RhdGUpID0+IHN0YXRlLmFkZHJlc3M7XG5leHBvcnQgY29uc3QgZ2V0RGVsaXZlcnlNb2RlID0gKHN0YXRlOiBDaGVja291dFN0ZXBzU3RhdGUpID0+XG4gIHN0YXRlLmRlbGl2ZXJ5TW9kZTtcbmV4cG9ydCBjb25zdCBnZXRQYXltZW50RGV0YWlscyA9IChzdGF0ZTogQ2hlY2tvdXRTdGVwc1N0YXRlKSA9PlxuICBzdGF0ZS5wYXltZW50RGV0YWlscztcbmV4cG9ydCBjb25zdCBnZXRPcmRlckRldGFpbHMgPSAoc3RhdGU6IENoZWNrb3V0U3RlcHNTdGF0ZSkgPT5cbiAgc3RhdGUub3JkZXJEZXRhaWxzO1xuIl19