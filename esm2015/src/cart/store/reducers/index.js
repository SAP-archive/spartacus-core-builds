import { InjectionToken } from '@angular/core';
import { AuthActions } from '../../../auth/store/actions/index';
import { entityProcessesLoaderReducer } from '../../../state/utils/entity-processes-loader/entity-processes-loader.reducer';
import { MULTI_CART_DATA } from '../multi-cart-state';
import { activeCartReducer, cartEntitiesReducer, wishListReducer, } from './multi-cart.reducer';
export function clearMultiCartState(reducer) {
    return function (state, action) {
        if (action.type === AuthActions.LOGOUT) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const multiCartMetaReducers = [clearMultiCartState];
export const multiCartReducerToken = new InjectionToken('MultiCartReducers');
export function getMultiCartReducers() {
    return {
        carts: entityProcessesLoaderReducer(MULTI_CART_DATA, cartEntitiesReducer),
        active: activeCartReducer,
        wishList: wishListReducer,
    };
}
export const multiCartReducerProvider = {
    provide: multiCartReducerToken,
    useFactory: getMultiCartReducers,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb3JlL3NyYy9jYXJ0L3N0b3JlL3JlZHVjZXJzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQVksTUFBTSxlQUFlLENBQUM7QUFFekQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBRWhFLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLDhFQUE4RSxDQUFDO0FBQzVILE9BQU8sRUFBa0IsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEUsT0FBTyxFQUNMLGlCQUFpQixFQUNqQixtQkFBbUIsRUFDbkIsZUFBZSxHQUNoQixNQUFNLHNCQUFzQixDQUFDO0FBRTlCLE1BQU0sVUFBVSxtQkFBbUIsQ0FDakMsT0FBMkI7SUFFM0IsT0FBTyxVQUFVLEtBQUssRUFBRSxNQUFNO1FBQzVCLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxXQUFXLENBQUMsTUFBTSxFQUFFO1lBQ3RDLEtBQUssR0FBRyxTQUFTLENBQUM7U0FDbkI7UUFDRCxPQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUF1QixDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFFL0UsTUFBTSxDQUFDLE1BQU0scUJBQXFCLEdBRTdCLElBQUksY0FBYyxDQUFtQyxtQkFBbUIsQ0FBQyxDQUFDO0FBRS9FLE1BQU0sVUFBVSxvQkFBb0I7SUFDbEMsT0FBTztRQUNMLEtBQUssRUFBRSw0QkFBNEIsQ0FDakMsZUFBZSxFQUNmLG1CQUFtQixDQUNwQjtRQUNELE1BQU0sRUFBRSxpQkFBaUI7UUFDekIsUUFBUSxFQUFFLGVBQWU7S0FDMUIsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBYTtJQUNoRCxPQUFPLEVBQUUscUJBQXFCO0lBQzlCLFVBQVUsRUFBRSxvQkFBb0I7Q0FDakMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuLCBQcm92aWRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aW9uUmVkdWNlciwgQWN0aW9uUmVkdWNlck1hcCwgTWV0YVJlZHVjZXIgfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBBdXRoQWN0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2F1dGgvc3RvcmUvYWN0aW9ucy9pbmRleCc7XG5pbXBvcnQgeyBDYXJ0IH0gZnJvbSAnLi4vLi4vLi4vbW9kZWwvY2FydC5tb2RlbCc7XG5pbXBvcnQgeyBlbnRpdHlQcm9jZXNzZXNMb2FkZXJSZWR1Y2VyIH0gZnJvbSAnLi4vLi4vLi4vc3RhdGUvdXRpbHMvZW50aXR5LXByb2Nlc3Nlcy1sb2FkZXIvZW50aXR5LXByb2Nlc3Nlcy1sb2FkZXIucmVkdWNlcic7XG5pbXBvcnQgeyBNdWx0aUNhcnRTdGF0ZSwgTVVMVElfQ0FSVF9EQVRBIH0gZnJvbSAnLi4vbXVsdGktY2FydC1zdGF0ZSc7XG5pbXBvcnQge1xuICBhY3RpdmVDYXJ0UmVkdWNlcixcbiAgY2FydEVudGl0aWVzUmVkdWNlcixcbiAgd2lzaExpc3RSZWR1Y2VyLFxufSBmcm9tICcuL211bHRpLWNhcnQucmVkdWNlcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhck11bHRpQ2FydFN0YXRlKFxuICByZWR1Y2VyOiBBY3Rpb25SZWR1Y2VyPGFueT5cbik6IEFjdGlvblJlZHVjZXI8YW55PiB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gQXV0aEFjdGlvbnMuTE9HT1VUKSB7XG4gICAgICBzdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBtdWx0aUNhcnRNZXRhUmVkdWNlcnM6IE1ldGFSZWR1Y2VyPGFueT5bXSA9IFtjbGVhck11bHRpQ2FydFN0YXRlXTtcblxuZXhwb3J0IGNvbnN0IG11bHRpQ2FydFJlZHVjZXJUb2tlbjogSW5qZWN0aW9uVG9rZW48QWN0aW9uUmVkdWNlck1hcDxcbiAgTXVsdGlDYXJ0U3RhdGVcbj4+ID0gbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8TXVsdGlDYXJ0U3RhdGU+PignTXVsdGlDYXJ0UmVkdWNlcnMnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE11bHRpQ2FydFJlZHVjZXJzKCk6IEFjdGlvblJlZHVjZXJNYXA8TXVsdGlDYXJ0U3RhdGU+IHtcbiAgcmV0dXJuIHtcbiAgICBjYXJ0czogZW50aXR5UHJvY2Vzc2VzTG9hZGVyUmVkdWNlcjxDYXJ0PihcbiAgICAgIE1VTFRJX0NBUlRfREFUQSxcbiAgICAgIGNhcnRFbnRpdGllc1JlZHVjZXJcbiAgICApLFxuICAgIGFjdGl2ZTogYWN0aXZlQ2FydFJlZHVjZXIsXG4gICAgd2lzaExpc3Q6IHdpc2hMaXN0UmVkdWNlcixcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IG11bHRpQ2FydFJlZHVjZXJQcm92aWRlcjogUHJvdmlkZXIgPSB7XG4gIHByb3ZpZGU6IG11bHRpQ2FydFJlZHVjZXJUb2tlbixcbiAgdXNlRmFjdG9yeTogZ2V0TXVsdGlDYXJ0UmVkdWNlcnMsXG59O1xuIl19