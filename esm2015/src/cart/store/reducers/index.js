import { InjectionToken } from '@angular/core';
import { AuthActions } from '../../../auth/store/actions/index';
import { entityProcessesLoaderReducer } from '../../../state/utils/entity-processes-loader/entity-processes-loader.reducer';
import { MULTI_CART_DATA } from '../multi-cart-state';
import { activeCartReducer, cartEntitiesReducer, wishListReducer, } from './multi-cart.reducer';
export function clearMultiCartState(reducer) {
    return function (state, action) {
        if (action.type === AuthActions.LOGOUT) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const multiCartMetaReducers = [clearMultiCartState];
export const multiCartReducerToken = new InjectionToken('MultiCartReducers');
export function getMultiCartReducers() {
    return {
        carts: entityProcessesLoaderReducer(MULTI_CART_DATA, cartEntitiesReducer),
        active: activeCartReducer,
        wishList: wishListReducer,
    };
}
export const multiCartReducerProvider = {
    provide: multiCartReducerToken,
    useFactory: getMultiCartReducers,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvY2FydC9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBRXpELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUVoRSxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSw4RUFBOEUsQ0FBQztBQUM1SCxPQUFPLEVBQWtCLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RFLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsbUJBQW1CLEVBQ25CLGVBQWUsR0FDaEIsTUFBTSxzQkFBc0IsQ0FBQztBQUU5QixNQUFNLFVBQVUsbUJBQW1CLENBQ2pDLE9BQTJCO0lBRTNCLE9BQU8sVUFBUyxLQUFLLEVBQUUsTUFBTTtRQUMzQixJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssV0FBVyxDQUFDLE1BQU0sRUFBRTtZQUN0QyxLQUFLLEdBQUcsU0FBUyxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBdUIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBRS9FLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUU3QixJQUFJLGNBQWMsQ0FBbUMsbUJBQW1CLENBQUMsQ0FBQztBQUUvRSxNQUFNLFVBQVUsb0JBQW9CO0lBQ2xDLE9BQU87UUFDTCxLQUFLLEVBQUUsNEJBQTRCLENBQ2pDLGVBQWUsRUFDZixtQkFBbUIsQ0FDcEI7UUFDRCxNQUFNLEVBQUUsaUJBQWlCO1FBQ3pCLFFBQVEsRUFBRSxlQUFlO0tBQzFCLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sd0JBQXdCLEdBQWE7SUFDaEQsT0FBTyxFQUFFLHFCQUFxQjtJQUM5QixVQUFVLEVBQUUsb0JBQW9CO0NBQ2pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGlvblJlZHVjZXIsIEFjdGlvblJlZHVjZXJNYXAsIE1ldGFSZWR1Y2VyIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgQXV0aEFjdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9hdXRoL3N0b3JlL2FjdGlvbnMvaW5kZXgnO1xuaW1wb3J0IHsgQ2FydCB9IGZyb20gJy4uLy4uLy4uL21vZGVsL2NhcnQubW9kZWwnO1xuaW1wb3J0IHsgZW50aXR5UHJvY2Vzc2VzTG9hZGVyUmVkdWNlciB9IGZyb20gJy4uLy4uLy4uL3N0YXRlL3V0aWxzL2VudGl0eS1wcm9jZXNzZXMtbG9hZGVyL2VudGl0eS1wcm9jZXNzZXMtbG9hZGVyLnJlZHVjZXInO1xuaW1wb3J0IHsgTXVsdGlDYXJ0U3RhdGUsIE1VTFRJX0NBUlRfREFUQSB9IGZyb20gJy4uL211bHRpLWNhcnQtc3RhdGUnO1xuaW1wb3J0IHtcbiAgYWN0aXZlQ2FydFJlZHVjZXIsXG4gIGNhcnRFbnRpdGllc1JlZHVjZXIsXG4gIHdpc2hMaXN0UmVkdWNlcixcbn0gZnJvbSAnLi9tdWx0aS1jYXJ0LnJlZHVjZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJNdWx0aUNhcnRTdGF0ZShcbiAgcmVkdWNlcjogQWN0aW9uUmVkdWNlcjxhbnk+XG4pOiBBY3Rpb25SZWR1Y2VyPGFueT4ge1xuICByZXR1cm4gZnVuY3Rpb24oc3RhdGUsIGFjdGlvbikge1xuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gQXV0aEFjdGlvbnMuTE9HT1VUKSB7XG4gICAgICBzdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBtdWx0aUNhcnRNZXRhUmVkdWNlcnM6IE1ldGFSZWR1Y2VyPGFueT5bXSA9IFtjbGVhck11bHRpQ2FydFN0YXRlXTtcblxuZXhwb3J0IGNvbnN0IG11bHRpQ2FydFJlZHVjZXJUb2tlbjogSW5qZWN0aW9uVG9rZW48QWN0aW9uUmVkdWNlck1hcDxcbiAgTXVsdGlDYXJ0U3RhdGVcbj4+ID0gbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8TXVsdGlDYXJ0U3RhdGU+PignTXVsdGlDYXJ0UmVkdWNlcnMnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE11bHRpQ2FydFJlZHVjZXJzKCk6IEFjdGlvblJlZHVjZXJNYXA8TXVsdGlDYXJ0U3RhdGU+IHtcbiAgcmV0dXJuIHtcbiAgICBjYXJ0czogZW50aXR5UHJvY2Vzc2VzTG9hZGVyUmVkdWNlcjxDYXJ0PihcbiAgICAgIE1VTFRJX0NBUlRfREFUQSxcbiAgICAgIGNhcnRFbnRpdGllc1JlZHVjZXJcbiAgICApLFxuICAgIGFjdGl2ZTogYWN0aXZlQ2FydFJlZHVjZXIsXG4gICAgd2lzaExpc3Q6IHdpc2hMaXN0UmVkdWNlcixcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IG11bHRpQ2FydFJlZHVjZXJQcm92aWRlcjogUHJvdmlkZXIgPSB7XG4gIHByb3ZpZGU6IG11bHRpQ2FydFJlZHVjZXJUb2tlbixcbiAgdXNlRmFjdG9yeTogZ2V0TXVsdGlDYXJ0UmVkdWNlcnMsXG59O1xuIl19