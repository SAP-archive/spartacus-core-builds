import { InjectionToken } from '@angular/core';
import { SiteContextActions } from '../../../site-context/store/actions/index';
import { PRODUCT_DETAIL_ENTITY } from '../product-state';
import * as fromProductReferences from './product-references.reducer';
import * as fromProductReviews from './product-reviews.reducer';
import * as fromProductsSearch from './product-search.reducer';
import { entityScopedLoaderReducer } from '../../../state/utils/scoped-loader/entity-scoped-loader.reducer';
export function getReducers() {
    return {
        search: fromProductsSearch.reducer,
        details: entityScopedLoaderReducer(PRODUCT_DETAIL_ENTITY),
        reviews: fromProductReviews.reducer,
        references: fromProductReferences.reducer,
    };
}
export const reducerToken = new InjectionToken('ProductReducers');
export const reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearProductsState(reducer) {
    return function (state, action) {
        if (action.type === SiteContextActions.CURRENCY_CHANGE ||
            action.type === SiteContextActions.LANGUAGE_CHANGE) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const metaReducers = [clearProductsState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb3JlL3NyYy9wcm9kdWN0L3N0b3JlL3JlZHVjZXJzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQVksTUFBTSxlQUFlLENBQUM7QUFHekQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDL0UsT0FBTyxFQUFFLHFCQUFxQixFQUFpQixNQUFNLGtCQUFrQixDQUFDO0FBQ3hFLE9BQU8sS0FBSyxxQkFBcUIsTUFBTSw4QkFBOEIsQ0FBQztBQUN0RSxPQUFPLEtBQUssa0JBQWtCLE1BQU0sMkJBQTJCLENBQUM7QUFDaEUsT0FBTyxLQUFLLGtCQUFrQixNQUFNLDBCQUEwQixDQUFDO0FBQy9ELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGlFQUFpRSxDQUFDO0FBRTVHLE1BQU0sVUFBVSxXQUFXO0lBQ3pCLE9BQU87UUFDTCxNQUFNLEVBQUUsa0JBQWtCLENBQUMsT0FBTztRQUNsQyxPQUFPLEVBQUUseUJBQXlCLENBQVUscUJBQXFCLENBQUM7UUFDbEUsT0FBTyxFQUFFLGtCQUFrQixDQUFDLE9BQU87UUFDbkMsVUFBVSxFQUFFLHFCQUFxQixDQUFDLE9BQU87S0FDMUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBRXBCLElBQUksY0FBYyxDQUFrQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRTVFLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBYTtJQUN2QyxPQUFPLEVBQUUsWUFBWTtJQUNyQixVQUFVLEVBQUUsV0FBVztDQUN4QixDQUFDO0FBRUYsTUFBTSxVQUFVLGtCQUFrQixDQUNoQyxPQUEyQjtJQUUzQixPQUFPLFVBQVUsS0FBSyxFQUFFLE1BQU07UUFDNUIsSUFDRSxNQUFNLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLGVBQWU7WUFDbEQsTUFBTSxDQUFDLElBQUksS0FBSyxrQkFBa0IsQ0FBQyxlQUFlLEVBQ2xEO1lBQ0EsS0FBSyxHQUFHLFNBQVMsQ0FBQztTQUNuQjtRQUNELE9BQU8sT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUF1QixDQUFDLGtCQUFrQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGlvblJlZHVjZXIsIEFjdGlvblJlZHVjZXJNYXAsIE1ldGFSZWR1Y2VyIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgUHJvZHVjdCB9IGZyb20gJy4uLy4uLy4uL21vZGVsL3Byb2R1Y3QubW9kZWwnO1xuaW1wb3J0IHsgU2l0ZUNvbnRleHRBY3Rpb25zIH0gZnJvbSAnLi4vLi4vLi4vc2l0ZS1jb250ZXh0L3N0b3JlL2FjdGlvbnMvaW5kZXgnO1xuaW1wb3J0IHsgUFJPRFVDVF9ERVRBSUxfRU5USVRZLCBQcm9kdWN0c1N0YXRlIH0gZnJvbSAnLi4vcHJvZHVjdC1zdGF0ZSc7XG5pbXBvcnQgKiBhcyBmcm9tUHJvZHVjdFJlZmVyZW5jZXMgZnJvbSAnLi9wcm9kdWN0LXJlZmVyZW5jZXMucmVkdWNlcic7XG5pbXBvcnQgKiBhcyBmcm9tUHJvZHVjdFJldmlld3MgZnJvbSAnLi9wcm9kdWN0LXJldmlld3MucmVkdWNlcic7XG5pbXBvcnQgKiBhcyBmcm9tUHJvZHVjdHNTZWFyY2ggZnJvbSAnLi9wcm9kdWN0LXNlYXJjaC5yZWR1Y2VyJztcbmltcG9ydCB7IGVudGl0eVNjb3BlZExvYWRlclJlZHVjZXIgfSBmcm9tICcuLi8uLi8uLi9zdGF0ZS91dGlscy9zY29wZWQtbG9hZGVyL2VudGl0eS1zY29wZWQtbG9hZGVyLnJlZHVjZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVkdWNlcnMoKTogQWN0aW9uUmVkdWNlck1hcDxQcm9kdWN0c1N0YXRlPiB7XG4gIHJldHVybiB7XG4gICAgc2VhcmNoOiBmcm9tUHJvZHVjdHNTZWFyY2gucmVkdWNlcixcbiAgICBkZXRhaWxzOiBlbnRpdHlTY29wZWRMb2FkZXJSZWR1Y2VyPFByb2R1Y3Q+KFBST0RVQ1RfREVUQUlMX0VOVElUWSksXG4gICAgcmV2aWV3czogZnJvbVByb2R1Y3RSZXZpZXdzLnJlZHVjZXIsXG4gICAgcmVmZXJlbmNlczogZnJvbVByb2R1Y3RSZWZlcmVuY2VzLnJlZHVjZXIsXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyVG9rZW46IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8XG4gIFByb2R1Y3RzU3RhdGVcbj4+ID0gbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8UHJvZHVjdHNTdGF0ZT4+KCdQcm9kdWN0UmVkdWNlcnMnKTtcblxuZXhwb3J0IGNvbnN0IHJlZHVjZXJQcm92aWRlcjogUHJvdmlkZXIgPSB7XG4gIHByb3ZpZGU6IHJlZHVjZXJUb2tlbixcbiAgdXNlRmFjdG9yeTogZ2V0UmVkdWNlcnMsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJQcm9kdWN0c1N0YXRlKFxuICByZWR1Y2VyOiBBY3Rpb25SZWR1Y2VyPGFueT5cbik6IEFjdGlvblJlZHVjZXI8YW55PiB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgIGlmIChcbiAgICAgIGFjdGlvbi50eXBlID09PSBTaXRlQ29udGV4dEFjdGlvbnMuQ1VSUkVOQ1lfQ0hBTkdFIHx8XG4gICAgICBhY3Rpb24udHlwZSA9PT0gU2l0ZUNvbnRleHRBY3Rpb25zLkxBTkdVQUdFX0NIQU5HRVxuICAgICkge1xuICAgICAgc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiByZWR1Y2VyKHN0YXRlLCBhY3Rpb24pO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgbWV0YVJlZHVjZXJzOiBNZXRhUmVkdWNlcjxhbnk+W10gPSBbY2xlYXJQcm9kdWN0c1N0YXRlXTtcbiJdfQ==